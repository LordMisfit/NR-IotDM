// NECESSARY PRE-FLUFF

state stopsearchsounds
	stopsound DUKE_SEARCH
	stopsound DUKE_SEARCH2
	stopsound DUKE_SEARCH1A
	stopsound DUKE_SEARCH2A
	stopsound JACK_WALLPUSH1
	stopsound JACK_WALLPUSH2
	stopsound WANG_SEARCH1
	stopsound WANG_SEARCH2
	stopsound ESSENCE_WALLPUSH1
	stopsound ESSENCE_WALLPUSH2
	stopsound LISA_WALLPUSH1
	stopsound LISA_WALLPUSH2
	stopsound CYBANIS_WALLPUSH1
	stopsound CYBANIS_WALLPUSH2
	stopsound MAKEN_WALLPUSH1
	stopsound MAKEN_WALLPUSH2
ends

state setdroppedmoneyowner
  ifvarn RETURN -1 setactor[RETURN].owner THISACTOR
ends

state calculatedisplaymoney
  // #1
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #2
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #3
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #4
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #5
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #6
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #7
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #8
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #9
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #10
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #11
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #12
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #13
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #14
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #15
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #16
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #17
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #18
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #19
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #20
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #21
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #22
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #23
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #24
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }

  // #25
  ifvare DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarg DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 99 
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
  else
  ifvarl DISPLAYDOLLARS 0
  {
   ifvarg DISPLAYCENTS 0
   { 
    subvar DISPLAYCENTS 100
    addvar DISPLAYDOLLARS 1
   }
  }
ends

state displaymoney

 setvar DISPLAYMONEYTIMER 0
 setvar TEMPVAR8 160
 whilevarn TEMPVAR8 0
 {
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney

  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney

  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney

  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney

  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney
  state calculatedisplaymoney

  subvar TEMPVAR8 1
 }
ends

// END OF NECESSARY PRE-FLUFF

// Randomizer stuff part 1 Start

state rndmizer256
 randvar RNDMIZER 255 addvar RNDMIZER 1
ends
state rndmizer128
 randvar RNDMIZER 127 addvar RNDMIZER 1
ends
state rndmizer64
 randvar RNDMIZER 63 addvar RNDMIZER 1
ends
state rndmizer32
 randvar RNDMIZER 31 addvar RNDMIZER 1
ends
state rndmizer16
 randvar RNDMIZER 15 addvar RNDMIZER 1
ends
state rndmizer8
 randvar RNDMIZER 7 addvar RNDMIZER 1
ends

state 240outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 16 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 224outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 32 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 208outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 48 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 192outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 64 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 176outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 80 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 160outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 96 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 144outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 112 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 128outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 128 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 112outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 144 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 96outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 160 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 80outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 176 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 64outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 192 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 48outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 208 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 32outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 224 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

state 16outof256rnd
  ifvare PUBLICBETA? 0 setvar RNDMIZERLIMIT 240 else setvar RNDMIZERLIMIT 0
  state rndmizer256
ends

// Randomizer stuff part 1 End

state determineitemmultipliers
 ifvare PUBLICBETA? 1
 {
  ifrnd 232 nullop
  else
  {
   ifrnd 200 
   {
    getactorvar[RETURN].ACTORFLAGS TEMPVAR
    ifvarand TEMPVAR 128 nullop else addvar TEMPVAR 128
    setactorvar[RETURN].ACTORFLAGS TEMPVAR
   }
   else
   {
    ifrnd 200
    {
     getactorvar[RETURN].ACTORFLAGS TEMPVAR
     ifvarand TEMPVAR 256 nullop else addvar TEMPVAR 256
     setactorvar[RETURN].ACTORFLAGS TEMPVAR
    }
    else
    {
     getactorvar[RETURN].ACTORFLAGS TEMPVAR
     ifvarand TEMPVAR 384 nullop else addvar TEMPVAR 384
     setactorvar[RETURN].ACTORFLAGS TEMPVAR
    }
   }
  }
 }
 else
 {
  ifrnd 248 nullop
  else
  {
   ifrnd 234 
   {
    getactorvar[RETURN].ACTORFLAGS TEMPVAR
    ifvarand TEMPVAR 128 nullop else addvar TEMPVAR 128
    setactorvar[RETURN].ACTORFLAGS TEMPVAR
   }
   else
   {
    ifrnd 234
    {
     getactorvar[RETURN].ACTORFLAGS TEMPVAR
     ifvarand TEMPVAR 256 nullop else addvar TEMPVAR 256
     setactorvar[RETURN].ACTORFLAGS TEMPVAR
    }
    else
    {
     getactorvar[RETURN].ACTORFLAGS TEMPVAR
     ifvarand TEMPVAR 384 nullop else addvar TEMPVAR 384
     setactorvar[RETURN].ACTORFLAGS TEMPVAR
    }
   }
  }
 }
ends

state scatterdrops
   // Scatters item drops so they're not all on top of each other after spawn
   ifvarn RETURN -1
   {
    setactorvar[RETURN].ITEMDROPPEDTIME 13
    getactor[RETURN].picnum temp
    ifvarg temp 0 ifvarl temp 11 nullop
    else
    {
     setvar MISCARRAYID 227 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // RANDOMSPAWN-MOVEMENT
     setvar MISCARRAYID 224 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP2 // RANDOMSPAWN-X
     getactor[RETURN].x MISCARRAYID_AMOUNTTEMP2
     ifvare temp ENERGYCELL_MEDIUM { randvar MISCARRAYID_AMOUNTTEMP 112 addvar MISCARRAYID_AMOUNTTEMP 16 }
     else ifvare temp ENERGYCELL_LARGE { randvar MISCARRAYID_AMOUNTTEMP 168 addvar MISCARRAYID_AMOUNTTEMP 24 }
     else ifvare temp GEMRINGSILVER { randvar MISCARRAYID_AMOUNTTEMP 140 addvar MISCARRAYID_AMOUNTTEMP 20 }
     else ifvare temp GEMRINGGOLD { randvar MISCARRAYID_AMOUNTTEMP 140 addvar MISCARRAYID_AMOUNTTEMP 20 }
     else { randvar MISCARRAYID_AMOUNTTEMP 56 addvar MISCARRAYID_AMOUNTTEMP 8 }
     randvar TEMPVAR5 4 addvar TEMPVAR5 4
     ifactor MYSTERYBOX mulvarvar MISCARRAYID_AMOUNTTEMP TEMPVAR5
     ifrnd 128 addvarvar MISCARRAYID_AMOUNTTEMP2 MISCARRAYID_AMOUNTTEMP else subvarvar MISCARRAYID_AMOUNTTEMP2 MISCARRAYID_AMOUNTTEMP
     setactor[RETURN].x MISCARRAYID_AMOUNTTEMP2
     setvar MISCARRAYID 224 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP2 // RANDOMSPAWN-X
     setvar MISCARRAYID 227 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // RANDOMSPAWN-MOVEMENT
 
     setvar MISCARRAYID 227 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // RANDOMSPAWN-MOVEMENT
     setvar MISCARRAYID 225 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP2 // RANDOMSPAWN-Y
     getactor[RETURN].y MISCARRAYID_AMOUNTTEMP2
     ifvare temp ENERGYCELL_MEDIUM { randvar MISCARRAYID_AMOUNTTEMP 112 addvar MISCARRAYID_AMOUNTTEMP 16 }
     else ifvare temp ENERGYCELL_LARGE { randvar MISCARRAYID_AMOUNTTEMP 168 addvar MISCARRAYID_AMOUNTTEMP 24 }
     else ifvare temp GEMRINGSILVER { randvar MISCARRAYID_AMOUNTTEMP 140 addvar MISCARRAYID_AMOUNTTEMP 20 }
     else ifvare temp GEMRINGGOLD { randvar MISCARRAYID_AMOUNTTEMP 140 addvar MISCARRAYID_AMOUNTTEMP 20 }
     else { randvar MISCARRAYID_AMOUNTTEMP 56 addvar MISCARRAYID_AMOUNTTEMP 8 }
     randvar TEMPVAR5 4 addvar TEMPVAR5 4
     ifactor MYSTERYBOX mulvarvar MISCARRAYID_AMOUNTTEMP TEMPVAR5
     ifrnd 128 addvarvar MISCARRAYID_AMOUNTTEMP2 MISCARRAYID_AMOUNTTEMP else subvarvar MISCARRAYID_AMOUNTTEMP2 MISCARRAYID_AMOUNTTEMP
     setactor[RETURN].y MISCARRAYID_AMOUNTTEMP2
     setvar MISCARRAYID 225 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP2 // RANDOMSPAWN-Y
     setvar MISCARRAYID 227 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // RANDOMSPAWN-MOVEMENT
    }
    state determineitemmultipliers
   }
ends

state espawnskillitems
   ifvare SKILLLEVEL 0 { ifrnd 1 { espawnvar SPAWNID state scatterdrops } }
   ifvare SKILLLEVEL 1 { ifrnd 2 { ifrnd 85 { espawnvar SPAWNID state scatterdrops } } }
   ifvare SKILLLEVEL 2 { ifrnd 2 { ifrnd 170 { espawnvar SPAWNID state scatterdrops } } }
   ifvare SKILLLEVEL 3 { ifrnd 2 { espawnvar SPAWNID state scatterdrops } }
   ifvare SKILLLEVEL 4 { ifrnd 3 { ifrnd 128 { espawnvar SPAWNID state scatterdrops } } }
   ifvare SKILLLEVEL 5 { ifrnd 4 { espawnvar SPAWNID state scatterdrops } }
   ifvare SKILLLEVEL 6 { ifrnd 6 { espawnvar SPAWNID state scatterdrops } }
   ifvare SKILLLEVEL 7 { ifrnd 9 { espawnvar SPAWNID state scatterdrops } }
   ifvare SKILLLEVEL 8 { ifrnd 16 { espawnvar SPAWNID state scatterdrops } }
   ifvare SKILLLEVEL 9 { ifrnd 25 { espawnvar SPAWNID state scatterdrops } }
ends

state gemring_drops
  // Randomize Jewel Drops
  ifvare oldskoolmode 0
  {
   randvar TEMPVAR3 999 addvar TEMPVAR3 1 // x.x% system [950 = 95.0%]

   // Randomize Ring Type [Silver or Gold?]
   ifvare PUBLICBETA? 0
   {
    ifvare SKILLLEVEL 0 setvar TEMPVAR4 100
    ifvare SKILLLEVEL 1 setvar TEMPVAR4 100
    ifvare SKILLLEVEL 2 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 3 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 4 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 5 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 6 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 7 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 8 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 9 setvar TEMPVAR4 50
   }
   else
   {
    ifvare SKILLLEVEL 0 setvar TEMPVAR4 150
    ifvare SKILLLEVEL 1 setvar TEMPVAR4 150
    ifvare SKILLLEVEL 2 setvar TEMPVAR4 100
    ifvare SKILLLEVEL 3 setvar TEMPVAR4 100
    ifvare SKILLLEVEL 4 setvar TEMPVAR4 100
    ifvare SKILLLEVEL 5 setvar TEMPVAR4 100
    ifvare SKILLLEVEL 6 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 7 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 8 setvar TEMPVAR4 50
    ifvare SKILLLEVEL 9 setvar TEMPVAR4 50
   }

   // Gemstone Crowns [Equippable Item] (Increase chance of Gold Ring drop over Silver Ring drop by 10% each)
   ifvare PLAYEREQUIPSLOTITEM1 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM2 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM3 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM4 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM5 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM6 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM7 20 addvar TEMPVAR4 100
   ifvare PLAYEREQUIPSLOTITEM8 20 addvar TEMPVAR4 100

   ifvarvarg TEMPVAR3 TEMPVAR4 espawn GEMRINGSILVER else espawn GEMRINGGOLD
   ifvarn RETURN -1
   {
    // Randomize Gem Type
    randvar TEMPVAR5 2 addvar TEMPVAR5 1
    ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
    ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
    ifvarg TEMPVAR5 1 setactor[RETURN].pal 11 // Zircon Gem
    else
    {
     randvar TEMPVAR5 2 addvar TEMPVAR5 1
     ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
     ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
     ifvarg TEMPVAR5 1 setactor[RETURN].pal 16 // Aquamarine Gem
     else
     {
      randvar TEMPVAR5 2 addvar TEMPVAR5 1
      ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
      ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
      ifvarg TEMPVAR5 1 setactor[RETURN].pal 0 // Turquiose Gem
      else
      {
       randvar TEMPVAR5 2 addvar TEMPVAR5 1
       ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
       ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
       ifvarg TEMPVAR5 1 setactor[RETURN].pal 14 // Emerald Gem
       else
       {
        randvar TEMPVAR5 2 addvar TEMPVAR5 1
        ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
        ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
        ifvarg TEMPVAR5 1 setactor[RETURN].pal 21 // Garnet Gem
        else
        {
         randvar TEMPVAR5 2 addvar TEMPVAR5 1
         ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
         ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
         ifvarg TEMPVAR5 1 setactor[RETURN].pal 10 // Ruby Gem
         else
         {
          randvar TEMPVAR5 2 addvar TEMPVAR5 1
          ifvarand ACTORFLAGS 512 subvar TEMPVAR5 1
          ifvarl TEMPVAR5 1 setvar TEMPVAR5 1
          ifvarg TEMPVAR5 1 setactor[RETURN].pal 23 // Citrine Gem
          else setactor[RETURN].pal 12 // Diamond Gem
         }
        }
       }
      }
     }
    }
    state scatterdrops
   }   
  }
ends

state enemy_raredrop1
  globalsound RAREDROP_LESSER
ends

state enemy_raredrop2
  globalsound RAREDROP_GREATER
ends

state enemyrare_drops
ifvare oldskoolmode 0
{
 //**************************************
 //*Special/Rare Drops [Monster Specfic]*
 //**************************************
  setvarvar TEMPVAR6 AVERAGELEVEL
  ifvare PUBLICBETA? 1
  {
   mulvar TEMPVAR6 48
   divvar TEMPVAR6 100
   addvar TEMPVAR6 16
  }
  else
  {
   mulvar TEMPVAR6 7 divvar TEMPVAR6 8
   mulvar TEMPVAR6 60 // +12
   divvar TEMPVAR6 125 // +25
   addvar TEMPVAR6 12 // -4
  }

  // Chance of a drop is always 1/16 or greater [on Public-Beta], depending on level
  setvar RNDMIZERLIMIT 256
  subvarvar RNDMIZERLIMIT TEMPVAR6

  ifvare PUBLICBETA? 1 { ifvarl RNDMIZERLIMIT 8 setvar RNDMIZERLIMIT 8 } else { ifvarl RNDMIZERLIMIT 32 setvar RNDMIZERLIMIT 32 }
  state rndmizer256
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   
/*
   addvar SOUNDPITCH 768
   setplayer[THISACTOR].sound_pitch SOUNDPITCH
   globalsound ICE_EXPLODE
   addvar SOUNDPITCH -768
   setplayer[THISACTOR].sound_pitch SOUNDPITCH
*/

   // Shark
   ifactor SHARK
   {
    ifspritepal 24 // BloodTooth Shark
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn MEDPACK state scatterdrops }
      else { state enemy_raredrop2 espawn SUNRING state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn MEDPACK state scatterdrops }
      else { state enemy_raredrop2 espawn SUNRING state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn MEDPACK state scatterdrops }
      else { state enemy_raredrop2 espawn SUNRING state scatterdrops }
     }
    }
    else // Normal Sharks
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn COLA state scatterdrops }
      else { state enemy_raredrop2 espawn AQUARING state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn COLA state scatterdrops }
      else { state enemy_raredrop2 espawn AQUARING state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn COLA state scatterdrops }
      else { state enemy_raredrop2 espawn AQUARING state scatterdrops }
     }
    }
   }

   // Turret Guns
   ifactor ROTATEGUN
   {
    ifspritepal 19 // RPG Turret
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     }
    }
    else
    ifspritepal 17 // Shotgun Turret
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 16 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 16 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 16 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     }
    }
    else // Normal Turret
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn HOLODUKE state scatterdrops }
     }
    }
   }

   // Scorpion Tank
   ifactor SCORPIONTANK // Energy Incurment [Rare] & Random Riot Tank Capsule [Common]
   {
    ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
    {
     ifrnd 250 { state enemy_raredrop1 espawn REDTANKCAPSULE state scatterdrops espawn BLUETANKCAPSULE state scatterdrops espawn GREENTANKCAPSULE state scatterdrops }
     else { state enemy_raredrop2 espawn ENERGYINCURMENT state scatterdrops }
    }
    else
    ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
    {
     ifrnd 244 { state enemy_raredrop1 espawn REDTANKCAPSULE state scatterdrops espawn BLUETANKCAPSULE state scatterdrops espawn GREENTANKCAPSULE state scatterdrops }
     else { state enemy_raredrop2 espawn ENERGYINCURMENT state scatterdrops }
    } 
    else
    ifvarg AVERAGELEVEL 66
    {
     ifrnd 238 { state enemy_raredrop1 espawn REDTANKCAPSULE state scatterdrops espawn BLUETANKCAPSULE state scatterdrops espawn GREENTANKCAPSULE state scatterdrops }
     else { state enemy_raredrop2 espawn ENERGYINCURMENT state scatterdrops }
    }
   }

   // Riot Tank
   ifactor TANK
   {
    ifspritepal 19 // Red = 8 Red Riot Tank Capsules [Rare] & Red Riot Tank Capsule [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn REDTANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn REDTANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn REDTANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn REDTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     }
    }
    else
    ifspritepal 17 // Blue = 8 Blue Riot Tank Capsules [Rare] & Blue Riot Tank Capsule [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn BLUETANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn BLUETANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn BLUETANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn BLUETANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     }
    }
    else // 8 Green Riot Tank Capsules [Rare] & Green Riot Tank Capsule [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn GREENTANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn GREENTANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     } 
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn GREENTANKCAPSULE state scatterdrops }
      else { state enemy_raredrop2 espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops espawn GREENTANKCAPSULE setactorvar[RETURN].ACTORFLAGS 384 state scatterdrops }
     }
    }
   }

   // Queen
   ifactor BOSS4
   {
    ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
    {
     ifrnd 244 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 12 setactorvar[RETURN].ACTORNATURALPAL 12 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 12 setactorvar[RETURN].ACTORNATURALPAL 12 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
    }
    else
    ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
    {
     ifrnd 232 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 12 setactorvar[RETURN].ACTORNATURALPAL 12 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 12 setactorvar[RETURN].ACTORNATURALPAL 12 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
    }
    else
    ifvarg AVERAGELEVEL 66
    {
     ifrnd 220 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 12 setactorvar[RETURN].ACTORNATURALPAL 12 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 12 setactorvar[RETURN].ACTORNATURALPAL 12 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
    }
   }

   // Protector Drone
   ifactor NEWBEAST
   {
    ifspritepal 20 // Greater = Ruby Ring (Gold) [Rare] & Ruby Ring (Silver) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 10 setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 10 setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 10 setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 10 setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 10 setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 10 setactorvar[RETURN].ACTORNATURALPAL 10 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
    }
    else
    ifspritepal 17 // Lesser = Garnet Ring (Gold) [Rare] & Garnet Ring (Silver) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 21 setactorvar[RETURN].ACTORNATURALPAL 21 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 21 setactorvar[RETURN].ACTORNATURALPAL 21 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 21 setactorvar[RETURN].ACTORNATURALPAL 21 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 21 setactorvar[RETURN].ACTORNATURALPAL 21 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 21 setactorvar[RETURN].ACTORNATURALPAL 21 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 21 setactorvar[RETURN].ACTORNATURALPAL 21 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
    }
    else // Normal = Emerald Ring (Gold) [Rare] & Emerald Ring (Silver) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 14 setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 14 setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 252 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 14 setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 14 setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 14 setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 14 setactorvar[RETURN].ACTORNATURALPAL 14 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
    }
   }

   // Overlord
   ifactor BOSS3
   {
    ifspritepal 24 // ESS = EXP Badge [Rare] & Potentylene [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn FAUXLEVELUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn FAUXLEVELUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn FAUXLEVELUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
    }
    else
    ifspritepal 0 // Normal = EXP Badge [Rare] & "Random Powerup" [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn RANDOMPOWERUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn RANDOMPOWERUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn RANDOMPOWERUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
    }
    else
    ifspritepal 3 // Normal = EXP Badge [Rare] & "Random Powerup" [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn RANDOMPOWERUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn RANDOMPOWERUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn RANDOMPOWERUP state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
    }
    else // Mini = EXP Badge [Rare] & Portable Medikit [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn FIRSTAID state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn FIRSTAID state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn FIRSTAID state scatterdrops }
      else { state enemy_raredrop2 espawn EXPBADGE state scatterdrops }
     }
    }
   }

   // Battlelord
   ifactor BOSS1
   {
    ifspritepal 24 // ESS = Rank Badge [Rare] & Super Atom [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn SUPERATOM state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn SUPERATOM state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn SUPERATOM state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
    }
    else
    ifspritepal 0 // Normal = Rank Badge [Rare] & Resurrection Chalice [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
    }
    else
    ifspritepal 3 // Normal = Rank Badge [Rare] & Resurrection Chalice [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
    }
    else // Mini = Rank Badge [Rare] & Super Armor [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn SUPERSHIELD state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 250 { state enemy_raredrop1 espawn SUPERSHIELD state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 248 { state enemy_raredrop1 espawn SUPERSHIELD state scatterdrops }
      else { state enemy_raredrop2 espawn RANKBADGE state scatterdrops }
     }
    }
   }

   // Assault Commander
   ifactor COMMANDER
   {
    ifspritepal 24 nullop // Baalo [Boss] = None
    else
    ifspritepal 25 // Leader = Iron Rune [Rare] & Super Armor (Used) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 248 { state enemy_raredrop1 espawn SUPERSHIELD setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 240 { state enemy_raredrop1 espawn SUPERSHIELD setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 232 { state enemy_raredrop1 espawn SUPERSHIELD setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
    }
    else
    ifspritepal 14 // General = Iron Rune [Rare] & Random Armor (Used) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 252 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 setactorvar[RETURN].ARMORISUSED? 1 state scatterdrops } }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
    }
    else // Normal = Iron Rune [Rare] & Portable Medikit [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn FIRSTAID state scatterdrops }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn FIRSTAID state scatterdrops }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn FIRSTAID state scatterdrops }
      else { state enemy_raredrop2 espawn IRONRUNE state scatterdrops }
     }
    }
   }

   // Assault Trooper
   ifactor LIZTROOP
   {
    ifspritepal 17 nullop // Zerman [Boss] = None
    else
    ifspritepal 14 // Shrinker = ShockAb Boots [Rare] & Resurrection Chalice [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 248 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 240 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 232 { state enemy_raredrop1 espawn RESURRECTIONCHALICE state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
    }
    else
    ifspritepal 19 // Ravager = ShockAb Boots [Rare] & Atomic Health [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn ATOMICHEALTH state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn ATOMICHEALTH state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn ATOMICHEALTH state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
    }
    else
    ifspritepal 21 // Captain = ShockAb Boots [Rare] & Protective Boots [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn BOOTS state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn BOOTS state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn BOOTS state scatterdrops }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
    }
    else // Normal = ShockAb Boots [Rare] & Random-Class Armor [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 state scatterdrops } }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 252 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 state scatterdrops } }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 state scatterdrops } }
      else { state enemy_raredrop2 espawn SHOCKABBOOTPAIR state scatterdrops }
     }
    }
   } 

   // Enforcer
   ifactor LIZMAN
   {
    ifspritepal 17 nullop // Fertang [Boss] = None
    else
    ifspritepal 6 // Bio-Warrior = Jump Boots [Rare] & Hyper Energy Drink [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 236 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
    }
    else
    ifspritepal 19 // Laser = Jump Boots [Rare] & Large Energy Drink [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn LARGEENERGYDRINK state scatterdrops }
       else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn LARGEENERGYDRINK state scatterdrops }
       else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 234 { state enemy_raredrop1 espawn LARGEENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
    }
    else // Normal = Jump Boots [Rare] & Small Energy Drink [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn SMALLENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
       ifrnd 252 { state enemy_raredrop1 espawn SMALLENERGYDRINK state scatterdrops }
       else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn SMALLENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn JUMPBOOTPAIR state scatterdrops }
     }
    }
   }

   // Sentry Drone
   ifactor DRONE
   {
    ifspritepal 25 // Super = Afas Drop [Rare] & NV Goggles [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn HEATSENSOR state scatterdrops }
      else { state enemy_raredrop2 espawn AFAS_DROP state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn HEATSENSOR state scatterdrops }
      else { state enemy_raredrop2 espawn AFAS_DROP state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn HEATSENSOR state scatterdrops }
      else { state enemy_raredrop2 espawn AFAS_DROP state scatterdrops }
     }
    }
    else // Normal = Afas Drop [Rare] & Coils [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn COILS state scatterdrops }
      else { state enemy_raredrop2 espawn AFAS_DROP state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 252 { state enemy_raredrop1 espawn COILS state scatterdrops }
      else { state enemy_raredrop2 espawn AFAS_DROP state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn COILS state scatterdrops }
      else { state enemy_raredrop2 espawn AFAS_DROP state scatterdrops }
     }
    }
   }

   // Cycloidians
   ifactor BOSS2
   {
    ifspritepal 24 // Void Annhilator = Serpent Helmet [Rare] & Super Atom [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 250 { state enemy_raredrop1 espawn SUPERATOM state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 244 { state enemy_raredrop1 espawn SUPERATOM state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 238 { state enemy_raredrop1 espawn SUPERATOM state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
    }
    else
    ifspritepal 0 // Normal = Serpent Helmet [Rare] & Hyper Energy Drink [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
    }
    else
    ifspritepal 3 // Normal = Serpent Helmet [Rare] & Hyper Energy Drink [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn HYPERENERGYDRINK state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
    }
    else
    ifspritepal 9 nullop
    else // Minis = Serpent Helmet [Rare] & Vitamin X [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn STEROIDS state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 252 { state enemy_raredrop1 espawn STEROIDS state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn STEROIDS state scatterdrops }
      else { state enemy_raredrop2 espawn SERPENTHELMET state scatterdrops }
     }
    }
   }

   // Octabrain
   ifactor OCTABRAIN
   {
    ifspritepal 14 // Octanine = Citrine Ring (Gold) [Rare] & Citrine Ring (Silver) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 23 setactorvar[RETURN].ACTORNATURALPAL 23 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 23 setactorvar[RETURN].ACTORNATURALPAL 23 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 23 setactorvar[RETURN].ACTORNATURALPAL 23 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 23 setactorvar[RETURN].ACTORNATURALPAL 23 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 23 setactorvar[RETURN].ACTORNATURALPAL 23 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 23 setactorvar[RETURN].ACTORNATURALPAL 23 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
    }
    else // Octabrain = Turquoise Ring (Gold) [Rare] & Turquoise Ring (Silver) [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 0 setactorvar[RETURN].ACTORNATURALPAL 0 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 0 setactorvar[RETURN].ACTORNATURALPAL 0 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 0 setactorvar[RETURN].ACTORNATURALPAL 0 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 0 setactorvar[RETURN].ACTORNATURALPAL 0 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn GEMRINGSILVER setactor[RETURN].pal 0 setactorvar[RETURN].ACTORNATURALPAL 0 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
      else { state enemy_raredrop2 espawn GEMRINGGOLD setactor[RETURN].pal 0 setactorvar[RETURN].ACTORNATURALPAL 0 setactorvar[RETURN].SKILLSET? 1 state scatterdrops }
     }
    }
   }

   // Pigcops
   ifactor PIGCOP
   {
    ifspritepal 24 nullop // Ramone [Boss] = [None]
    else ifspritepal 14 // Sargeant = Riot Shield [Rare] & Super Armor [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 252 { state enemy_raredrop1 espawn SUPERSHIELD state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 248 { state enemy_raredrop1 espawn SUPERSHIELD state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 244 { state enemy_raredrop1 espawn SUPERSHIELD state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
    }
    else ifspritepal 21 // Captain = Riot Shield [Rare] & Extra-Large Medikit [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 253 { state enemy_raredrop1 espawn SWBIGMEDIKIT state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 250 { state enemy_raredrop1 espawn SWBIGMEDIKIT state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 247 { state enemy_raredrop1 espawn SWBIGMEDIKIT state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
    }
    else // Normal = Riot Shield [Rare] & Medium Medikit [Common]
    {
     ifvarg AVERAGELEVEL 0 ifvarl AVERAGELEVEL 34
     {
      ifrnd 254 { state enemy_raredrop1 espawn SWMEDIKIT state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 33 ifvarl AVERAGELEVEL 67
     {
      ifrnd 252 { state enemy_raredrop1 espawn SWMEDIKIT state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
     else
     ifvarg AVERAGELEVEL 66
     {
      ifrnd 250 { state enemy_raredrop1 espawn SWMEDIKIT state scatterdrops }
      else { state enemy_raredrop2 espawn RIOTSHIELD state scatterdrops }
     }
    }
   }
  }
}
ends

state addtokillamounts
 addkills 1

 setvar MISCARRAYID 0 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP addvar MISCARRAYID_AMOUNTTEMP 1 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP
 setvar MISCARRAYID 1 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP addvar MISCARRAYID_AMOUNTTEMP 1 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP
 
 randvar TEMPVAR2 15 addvar TEMPVAR2 1
 ifvarand ACTORFLAGS 512 subvar TEMPVAR2 4
 ifvarl TEMPVAR2 1 setvar TEMPVAR2 1
 ifvare CHARACTERSELECTED? 10
 {
  setvar MISCARRAYID 110 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // NETHRA-FORM?
  ifvare MISCARRAYID_AMOUNTTEMP 1
  {
   ifvarg TEMPVAR2 5 nullop else state gemring_drops // Christina has a 5/16 (31.25%) chance of making enemies drop gems upon death
  }
  else
  {
   ifvarg TEMPVAR2 2 nullop else state gemring_drops // Nethra has a 2/16 (12.5%) chance of making enemies drop gems upon death
  }
 }
 else
 ifvare CHARACTERSELECTED? 14
 {
  ifvarg TEMPVAR2 3 nullop else state gemring_drops // Mystery Lady has a 3/16 (18.75%) chance of making enemies drop gems upon death
 }
 else 
 {
  ifvarg TEMPVAR2 1 nullop else state gemring_drops // All other characters have a 1/16 (12.5%) chance of making enemies drop gems upon death
 }

 // Rare Drops
 state enemyrare_drops

 // Check to see if EnemyID# matches
 ifvarn ENEMYHASSHIKON? 0
 {
  espawn SHIKONJEWEL
  setvar ENEMYHASSHIKON? 0
 }
ends

state drop_randomized_item
   ifrnd 224 randvar TEMPVAR8 245 else randvar TEMPVAR8 328
   addvar TEMPVAR8 1

   ifvarg TEMPVAR8 0 ifvarl TEMPVAR8 25 { espawn COLA state scatterdrops } // 1-24 [24]
   else ifvarg TEMPVAR8 24 ifvarl TEMPVAR8 47 { espawn SWMEDIKIT state scatterdrops } // 25-46 [22]
   else ifvarg TEMPVAR8 46 ifvarl TEMPVAR8 66 { espawn SIXPAK state scatterdrops } // 47-65 [19]
   else ifvarg TEMPVAR8 65 ifvarl TEMPVAR8 82 { espawn SWBIGMEDIKIT state scatterdrops } // 66-81 [16]
   else ifvarg TEMPVAR8 81 ifvarl TEMPVAR8 94 { espawn MEDPACK state scatterdrops } // 82-93 [12]
   else ifvarg TEMPVAR8 93 ifvarl TEMPVAR8 101 { espawn SURGERYKIT state scatterdrops } // 94-100 [7]
   else ifvarg TEMPVAR8 100 ifvarl TEMPVAR8 111 { espawn EYEDROP state scatterdrops } // 101-110 [10]
   else ifvarg TEMPVAR8 110 ifvarl TEMPVAR8 121 { espawn ANTIDOTE state scatterdrops } // 111-120 [10]
   else ifvarg TEMPVAR8 120 ifvarl TEMPVAR8 131 { espawn FOGHORN state scatterdrops } // 121-130 [10]
   else ifvarg TEMPVAR8 130 ifvarl TEMPVAR8 136 { espawn RESURRECTIONCHALICE state scatterdrops } // 131-135 [5]
   else ifvarg TEMPVAR8 135 ifvarl TEMPVAR8 146 { espawn FIRSTAID state scatterdrops } // 136-145 [10]
   else ifvarg TEMPVAR8 145 ifvarl TEMPVAR8 166 { espawn SHIELD ifrnd 160 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } // 146-165 [20]
   else ifvarg TEMPVAR8 165 ifvarl TEMPVAR8 174 { espawn SUPERSHIELD ifrnd 224 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } // 166-173 [8]
   else ifvarg TEMPVAR8 173 ifvarl TEMPVAR8 179 { ifrnd 128 { espawn ATOMICHEALTH state scatterdrops } else { espawn FORTUNECOOKIE state scatterdrops } } // 174-178 [5]
   else ifvarg TEMPVAR8 178 ifvarl TEMPVAR8 181 { espawn SUPERATOM state scatterdrops } // 179-180 [2]
   else ifvarg TEMPVAR8 180 ifvarl TEMPVAR8 186 { espawn ENERGYSHELL state scatterdrops } // 181-185 [5]
   else ifvarg TEMPVAR8 185 ifvarl TEMPVAR8 191 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 15 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 186-190 [5]
   else ifvarg TEMPVAR8 190 ifvarl TEMPVAR8 194 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 14 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 191-193 [3]
   else ifvarg TEMPVAR8 193 ifvarl TEMPVAR8 197 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 16 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 194-196 [3]
   else ifvarg TEMPVAR8 196 ifvarl TEMPVAR8 200 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 23 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 197-199 [3]
   else ifvarg TEMPVAR8 199 ifvarl TEMPVAR8 202 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 10 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 200-201 [2]
   else ifvarg TEMPVAR8 201 ifvarl TEMPVAR8 204 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 13 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 202-203 [2]
   else ifvarg TEMPVAR8 203 ifvarl TEMPVAR8 206 { espawn COLORSHIELD { setactorvar[RETURN].ACTORNATURALPAL 20 ifrnd 128 { setactorvar[RETURN].ARMORISUSED? 1 } state scatterdrops } } // 204-205 [2]
   else ifvarg TEMPVAR8 205 ifvarl TEMPVAR8 211 { ifrnd 16 { espawn ONELIFETSHIRT state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 206-210 [5]
   else ifvarg TEMPVAR8 210 ifvarl TEMPVAR8 215 { ifrnd 10 { espawn TWOLIFETSHIRT state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 211-214 [4]
   else ifvarg TEMPVAR8 214 ifvarl TEMPVAR8 218 { ifrnd 4 { espawn CONTINUEITEM state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 215-217 [3]
   else ifvarg TEMPVAR8 217 ifvarl TEMPVAR8 226 { ifrnd 48 { espawn TELEBEACON state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 218-225 [8]
   else ifvare TEMPVAR8 226 { espawn JETPACK state scatterdrops } // 226 [1]
   else ifvare TEMPVAR8 227 { espawn STEROIDS state scatterdrops } // 227 [1]
   else ifvare TEMPVAR8 228 { espawn AIRTANK state scatterdrops } // 228 [1]
   else ifvare TEMPVAR8 229 { espawn BOOTS state scatterdrops } // 229 [1]
   else ifvare TEMPVAR8 230 { espawn HOLODUKE state scatterdrops } // 230 [1]
   else ifvare TEMPVAR8 231 { espawn HEATSENSOR state scatterdrops } // 231 [1]
   else ifvare TEMPVAR8 232 { espawn RANDOMPOWERUP state scatterdrops } // 232 [1]
   else ifvare TEMPVAR8 233 { espawn COILS state scatterdrops } // 233 [1]
   else ifvare TEMPVAR8 234 { espawn ENERGYCELL_LARGE state scatterdrops } // 234 [1]
   else ifvarg TEMPVAR8 234 ifvarl TEMPVAR8 240 { espawn SMALLENERGYDRINK state scatterdrops } // 235-239 [5]
   else ifvarg TEMPVAR8 239 ifvarl TEMPVAR8 243 { espawn LARGEENERGYDRINK state scatterdrops } // 240-242 [3]
   else ifvare TEMPVAR8 243 { espawn HYPERENERGYDRINK state scatterdrops } // 243 [1]
   else ifvare TEMPVAR8 244 { espawn GREENTANKCAPSULE state scatterdrops } // 244 [1]
   else ifvare TEMPVAR8 245 { espawn BLUETANKCAPSULE state scatterdrops } // 245 [1]
   else ifvare TEMPVAR8 246 { espawn REDTANKCAPSULE state scatterdrops } // 246 [1]

   // Rare Items { 25% chance of attempting to select these }
   else ifvare TEMPVAR8 247 { setvar MISCARRAYID 77 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // HAVE-HACKERVISION?
                                ifvare MISCARRAYID_AMOUNTTEMP 0 { espawn HACKERVISION state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 247 [1]
   else ifvarg TEMPVAR8 247 ifvarl TEMPVAR8 250 { ifrnd 224 { espawn SUNRING state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 248-249 [2]
   else ifvarg TEMPVAR8 249 ifvarl TEMPVAR8 252 { ifrnd 224 { espawn AQUARING state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 250-251 [2]
   else ifvarg TEMPVAR8 251 ifvarl TEMPVAR8 254 { ifrnd 224 { espawn PLASMARING state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 252-253 [2]
   else ifvarg TEMPVAR8 253 ifvarl TEMPVAR8 256 { ifrnd 224 { espawn SPIRITRING state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 254-255 [2]
   else ifvarg TEMPVAR8 255 ifvarl TEMPVAR8 258 { ifrnd 224 { espawn CHARMANKH state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 256-257 [2]
   else ifvarg TEMPVAR8 257 ifvarl TEMPVAR8 260 { ifrnd 224 { espawn MIRRORSHIELD state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 258-259 [2]
   else ifvarg TEMPVAR8 259 ifvarl TEMPVAR8 262 { ifrnd 224 { espawn EXPBADGE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 260-261 [2]
   else ifvarg TEMPVAR8 261 ifvarl TEMPVAR8 264 { ifrnd 224 { espawn RANKBADGE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 262-263 [2]
   else ifvarg TEMPVAR8 263 ifvarl TEMPVAR8 266 { ifrnd 224 { espawn MONEYBADGE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 264-265 [2]
   else ifvarg TEMPVAR8 265 ifvarl TEMPVAR8 268 { ifrnd 224 { espawn RIOTSHIELD state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 266-267 [2]
   else ifvarg TEMPVAR8 267 ifvarl TEMPVAR8 270 { ifrnd 224 { espawn NYXGLOVEPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 268-269 [2]
   else ifvarg TEMPVAR8 269 ifvarl TEMPVAR8 272 { ifrnd 224 { espawn RABBITSFOOT state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 270-271 [2]
   else ifvarg TEMPVAR8 271 ifvarl TEMPVAR8 274 { ifrnd 224 { espawn JUMPBOOTPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 272-273 [2]
   else ifvarg TEMPVAR8 273 ifvarl TEMPVAR8 276 { ifrnd 224 { espawn SHOCKABBOOTPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 274-275 [2]
   else ifvarg TEMPVAR8 275 ifvarl TEMPVAR8 278 { ifrnd 224 { espawn HAPPYSHOEPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 276-277 [2]
   else ifvarg TEMPVAR8 277 ifvarl TEMPVAR8 280 { ifrnd 224 { espawn STYLESHOEPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 278-279 [2]
   else ifvarg TEMPVAR8 279 ifvarl TEMPVAR8 282 { ifrnd 224 { espawn CHARMSHOEPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 280-281 [2]
   else ifvarg TEMPVAR8 281 ifvarl TEMPVAR8 284 { ifrnd 224 { espawn POWERWRIST state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 282-283 [2]
   else ifvarg TEMPVAR8 283 ifvarl TEMPVAR8 286 { ifrnd 224 { espawn HOCKEYMASK state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 284-285 [2]
   else ifvarg TEMPVAR8 285 ifvarl TEMPVAR8 288 { ifrnd 224 { espawn GEMSTONECROWN state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 286-287 [2]
   else ifvarg TEMPVAR8 287 ifvarl TEMPVAR8 290 { ifrnd 224 { espawn IRONRUNE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 288-289 [2]
   else ifvarg TEMPVAR8 289 ifvarl TEMPVAR8 292 { ifrnd 224 { espawn TWILIGHTCAPE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 290-291 [2]
   else ifvarg TEMPVAR8 291 ifvarl TEMPVAR8 294 { ifrnd 224 { espawn SNAKEARMBAND state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 292-293 [2]
   else ifvarg TEMPVAR8 293 ifvarl TEMPVAR8 296 { ifrnd 224 { espawn MEDICBAG state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 294-295 [2]
   else ifvarg TEMPVAR8 295 ifvarl TEMPVAR8 298 { ifrnd 224 { espawn SERPENTHELMET state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 296-297 [2]
   else ifvarg TEMPVAR8 297 ifvarl TEMPVAR8 300 { ifrnd 224 { espawn ENERGYINCURMENT state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 298-299 [2]
   else ifvarg TEMPVAR8 299 ifvarl TEMPVAR8 302 { ifrnd 224 { espawn YINYANGORB state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 300-301 [2]
   else ifvarg TEMPVAR8 301 ifvarl TEMPVAR8 304 { ifrnd 224 { espawn LIQUIDMETALAMULET state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 300-301 [2]
   else ifvarg TEMPVAR8 303 ifvarl TEMPVAR8 306 { ifrnd 224 { espawn MANDALABRACELET state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 300-301 [2]
   else ifvarg TEMPVAR8 305 ifvarl TEMPVAR8 308 { ifrnd 224 { espawn AQUALUNG state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 300-301 [2]
   else ifvarg TEMPVAR8 307 ifvarl TEMPVAR8 310 { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } // 302-303 [2]
   else ifvare TEMPVAR8 311 { ifrnd 240 { espawn AFAS_DROP state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 304 [1]
   else ifvare TEMPVAR8 312 { ifrnd 240 { espawn FAUXLEVELUP state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 305 [1]
   else ifvare TEMPVAR8 313 { ifrnd 128 { espawn ENERGYSHELL_UPGRADED state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 306 [1]
   else ifvare TEMPVAR8 314 { ifrnd 192 { espawn SILKCARNATION setactorvar[RETURN].ACTORNATURALPAL 10 state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 307 [1] 
   else ifvare TEMPVAR8 315 { ifrnd 192 { espawn RAREPIRATEDOUBLOON state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 308 [1] 
   else ifvare TEMPVAR8 316 { ifrnd 192 { espawn FIXEDDICEPAIR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 309 [1] 
   else ifvare TEMPVAR8 317 { ifrnd 192 { espawn MALAKIANGEM setactorvar[RETURN].ACTORNATURALPAL 17 state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 310 [1] 
   else ifvare TEMPVAR8 318 { ifrnd 192 { espawn SAFELOCKBOX state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 311 [1] 
   else ifvare TEMPVAR8 319 { ifrnd 192 { espawn SECRETRECIPE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 312 [1] 
   else ifvare TEMPVAR8 320 { ifrnd 192 { espawn SLURPEEMACHINE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 313 [1] 
   else ifvare TEMPVAR8 321 { ifrnd 192 { espawn STOCKOWNERSHIP state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 314 [1] 
   else ifvare TEMPVAR8 322 { ifrnd 192 { espawn TRANSDIMENSIONALSAFE state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 315 [1] 
   else ifvare TEMPVAR8 323 { ifrnd 192 { espawn BLOODPACTSHIELD state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 316 [1] 
   else ifvare TEMPVAR8 324 { ifrnd 128 { espawn MYSTICSATCHEL state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 317 [1]
   else ifvare TEMPVAR8 325 { setvar MISCARRAYID 68 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // GOT-MONEY-RADAR?
                                ifvare MISCARRAYID_AMOUNTTEMP 0 { espawn MONEYRADAR state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 318 [1]
   else ifvare TEMPVAR8 326 { setvar MISCARRAYID 67 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // GOT-PORTABLE-ATM?
                                ifvare MISCARRAYID_AMOUNTTEMP 0 { espawn PORTABLEATM state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 319 [1]
   else ifvare TEMPVAR8 327 { setvar MISCARRAYID 78 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // HAVE-MERCURY-COMPUTER?
                                ifvare MISCARRAYID_AMOUNTTEMP 0 { espawn MERCURYCOMPUTER state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 320 [1]
   else ifvare TEMPVAR8 328 { setvar MISCARRAYID 232 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // HAVEDIVINGSUIT?
                                ifvare MISCARRAYID_AMOUNTTEMP 0 { espawn BUBSYDIVINGSUIT state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 320 [1]
   else ifvare TEMPVAR8 329 { setvar MISCARRAYID 76 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // CARD-MEMBERSHIP?
                                ifvarl MISCARRAYID_AMOUNTTEMP 5 { ifrnd 16 { espawn MEMBERSHIPCARD state scatterdrops } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } else { state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops state gemring_drops } } // 321 [1]

ends

state celldrops
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn ENERGYCELL_LARGE state scatterdrops }
    else ifrnd 32 { espawn ENERGYCELL_MEDIUM state scatterdrops }
    else { espawn ENERGYCELL_SMALL state scatterdrops }    
   }
ends

state drop_artifacts  // For making monsters drop artifacts (Boots, Scuba, Quad, Invuln, Regen, APRegen, Vampire etc) when killed
 ifvarg ACTORBOOTSAMOUNT 0
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn BOOTS state scatterdrops
   setvarvar TEMPVAR ACTORBOOTSAMOUNT
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actor's Scuba Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORBOOTSAMOUNT 0
  }
 }
 else
 {
  ifrnd 16
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    state 16outof256rnd
    ifvarvarg RNDMIZER RNDMIZERLIMIT
    {
     setvar SPAWNID BOOTS
     state espawnskillitems
    }
   }
  }
 }

 ifvarg ACTORAIRTANKAMOUNT 0
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn AIRTANK state scatterdrops
   setvarvar TEMPVAR ACTORAIRTANKAMOUNT
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actor's Scuba Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORAIRTANKAMOUNT 0
  }
 }
 else
 {
  ifrnd 16
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    state 16outof256rnd
    ifvarvarg RNDMIZER RNDMIZERLIMIT
    {
     setvar SPAWNID AIRTANK
     state espawnskillitems
    }
   }
  }
 }

 ifvarg ACTORQUADTIME 0
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn QUADDAMAGE setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops
   setvarvar TEMPVAR ACTORQUADTIME
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actorr's Quad Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORQUADTIME 0
  }
 }
 else
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    setvar SPAWNID QUADDAMAGE
    state espawnskillitems
   }
  }
 }

 ifvarg ACTORINVULNTIME 0
 {  
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn ICONOFTHEDEFENDER setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops
   setvarvar TEMPVAR ACTORINVULNTIME
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actor's Invuln Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORINVULNTIME 0
  }
 }
 else
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    setvar SPAWNID ICONOFTHEDEFENDER
    state espawnskillitems
   }
  }
 }

 ifvarg ACTORREGENTIME 0
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn REGENITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops
   setvarvar TEMPVAR ACTORREGENTIME
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actor's Regen Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORREGENTIME 0
  }
 }
 else
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    setvar SPAWNID REGENITEM
    state espawnskillitems
   }
  }
 }

 ifvarg ACTORAPREGENTIME 0
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn APREGENITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops
   setvarvar TEMPVAR ACTORAPREGENTIME
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actor's AP Regen Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORAPREGENTIME 0
  }
 }
 else
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    setvar SPAWNID APREGENITEM
    state espawnskillitems
   }
  }
 }

 ifvarg ACTORVAMPIRETIME 0
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   espawn VAMPIREITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops
   setvarvar TEMPVAR ACTORVAMPIRETIME
   setactorvar[RETURN].POWERUPBENEFIT TEMPVAR // Transfers the actor's Vampire Time into the dropped powerup so the next user gets what was left of it
   setactorvar[THISACTOR].ACTORVAMPIRETIME 0
  }
 }
 else
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    setvar SPAWNID VAMPIREITEM
    state espawnskillitems
   }
  }
 }
ends

// START OF "RYAN'S HOPE" NPC RESCUE SYSTEM
state determinebonussizes
  ifrnd 240 nullop
  else
  {
   ifrnd 212 setactor[RETURN].pal 3
   else setactor[RETURN].pal 9
  }
ends

state spawnmoneyrescue
     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 240 addvar TEMP2 10 // ifrnd 240 { espawn TENDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 240 addvar TEMP2 10 // ifrnd 240 { espawn TENDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 224 addvar TEMP2 10 // ifrnd 224 { espawn TENDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 224 addvar TEMP2 20 // ifrnd 224 { spawn TWENTYDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 112 addvar TEMP2 20 // ifrnd 112 { spawn TWENTYDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 112 addvar TEMP2 50 // ifrnd 112 { spawn FIFTYDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 112 addvar TEMP2 50 // ifrnd 56 { spawn FIFTYDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 56 addvar TEMP2 100 // ifrnd 56 { spawn ONEHUNDREDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 28 addvar TEMP2 100 // ifrnd 28 { spawn ONEHUNDREDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 28 addvar TEMP2 500 // ifrnd 28 { spawn FIVEHUNDREDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 14 addvar TEMP2 500 // ifrnd 14 { spawn FIVEHUNDREDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 14 addvar TEMP2 1000 // ifrnd 14 { spawn ONETHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 7 addvar TEMP2 1000 // ifrnd 7 { spawn ONETHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 7 addvar TEMP2 5000 // ifrnd 7 { spawn FIVETHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 3 ifrnd 128 addvar TEMP2 5000 // ifrnd 3 ifrnd 128 { spawn FIVETHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 3 ifrnd 128 addvar TEMP2 10000 // ifrnd 3 ifrnd 128 { spawn TENTHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 1 ifrnd 192 addvar TEMP2 10000 // ifrnd 1 ifrnd 192 { spawn TENTHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 1 ifrnd 192 addvar TEMP2 100000 // ifrnd 1 ifrnd 192 { spawn ONEHUNDREDTHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 1 ifrnd 96 addvar TEMP2 100000 // ifrnd 1 ifrnd 96 { spawn ONEHUNDREDTHOUSANDDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 1 ifrnd 24 addvar TEMP2 1000000 // ifrnd 1 ifrnd 24 { spawn ONEMILLIONDOLLARS state setdroppedmoneyowner }
     }

     state 96outof256rnd
     ifvarvarg RNDMIZER RNDMIZERLIMIT
     {
      ifrnd 1 ifrnd 6 addvar TEMP2 1000000 // ifrnd 1 ifrnd 6 { spawn ONEMILLIONDOLLARS state setdroppedmoneyowner }
     }
ends

state ryansitems
     state stopsearchsounds
     ifrnd 192 // Rewards
     {
      ifrnd 128
      {
       ifvare CHARACTERSELECTED? 8 
       {
        globalsound LISA_SAVEREWARD
        redefinequote 340 ^7Lisa: All right! All in a day's work!
        ifvare oldskoolmode 0 userquote 340
       }
       ifvare CHARACTERSELECTED? 15
       {
        globalsound MAKEN_SAVEREWARD 
        redefinequote 340 ^10Maken: So... I guess the EDF does give a damn about SOME people!
        ifvare oldskoolmode 0 userquote 340
       }
      }
      espawn MONEYBAG state setdroppedmoneyowner
      getactorvar[RETURN].MONEYBAGDOLLARS TEMP2
      getactorvar[RETURN].MONEYBAGCENTS zvelsav
      state spawnmoneyrescue
      ifvare CHARACTERSELECTED? 8
      { 
       ifvarg LISAMONEYTURNS2 1 state spawnmoneyrescue
       ifvarg LISAMONEYTURNS2 2 state spawnmoneyrescue
       ifvarg LISAMONEYTURNS2 3 state spawnmoneyrescue
       ifvare LISAMONEYMAXLEVEL 1 state spawnmoneyrescue
       ifvare LISAMONEYMAXLEVEL 1 state spawnmoneyrescue
      }
      setactorvar[RETURN].MONEYBAGDOLLARS TEMP2
      setactorvar[RETURN].MONEYBAGCENTS zvelsav

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 64 state gemring_drops
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 56 state gemring_drops
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 48 state gemring_drops
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 40 state gemring_drops
      }

      ifvarg freezing 0
      {
       state 16outof256rnd
       ifvarvarg RNDMIZER RNDMIZERLIMIT 
       {
        ifrnd 16 { espawn WINTERCLOTHES state scatterdrops }
       }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 86 { espawn EYEDROP state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 43 { espawn EYEDROP state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 86 { espawn ANTIDOTE state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 43 { espawn ANTIDOTE state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 86 { espawn FOGHORN state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 43 { espawn FOGHORN state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 32 state celldrops
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 8 state celldrops
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 2 state celldrops
      }
      
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 16 { espawn RESURRECTIONCHALICE state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 8 { espawn RESURRECTIONCHALICE state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 8 { espawn COILS state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 4 { espawn COILS state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 96 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 48 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
      }

      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 32
       {
        ifrnd 32 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 16
       {
        ifrnd 32 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 32
       {
        ifrnd 64 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else ifrnd 85 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else ifrnd 128 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 16
       {
        ifrnd 64 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else ifrnd 85 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else ifrnd 128 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 32
       {
        ifrnd 85 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else ifrnd 128 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 16
       {
        ifrnd 85 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else ifrnd 128 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 32
       {
        ifrnd 128 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 16
       {
        ifrnd 128 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
        else { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 1
       {
        ifrnd 64 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 1
       {
        ifrnd 4 { espawn AFAS_DROP state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 16
       {
        ifrnd 53 { espawn QUADDAMAGE setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else ifrnd 64 { espawn ICONOFTHEDEFENDER setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else ifrnd 85 { espawn REGENITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else ifrnd 128 { espawn APREGENITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else { espawn VAMPIREITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
       }
      }
      state 16outof256rnd
      ifvarvarg RNDMIZER RNDMIZERLIMIT
      {
       ifrnd 8
       {
        ifrnd 53 { espawn QUADDAMAGE setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else ifrnd 64 { espawn ICONOFTHEDEFENDER setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else ifrnd 85 { espawn REGENITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else ifrnd 128 { espawn APREGENITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
        else { espawn VAMPIREITEM setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops }
       }
      }
     }
     else // Trap or Enemy
     {
      ifrnd 192 // Trap
      {
       ifrnd 224 
       {
        ifvare CHARACTERSELECTED? 8
        {
         globalsound LISA_SAVETRAP 
         redefinequote 340 ^7Lisa: Agh! You alien bastards will pay for that!
         ifvare oldskoolmode 0 userquote 340
        }
        ifvare CHARACTERSELECTED? 15
        {
         globalsound MAKEN_SAVETRAP 
         redefinequote 340 ^10Maken: AUGH! You alien sons of bitches!!
         ifvare oldskoolmode 0 userquote 340
        }
       }
       eshoot MORTER 
       ifvarn RETURN -1
       {
        setactor[RETURN].owner THISACTOR
        getactor[RETURN].extra TEMP
        mulvar TEMP 10
        ifvarg TEMP 32767 setvar TEMP 32767
        setactor[RETURN].extra TEMP
       }
       sound TELEPORTER
       spawn TRANSPORTERSTAR
      }
      else // Enemy
      {
       ifrnd 252 
       {
        ifvare CHARACTERSELECTED? 8
        {
         globalsound LISA_SAVEENEMY 
         redefinequote 340 ^7Lisa: Oh geez... you're kidding me... you aliens SUCK!!
         ifvare oldskoolmode 0 userquote 340
        }
        ifvare CHARACTERSELECTED? 15
        {
         globalsound MAKEN_SAVEENEMY 
         redefinequote 340 ^10Maken: Ahohohoho, you just entered MY slaughterhouse, BITCH!!
         ifvare oldskoolmode 0 userquote 340
        }
       }
       ifrnd 85
       {
        espawn LIZTROOPJETPACK
        ifrnd 128 setactor[RETURN].pal 22 else setactor[RETURN].pal 21
       }
       else
       ifrnd 128
       {
        espawn PIGCOPDIVE
        ifrnd 128 setactor[RETURN].pal 0 else setactor[RETURN].pal 21
       }
       else
       {
        espawn LIZMANJUMP
        ifrnd 128 setactor[RETURN].pal 0 else setactor[RETURN].pal 19
       }
      }
     }

      state checktelecoils subvar ITEMARRAYID_AMOUNTTEMP 1 state setitemidarrayamount
      subvar DISPLAYDOLLARS 100
      subvar DOLLARS 100
      state displaymoney
ends

// END OF "RYAN'S HOPE" NPC RESCUE SYSTEM

state dropfiveclips
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn AMMO state scatterdrops
  espawn AMMO state scatterdrops
  espawn AMMO state scatterdrops
  espawn AMMO state scatterdrops
  espawn AMMO state scatterdrops
 }
ends

state dropfiveshotgunboxes
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn SHOTGUNAMMO state scatterdrops
  espawn SHOTGUNAMMO state scatterdrops
  espawn SHOTGUNAMMO state scatterdrops
  espawn SHOTGUNAMMO state scatterdrops
  espawn SHOTGUNAMMO state scatterdrops
 }
ends

state dropfivebatteries
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn BATTERYAMMO state scatterdrops
  espawn BATTERYAMMO state scatterdrops
  espawn BATTERYAMMO state scatterdrops
  espawn BATTERYAMMO state scatterdrops
  espawn BATTERYAMMO state scatterdrops
 }
ends

state dropfiverocketboxes
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn RPGAMMO state scatterdrops
  espawn RPGAMMO state scatterdrops
  espawn RPGAMMO state scatterdrops
  espawn RPGAMMO state scatterdrops
  espawn RPGAMMO state scatterdrops
 }
ends

state dropfivepipeboxes
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn HBOMBAMMO state scatterdrops
  espawn HBOMBAMMO state scatterdrops
  espawn HBOMBAMMO state scatterdrops
  espawn HBOMBAMMO state scatterdrops
  espawn HBOMBAMMO state scatterdrops
 }
ends

state dropfiveshrinkcrystals
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn CRYSTALAMMO state scatterdrops
  espawn CRYSTALAMMO state scatterdrops
  espawn CRYSTALAMMO state scatterdrops
  espawn CRYSTALAMMO state scatterdrops
  espawn CRYSTALAMMO state scatterdrops
 }
ends

state dropfiveexpandermics
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn GROWAMMO state scatterdrops
  espawn GROWAMMO state scatterdrops
  espawn GROWAMMO state scatterdrops
  espawn GROWAMMO state scatterdrops
  espawn GROWAMMO state scatterdrops
 }
ends

state dropfivestingerboxes
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn DEVISTATORAMMO state scatterdrops
  espawn DEVISTATORAMMO state scatterdrops
  espawn DEVISTATORAMMO state scatterdrops
  espawn DEVISTATORAMMO state scatterdrops
  espawn DEVISTATORAMMO state scatterdrops
 }
ends

state dropfivefreezemodules
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
  espawn FREEZEAMMO state scatterdrops
  espawn FREEZEAMMO state scatterdrops
  espawn FREEZEAMMO state scatterdrops
  espawn FREEZEAMMO state scatterdrops
  espawn FREEZEAMMO state scatterdrops
 }
ends

state droprandomshrinkerstuff
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
        ifrnd 85 { espawn CRYSTALAMMO state scatterdrops }
        else ifrnd 128 { espawn GROWAMMO state scatterdrops }
        else { { espawn CRYSTALAMMO state scatterdrops } { espawn GROWAMMO state scatterdrops } }
 }
ends

state droptripbombs
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
        ifrnd 24 { espawn TRIPBOMBSPRITE state scatterdrops }
        ifrnd 24 { espawn TRIPBOMBSPRITE state scatterdrops }
        ifrnd 24 { espawn TRIPBOMBSPRITE state scatterdrops }
 }
ends

state droprandomexplosivestuff
 state 16outof256rnd
 ifvarvarg RNDMIZER RNDMIZERLIMIT
 {
        ifrnd 64 { espawn RPGAMMO state scatterdrops }
        else ifrnd 85 { espawn DEVISTATORAMMO state scatterdrops }
        else ifrnd 128 { espawn HBOMBAMMO state scatterdrops }
        else { espawn RPGAMMO state scatterdrops espawn DEVISTATORAMMO state scatterdrops espawn HBOMBAMMO state scatterdrops }
 }
ends

state drop_ammo
  ifrnd SPAWNAMMOODDS
  {
   ifspritepal 19 
   { 
    ifrnd 16 { espawn RPGSPRITE state scatterdrops }
    ifrnd 16 { espawn DEVISTATORSPRITE state scatterdrops }
    state droptripbombs
    state droptripbombs
    state droprandomexplosivestuff
    state droprandomexplosivestuff
   }
   ifspritepal 14 
   { 
    ifrnd 16 { espawn SHRINKERSPRITE state scatterdrops }
    state droprandomshrinkerstuff
    state droprandomshrinkerstuff
   }
   ifspritepal 17 
   { 
    ifrnd 26 state dropfiveclips
    else ifrnd 28 state dropfiveshotgunboxes
    else ifrnd 32 state dropfivebatteries
    else ifrnd 36 state dropfiverocketboxes
    else ifrnd 42 state dropfivepipeboxes
    else ifrnd 53 state dropfiveshrinkcrystals
    else ifrnd 64 state dropfiveexpandermics
    else ifrnd 85 state dropfivestingerboxes
    else ifrnd 128 state dropfivefreezemodules
    else { state dropfiveclips state dropfiveshotgunboxes state dropfivebatteries state dropfiverocketboxes state dropfivepipeboxes state dropfiveshrinkcrystals state dropfiveexpandermics state dropfivestingerboxes state dropfivefreezemodules }
   }
   else 
   { 
    ifvare oldskoolmode 0 
    { 
     ifrnd 240 { espawn AMMO state scatterdrops } else { espawn FIRSTGUNSPRITE state scatterdrops } 
    }
    else { espawn AMMO state scatterdrops }    
   }
   ifvare oldskoolmode 0 { ifrnd 1 { ifrnd 64 { espawn JETPACK state scatterdrops } } }
  }
ends

state drop_battery
  ifrnd SPAWNAMMOODDS { espawn BATTERYAMMO state scatterdrops }
ends

state drop_sgshells
  ifrnd SPAWNAMMOODDS { espawn SHOTGUNAMMO state scatterdrops }
ends

state drop_armor
  ifrnd SPAWNAMMOODDS
   {
    ifvare oldskoolmode 0
    {
     ifrnd 112
     {
      espawn SHIELD
      setactorvar[RETURN].ARMORISUSED? 1
      state scatterdrops
     }
     else
     ifrnd 224
     {
      espawn COLORSHIELD
      setactorvar[RETURN].ARMORISUSED? 1
      state scatterdrops
     }
     else
     {
      espawn SUPERSHIELD
      setactorvar[RETURN].ARMORISUSED? 1
      state scatterdrops
     } 
    }
    else
    {
     espawn SHIELD state scatterdrops
    }    
   }
ends

state drop_shotgun
  ifrnd SPAWNAMMOODDS
   {
    ifvare oldskoolmode 0
    {
     ifrnd 128 { espawn SHOTGUNSPRITE state scatterdrops } else { espawn SHOTGUNAMMO state scatterdrops } 
    }
    else
    {
     espawn SHOTGUNSPRITE state scatterdrops
    }    
   }
ends

state drop_chaingun
  ifrnd SPAWNAMMOODDS
  {
   ifrnd 64 { espawn CHAINGUNSPRITE state scatterdrops } else { espawn BATTERYAMMO state scatterdrops }    
  }
ends

//*********************************
//* Dropped into Money Bag States *
//*********************************
state mbag_rndcoinlesser2
   randvar RANDOMVARIABLE 1
   addvar RANDOMVARIABLE 1
   ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 3 setvar RANDOMVARIABLE 3 } }
   ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }

   ifvare RANDOMVARIABLE 1 addvar zvelsav 1
   ifvare RANDOMVARIABLE 2 addvar zvelsav 5
   ifvare RANDOMVARIABLE 3 addvar zvelsav 10 
   ifvare RANDOMVARIABLE 4 addvar zvelsav 25
   ifvare RANDOMVARIABLE 5 addvar zvelsav 50 
ends

state mbag_rndcoinlesser
   setvar LISAMONEYTURNS 0

   state mbag_rndcoinlesser2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1

    ifvare LISAMONEYTURNS 1
    {
     state mbag_rndcoinlesser2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 2
    {
     state mbag_rndcoinlesser2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 3
    {
     state mbag_rndcoinlesser2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
   }
ends

state mbag_rndcoingreater2
   randvar RANDOMVARIABLE 1
   addvar RANDOMVARIABLE 1
   ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 3 setvar RANDOMVARIABLE 3 } }
   ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }

   ifvare RANDOMVARIABLE 1 addvar zvelsav 10 
   ifvare RANDOMVARIABLE 2 addvar zvelsav 25 
   ifvare RANDOMVARIABLE 3 addvar zvelsav 50 
   ifvare RANDOMVARIABLE 4 addvar TEMP2 1 
   ifvare RANDOMVARIABLE 5 addvar TEMP2 1
ends

state mbag_rndcoingreater
   setvar LISAMONEYTURNS 0

   state mbag_rndcoingreater2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1

    ifvare LISAMONEYTURNS 1
    {
     state mbag_rndcoingreater2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 2
    {
     state mbag_rndcoingreater2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 3
    {
     state mbag_rndcoingreater2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
   }
ends

state mbag_rndcoingreatest2
   randvar RANDOMVARIABLE 1
   addvar RANDOMVARIABLE 1
   ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 3 setvar RANDOMVARIABLE 3 } }
   ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }

   ifvare RANDOMVARIABLE 1 addvar zvelsav 50 
   ifvare RANDOMVARIABLE 2 addvar TEMP2 1 
   ifvare RANDOMVARIABLE 3 addvar TEMP2 1 
   ifvare RANDOMVARIABLE 4 addvar TEMP2 2
   ifvare RANDOMVARIABLE 5 addvar TEMP2 5 
ends

state mbag_rndcoingreatest
   setvar LISAMONEYTURNS 0

   state mbag_rndcoingreatest2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1

    ifvare LISAMONEYTURNS 1
    {
     state mbag_rndcoingreatest2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 2
    {
     state mbag_rndcoingreatest2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 3
    {
     state mbag_rndcoingreatest2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
   }
ends

state mbag_rnddollarlesser2
   randvar RANDOMVARIABLE 8
   addvar RANDOMVARIABLE 1
   ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 10 setvar RANDOMVARIABLE 10 } }
   ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 12 setvar RANDOMVARIABLE 12 } }

   ifvare RANDOMVARIABLE 1 addvar TEMP2 1 
   ifvare RANDOMVARIABLE 2 addvar TEMP2 2
   ifvare RANDOMVARIABLE 3 addvar TEMP2 2
   ifvare RANDOMVARIABLE 4 addvar TEMP2 5
   ifvare RANDOMVARIABLE 5 addvar TEMP2 5
   ifvare RANDOMVARIABLE 6 addvar TEMP2 9
   ifvare RANDOMVARIABLE 7 addvar TEMP2 10
   ifvare RANDOMVARIABLE 8 addvar TEMP2 10
   ifvare RANDOMVARIABLE 9 addvar TEMP2 20
   ifvare RANDOMVARIABLE 10 addvar TEMP2 50
   ifvare RANDOMVARIABLE 11 addvar TEMP2 80
   ifvare RANDOMVARIABLE 12 addvar TEMP2 100
ends

state mbag_rnddollarlesser
   setvar LISAMONEYTURNS 0

   state mbag_rnddollarlesser2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1

    ifvare LISAMONEYTURNS 1
    {
     state mbag_rnddollarlesser2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 2
    {
     state mbag_rnddollarlesser2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 3
    {
     state mbag_rnddollarlesser2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
   }
ends

state mbag_rnddollargreater2
   randvar RANDOMVARIABLE 3
   addvar RANDOMVARIABLE 1
   ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }
   ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 7 setvar RANDOMVARIABLE 7 } }

   ifvare RANDOMVARIABLE 1 addvar TEMP2 50
   ifvare RANDOMVARIABLE 2 addvar TEMP2 80
   ifvare RANDOMVARIABLE 3 addvar TEMP2 100
   ifvare RANDOMVARIABLE 4 addvar TEMP2 500
   ifvarg RANDOMVARIABLE 4 ifvarl RANDOMVARIABLE 7 addvar TEMP2 1000
   ifvare RANDOMVARIABLE 7 addvar TEMP2 5000
ends

state mbag_rnddollargreater
   setvar LISAMONEYTURNS 0

   state mbag_rnddollargreater2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1

    ifvare LISAMONEYTURNS 1
    {
     state mbag_rnddollargreater2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 2
    {
     state mbag_rnddollargreater2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 3
    {
     state mbag_rnddollargreater2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
   }
ends

state mbag_rnddollargreatest2
   randvar RANDOMVARIABLE 34
   addvar RANDOMVARIABLE 1
   ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 } }
   ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 } }
   ifvarg RANDOMVARIABLE 34 { ifrnd 32 setvar RANDOMVARIABLE 35 else setvar RANDOMVARIABLE 34 }

   ifvarg RANDOMVARIABLE 0 ifvarl RANDOMVARIABLE 9 addvar TEMP2 1000
   ifvarg RANDOMVARIABLE 8 ifvarl RANDOMVARIABLE 17 addvar TEMP2 5000
   ifvarg RANDOMVARIABLE 16 ifvarl RANDOMVARIABLE 25 addvar TEMP2 10000
   ifvarg RANDOMVARIABLE 24 ifvarl RANDOMVARIABLE 33 addvar TEMP2 100000
   ifvarg RANDOMVARIABLE 32 ifvarl RANDOMVARIABLE 35 addvar TEMP2 1000000
   ifvare RANDOMVARIABLE 35 addvar TEMP2 1000000000
ends

state mbag_rnddollargreatest
   setvar LISAMONEYTURNS 0

   state mbag_rnddollargreatest2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1

    ifvare LISAMONEYTURNS 1
    {
     state mbag_rnddollargreatest2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 2
    {
     state mbag_rnddollargreatest2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
    ifvare LISAMONEYTURNS 3
    {
     state mbag_rnddollargreatest2
     ifvarvarl LISAMONEYTURNS LISAMONEYTURNS2 addvar LISAMONEYTURNS 1
    }
   }
ends

state mbag_rndmoneylesser2
 ifvare CHARACTERSELECTED? 8
 {
  ifvare LISAMONEYMAXLEVEL 1
  {
   ifrnd 64 state mbag_rndcoinlesser else state mbag_rnddollarlesser
  }
  else
  {
   ifrnd 128 state mbag_rndcoinlesser else state mbag_rnddollarlesser
  }
 }
 else
 {
  ifrnd 128 state mbag_rndcoinlesser else state mbag_rnddollarlesser
 }
ends

state mbag_rndmoneylesser
   setvar LISAMONEYTURNS0 0

   state mbag_rndmoneylesser2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1

    ifvare LISAMONEYTURNS0 1
    {
     state mbag_rndmoneylesser2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
    ifvare LISAMONEYTURNS0 2
    {
     state mbag_rndmoneylesser2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
    ifvare LISAMONEYTURNS0 3
    {
     state mbag_rndmoneylesser2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
   }
ends

state mbag_rndmoneygreater2
 ifvare CHARACTERSELECTED? 8
 {
  ifvare LISAMONEYMAXLEVEL 1
  {
   ifrnd 64 state mbag_rndcoingreater else state mbag_rnddollargreater
  }
  else
  {
   ifrnd 128 state mbag_rndcoingreater else state mbag_rnddollargreater
  }
 }
 else
 {
  ifrnd 128 state mbag_rndcoingreater else state mbag_rnddollargreater
 }
ends

state mbag_rndmoneygreater
   setvar LISAMONEYTURNS0 0

   state mbag_rndmoneygreater2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1

    ifvare LISAMONEYTURNS0 1
    {
     state mbag_rndmoneygreater2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
    ifvare LISAMONEYTURNS0 2
    {
     state mbag_rndmoneygreater2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
    ifvare LISAMONEYTURNS0 3
    {
     state mbag_rndmoneygreater2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
   }
ends

state mbag_rndmoneygreatest2
 ifvare CHARACTERSELECTED? 8
 {
  ifvare LISAMONEYMAXLEVEL 1
  {
   ifrnd 64 state mbag_rndcoingreatest else state mbag_rnddollargreatest
  }
  else
  {
   ifrnd 128 state mbag_rndcoingreatest else state mbag_rnddollargreatest
  }
 }
 else
 {
  ifrnd 128 state mbag_rndcoingreatest else state mbag_rnddollargreatest
 }
ends

state mbag_rndmoneygreatest
   setvar LISAMONEYTURNS0 0

   state mbag_rndmoneygreatest2

   ifvare CHARACTERSELECTED? 8
   {
    ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1

    ifvare LISAMONEYTURNS0 1
    {
     state mbag_rndmoneygreatest2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
    ifvare LISAMONEYTURNS0 2
    {
     state mbag_rndmoneygreatest2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
    ifvare LISAMONEYTURNS0 3
    {
     state mbag_rndmoneygreatest2
     ifvarvarl LISAMONEYTURNS0 LISAMONEYTURNS2 addvar LISAMONEYTURNS0 1
    }
   }
ends

//****************************************
//* End of Dropped into Money Bag States *
//****************************************

state boss_dropmoneybag
  ifspritepal 24
  {
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 240 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 160 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 80 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 40 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rndcoingreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rndcoingreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rndcoingreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rnddollargreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rnddollargreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rnddollargreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rndmoneygreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rndmoneygreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 20 state mbag_rndmoneygreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rndcoingreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rndcoingreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rndcoingreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rnddollargreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rnddollargreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rnddollargreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rndmoneygreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rndmoneygreatest }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 10 state mbag_rndmoneygreatest }
  }
  else
  {
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 224 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 224 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 224 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 56 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 56 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 56 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 28 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 28 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 28 state mbag_rndmoneygreater }
  }
ends

state actor_dropmoneybag
  espawn MONEYBAG state setdroppedmoneyowner
  getactorvar[RETURN].MONEYBAGDOLLARS TEMP2
  getactorvar[RETURN].MONEYBAGCENTS zvelsav
  
  ifactor PIGCOP
  {
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 224 state mbag_rndcoinlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 224 state mbag_rnddollarlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 224 state mbag_rndmoneylesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rndcoinlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rnddollarlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rndmoneylesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 112 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 56 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 56 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 56 state mbag_rndmoneygreater }
  }
  else // Not a Pigcop
  {
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 168 state mbag_rndcoinlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 168 state mbag_rnddollarlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 168 state mbag_rndmoneylesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 96 state mbag_rndcoinlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 96 state mbag_rnddollarlesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 96 state mbag_rndmoneylesser }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 96 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 96 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 96 state mbag_rndmoneygreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 21 state mbag_rndcoingreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 21 state mbag_rnddollargreater }
   state 96outof256rnd ifvarvarg RNDMIZER RNDMIZERLIMIT { ifrnd 21 state mbag_rndmoneygreater }
  }

  ifactor PIGCOP
  {
   ifspritepal 24 state boss_dropmoneybag
   ifspritepal 24 ifrnd 64 state boss_dropmoneybag
   ifspritepal 24 ifrnd 16 state boss_dropmoneybag
  }
  else
  ifactor BOSS1
  {
   state boss_dropmoneybag
   ifspritepal 24 state boss_dropmoneybag
   ifspritepal 24 ifrnd 64 state boss_dropmoneybag
   ifspritepal 24 ifrnd 16 state boss_dropmoneybag
  }
  else
  ifactor BOSS2
  {
   state boss_dropmoneybag
   ifspritepal 24 state boss_dropmoneybag
   ifspritepal 24 ifrnd 64 state boss_dropmoneybag
   ifspritepal 24 ifrnd 16 state boss_dropmoneybag
  }
  else
  ifactor BOSS3
  {
   state boss_dropmoneybag
   ifspritepal 24 state boss_dropmoneybag
   ifspritepal 24 ifrnd 64 state boss_dropmoneybag
   ifspritepal 24 ifrnd 16 state boss_dropmoneybag
  }
  else
  ifactor BOSS4
  {
   state boss_dropmoneybag
   ifspritepal 24 state boss_dropmoneybag
   ifspritepal 24 ifrnd 64 state boss_dropmoneybag
   ifspritepal 24 ifrnd 16 state boss_dropmoneybag
  }
  else
  ifactor LIZTROOP
  {
   ifspritepal 17 state boss_dropmoneybag
   ifspritepal 17 ifrnd 64 state boss_dropmoneybag
   ifspritepal 17 ifrnd 16 state boss_dropmoneybag
  }
  ifactor LIZMAN
  {
   ifspritepal 17 state boss_dropmoneybag
   ifspritepal 17 ifrnd 64 state boss_dropmoneybag
   ifspritepal 17 ifrnd 16 state boss_dropmoneybag
  }
  ifactor COMMANDER
  {
  ifspritepal 24 state boss_dropmoneybag
  ifspritepal 24 ifrnd 64 state boss_dropmoneybag
  ifspritepal 24 ifrnd 16 state boss_dropmoneybag
  }
  setactorvar[RETURN].MONEYBAGDOLLARS TEMP2
  setactorvar[RETURN].MONEYBAGCENTS zvelsav
ends

state monster_drop_bonus2
  ifvare SKILLLEVEL 9
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 4 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 32 { espawn AFAS_DROP state scatterdrops } } }
    ifrnd 1 { ifrnd 1 { ifrnd 1 { espawn FAUXLEVELUP state scatterdrops } } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 32 state celldrops
  }
  else
  ifvarl SKILLLEVEL 9
  ifvarg SKILLLEVEL 4
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 2 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 16 { espawn AFAS_DROP state scatterdrops } } }
    ifrnd 1 { ifrnd 1 { ifrnd 1 { ifrnd 128 { espawn FAUXLEVELUP state scatterdrops } } } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 2 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 16 state celldrops
  }
  else
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } } }
    ifrnd 1 { ifrnd 1 { ifrnd 1 { ifrnd 64 { espawn FAUXLEVELUP state scatterdrops } } } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 2 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 8 state celldrops
  }
ends

state monster_drop_bonus1
  ifvare SKILLLEVEL 9
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 3 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 24 { espawn AFAS_DROP state scatterdrops } } }
    ifrnd 1 { ifrnd 1 { ifrnd 1 { ifrnd 96 { espawn FAUXLEVELUP state scatterdrops } } } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 9 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 9 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 9 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 24 state celldrops
  }
  ifvarl SKILLLEVEL 9
  ifvarg SKILLLEVEL 4
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 128 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 4 { espawn AFAS_DROP state scatterdrops } } }
    ifrnd 1 { ifrnd 1 { ifrnd 1 { ifrnd 16 { espawn FAUXLEVELUP state scatterdrops } } } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 128 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 6 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 12 state celldrops
  }
  else
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 64 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 1 { ifrnd 2 { espawn AFAS_DROP state scatterdrops } } }
    ifrnd 1 { ifrnd 1 { ifrnd 1 { ifrnd 8 { espawn FAUXLEVELUP state scatterdrops } } } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 64 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { ifrnd 128 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 2 { ifrnd 128 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 2 { ifrnd 128 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 3 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 2 { ifrnd 128 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }

   ifrnd 6 state celldrops
  }
ends

state boss_drops
  ifspritepal 24
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 256 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { espawn RESURRECTIONCHALICE state scatterdrops }
   }
  }
  else // ifspritepal not= 24
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 state gemring_drops
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn RESURRECTIONCHALICE state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 1 { espawn RESURRECTIONCHALICE state scatterdrops }
   }
  }

  ifvare SKILLLEVEL 9
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { ifrnd 16 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { ifrnd 128 { espawn AFAS_DROP state scatterdrops } }
    ifrnd 8 { ifrnd 16 { espawn FAUXLEVELUP state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 48 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 48 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 48 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 96 state celldrops
  }
  ifvarl SKILLLEVEL 9
  ifvarg SKILLLEVEL 4
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { ifrnd 8 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { ifrnd 64 { espawn AFAS_DROP state scatterdrops } }
    ifrnd 4 { ifrnd 16 { espawn FAUXLEVELUP state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 24 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 24 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 24 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }
   ifrnd 64 state celldrops
  }
  else
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { ifrnd 4 { espawn AIRJUMPBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops } }
   }
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 2 { ifrnd 32 { espawn AFAS_DROP state scatterdrops } }
    ifrnd 2 { ifrnd 8 { espawn FAUXLEVELUP state scatterdrops } }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 4 { espawn SATCHEL_LARGE setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn MANTLEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn AIRTIMEBONUS setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn SATCHEL_SMALL setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXHPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXHPAPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn MAXEPUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn ATKUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn DEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 { espawn ATKDEFUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 12 { espawn SPDUP setactorvar[RETURN].ITEMWASDROPPED? 1 state determinebonussizes state scatterdrops }
   }

   ifrnd 32 state celldrops
  }
ends

state drop_health
 ifactor COMMANDER
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   ifrnd 224 { espawn COILS state scatterdrops }
  }
  state monster_drop_bonus2
 }
 else
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   ifrnd 16 { espawn COILS state scatterdrops }
  }
  state monster_drop_bonus2
 }

 ifactor PIGCOP
 {
  state monster_drop_bonus1
  ifspritepal 24 state boss_drops
  ifspritepal 24 ifrnd 64 state boss_drops
  ifspritepal 24 ifrnd 16 state boss_drops
  ifspritepal 24 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
  ifspritepal 24 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
  ifspritepal 24 { ifrnd 16 { espawn RIOTSHIELD state scatterdrops } }
 }
 else
 ifactor BOSS1
 {
  state boss_drops
  ifspritepal 24 ifrnd 64 state boss_drops
  ifspritepal 24 ifrnd 16 state boss_drops
  ifspritepal 24 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
  ifspritepal 24 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
 }
 else
 ifactor BOSS2
 {
  state boss_drops
  ifspritepal 24 ifrnd 64 state boss_drops
  ifspritepal 24 ifrnd 16 state boss_drops
  ifspritepal 24 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
  ifspritepal 24 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
 }
 else
 ifactor BOSS3
 {
  state boss_drops
  ifspritepal 24 ifrnd 64 state boss_drops
  ifspritepal 24 ifrnd 16 state boss_drops
  ifspritepal 24 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
  ifspritepal 24 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
 }
 else
 ifactor BOSS4
 {
  state boss_drops
  ifspritepal 24 ifrnd 64 state boss_drops
  ifspritepal 24 ifrnd 16 state boss_drops
  ifspritepal 24 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
  ifspritepal 24 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
 }
 else
 {
  state monster_drop_bonus1
  ifactor LIZTROOP
  {
   ifspritepal 17 state boss_drops
   ifspritepal 17 ifrnd 64 state boss_drops
   ifspritepal 17 ifrnd 16 state boss_drops
   ifspritepal 17 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
   ifspritepal 17 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
  }
  ifactor LIZMAN
  {
   ifspritepal 17 state boss_drops
   ifspritepal 17 ifrnd 64 state boss_drops
   ifspritepal 17 ifrnd 16 state boss_drops
   ifspritepal 17 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
   ifspritepal 17 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
  }
  ifactor COMMANDER
  {
   ifspritepal 24 state boss_drops
   ifspritepal 24 ifrnd 64 state boss_drops
   ifspritepal 24 ifrnd 16 state boss_drops
   ifspritepal 24 { ifrnd 8 { espawn AFAS_DROP state scatterdrops } }
   ifspritepal 24 { ifrnd 2 { espawn FAUXLEVELUP state scatterdrops } }
  }
 }

 ifvarg enemywinterclothes 0
 {
  ifrnd 16 espawn WINTERCLOTHES state scatterdrops
  setvar enemywinterclothes 0
 }
 else
 {
  ifvarg freezing 0 ifvarl freezing 17
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 8 espawn WINTERCLOTHES state scatterdrops
   }
  }
  else
  ifvarg freezing 16 ifvarl freezing 33
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 16 espawn WINTERCLOTHES state scatterdrops
   }
  }
  else
  ifvarg freezing 32 ifvarl freezing 65
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 32 espawn WINTERCLOTHES state scatterdrops
   }
  }
  else
  ifvarg freezing 64 ifvarl freezing 257
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 64 espawn WINTERCLOTHES state scatterdrops
   }
  }
  else
  ifvarg freezing 256
  {
   state 16outof256rnd
   ifvarvarg RNDMIZER RNDMIZERLIMIT
   {
    ifrnd 128 espawn WINTERCLOTHES state scatterdrops
   }
  }
 }

 ifrnd HEALTHDROPODDS
 {
  state 16outof256rnd
  ifvarvarg RNDMIZER RNDMIZERLIMIT
  {
   state drop_randomized_item
  }
 }

 state actor_dropmoneybag

 ifvare SKILLLEVEL 0 { ifrnd 1 { state drop_health } }
 ifvare SKILLLEVEL 1 { ifrnd 2 { state drop_health } }
 ifvare SKILLLEVEL 2 { ifrnd 3 { state drop_health } }
 ifvare SKILLLEVEL 3 { ifrnd 4 { state drop_health } }
 ifvare SKILLLEVEL 4 { ifrnd 6 { state drop_health } }
 ifvare SKILLLEVEL 5 { ifrnd 8 { state drop_health } }
 ifvare SKILLLEVEL 6 { ifrnd 12 { state drop_health } }
 ifvare SKILLLEVEL 7 { ifrnd 16 { state drop_health } }
 ifvare SKILLLEVEL 8 { ifrnd 24 { state drop_health } }
 ifvare SKILLLEVEL 9 { ifrnd 32 { state drop_health } }
ends

