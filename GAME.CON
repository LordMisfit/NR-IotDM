// 40 = 160X/Y/Z
scriptsize 1048576 // FOR GOD'S SAKE MISFIT: KEEP THIS HERE TO PREVENT ANY POSSIBLE ANNOYING CRASHES!! >____>

setgamename Naferia's Reign (git186)
definequote 1337 ^22VERSION:^0 git186.12102017

action ANULLACTION 0

define NEWBLOODPOOL 5190

define CAMERAVIEW 12
define MEDPACK 14
define SURGERYKIT 15
define SURGERTKIT2 16
define INITIALIZER 17
define DEATHPITFALL 18
define SWMEDIKIT 34
define SWBIGMEDIKIT 35 // LAWL "3f5"... NOTE TO SELF, CHECK FOR BAD LABELS MORE OFTEN IN THE FUTURE [also "CON!!!!!!!"(tm)]
define QUADDAMAGE 36
define COILS 43
define SUPERSHIELD 66
define COLORSHIELD 67
define SPACESHUTTLE 487
define W_FORCEFIELDBLANK 664
define BARSTOOL 1006
define TABLE 1037
define FIREVASE_OUT 1389
define FIREBARREL_OUT 1399

define POLEFEM2 1411
define PODFEM1POD 1412

define FIRELASERP 1626

define SCORPIONTANK 1870

define RECONNR 1966

define HITSCANDOT 2527 // 2484

define COMMANDERDEADSPRITE 1957
define LIZMANSHOOTING 2190
define BOSS1DEADSPRITE 2685
define BOSS2STAYPUT 2711
define BOSS2SHOOT 2730
define BOSS2BREATH 2740
define BOSS2DEADSPRITE 2758
define BOSS3STAYPUT 2761
define BOSS3LOB 2780
define BOSS3DEADSPRITE 2809
define KEYPAD 3069

define CRATE1 3521
define CRATE2 3522
define SPARKFALL 3523
define DCFLASK1EMPTY 3585
define DCFLASK1FILLED 3586
define DCFLASK2EMPTY 3587
define DCFLASK2FILLED 3588
define DCFLASK3EMPTY 3589
define DCFLASK3FILLED 3590
define DCVIALS1 3593
define DCTUBES1 3594
define DCFLASK4FILLED 3606
define DCFLASK5FILLED 3618
define DCFLASK6FILLED 3619
define DCTUBES2 3624
define DCTUBES3 3625
define MYSTERYBOX 3865
define ROULETTEWHEEL 3874

define GREENTANKCAPSULE 3878
define BLUETANKCAPSULE 3879
define REDTANKCAPSULE 3880

define COMPACTHANDSCANNER 3607 		// Compact Hand-scanner (multi-palette)
define COMPACTHANDSCANNER2 3620 	// Compact Hand-scanner (old school colors)
define FORDEN 3839 					// Dan "Toasty!" Forden! :D
define HANDSCANNER 4082 			// Multi-Palette Supportive Handscanner
define HANDSCANNER2 4084 			// Old-school Scanner colors
define ACCESSCARD2 4086 			// for any color outside of Blue/Red/Yellow
define ACCESSSWITCH3 4087 			// for any color outside of Blue/Red/Yellow
define ACCESSSWITCH4 4089 			// for any color outside of Blue/Red/Yellow
define NEWBEASTDEADSPRITE 4689
define BOSS4CHARGING 4760
define BOSS4DEADSPRITE 4789
define BOSS4LAYEGGS 4790

define PENNY 5120
define NICKEL 5121
define DIME 5122
define QUARTER 5123
define HALFDOLLAR 5124
define SACDOLLAR 5125
define ONEDOLLAR 5126
define TWODOLLARS 5127
define FIVEDOLLARS 5128
define TENDOLLARS 5129
define TWENTYDOLLARS 5130
define FIFTYDOLLARS 5131
define ONEHUNDREDDOLLARS 5132
define FIVEHUNDREDDOLLARS 5133
define ONETHOUSANDDOLLARS 5134
define FIVETHOUSANDDOLLARS 5135
define TENTHOUSANDDOLLARS 5136
define ONEHUNDREDTHOUSANDDOLLARS 5137
define ONEMILLIONDOLLARS 5138
define ONEBILLIONDOLLARS 5139
define ONETRILLIONDOLLARS 5140
define TWODOLLARBUNDLE 5141
define FIVEDOLLARBUNDLE 5142
define NINEDOLLARBUNDLE 5143
define TENDOLLARBUNDLE 5144
define EIGHTYDOLLARBUNDLE 5145
define MONEYBAG 5146
define PORTABLEATM 5148
define MYSTICSATCHEL 5150
define POINTERARROW 5154
define ICONOFTHEDEFENDER 5155
define RESURRECTIONCHALICE 5159
define CRYSTALVIAL 5162
define ANTIDOTE 5174
define NEWPLUG 5175
define SHADOWTSHIRT 5176
define INVULNTSHIRT 5177
define ONELIFETSHIRT 5179
define TWOLIFETSHIRT 5180
define EYEDROP 5181
define FOGHORN 5182
define SUPERATOM 5200
define POISONSYMBOL 5216
define ENERGYSHELL 5217
define ENERGYCELL_SMALL 5218
define ENERGYCELL_MEDIUM 5219
define ENERGYCELL_LARGE 5220

define SATCHEL_SMALL 5249
define SATCHEL_LARGE 5250
define MAXHPUP 5251
define MAXHPAPUP 5258
define MAXAPUP 5265
define MAXEPUP 5510
define ATKUP 5291
define DEFUP 5309
define ATKDEFUP 5300
define SPDUP 5331

define CONTINUEITEM 5277
define FAUXLEVELUP 5284
define HACKERVISION 5289

define BUBSYDIVINGSUIT 5308
define SKYBOX_TILE 5318				// Assign this to surfaces you wish to show skybox
define NULL_TILE 5319					// MUST BE AN EMPTY TILE

define TELEBEACON 5371
define AIRBUBBLE 5374
define AIRBUBBLEGENERATOR 5375
define VAMPIREITEM 5376

define NEWFLOORSLIME 5385
define NEWHURTRAIL 5388
define NEWFLOORPLASMA 5389
define NEWPURPLELAVA 5395
define EMPTYTANK 5435
define HYPERMAGMA 5443

define MERCURYCOMPUTER 5476 // 5285

define SMALLENERGYDRINK 5564
define LARGEENERGYDRINK 5565
define HYPERENERGYDRINK 5566

define HEALING_SECTOR 5627
define FREEZING_EXTENSION 5628
define SECRET_EXTENSION 5629
define ZCONTROL 5630

define HOTLAVAFROZE 3605
define AMOEBAACID 3796
define HOTLAVA 3780
define MEGALAVA 4091
define ULTRALAVA 5401
define NEWFLOORPLASMAFROZE 5409
define ULTRALAVAFROZE 5410
define MEGALAVAFROZE 5422
define HYPERMAGMAFROZE 5447

define ITEMMULTIPLIERSIGN2 5538
define ITEMMULTIPLIERSIGN4 5539
define ITEMMULTIPLIERSIGN8 5540

define CANWITHSOMETHING1NEW 5541
define CANWITHSOMETHING2NEW 5542
define CANWITHSOMETHING3NEW 5543
define CANWITHSOMETHING4NEW 5544

define PICKUPMULTIICON 5538
define ENERGYSHELL_UPGRADED 5549

define MEMBERSHIPCARD 5787

define TRASHCAN1 5858
define TRASHCAN2 5859
define TRASHCAN3 5860

define TRASHBAG1 5864
define TRASHBAG2 5865
define TRASHBAG3 5866
define TRASHBAG4 5867

define FORTUNECOOKIE 5898
define APREGENITEM 5900 
define REGENITEM 5903
define QUADICON 5907
define REGENICON 5909
define APREGENICON 5910
define RANDOMPOWERUP 5911
define POWERUPICONSTRIP 5935

define GEMRINGSILVER 5970
define GEMRINGGOLD 5971

define AIRTIMEBONUS 6001
define AIRJUMPBONUS 6004
define MANTLEBONUS 6012
define SUNRING 6013
define SPIRITRING 6014
define PLASMARING 6015
define AQUARING 6016
define MIRRORSHIELD 6017
define CHARMANKH 6021
define RANKBADGE 6024
define EXPBADGE 6025
define AFAS_DROP 6027
define MONEYBADGE 6033
define RIOTSHIELD 6034
define NYXGLOVEPAIR 6035
define RABBITSFOOT 6036
define JUMPBOOTPAIR 6037
define SHOCKABBOOTPAIR 6038
define HAPPYSHOEPAIR 6039
define STYLESHOEPAIR 6040
define CHARMSHOEPAIR 6041
define POWERWRIST 6042
define SHIKONJEWEL 6043
define HOCKEYMASK 6044
define GEMSTONECROWN 6045
define TWILIGHTCAPE 6046
define SNAKEARMBAND 6047
define MEDICBAG 6048
define SERPENTHELMET 6049
define ENERGYINCURMENT 6050
define YINYANGORB 6051
define IRONRUNE 6052
define LIQUIDMETALAMULET 6053
define MANDALABRACELET 6054
define AQUALUNG 6055

define MONEYRADAR 6089
define SILKCARNATION 6090
define RAREPIRATEDOUBLOON 6091
define FIXEDDICEPAIR 6092
define MALAKIANGEM 6093
define SAFELOCKBOX 6094
define SECRETRECIPE 6095
define SLURPEEMACHINE 6096
define STOCKOWNERSHIP 6097
define TRANSDIMENSIONALSAFE 6098
define BLOODPACTSHIELD 6099

define RAINSPRITE 6169

define FIRSTAIDPANEL_ON 6198
define FIRSTAIDPANEL_OFF 6199

define WINTERCLOTHES 6293

define ESSENCEHOLO 6689
define CYBANISHOLO 6684

define ANIMEGIRL1 6733
define ANIMEGIRL2 6737
define ANIMEGIRL3 6741
define ANIMEGIRL4 6746

define CANWITHSOMETHING5 7474

define HPLIFEMETER 7797
define APLIFEMETER 7798
define LEVELRANKSTAR 7805

define CHAR1ICON 7936
define CHAR2ICON 7937
define CHAR3ICON 7938
define CHAR4ICON 7939
define CHAR5ICON 7940
define CHAR6ICON 7941
define CHAR7ICON 7942
define CHAR8ICON 7943
define CHAR9ICON 7944
define CHAR10ICON 7945
define CHAR11ICON 7946
define CHAR12ICON 7947
define CHAR13ICON 7948
define CHAR15ICON 7971

define CHARBLANKICON 7956
define CHAR14ICON 7957

define CHAR3MASKICON 7962
define CHAR4MERICON 7963
define CHAR10HUMICON 7964
define CHAR13VENICON 7965
define CHAR4BALICON 7966
define CHAR13BALICON 7968

define WORLDTILE1 8192
define WORLDTILE2 8193
define WORLDTILE3 8194
define WORLDTILE4 8195
define WORLDTILE5 8196
define WORLDTILE6 8197
define WORLDTILE7 8198
define WORLDTILE8 8199
define WORLDTILE9 8200
define WORLDTILE10 8201
define WORLDTILE11 8202
define WORLDTILE12 8203
define WORLDTILE13 8204
define WORLDTILE14 8205
define WORLDTILE15 8206
define WORLDTILE16 8207
define WORLDTILE17 8208
define WORLDTILE18 8209
define WORLDTILE19 8210
define WORLDTILE20 8211
define WORLDTILE21 8212
define WORLDTILE22 8213
define WORLDTILE23 8214
define WORLDTILE24 8215
define WORLDTILE25 8216
define WORLDTILE26 8217
define WORLDTILE27 8218
define WORLDTILE28 8219
define WORLDTILE29 8220
define WORLDTILE30 8221
define WORLDTILE31 8222
define WORLDTILE32 8223
define WORLDTILE33 8224
define WORLDTILE34 8225
define WORLDTILE35 8226
define WORLDTILE36 8227
define WORLDTILE37 8228
define WORLDTILE38 8229
define WORLDTILE39 8230
define WORLDTILE40 8231
define WORLDTILE41 8232
define WORLDTILE42 8233
define WORLDTILE43 8234
define WORLDTILE44 8235
define WORLDTILE45 8236
define WORLDTILE46 8237
define WORLDTILE47 8238
define WORLDTILE48 8239
define WORLDTILE49 8240
define WORLDTILE50 8241
define WORLDTILE51 8242
define WORLDTILE52 8243
define WORLDTILE53 8244
define WORLDTILE54 8245
define WORLDTILE55 8246
define WORLDTILE56 8247
define WORLDTILE57 8248
define WORLDTILE58 8249
define WORLDTILE59 8250
define WORLDTILE60 8251
define WORLDTILE61 8252
define WORLDTILE62 8253
define WORLDTILE63 8254
define WORLDTILE64 8255
define WORLDTILE65 8256
define WORLDTILE66 8257
define WORLDTILE67 8258
define WORLDTILE68 8259
define WORLDTILE69 8260
define WORLDTILE70 8261
define WORLDTILE71 8262
define WORLDTILE72 8263
define WORLDTILE73 8264
define WORLDTILE74 8265
define WORLDTILE75 8266
define WORLDTILE76 8267
define WORLDTILE77 8268
define WORLDTILE78 8269
define WORLDTILE79 8270
define WORLDTILE80 8271
define WORLDTILE81 8272
define WORLDTILE82 8273
define WORLDTILE83 8274
define WORLDTILE84 8275
define WORLDTILE85 8276
define WORLDTILE86 8277
define WORLDTILE87 8278
define WORLDTILE88 8279
define WORLDTILE89 8280
define WORLDTILE90 8281
define WORLDTILE91 8282
define WORLDTILE92 8283
define WORLDTILE93 8284
define WORLDTILE94 8285
define WORLDTILE95 8286
define WORLDTILE96 8287
define WORLDTILE97 8288
define WORLDTILE98 8289
define WORLDTILE99 8290
define WORLDTILE100 8291
define WORLDTILE101 8292
define WORLDTILE102 8293
define WORLDTILE103 8294
define WORLDTILE104 8295
define WORLDTILE105 8296
define WORLDTILE106 8297
define WORLDTILE107 8298
define WORLDTILE108 8299
define WORLDTILE109 8300
define WORLDTILE110 8301
define WORLDTILE111 8302
define WORLDTILE112 8303
define WORLDTILE113 8304
define WORLDTILE114 8305
define WORLDTILE115 8306
define WORLDTILE116 8307
define WORLDTILE117 8308
define WORLDTILE118 8309
define WORLDTILE119 8310
define WORLDTILE120 8311
define WORLDTILE121 8312
define WORLDTILE122 8313
define WORLDTILE123 8314
define WORLDTILE124 8315
define WORLDTILE125 8316
define WORLDTILE126 8317
define WORLDTILE127 8318
define WORLDTILE128 8319
define WORLDTILE129 8320
define WORLDTILE130 8321
define WORLDTILE131 8322
define WORLDTILE132 8323
define WORLDTILE133 8324
define WORLDTILE134 8325
define WORLDTILE135 8326
define WORLDTILE136 8327
define WORLDTILE137 8328
define WORLDTILE138 8329
define WORLDTILE139 8330
define WORLDTILE140 8331
define WORLDTILE141 8332
define WORLDTILE142 8333
define WORLDTILE143 8334
define WORLDTILE144 8335
define WORLDTILE145 8336
define WORLDTILE146 8337
define WORLDTILE147 8338
define WORLDTILE148 8339
define WORLDTILE149 8340
define WORLDTILE150 8341
define WORLDTILE151 8342
define WORLDTILE152 8343
define WORLDTILE153 8344
define WORLDTILE154 8345
define WORLDTILE155 8346
define WORLDTILE156 8347
define WORLDTILE157 8348
define WORLDTILE158 8349
define WORLDTILE159 8350
define WORLDTILE160 8351
define WORLDTILE161 8352
define WORLDTILE162 8353
define WORLDTILE163 8354
define WORLDTILE164 8355
define WORLDTILE165 8356
define WORLDTILE166 8357
define WORLDTILE167 8358
define WORLDTILE168 8359
define WORLDTILE169 8360
define WORLDTILE170 8361
define WORLDTILE171 8362
define WORLDTILE172 8363
define WORLDTILE173 8364
define WORLDTILE174 8365
define WORLDTILE175 8366
define WORLDTILE176 8367
define WORLDTILE177 8368
define WORLDTILE178 8369
define WORLDTILE179 8370
define WORLDTILE180 8371
define WORLDTILE181 8372
define WORLDTILE182 8373
define WORLDTILE183 8374
define WORLDTILE184 8375
define WORLDTILE185 8376
define WORLDTILE186 8377
define WORLDTILE187 8378
define WORLDTILE188 8379
define WORLDTILE189 8380
define WORLDTILE190 8381
define WORLDTILE191 8382
define WORLDTILE192 8383
define WORLDTILE193 8384
define WORLDTILE194 8385
define WORLDTILE195 8386
define WORLDTILE196 8387
define WORLDTILE197 8388
define WORLDTILE198 8389
define WORLDTILE199 8390
define WORLDTILE200 8391
define WORLDTILE201 8392
define WORLDTILE202 8393
define WORLDTILE203 8394
define WORLDTILE204 8395
define WORLDTILE205 8396
define WORLDTILE206 8397
define WORLDTILE207 8398
define WORLDTILE208 8399
define WORLDTILE209 8400
define WORLDTILE210 8401
define WORLDTILE211 8402
define WORLDTILE212 8403
define WORLDTILE213 8404
define WORLDTILE214 8405
define WORLDTILE215 8406
define WORLDTILE216 8407
define WORLDTILE217 8408
define WORLDTILE218 8409
define WORLDTILE219 8410
define WORLDTILE220 8411
define WORLDTILE221 8412
define WORLDTILE222 8413
define WORLDTILE223 8414
define WORLDTILE224 8415
define WORLDTILE225 8416
define WORLDTILE226 8417
define WORLDTILE227 8418
define WORLDTILE228 8419
define WORLDTILE229 8420
define WORLDTILE230 8421
define WORLDTILE231 8422
define WORLDTILE232 8423
define WORLDTILE233 8424
define WORLDTILE234 8425
define WORLDTILE235 8426
define WORLDTILE236 8427
define WORLDTILE237 8428
define WORLDTILE238 8429
define WORLDTILE239 8430
define WORLDTILE240 8431
define WORLDTILE241 8432
define WORLDTILE242 8433
define WORLDTILE243 8434
define WORLDTILE244 8435
define WORLDTILE245 8436
define WORLDTILE246 8437
define WORLDTILE247 8438
define WORLDTILE248 8439
define WORLDTILE249 8440
define WORLDTILE250 8441
define WORLDTILE251 8442
define WORLDTILE252 8443
define WORLDTILE253 8444
define WORLDTILE254 8445
define WORLDTILE255 8446
define WORLDTILE256 8447

include USERDEFS.CON				// USER.CON and DEFS.CON are now combined! :P
include GAMEVARS.CON 				// Loads the majority of the defined gamevars
include DAMAGETYPES.CON			// Defines for elemental damage
include INVENTORYCHECK.CON	// Defines the inventory array for checking and setting item amounts.
include DROPS.CON						// Loads drop definitions
include SPECIAL.CON 				// Loads the majority of the key information
include SUPPORT.CON 				// Loads the Support System States
include STATES.CON 					// Loads Special States
include CHARACTERS.CON 			// Loads the character information
include PICKUPS.CON					// Loads the Pickups information
include ENEMYSTATES.CON			// Loads Enemy handling of things like AP/Portable Medikits/Inventory Items, etc

define TICSBASE 30

// Prevents in-game shade from overriding the below
spritenoshade FIRELASERP
spritenoshade GATEMISSILE_SPLIT
spritenoshade GATEMISSILE_MAIN
spritenoshade STROKEMISSILE_SPLIT
spritenoshade STROKEMISSILE_MAIN
spritenoshade PORTABLEATM
spritenoshade MONEYRADAR
spritenoshade BUBSYDIVINGSUIT
spritenoshade MYSTERYBOX
spritenoshade EXPLOSION2CUSTOM
spritenoshade HITSCANDOT
spritenoshade EYEDROP
spritenoshade ANTIDOTE
spritenoshade FOGHORN
spritenoshade ENERGYSHELL
spritenoshade ENERGYCELL_SMALL
spritenoshade ENERGYCELL_MEDIUM
spritenoshade ENERGYCELL_LARGE
spritenoshade AIRTIMEBONUS
spritenoshade AIRJUMPBONUS
spritenoshade MANTLEBONUS
spritenoshade AMMO
spritenoshade FREEZEAMMO
spritenoshade SHOTGUNAMMO
spritenoshade AMMOLOTS
spritenoshade CRYSTALAMMO
spritenoshade GROWAMMO
spritenoshade BATTERYAMMO
spritenoshade DEVISTATORAMMO
spritenoshade RPGAMMO
spritenoshade HBOMBAMMO
spritenoshade RPGSPRITE
spritenoshade SHOTGUNSPRITE
spritenoshade FIRSTGUNSPRITE
spritenoshade TRIPBOMBSPRITE
spritenoshade CHAINGUNSPRITE
spritenoshade SHRINKERSPRITE
spritenoshade FREEZESPRITE
spritenoshade DEVISTATORSPRITE
spritenoshade APREGENITEM
spritenoshade REGENITEM
spritenoshade ICONOFTHEDEFENDER
spritenoshade QUADDAMAGE
spritenoshade VAMPIREITEM
spritenoshade MAXHPUP
spritenoshade MAXAPUP
spritenoshade MAXHPAPUP
spritenoshade MAXEPUP
spritenoshade ATKUP
spritenoshade DEFUP
spritenoshade ATKDEFUP
spritenoshade SPDUP
spritenoshade PENNY
spritenoshade NICKEL
spritenoshade DIME
spritenoshade QUARTER
spritenoshade HALFDOLLAR
spritenoshade SACDOLLAR
spritenoshade ONEDOLLAR
spritenoshade TWODOLLARS
spritenoshade FIVEDOLLARS
spritenoshade TENDOLLARS
spritenoshade TWENTYDOLLARS
spritenoshade FIFTYDOLLARS
spritenoshade ONEHUNDREDDOLLARS
spritenoshade FIVEHUNDREDDOLLARS
spritenoshade ONETHOUSANDDOLLARS
spritenoshade FIVETHOUSANDDOLLARS
spritenoshade TENTHOUSANDDOLLARS
spritenoshade ONEHUNDREDTHOUSANDDOLLARS
spritenoshade ONEMILLIONDOLLARS
spritenoshade ONEBILLIONDOLLARS
spritenoshade ONETRILLIONDOLLARS
spritenoshade TWODOLLARBUNDLE
spritenoshade FIVEDOLLARBUNDLE
spritenoshade NINEDOLLARBUNDLE
spritenoshade TENDOLLARBUNDLE
spritenoshade EIGHTYDOLLARBUNDLE
spritenoshade MONEYBAG
spritenoshade COLA
spritenoshade SIXPAK
spritenoshade ATOMICHEALTH
spritenoshade SHIELD
spritenoshade SUPERSHIELD
spritenoshade COLORSHIELD
spritenoshade MEDPACK
spritenoshade SURGERYKIT
spritenoshade SURGERTKIT2
spritenoshade SWMEDIKIT
spritenoshade SWBIGMEDIKIT
spritenoshade COILS
spritenoshade JETPACK
spritenoshade FIRSTAID
spritenoshade BOOTS
spritenoshade AIRTANK
spritenoshade HOLODUKE
spritenoshade STEROIDS
spritenoshade SUPERATOM
spritenoshade ACCESSCARD
spritenoshade ACCESSCARD2
spritenoshade FORTUNECOOKIE
spritenoshade HEATSENSOR
spritenoshade LEVELRANKSTAR
spritenoshade QUADICON
spritenoshade INVULNICON
spritenoshade REGENICON
spritenoshade APREGENICON
spritenoshade RESURRECTIONCHALICE
spritenoshade SHADOWTSHIRT
spritenoshade INVULNTSHIRT
spritenoshade ONELIFETSHIRT
spritenoshade TWOLIFETSHIRT
spritenoshade CONTINUEITEM
spritenoshade SATCHEL_SMALL
spritenoshade SATCHEL_LARGE
spritenoshade HPLIFEMETER
spritenoshade APLIFEMETER
spritenoshade CHAR1ICON
spritenoshade CHAR2ICON
spritenoshade CHAR3ICON
spritenoshade CHAR4ICON
spritenoshade CHAR5ICON
spritenoshade CHAR6ICON
spritenoshade CHAR7ICON
spritenoshade CHAR8ICON
spritenoshade CHAR9ICON
spritenoshade CHAR10ICON
spritenoshade CHAR11ICON
spritenoshade CHAR12ICON
spritenoshade CHAR13ICON
spritenoshade CHAR14ICON
spritenoshade CHARBLANKICON
spritenoshade AIRBUBBLE
spritenoshade AIRBUBBLEGENERATOR
spritenoshade RPG_NOAIM
spritenoshade OCTANINE_RPG
spritenoshade GENERAL_RPG
spritenoshade COMMANDER_RPG
spritenoshade LEADER_RPG
spritenoshade BAALO_RPG
spritenoshade ZAPPER1
spritenoshade ZAPPER2
spritenoshade ZAPPER3
spritenoshade POINTERARROW
spritenoshade POWERUPICONSTRIP
spritenoshade SUNRING
spritenoshade AQUARING
spritenoshade PLASMARING
spritenoshade SPIRITRING
spritenoshade CHARMANKH
spritenoshade MIRRORSHIELD
spritenoshade EXPBADGE
spritenoshade RANKBADGE
spritenoshade MONEYBADGE
spritenoshade RIOTSHIELD
spritenoshade NYXGLOVEPAIR
spritenoshade RABBITSFOOT
spritenoshade JUMPBOOTPAIR
spritenoshade SHOCKABBOOTPAIR
spritenoshade HAPPYSHOEPAIR
spritenoshade STYLESHOEPAIR
spritenoshade CHARMSHOEPAIR
spritenoshade POWERWRIST
spritenoshade SHIKONJEWEL
spritenoshade EMPTYTANK
spritenoshade BIOMETRICBLAST1
spritenoshade BIOMETRICEXPLOSION1
spritenoshade PICKUPMULTIICON
spritenoshade SMALLENERGYDRINK
spritenoshade LARGEENERGYDRINK
spritenoshade HYPERENERGYDRINK
spritenoshade SILKCARNATION
spritenoshade RAREPIRATEDOUBLOON
spritenoshade FIXEDDICEPAIR
spritenoshade MALAKIANGEM
spritenoshade SAFELOCKBOX
spritenoshade SECRETRECIPE
spritenoshade SLURPEEMACHINE
spritenoshade STOCKOWNERSHIP
spritenoshade TRANSDIMENSIONALSAFE
spritenoshade GEMRINGSILVER
spritenoshade GEMRINGGOLD
spritenoshade HOCKEYMASK
spritenoshade GEMSTONECROWN
spritenoshade IRONRUNE
spritenoshade TWILIGHTCAPE
spritenoshade SNAKEARMBAND
spritenoshade MEDICBAG
spritenoshade SERPENTHELMET
spritenoshade ENERGYINCURMENT
spritenoshade YINYANGORB
spritenoshade LIQUIDMETALAMULET
spritenoshade MANDALABRACELET
spritenoshade AQUALUNG
spritenoshade GREENTANKCAPSULE
spritenoshade BLUETANKCAPSULE
spritenoshade REDTANKCAPSULE
spritenoshade MEMBERSHIPCARD

// Allows these sprites to give off "heat" on the NVG/VRVisor
spritenvg SCORPIONTANK
spritenvg PRESIDENTCLINTON
spritenvg STAND1
spritenvg STAND3
spritenvg STAND4
spritenvg DEALER
spritenvg DANCE1
spritenvg DANCE2
spritenvg DANCE3
spritenvg DANCE5
spritenvg DANCE6
spritenvg DANCE7
spritenvg DANCE9
spritenvg WOLFDUDE
spritenvg COP1
spritenvg COP2
spritenvg PUNKDUDE
spritenvg SITTINGDUDE
spritenvg ROBOTDOG
spritenvg ROBOTDOG2
spritenvg FEM1
spritenvg FEM2
spritenvg FEM3
spritenvg FEM4
spritenvg FEM5
spritenvg FEM6
spritenvg FEM7
spritenvg FEM9
spritenvg FEM10
spritenvg NAKED1
spritenvg PODFEM1
spritenvg ANIMEGIRL1
spritenvg ANIMEGIRL2
spritenvg ANIMEGIRL3
spritenvg ANIMEGIRL4
spritenvg EMPTYTANK

// Makes these sprites give off shadows
spriteshadow SCORPIONTANK
spriteshadow PRESIDENTCLINTON
spriteshadow STAND1
spriteshadow STAND3
spriteshadow STAND4
spriteshadow DEALER
spriteshadow DANCE1
spriteshadow DANCE2
spriteshadow DANCE3
spriteshadow DANCE5
spriteshadow DANCE6
spriteshadow DANCE7
spriteshadow DANCE9
spriteshadow WOLFDUDE
spriteshadow COP1
spriteshadow COP2
spriteshadow PUNKDUDE
spriteshadow SITTINGDUDE
spriteshadow ROBOTDOG
spriteshadow ROBOTDOG2
spriteshadow FEM1
spriteshadow FEM2
spriteshadow FEM3
spriteshadow FEM4
spriteshadow FEM5
spriteshadow FEM6
spriteshadow FEM7
spriteshadow FEM9
spriteshadow FEM10
spriteshadow NAKED1
spriteshadow PODFEM1
spriteshadow ANIMEGIRL1
spriteshadow ANIMEGIRL2
spriteshadow ANIMEGIRL3
spriteshadow ANIMEGIRL4
spriteshadow EMPTYTANK

state charactericonpulse
	ifvare mainmenu 0 addvar TEMP6 1
	ifvarg TEMP6 31 setvar TEMP6 0

	switch TEMP6
		case 24	case 25
			setvar TEMP5 -4
			break
		case 22	case 23	case 26	case 27
			setvar TEMP5 -3
			break
		case 20 case 21 case 28 case 29
			setvar TEMP5 -2
			break
		case 18 case 19 case 30 case 31
			setvar TEMP5 -1
			break
		case 0 case 1 case 16 case 17
			setvar TEMP5 0
			break
		case 2 case 3 case 14 case 15
			setvar TEMP5 1
			break
		case 4 case 5 case 12 case 13
			setvar TEMP5 2
			break
		case 6 case 7 case 10 case 11
			setvar TEMP5 3
			break
		case 8 case 9
			setvar TEMP5 4
			break
	endswitch

	addvar TEMP5 24

	setactor[THISACTOR].xrepeat TEMP5
	setactor[THISACTOR].yrepeat TEMP5
ends

eventloadactor CHAR1ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR1ICON 0 
	setactor[THISACTOR].shade -63
	ifvarn TEMP3 0
	{
		ifvare DUKE? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		ifvare mainmenu 0 ifvare DUKE? 0
		{
			ifp pshrunk nullop
			else
			{
			 ifvarg CURRENTHITPOINTS 0 // ifp palive
			 {
				ifpdistl RETRIEVEDISTANCE
				{
					ifcount 6
					{
						ifcanseetarget
						{
							setvar DUKE? 1
							redefinequote 334 DUKE ADDED TO GROUP!
							setvar fta 100 setvar ftq 334
						}
					}
				}
			 }
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR2ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR2ICON 0 
	setactor[THISACTOR].shade -63
	ifvarn TEMP3 0
	{
		ifvare JACK? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		ifvare mainmenu 0 ifvare JACK? 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar JACK? 1
								redefinequote 334 JACK ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		 state charactericonpulse
	}
enda

eventloadactor CHAR3ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

action ICONBUBSYNORMAL 0 1 1 1 1
action ICONBUBSYMASK 24 1 1 1 1

useractor notenemy CHAR3ICON 0 
	setactor[THISACTOR].shade -63
	
	setvar MISCARRAYID 103 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // BUBSY-FORM?
	ifvare MISCARRAYID_AMOUNTTEMP 0 action ICONBUBSYNORMAL 
	else ifvare MISCARRAYID_AMOUNTTEMP 1 action ICONBUBSYMASK
	
	ifvarn TEMP3 0
	{
		ifvare BUBSY? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		ifvare mainmenu 0 ifvare BUBSY? 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar BUBSY? 1
								redefinequote 334 BUBSY ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR4ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

action ICONAMICIVILIAN 0 1 1 1 1
action ICONAMISENSHI 24 1 1 1 1
action ICONAMIBALANCED 27 1 1 1 1

useractor notenemy CHAR4ICON 0 
	setactor[THISACTOR].shade -63
	
	setvar MISCARRAYID 104 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // AMI-FORM?
	ifvare MISCARRAYID_AMOUNTTEMP 0 action ICONAMICIVILIAN 
	else ifvare MISCARRAYID_AMOUNTTEMP 1 action ICONAMISENSHI 
	else ifvare MISCARRAYID_AMOUNTTEMP 2 action ICONAMIBALANCED
	
	ifvarn TEMP3 0
	{
		ifvare AMI? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		ifvare mainmenu 0 ifvare AMI? 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar AMI? 1
								redefinequote 334 AMI ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR5ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR5ICON 0 
	ifvarn TEMP3 0
	{
		ifvare LOWANG? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar LOWANG? 1
								redefinequote 334 HIGA ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR6ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR6ICON 0 
	ifvarn TEMP3 0
	{
		ifvare ESSENCE? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar ESSENCE? 1
								redefinequote 334 HIGA ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR7ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR7ICON 0 
	ifvarn TEMP3 0
	{
		ifvare TED? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar TED? 1
								redefinequote 334 TED ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR8ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR8ICON 0 
	ifvarn TEMP3 0
	{
		ifvare LISA? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar LISA? 1
								redefinequote 334 LISA ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR9ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR9ICON 0 
	ifvarn TEMP3 0
	{
		ifvare CYBANIS? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar CYBANIS? 1
								redefinequote 334 CYBANIS ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR10ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

action ICONNETHRAALIEN 0 1 1 1 1
action ICONNETHRAHUMAN 19 1 1 1 1

useractor notenemy CHAR10ICON 0 
	setactor[THISACTOR].shade -63
	
	setvar MISCARRAYID 110 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // NETHRA-FORM?
	ifvare MISCARRAYID_AMOUNTTEMP 0 action ICONNETHRAALIEN 
	else ifvare MISCARRAYID_AMOUNTTEMP 1 action ICONNETHRAHUMAN
	
	ifvarn TEMP3 0
	{
		ifvare NETHRA? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar NETHRA? 1
								redefinequote 334 CHRISTINA/NETHRA ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR11ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR11ICON 0 
	ifvarn TEMP3 0
	{
		ifvare PAULA? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar PAULA? 1
								redefinequote 334 PAULA ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR12ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR12ICON 0 
	ifvarn TEMP3 0
	{
		ifvare LORI? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar LORI? 1
								redefinequote 334 LORI ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR13ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

action ICONMINAKOCIVILIAN 0 1 1 1 1
action ICONMINAKOSENSHI 17 1 1 1 1
action ICONMINAKOBALANCED 20 1 1 1 1

useractor notenemy CHAR13ICON 0 
	setactor[THISACTOR].shade -63
	
	setvar MISCARRAYID 113 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // MINAKO-FORM?
	ifvare MISCARRAYID_AMOUNTTEMP 0 action ICONMINAKOCIVILIAN 
	else ifvare MISCARRAYID_AMOUNTTEMP 1 action ICONMINAKOSENSHI 
	else ifvare MISCARRAYID_AMOUNTTEMP 2 action ICONMINAKOBALANCED
	
	ifvarn TEMP3 0
	{
		ifvare MINAKO? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar MINAKO? 1
								redefinequote 334 MINAKO ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR14ICON
	getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR14ICON 0 
	ifvarn TEMP3 0
	{
		ifvare MYSTERY1? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar MYSTERY1? 1
								redefinequote 334 ???????? ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

eventloadactor CHAR15ICON
 getactor[THISACTOR].zvel TEMP3 setactor[THISACTOR].zvel 0 
enda

useractor notenemy CHAR15ICON 0 
	ifvarn TEMP3 0
	{
		ifvare MAKEN? 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 1
		sizeat 24 24
		setactor[THISACTOR].shade -63
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifcount 6
						{
							ifcanseetarget
							{
								setvar MAKEN? 1
								redefinequote 334 MAKEN ADDED TO GROUP!
								setvar fta 100 setvar ftq 334
							}
						}
					}
				}
			}
		}
		state charactericonpulse
	}
enda

// For using the kill-all-monsters cheat in the cheat-submenu
state killcheat
	ifvarand CHEATBITFIELD? 64
	{
		subvar CHEATBITFIELD? 64
		setvar ARRAYPOSITION 0 // Sprite IDs >.>
		whilevarn ARRAYPOSITION 16383
		{
			getactor[ARRAYPOSITION].statnum TEMPVAR
			ifvarn TEMPVAR 1024
			{
				getactor[ARRAYPOSITION].picnum TEMPVAR

				switch TEMPVAR

					case ROTATEGUN
					case SHARK
					case LIZTROOP
					case LIZTROOPSTAYPUT
					case LIZTROOPRUNNING
					case LIZTROOPDUCKING
					case LIZTROOPSHOOT
					case LIZTROOPONTOILET
					case LIZTROOPJUSTSIT
					case LIZTROOPJETPACK
					case LIZMAN
					case LIZMANSTAYPUT
					case LIZMANJUMP
					case LIZMANSPITTING
					case DRONE
					case OCTABRAIN
					case OCTABRAINSTAYPUT
					case PIGCOP
					case PIGCOPSTAYPUT
					case PIGCOPDIVE
					case RECON
					case COMMANDER
					case COMMANDERSTAYPUT
					case NEWBEAST
					case NEWBEASTSTAYPUT
					case NEWBEASTHANG
					case TANK
					case SCORPIONTANK
						getactor[ARRAYPOSITION].statnum temp
						ifvarn temp 1 setactor[ARRAYPOSITION].statnum 1
						setactorvar[ARRAYPOSITION].ACTORHP 0
						setactor[ARRAYPOSITION].extra 0
						setactor[ARRAYPOSITION].htpicnum RADIUSEXPLOSION
						setactor[ARRAYPOSITION].htextra 1
						setactor[ARRAYPOSITION].htowner PLAYERID
						break

					case BOSS1
					case BOSS1STAYPUT
					case BOSS1SHOOT
					case BOSS1LOB
					case BOSS2
					case BOSS2STAYPUT
					case BOSS2SHOOT
					case BOSS2BREATH
					case BOSS3
					case BOSS3STAYPUT
					case BOSS3LOB
					case BOSS4
					case BOSS4STAYPUT
						getactor[ARRAYPOSITION].pal temp
						ifvare temp 0 nullop
						else
						{
							getactor[ARRAYPOSITION].statnum temp
							ifvarn temp 1 setactor[ARRAYPOSITION].statnum 1
							setactorvar[ARRAYPOSITION].ACTORHP 0
							setactor[ARRAYPOSITION].extra 0
							setactor[ARRAYPOSITION].htpicnum RADIUSEXPLOSION
							setactor[ARRAYPOSITION].htextra 1
							setactor[ARRAYPOSITION].htowner PLAYERID
						}
						break

				endswitch
			}

			addvar ARRAYPOSITION 1
			ifvarg ARRAYPOSITION 16383 break
		}
	}
ends

//************************
//*Kick Damage Code START*
//************************

state playerdamagehues
	//state playerdamagehuestrength2
  
	ifvare ATTACKPICNUM FREEZEBLAST state playerdamagehues-icetype
	else ifvare ATTACKPICNUM SPIT state playerdamagehues-acidtype
	else state playerdamagehues-normaltype
  
	state playerdamagehues-shakescreen
ends

state playerdamagehues_vehicle
	state playerdamagehues-quickcalc
	setplayer[THISACTOR].pals 0 0 
	setplayer[THISACTOR].pals 1 64 
	setplayer[THISACTOR].pals 2 0
ends

//*******************************
include PLAYERDAMAGE.CON
//*******************************
//*******************************
include ACTORDAMAGE.CON
//*******************************

// Kick Damage Code END

move SHUTTLEVELS 16
actor SPACESHUTTLE TOUGH
enda

actor SATELLITE TOUGH
enda

state checkfiresteamtags
	getactor[THISACTOR].extra extrasav 
	setactor[THISACTOR].extra 1000
	ifvarg extrasav 0 setactorvar[THISACTOR].ACTORATTACK extrasav
ends

state checknonfiretags
	getactor[THISACTOR].extra extrasav 
	setactor[THISACTOR].extra 0
	ifvarg extrasav 0 setactorvar[THISACTOR].ACTORATTACK extrasav
ends

eventloadactor PIPE1
	state checknonfiretags
enda

eventloadactor PIPE2
	state checknonfiretags
enda

eventloadactor PIPE3
	state checknonfiretags
enda

eventloadactor PIPE4
	state checknonfiretags
enda

eventloadactor PIPE5
	state checknonfiretags
enda

eventloadactor PIPE6
	state checknonfiretags
enda

eventloadactor STEAM
	state checkfiresteamtags
enda

eventloadactor CEILINGSTEAM
	state checkfiresteamtags
enda

eventloadactor FIRE
	state checkfiresteamtags
enda

eventloadactor FIRE2
	state checkfiresteamtags
enda

eventloadactor FIREBARREL
	state checkfiresteamtags
enda

eventloadactor FIREVASE
	state checkfiresteamtags
enda

eventloadactor BURNING
	state checkfiresteamtags
enda

eventloadactor BURNING2
	state checkfiresteamtags
enda

eventloadactor SEENINE
	state checknonfiretags
enda

eventloadactor OOZFILTER
	state checknonfiretags
enda

eventloadactor CAMERA1 
	getactor[THISACTOR].extra extrasav 
	setactor[THISACTOR].extra 0 
enda

define WALLCLIMBER 5448
eventloadactor WALLCLIMBER
	getactor[THISACTOR].extra ACTORFLAGS
	setactor[THISACTOR].extra -1
	getactor[THISACTOR].hitag hitagsav
	getactor[THISACTOR].lotag lotagsav
enda

define SECTOREFFECTORFAKE 5149
useractor notenemy SECTOREFFECTORFAKE 0
	spriteflags 20 // Fullbright + No-Teleport
enda

state checkfreezesurfaces_1
	ifvare tempb FLOORSLIME setactor[THISACTOR].pal 22
	else ifvare tempb NEWFLOORSLIME setactor[THISACTOR].pal 22
	else ifvare tempb FLOORPLASMA setactor[THISACTOR].pal 21
	else ifvare tempb NEWFLOORPLASMA setactor[THISACTOR].pal 21
	else ifvare tempb AMOEBAACID setactor[THISACTOR].pal 22
	else ifvare tempb HOTLAVA setactor[THISACTOR].pal 10
	else ifvare tempb MEGALAVA setactor[THISACTOR].pal 10
	else ifvare tempb ULTRALAVA setactor[THISACTOR].pal 4
	else ifvare tempb HYPERMAGMA setactor[THISACTOR].pal 4
	else setactor[THISACTOR].pal tempc
ends

state deathmissileangadjust
	setactor[RETURN].ang TEMPVAR
	getactor[THISACTOR].z TEMPVAR
	setactor[RETURN].z TEMPVAR
	setactor[RETURN].owner PLAYERID
ends

state projectiles_menufreeze
	//
	ifvare mainmenu 0
	{
		getactor[THISACTOR].xvel TEMP
		ifvare TEMP 0
		{
			setthisprojectile[THISACTOR].vel PROJECTILESPEED
			setthisprojectile[THISACTOR].trail PROJECTILETRAIL
			setactor[THISACTOR].xvel ACTORXVEL
			setactor[THISACTOR].yvel ACTORYVEL
			setactor[THISACTOR].zvel ACTORZVEL
			setactor[THISACTOR].x x
			setactor[THISACTOR].y y
			setactor[THISACTOR].z z
			/*
			//addlogvar THISACTOR
			//addlogvar PROJECTILESPEED
			//addlogvar PROJECTILETRAIL
			//addlogvar ACTORXVEL
			//addlogvar ACTORYVEL
			//addlogvar ACTORZVEL
			//addlogvar x
			//addlogvar y
			//addlogvar z
			*/
		}
		getthisprojectile[THISACTOR].vel PROJECTILESPEED
		getthisprojectile[THISACTOR].trail PROJECTILETRAIL
		getactor[THISACTOR].xvel ACTORXVEL
		getactor[THISACTOR].yvel ACTORYVEL
		getactor[THISACTOR].zvel ACTORZVEL
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
	}
	else
	{
		getactor[THISACTOR].xvel TEMP
		ifvarn TEMP 0
		{
			getthisprojectile[THISACTOR].vel PROJECTILESPEED
			getthisprojectile[THISACTOR].trail PROJECTILETRAIL
			getactor[THISACTOR].xvel ACTORXVEL
			getactor[THISACTOR].yvel ACTORYVEL
			getactor[THISACTOR].zvel ACTORZVEL
			getactor[THISACTOR].x x
			getactor[THISACTOR].y y
			getactor[THISACTOR].z z
			/*
			//addlogvar THISACTOR
			//addlogvar PROJECTILESPEED
			//addlogvar PROJECTILETRAIL
			//addlogvar ACTORXVEL
			//addlogvar ACTORYVEL
			//addlogvar ACTORZVEL
			//addlogvar x
			//addlogvar y
			//addlogvar z
			*/
		}
		setthisprojectile[THISACTOR].vel 0
		setthisprojectile[THISACTOR].trail -1
		setactor[THISACTOR].xvel 0
		setactor[THISACTOR].yvel 0
		setactor[THISACTOR].zvel 0
		setactor[THISACTOR].x x
		setactor[THISACTOR].y y
		setactor[THISACTOR].z z
	}
ends

action MINDBLASTANIM -44 20 1 1 8

// Water Fountain Usage
state usewaterfountain
	ifvare CHARACTERSELECTED? 4 setvarvar TEMP6 MAXHITPOINTSATOMIC else setvarvar TEMP6 MAXHITPOINTS
	ifvarvarl CURRENTHITPOINTS TEMP6	// If Player's Health Var is less than the Maximum Var
	{
		setvarvar TEMPHEALTH MAXHITPOINTS
		ifvare CHARACTERSELECTED? 4 divvar TEMPHEALTH 50 else divvar TEMPHEALTH 100
		addvarvar CURRENTHITPOINTS TEMPHEALTH
		ifvarvarg CURRENTHITPOINTS TEMP6 setvarvar CURRENTHITPOINTS TEMP6
		state showhealing_playerhp
		setvar PLAYERHPDAMAGED? -1
		globalsound DUKE_DRINKING
		ifrnd 8
		{
			ifvare CHARACTERSELECTED? 1 globalsound DUKE_EATFOOD1
			ifvare CHARACTERSELECTED? 5 globalsound WANG_EATFOOD1
			ifvare CHARACTERSELECTED? 8 globalsound LISA_EATFOOD1
			ifvare CHARACTERSELECTED? 15 globalsound MAKEN_EATFOOD1
		}
	}
ends

state gatestroke_zvelalt
	getactor[THISACTOR].xvel TEMP4
	setactor[RETURN].xvel TEMP4
	getactor[THISACTOR].yvel TEMP4
	setactor[RETURN].yvel TEMP4
	getactor[THISACTOR].zvel TEMP4
	setactor[RETURN].zvel TEMP4
ends

onevent EVENT_GAME
	// HUBS
	
	ifvarn hubpdestination -1 ifactor APLAYER
	{
		setplayer[THISACTOR].ang hubpang
		setplayer[THISACTOR].look_ang 0
		subvar hubplayerwait 1
		ifvarl hubplayerwait 1
		{
			loadmapstate
			setactor[PLAYERID].extra 16384
			getactor[PLAYERID].extra TEMP
			setvar hubtemp 0
			whilevarn hubtemp 16384
			{
				getactor[hubtemp].statnum hubtempb
				ifvare hubtempb 4
				{
					changespritestat hubtemp 1
					setactor[hubtemp].picnum SMALLSMOKE
					setactor[hubtemp].cstat 32768
				}
				getactor[hubtemp].picnum hubpicnum
				ifvare hubpicnum SMALLSMOKE
				setactor[hubtemp].cstat 32768
				addvar hubtemp 1
			}
			setvar hubtemp 0
			whilevarn hubtemp 16384
			{
				getactor[hubtemp].picnum hubpicnum
				ifvare hubpicnum SECTOREFFECTOR
				{
					getactor[hubtemp].lotag hublotag
					ifvarg hublotag 68 ifvarl hublotag 71
					{
						getactor[hubtemp].hitag hubhitag
						getactor[hubtemp].shade hubtempb
						ifvarvare hubhitag hubpdestination
						ifvarn hubtempb 10
						{
							setactorvar[hubtemp].hubwait YES
							getplayer[THISACTOR].i hubpicnum
							getactor[hubtemp].x hubtempb
							addvarvar hubtempb hubxoff
							setplayer[THISACTOR].posx hubtempb
							setactor[hubpicnum].x hubtempb
							getactor[hubtemp].y hubtempb
							addvarvar hubtempb hubyoff
							setplayer[THISACTOR].posy hubtempb
							setactor[hubpicnum].y hubtempb
							getactor[hubtemp].z hubtempb
							addvarvar hubtempb hubzoff
							setactor[hubpicnum].z hubtempb
							subvar hubtempb 8192
							setplayer[THISACTOR].posz hubtempb
							getactor[hubtemp].sectnum hubtempb
							setplayer[THISACTOR].cursectnum hubtempb
							changespritesect hubpicnum hubtempb
							setplayer[THISACTOR].knuckle_incs 0
							setplayer[THISACTOR].kickback_pic 0
							setplayer[THISACTOR].got_access hubsavekeys
							setvar hubtemp 16383
						}
					}
				}
				addvar hubtemp 1
			}
			setvar hubpdestination -1
		}
	}
	
	ifactor SECTOREFFECTOR
	{
	ifvare hublotag 69
	{
		getplayer[THISACTOR].cursectnum hubtemp
		ifvarvare hubtemp hubmysector state SEHUBSTATE
		else setvar hubwait NO
	}
	/*
	ifvare LOTAGSAVED 80 // Place lotag 80 in middle of skybox room
	{
		getactor[THISACTOR].x skybox_x
		getactor[THISACTOR].y skybox_y
		getactor[THISACTOR].z skybox_z
		updatesectorz skybox_x skybox_y skybox_z skybox_sect
	}
	*/
	}

	// OTHER STUFF

	ifactor MONEY
	{
		cstat 32768
		ifspawnedby BOTTLE10 { ifrnd 160 killit }
		ifrnd 4 { espawn RANDOMMONEY state setdroppedmoneyowner }
		ifrnd 8 { espawn RANDOMMONEY state setdroppedmoneyowner }
		killit
	}

	ifactor JIBS6 
	{
		ifvarn SKILLSET? 1
		{
			ifspawnedby DRONE
			{
				soundonce PIPEBOMB_EXPLODE
				stopsound SQUISHED
				ifrnd 224 debris SCRAP1 1
				cstat 32768
			}
			ifspawnedby RECON
			{
				soundonce PIPEBOMB_EXPLODE
				ifrnd 144 debris SCRAP1 1
				cstat 32768
			}
			ifspawnedby TANK
			{
				soundonce PIPEBOMB_EXPLODE
				ifrnd 144 debris SCRAP1 1
				cstat 32768
			}
			ifspawnedby SCORPIONTANK
			{
				soundonce PIPEBOMB_EXPLODE
				ifrnd 144 debris SCRAP1 1
				cstat 32768
			}
			setvar SKILLSET? 1
		}
	}

	getactor[THISACTOR].picnum ACTORPICNUM
	ifvarg ACTORPICNUM 8191 ifvarl ACTORPICNUM 8352
	{
		ifvare gameover? 0
		{
			ifvare mainmenu 1 { sleeptime 1 changespritestat THISACTOR 0 } else { sleeptime 0 changespritestat THISACTOR 1 }
		}
		else
		{
			ifvarg gameovertransitiontimer 3 { sleeptime 1 changespritestat THISACTOR 0 }
		}
	}

	switch ACTORPICNUM
		case MUSICANDSFX
			ifvare MUSICANDSFX_LINKTYPE 0 // Sprites
			{
				ifvarn MUSICANDSFX_LINKID -1
				{
					getactor[MUSICANDSFX_LINKID].picnum TEMP
					ifvarvarn TEMP MUSICANDSFX_LINKPICNUM setvar MUSICANDSFX_STATUS -1
				}
			}
			ifvare MUSICANDSFX_LINKTYPE 1 // Walls [Main Wall]
			{
				ifvarn MUSICANDSFX_LINKID -1
				{
					getwall[MUSICANDSFX_LINKID].picnum TEMP2
					ifvarvarn TEMP2 MUSICANDSFX_LINKPICNUM setvar MUSICANDSFX_STATUS -1
				}
			}
			ifvare MUSICANDSFX_LINKTYPE 2 // Walls [Mask Walls]
			{
				ifvarn MUSICANDSFX_LINKID -1
				{
					getwall[MUSICANDSFX_LINKID].overpicnum TEMP2
					ifvarvarn TEMP2 MUSICANDSFX_LINKPICNUM setvar MUSICANDSFX_STATUS -1
				}
			}
			ifvare MUSICANDSFX_LINKTYPE 3 // Sector [Floor Picture]
			{
				ifvarn MUSICANDSFX_LINKID -1
				{
					getsector[MUSICANDSFX_LINKID].floorpicnum TEMP2
					ifvarvarn TEMP2 MUSICANDSFX_LINKPICNUM setvar MUSICANDSFX_STATUS -1
				}
			}
			ifvare MUSICANDSFX_LINKTYPE 4 // Sector [Ceiling Picture]
			{
				ifvarn MUSICANDSFX_LINKID -1
				{
					getsector[MUSICANDSFX_LINKID].ceilingpicnum TEMP2
					ifvarvarn TEMP2 MUSICANDSFX_LINKPICNUM setvar MUSICANDSFX_STATUS -1
				}
			}
		
			getactor[THISACTOR].sectnum TEMP ifvare TEMP -1 setvar MUSICANDSFX_STATUS -1
		
			ifvare MUSICANDSFX_STATUS -1 killit
			ifvarg debugtoggle 0
			{
				setactor[THISACTOR].cstat 0
				ifvarn MUSICANDSFX_LINKID -1
				{
					ifvare MUSICANDSFX_LINKTYPE 0 setactor[THISACTOR].pal 0
					ifvare MUSICANDSFX_LINKTYPE 1 setactor[THISACTOR].pal 22
					ifvare MUSICANDSFX_LINKTYPE 2 setactor[THISACTOR].pal 14
					ifvare MUSICANDSFX_LINKTYPE 3 setactor[THISACTOR].pal 21
					ifvare MUSICANDSFX_LINKTYPE 4 setactor[THISACTOR].pal 20
				}   
			}
			else setactor[THISACTOR].cstat 32767
			break
		
		case 563 // WATERFOUNTAIN
		case 564 // WATERFOUNTAIN+1
		case 565 // WATERFOUNTAIN+2
		case 566 // WATERFOUNTAIN+3
		case 567 // WATERFOUNTAINBROKE
			getactor[THISACTOR].htg_t 0 temp
			ifvare temp 2 state usewaterfountain
			break
		
		case WATERSPLASH2  
			getsector[THISACTOR].lotag temp
			ifvare temp 1
			{
				getsector[THISACTOR].floorpicnum tempb
				getsector[THISACTOR].ceilingpal tempc
				state checkfreezesurfaces_1
			}
			else
			ifvare temp 2
			{
				getsector[THISACTOR].ceilingpicnum tempb
				getsector[THISACTOR].floorpal tempc
				state checkfreezesurfaces_1
			}
			break
		
		case FEMMAG1
		case FEMMAG2
			state grabmagazine
			break 
		
		case REACTOR
		case REACTOR2
			ifpdistl 4097
			{
				getactor[PLAYERID].extra TEMP
				getplayer[THISACTOR].last_extra tempc
				ifvarvarl TEMP tempc
				{
					stopsound SHORT_CIRCUIT
					palfrom 0 0 0 0
					ifvare mainmenu 0
					{
						setvar MISCARRAYID 26 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // DEATHSWITCH-DELAY
						ifvare MISCARRAYID_AMOUNTTEMP 0
						{
							ifvarand CHEATBITFIELD? 32 nullop else
							{
								ifvarl INVULNTIME 1
								{
									getactorvar[PLAYERID].VEHICLEID TEMPVAR2
									ifvare TEMPVAR2 -1
									{
										ifvarg CURRENTHITPOINTS 0 setactor[PLAYERID].extra 16384
										sound SHORT_CIRCUIT
										palfrom 32 32 0 0
					
										randvar tempe 3 addvar tempe 4 // 4-7 dmg
										randvar tempd 1 addvar tempd 2 // 2-3 dmg
										randvar tempc 1 addvar tempc 0 // 0-1 dmg
					
										ifrnd 128 addvarvar tempe tempd else subvarvar tempe tempd
										ifrnd 128 addvarvar tempe tempc else subvarvar tempe tempc
										ifvarl tempe 1 setvar tempe 1
					
										getactorvar[PLAYERID].WATER? TEMP
										ifvare TEMP 1 { mulvar tempe 5 divvar tempe 2 } // 250% Damage
										ifvare TEMP 2 mulvar tempe 5 // 500% Damage
					
										mulvar tempe 2
						
										setvarvar TEMPDAMAGEVAR tempe
										state char_elecdamage_misc
										setvarvar tempe TEMPDAMAGEVAR
						
										randvar TEMP 10 addvar TEMP 120 // 120-130%
										ifpdistl 3073 { mulvarvar tempe TEMP divvar tempe 100 }
										randvar TEMP 10 addvar TEMP 120 // 120-130%
										ifpdistl 2049 { mulvarvar tempe TEMP divvar tempe 100 }
										randvar TEMP 10 addvar TEMP 120 // 120-130%
										ifpdistl 1025 { mulvarvar tempe TEMP divvar tempe 100 }
					
										//*********************
										//*Check Malakian Gems*
										//*********************
										setvarvar TEMP7 tempe
										state malakiangemcheck 
										setvarvar tempe TEMP7
					
										//****************
										//*Support System*
										//****************
										ifvarg tempe 0
										{
											setvar DAMAGEMODIFIER 1000 
					
											//**Electric Support / Nethra**
											state support-electricresist
					
											state damagemod-tempvar          
										}
					
										//*********************************
										//*Support System [ESSence Support*
										//*********************************
										ifvarg tempe 0
										{
											setvar DAMAGEMODIFIER 1000
											//**Overall Support / ESSence**
											state support-overallresist
											state damagemod-tempvar          
										}
					
										//******************
										//*Equipment System*
										//******************
										ifvarg tempe 0
										{
											setvar DAMAGEMODIFIER 1000
											// Equipment Slot #1
											ifvare PLAYEREQUIPSLOTITEM1 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #2
											ifvare PLAYEREQUIPSLOTITEM2 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #3
											ifvare PLAYEREQUIPSLOTITEM3 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #4
											ifvare PLAYEREQUIPSLOTITEM4 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #5
											ifvare PLAYEREQUIPSLOTITEM5 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #6
											ifvare PLAYEREQUIPSLOTITEM6 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #7
											ifvare PLAYEREQUIPSLOTITEM7 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											// Equipment Slot #8
											ifvare PLAYEREQUIPSLOTITEM8 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
											ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
											state damagemod-tempvar          
										}
					
										ifvarand CHEATBITFIELD? 16 { ifvarg tempe 1 { divvar tempe 1000 ifvarl tempe 1 setvar tempe 1 state cheatersound } }
					
										setvarvar TEMPDAMAGEVAR tempe
										state lisashield_misc
										setvarvar tempe TEMPDAMAGEVAR
						
										setvarvar tempb CURRENTHITPOINTS
										subvarvar tempb tempe
										ifvarl tempe 0 setvar PLAYERHPDAMAGED? -1
										else ifvarg tempe 0 setvar PLAYERHPDAMAGED? 1
										ifvarl tempb 0 setvar tempb 0
										ifvarvarg tempb MAXHITPOINTSATOMIC setvarvar tempb MAXHITPOINTSATOMIC
										setactor[PLAYERID].htpicnum -1
										setvarvar CURRENTHITPOINTS tempb
										state checkbuddhamode
										getactor[THISACTOR].picnum TEMP3
						
										ifvarn player[THISACTOR].over_shoulder_on 0
										{
											ifvarg CELLDAMAGETEMP 0
											{
											setvarvar SHOWDAMAGE CELLDAMAGETEMP
											setvar SHOWDAMAGETYPE 2
											setvarvar SHOWDAMAGEACTORID PLAYERID
											state showdamage
											}
										}
										ifvarg FULLSHIELDDAMAGE 0
										{
											setvarvar ATTACKINGACTORPICNUM TEMP3
											getactor[THISACTOR].pal TEMP
											setvarvar ATTACKINGACTORPAL TEMP
											setvar ACTORCRITICAL? 0
											setvar ATTACKERDISPLAYTIMER 0 setvar BIOSHIELDNULLDAMAGE 0
											ifvarg FULLSHIELDDAMAGE 0 setvar CELLDAMAGETIMER 0
										}
							
										ifvarn player[THISACTOR].over_shoulder_on 0
										{           
											ifvarg tempe 0
											{
											setvarvar SHOWDAMAGE tempe
											setvar SHOWDAMAGETYPE 0
											setvarvar SHOWDAMAGEACTORID PLAYERID
											state showdamage
											}
											else ifvarl tempe 0
											{
											setvarvar TEMPHEALTH tempe
											mulvar TEMPHEALTH -1
											state showhealing_playerhp
											}
										}
					
										ifvarg tempe 0
										{
											setvarvar PAINSOUNDFACTOR tempe
											state checkpainfactor
											state characterpainsounds
					
											setvarvar DAMAGEHUEFACTOR tempe
											state playerdamagehues-electrictype
						
											setvarvar ATTACKINGACTORPICNUM TEMP3
											getactor[THISACTOR].pal TEMP
											setvarvar ATTACKINGACTORPAL TEMP
											setvar ACTORCRITICAL? 0
											setvarvar PLAYERDAMAGETEMP tempe
											setactor[THISACTOR].htpicnum -1
											setvarvar TEMPHITCHARACTERVAR CHARACTERSELECTED?
											setvar ATTACKERDISPLAYTIMER 0 setvar NULLDAMAGE 0
											ifvarg tempe 0 setvar HEALTHDAMAGETIMER 0
										}
									}
									else
									{
										getactorvar[TEMPVAR2].ACTORHP TEMPVAR3
										getactorvar[TEMPVAR2].ACTORMAXHP TEMPVAR4
										ifvarg TEMPVAR3 0 setactor[TEMPVAR2].extra 16384
										sound SHORT_CIRCUIT
										palfrom 8 32 0 0
					
										randvar tempe 3 addvar tempe 4 // 4-7 dmg
										randvar tempd 1 addvar tempd 2 // 2-3 dmg
										randvar tempc 1 addvar tempc 0 // 0-1 dmg
					
										ifrnd 128 addvarvar tempe tempd else subvarvar tempe tempd
										ifrnd 128 addvarvar tempe tempc else subvarvar tempe tempc
										ifvarl tempe 1 setvar tempe 1
					
										getactorvar[PLAYERID].WATER? TEMP
										ifvare TEMP 1 { mulvar tempe 5 divvar tempe 2 } // 250% Damage
										ifvare TEMP 2 mulvar tempe 5 // 500% Damage
					
										mulvar tempe 2
					
										randvar TEMP 10 addvar TEMP 120 // 120-130%
										ifpdistl 3073 { mulvarvar tempe TEMP divvar tempe 100 }
										randvar TEMP 10 addvar TEMP 120 // 120-130%
										ifpdistl 2049 { mulvarvar tempe TEMP divvar tempe 100 }
										randvar TEMP 10 addvar TEMP 120 // 120-130%
										ifpdistl 1025 { mulvarvar tempe TEMP divvar tempe 100 }
					
										setvarvar tempb TEMPVAR3
										subvarvar tempb tempe
										ifvarl tempe 0 setvar VEHICLEHPDAMAGED? -1
										else ifvarg tempe 0 setvar VEHICLEHPDAMAGED? 1
										ifvarl tempb 0 setvar tempb 0
										mulvar TEMPVAR4 2
										ifvarvarg tempb TEMPVAR4 setvarvar tempb TEMPVAR4
										setactor[PLAYERID].htpicnum -1
										setvarvar TEMPVAR3 tempb
										setactorvar[TEMPVAR2].ACTORHP TEMPVAR3
										getactor[THISACTOR].picnum TEMP3
						
										ifvarn player[THISACTOR].over_shoulder_on 0
										{
											ifvarg tempe 0
											{
											setvarvar SHOWDAMAGE tempe
											setvar SHOWDAMAGETYPE 0
											setvarvar SHOWDAMAGEACTORID PLAYERID
											state showdamage
											}
										}
					
										ifvarg tempe 0
										{
											palfrom 16 16 0 0
						
											setvarvar ATTACKINGACTORPICNUM TEMP3
											getactor[THISACTOR].pal TEMP
											setvarvar ATTACKINGACTORPAL TEMP
											setvar ACTORCRITICAL? 0
											setvarvar PLAYERDAMAGETEMP tempe
											setactor[THISACTOR].htpicnum -1
											ifvare TEMPVAR2 -1 setvarvar TEMPHITCHARACTERVAR CHARACTERSELECTED?
											setvar ATTACKERDISPLAYTIMER 0 setvar NULLDAMAGE 0
											ifvarg tempe 0 setvar HEALTHDAMAGETIMER 0
										}
									}
								}
								else
								{
									sound INVULNITEM3
									palfrom 16 16 16 16
								}
							}
						}
					}
				}
			}
			// Support for damaging monsters/NPCs
			ifrnd 16
			{
				addvar FINDNEAR_INTERVAL 1
				ifvarg FINDNEAR_INTERVAL 1
				{
					findnearactor3d FEM1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM2 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM3 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM4 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM5 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM6 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM7 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM9 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d FEM10 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d WOMAN 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ROBOTDOG 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ROBOTDOG2 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d TOUGHGAL 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d NAKED1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d PODFEM1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d WOLFDUDE 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE2 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE3 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE5 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE6 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE7 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DANCE9 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d STAND1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DEALER 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d STAND3 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d STAND4 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d PUNKDUDE 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d COP1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d COP2 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d SITTINGDUDE 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d PRESIDENTCLINTON 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ROTATEGUN 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d SHARK 4096 REACTORACTORDMGID state reactordetectifdead 
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOP 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ANIMEGIRL1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ANIMEGIRL2 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ANIMEGIRL3 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d ANIMEGIRL4 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPSTAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPSHOOT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPDUCKING 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPJETPACK 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPRUNNING 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPJUSTSIT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZTROOPONTOILET 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d PIGCOP 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d PIGCOPDIVE 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d PIGCOPSTAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZMAN 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZMANSTAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZMANJUMP 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d LIZMANSPITTING 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d DRONE 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d OCTABRAIN 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d OCTABRAINSTAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d NEWBEAST 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d NEWBEASTSTAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d NEWBEASTJUMP 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d NEWBEASTHANG 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d COMMANDER 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d COMMANDERSTAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d TANK 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d EMPTYTANK 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d SCORPIONTANK 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS1 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS1STAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS1SHOOT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS1LOB 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS2 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS2STAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS2SHOOT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS2BREATH 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS3 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS3STAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS3LOB 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS4 4096 REACTORACTORDMGID state reactordetectifdead
					ifvare REACTORACTORDMGID -1 findnearactor3d BOSS4STAYPUT 4096 REACTORACTORDMGID state reactordetectifdead
					setvar FINDNEAR_INTERVAL 0
				}
			
				ifvarn REACTORACTORDMGID -1
				{
					getactorvar[REACTORACTORDMGID].ACTORDEATHSWITCHDELAY TEMP3
					ifvare mainmenu 0 ifvare TEMP3 0
					{
						getactorvar[REACTORACTORDMGID].ACTORINVULNTIME TEMP3
						ifvarl TEMP3 1
						{
							getactorvar[REACTORACTORDMGID].ACTORHP TEMPVAR2
							ifvarg TEMPVAR2 0 setactor[REACTORACTORDMGID].extra 16384
							sound SHORT_CIRCUIT
				
							randvar tempe 3
							addvar tempe 4
							randvar tempd 1
							addvar tempd 2
							randvar tempc 0
							addvar tempc 1
				
							ifrnd 128 addvarvar tempe tempd else subvarvar tempe tempd
							ifrnd 128 addvarvar tempe tempc else subvarvar tempe tempc
							ifvarl tempe 1 setvar tempe 1
				
							getactor[REACTORACTORDMGID].picnum TEMP2
							getactor[REACTORACTORDMGID].pal TEMP3
							ifvare TEMP2 NEWBEAST
							{
								ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
								else ifvare TEMP3 20 mulvar tempe -4
								else mulvar tempe -1
								sound ABSORB_DAMAGE
							}
							ifvare TEMP2 NEWBEASTJUMP
							{
								ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
								else ifvare TEMP3 20 mulvar tempe -4
								else mulvar tempe -1
								sound ABSORB_DAMAGE
							}
							ifvare TEMP2 NEWBEASTSTAYPUT
							{
								ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
								else ifvare TEMP3 20 mulvar tempe -4
								else mulvar tempe -1
								sound ABSORB_DAMAGE
							}
							ifvare TEMP2 NEWBEASTHANG
							{
								ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
								else ifvare TEMP3 20 mulvar tempe -4
								else mulvar tempe -1
								sound ABSORB_DAMAGE
							}
							ifvare TEMP2 BOSS4
							{
								ifvare TEMP3 24 { mulvar tempe -7 divvar tempe 4 }
								else ifvare TEMP3 0 { mulvar tempe -5 divvar tempe 4 }
								else ifvare TEMP3 3 { mulvar tempe -5 divvar tempe 4 }
								else ifvare TEMP3 9 { mulvar tempe -5 divvar tempe 4 }
								else { mulvar tempe -3 divvar tempe 4 }
								sound ABSORB_DAMAGE
							}
							ifvare TEMP2 BOSS4STAYPUT
							{
								ifvare TEMP3 24 { mulvar tempe -7 divvar tempe 4 }
								else ifvare TEMP3 0 { mulvar tempe -5 divvar tempe 4 }
								else ifvare TEMP3 3 { mulvar tempe -5 divvar tempe 4 }
								else ifvare TEMP3 9 { mulvar tempe -5 divvar tempe 4 }
								else { mulvar tempe -3 divvar tempe 4 }
								sound ABSORB_DAMAGE
							}
							ifvare TEMP2 DRONE
							{
								ifvare TEMP3 25 { mulvar tempe 5 divvar tempe 4 }
								else mulvar tempe 2
							}
				
							getactorvar[REACTORACTORDMGID].WATER? TEMP
							ifvare TEMP 1 { mulvar tempe 5 divvar tempe 2 }
							ifvare TEMP 2 mulvar tempe 5
				
							mulvar tempe 2
				
							randvar TEMP 10 addvar TEMP 120
							ifvarl REACTORDISTANCE 3073 { mulvarvar tempe TEMP divvar tempe 100 }
							randvar TEMP 10 addvar TEMP 120
							ifvarl REACTORDISTANCE 2049 { mulvarvar tempe TEMP divvar tempe 100 }
							randvar TEMP 10 addvar TEMP 120
							ifvarl REACTORDISTANCE 1025 { mulvarvar tempe TEMP divvar tempe 100 }
				
							getactorvar[REACTORACTORDMGID].ENEMYHASSHIKON? TEMPVAR2
							ifvarn TEMPVAR2 0 divvar tempe 10
				
							getactorvar[REACTORACTORDMGID].ACTORHP TEMPVAR2
							setvarvar tempb TEMPVAR2
							subvarvar tempb tempe
							ifvarl tempb 0 setvar tempb 0
							getactorvar[REACTORACTORDMGID].ACTORMAXHP TEMP2
							mulvar TEMP2 2
							ifvarvarg tempb TEMP2 setvarvar tempb TEMP2
							setactor[REACTORACTORDMGID].htpicnum -1
							setactor[REACTORACTORDMGID].htowner THISACTOR
							setvarvar TEMPVAR2 tempb
							setactorvar[REACTORACTORDMGID].ACTORHP TEMPVAR2
				
							ifvarl tempe 0 setactorvar[REACTORACTORDMGID].ACTORHPDAMAGED? -1
				
							ifvarg tempe 0
							{
								setvarvar SHOWDAMAGE tempe
								setvar SHOWDAMAGETYPE 0
								setvarvar SHOWDAMAGEACTORID REACTORACTORDMGID
								state showdamage
							}
							else ifvarl tempe 0
							{
								setvarvar ITEMSEEK REACTORACTORDMGID
								setvarvar ITEMSEEKC tempe
								mulvar ITEMSEEKC -1
								state showhealing_actorhp
							}
				
							ifvarg tempe 0
							{
								setactorvar[REACTORACTORDMGID].ACTORHPDAMAGED? 1
								state reactor_damagesounds
							}   
							else sound NODAMAGE
						}
						else sound INVULNITEM3
					}
				}
			}
			break
		
		case NATURALLIGHTNING
			getactor[THISACTOR].cstat temp
			ifvarand temp 32768 nullop
			else
			{
				ifrnd 128
				{
					ifrnd 252 state sparkstate
					ifrnd 252 state sparkstate
					ifrnd 192 state sparkstate
					ifrnd 192 state sparkstate
					ifrnd 132 state sparkstate
					ifrnd 132 state sparkstate
				}
				// Support for damaging players
				ifpdistl 1537
				{
					getactor[PLAYERID].extra TEMP
					getplayer[THISACTOR].last_extra tempc
					ifvarvarl TEMP tempc
					{
						stopsound SHORT_CIRCUIT
						palfrom 0 0 0 0
						ifvare mainmenu 0
						{
							setvar MISCARRAYID 26 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // DEATHSWITCH-DELAY
							ifvare MISCARRAYID_AMOUNTTEMP 0
							{
								ifvarand CHEATBITFIELD? 32 nullop else
								{
									ifvarl INVULNTIME 1
									{
										getactorvar[PLAYERID].VEHICLEID TEMPVAR2
										ifvare TEMPVAR2 -1
										{
											ifvarg CURRENTHITPOINTS 0 setactor[PLAYERID].extra 16384
											sound SHORT_CIRCUIT
											palfrom 16 8 8 8
						
											randvar tempe 7 addvar tempe 8 // 8-15 dmg
											randvar tempd 3 addvar tempd 4 // 4-7 dmg
											randvar tempc 1 addvar tempc 2 // 2-3 dmg
						
											ifrnd 128 addvarvar tempe tempd else subvarvar tempe tempd
											ifrnd 128 addvarvar tempe tempc else subvarvar tempe tempc
											ifvarl tempe 1 setvar tempe 1
						
											getactorvar[PLAYERID].WATER? TEMP
											ifvare TEMP 1 { mulvar tempe 5 divvar tempe 2 } // 250% Damage
											ifvare TEMP 2 mulvar tempe 5 // 500% Damage
						
											mulvar tempe 15
								
											setvarvar TEMPDAMAGEVAR tempe
											state char_elecdamage_misc
											setvarvar tempe TEMPDAMAGEVAR
							
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 1345 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 1153 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 961 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 769 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 577 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 385 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 193 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 1 { mulvarvar tempe TEMP divvar tempe 100 }
						
											//*********************
											//*Check Malakian Gems*
											//*********************
											setvarvar TEMP7 tempe
											state malakiangemcheck 
											setvarvar tempe TEMP7
						
											//****************
											//*Support System*
											//****************
											ifvarg tempe 0
											{
												setvar DAMAGEMODIFIER 1000
												//**Electric Support / Nethra**
												state support-electricresist
												state damagemod-tempvar          
											}
						
											//*********************************
											//*Support System [ESSence Support*
											//*********************************
											ifvarg tempe 0
											{
												setvar DAMAGEMODIFIER 1000
												//**Overall Support / ESSence**
												state support-overallresist
												state damagemod-tempvar          
											}
						
											//******************
											//*Equipment System*
											//******************
											ifvarg tempe 0
											{
												setvar DAMAGEMODIFIER 1000
												// Equipment Slot #1
												ifvare PLAYEREQUIPSLOTITEM1 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #2
												ifvare PLAYEREQUIPSLOTITEM2 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #3
												ifvare PLAYEREQUIPSLOTITEM3 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #4
												ifvare PLAYEREQUIPSLOTITEM4 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #5
												ifvare PLAYEREQUIPSLOTITEM5 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #6
												ifvare PLAYEREQUIPSLOTITEM6 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #7
												ifvare PLAYEREQUIPSLOTITEM7 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												// Equipment Slot #8
												ifvare PLAYEREQUIPSLOTITEM8 3 addvar DAMAGEMODIFIER -238 // Plasma Ring
												ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
												state damagemod-tempvar          
											}
						
											ifvarand CHEATBITFIELD? 16 { ifvarg tempe 1 { divvar tempe 1000 ifvarl tempe 1 setvar tempe 1 state cheatersound } }
						
											setvarvar TEMPDAMAGEVAR tempe
											state lisashield_misc
											setvarvar tempe TEMPDAMAGEVAR
							
											setvarvar tempb CURRENTHITPOINTS
											subvarvar tempb tempe
											ifvarl tempe 0 setvar PLAYERHPDAMAGED? -1
											else ifvarg tempe 0 setvar PLAYERHPDAMAGED? 1
											ifvarl tempb 0 setvar tempb 0
											ifvarvarg tempb MAXHITPOINTSATOMIC setvarvar tempb MAXHITPOINTSATOMIC
											setactor[PLAYERID].htpicnum -1
											setvarvar CURRENTHITPOINTS tempb
											state checkbuddhamode
							
											ifvarn player[THISACTOR].over_shoulder_on 0
											{
												ifvarg CELLDAMAGETEMP 0
												{
													setvarvar SHOWDAMAGE CELLDAMAGETEMP
													setvar SHOWDAMAGETYPE 2
													setvarvar SHOWDAMAGEACTORID PLAYERID
													state showdamage
												}
											}
											ifvarg FULLSHIELDDAMAGE 0
											{
												setvar ATTACKINGACTORPICNUM 4890
												getactor[THISACTOR].pal TEMP
												setvarvar ATTACKINGACTORPAL TEMP
												setvar ACTORCRITICAL? 0
												setvar ATTACKERDISPLAYTIMER 0 setvar BIOSHIELDNULLDAMAGE 0
												ifvarg FULLSHIELDDAMAGE 0 setvar CELLDAMAGETIMER 0
											}
								
											ifvarn player[THISACTOR].over_shoulder_on 0
											{
												ifvarg tempe 0
												{
													setvarvar SHOWDAMAGE tempe
													setvar SHOWDAMAGETYPE 0
													setvarvar SHOWDAMAGEACTORID PLAYERID
													state showdamage
												}
												else ifvarl tempe 0
												{
													setvarvar TEMPHEALTH tempe
													mulvar TEMPHEALTH -1
													state showhealing_playerhp
												}
											}
						
											ifvarg tempe 0
											{
												setvarvar PAINSOUNDFACTOR tempe
												state checkpainfactor
												state characterpainsounds
						
												setvarvar DAMAGEHUEFACTOR tempe
												state playerdamagehues-electrictype
								
												setvar ATTACKINGACTORPICNUM 4890
												getactor[THISACTOR].pal TEMP
												setvarvar ATTACKINGACTORPAL TEMP
												setvar ACTORCRITICAL? 0
												setvarvar PLAYERDAMAGETEMP tempe
												setactor[THISACTOR].htpicnum -1
												setvarvar TEMPHITCHARACTERVAR CHARACTERSELECTED?
												setvar ATTACKERDISPLAYTIMER 0 setvar NULLDAMAGE 0
												ifvarg tempe 0 setvar HEALTHDAMAGETIMER 0
											}
										}
										else
										{
											getactorvar[TEMPVAR2].ACTORHP TEMPVAR3
											getactorvar[TEMPVAR2].ACTORMAXHP TEMPVAR4
											ifvarg TEMPVAR3 0 setactor[TEMPVAR2].extra 16384
											sound SHORT_CIRCUIT
											palfrom 8 8 8 8
						
											randvar tempe 7 addvar tempe 8 // 8-15 dmg
											randvar tempd 3 addvar tempd 4 // 4-7 dmg
											randvar tempc 1 addvar tempc 2 // 2-3 dmg
						
											ifrnd 128 addvarvar tempe tempd else subvarvar tempe tempd
											ifrnd 128 addvarvar tempe tempc else subvarvar tempe tempc
											ifvarl tempe 1 setvar tempe 1
						
											getactorvar[PLAYERID].WATER? TEMP
											ifvare TEMP 1 { mulvar tempe 5 divvar tempe 2 } // 250% Damage
											ifvare TEMP 2 mulvar tempe 5 // 500% Damage
						
											mulvar tempe 15
								
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 1345 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 1153 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 961 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 769 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 577 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 385 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 193 { mulvarvar tempe TEMP divvar tempe 100 }
											randvar TEMP 10 addvar TEMP 120 // 120-130%
											ifpdistl 1 { mulvarvar tempe TEMP divvar tempe 100 }
						
											setvarvar tempb TEMPVAR3
											subvarvar tempb tempe
											ifvarl tempe 0 setvar VEHICLEHPDAMAGED? -1
											else ifvarg tempe 0 setvar VEHICLEHPDAMAGED? 1
											ifvarl tempb 0 setvar tempb 0
											mulvar TEMPVAR4 2
											ifvarvarg tempb TEMPVAR4 setvarvar tempb TEMPVAR4
											setactor[PLAYERID].htpicnum -1
											setvarvar TEMPVAR3 tempb
											setactorvar[TEMPVAR2].ACTORHP TEMPVAR3   
						
											ifvarn player[THISACTOR].over_shoulder_on 0
											{
												ifvarg tempe 0
												{
													setvarvar SHOWDAMAGE tempe
													setvar SHOWDAMAGETYPE 0
													setvarvar SHOWDAMAGEACTORID PLAYERID
													state showdamage
												}
											}
						
											ifvarg tempe 0
											{
												palfrom 16 16 0 0
												setvar ATTACKINGACTORPICNUM 4890
												getactor[THISACTOR].pal TEMP
												setvarvar ATTACKINGACTORPAL TEMP
												setvar ACTORCRITICAL? 0
												setvarvar PLAYERDAMAGETEMP tempe
												setactor[THISACTOR].htpicnum -1
												ifvare TEMPVAR2 -1 setvarvar TEMPHITCHARACTERVAR CHARACTERSELECTED?
												setvar ATTACKERDISPLAYTIMER 0 setvar NULLDAMAGE 0
												ifvarg tempe 0 setvar HEALTHDAMAGETIMER 0
											}
										}
									}
									else
									{
										sound INVULNITEM3
										palfrom 16 16 16 16
									}
								}
							}
						}
					}
				}
				// Support for damaging monsters/NPCs
				ifrnd 32
				{
					addvar FINDNEAR_INTERVAL 1
					ifvarvarg FINDNEAR_INTERVAL FINDNEAR_INTERVAL_MAX
					{
						findnearactor3d FEM1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM2 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM3 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM4 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM5 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM6 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM7 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM9 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d FEM10 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d WOMAN 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ROBOTDOG 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ROBOTDOG2 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d TOUGHGAL 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d NAKED1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d PODFEM1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d WOLFDUDE 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE2 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE3 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE5 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE6 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE7 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DANCE9 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d STAND1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DEALER 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d STAND3 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d STAND4 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d PUNKDUDE 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d COP1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d COP2 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d SITTINGDUDE 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d PRESIDENTCLINTON 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ROTATEGUN 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d SHARK 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOP 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ANIMEGIRL1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ANIMEGIRL2 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ANIMEGIRL3 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d ANIMEGIRL4 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPSTAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPSHOOT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPDUCKING 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPJETPACK 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPRUNNING 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPJUSTSIT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZTROOPONTOILET 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d PIGCOP 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d PIGCOPDIVE 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d PIGCOPSTAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZMAN 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZMANSTAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZMANJUMP 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d LIZMANSPITTING 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d DRONE 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d OCTABRAIN 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d OCTABRAINSTAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d NEWBEAST 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d NEWBEASTSTAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d NEWBEASTJUMP 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d NEWBEASTHANG 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d COMMANDER 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d COMMANDERSTAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d TANK 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d EMPTYTANK 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d SCORPIONTANK 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS1 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS1STAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS1SHOOT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS1LOB 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS2 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS2STAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS2SHOOT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS2BREATH 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS3 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS3STAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS3LOB 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS4 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						ifvare LIGHTNINGACTORDMGID -1 findnearactor3d BOSS4STAYPUT 1087 LIGHTNINGACTORDMGID state lightningdetectifdead
						setvar FINDNEAR_INTERVAL 0
					}
			
					ifvarn LIGHTNINGACTORDMGID -1
					{
			
						getactorvar[LIGHTNINGACTORDMGID].ACTORDEATHSWITCHDELAY TEMP3
						ifvare mainmenu 0 ifvare TEMP3 0
						{
							getactorvar[LIGHTNINGACTORDMGID].ACTORINVULNTIME TEMP3
							ifvarl TEMP3 1
							{
								getactorvar[LIGHTNINGACTORDMGID].ACTORHP TEMPVAR2
								ifvarg TEMPVAR2 0 { setactor[LIGHTNINGACTORDMGID].extra 16384 }
								sound SHORT_CIRCUIT 
				
								randvar tempe 7
								addvar tempe 8
								randvar tempd 3
								addvar tempd 4
								randvar tempc 1
								addvar tempc 2
				
								ifrnd 128 addvarvar tempe tempd else subvarvar tempe tempd
								ifrnd 128 addvarvar tempe tempc else subvarvar tempe tempc
								ifvarl tempe 1 setvar tempe 1
				
								getactor[LIGHTNINGACTORDMGID].picnum TEMP2
								getactor[LIGHTNINGACTORDMGID].pal TEMP3
								ifvare TEMP2 NEWBEAST
								{
									ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
									else ifvare TEMP3 20 mulvar tempe -4
									else mulvar tempe -1
									sound ABSORB_DAMAGE
								}
								ifvare TEMP2 NEWBEASTJUMP
								{
									ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
									else ifvare TEMP3 20 mulvar tempe -4
									else mulvar tempe -1
									sound ABSORB_DAMAGE
								}
								ifvare TEMP2 NEWBEASTSTAYPUT
								{
									ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
									else ifvare TEMP3 20 mulvar tempe -4
									else mulvar tempe -1
									sound ABSORB_DAMAGE
								}
								ifvare TEMP2 NEWBEASTHANG
								{
									ifvare TEMP3 17 { mulvar tempe -5 divvar tempe 2 }
									else ifvare TEMP3 20 mulvar tempe -4
									else mulvar tempe -1
									sound ABSORB_DAMAGE
								}
								ifvare TEMP2 BOSS4
								{
									ifvare TEMP3 24 { mulvar tempe -7 divvar tempe 4 }
									else ifvare TEMP3 0 { mulvar tempe -5 divvar tempe 4 }
									else ifvare TEMP3 3 { mulvar tempe -5 divvar tempe 4 }
									else ifvare TEMP3 9 { mulvar tempe -5 divvar tempe 4 }
									else { mulvar tempe -3 divvar tempe 4 }
									sound ABSORB_DAMAGE
								}
								ifvare TEMP2 BOSS4STAYPUT
								{
									ifvare TEMP3 24 { mulvar tempe -7 divvar tempe 4 }
									else ifvare TEMP3 0 { mulvar tempe -5 divvar tempe 4 }
									else ifvare TEMP3 3 { mulvar tempe -5 divvar tempe 4 }
									else ifvare TEMP3 9 { mulvar tempe -5 divvar tempe 4 }
									else { mulvar tempe -3 divvar tempe 4 }
									sound ABSORB_DAMAGE
								}
								ifvare TEMP2 DRONE
								{
									ifvare TEMP3 25 { mulvar tempe 5 divvar tempe 4 }
									else mulvar tempe 2
								}
				
								getactorvar[LIGHTNINGACTORDMGID].WATER? TEMP
								ifvare TEMP 1 { mulvar tempe 5 divvar tempe 2 }
								ifvare TEMP 2 mulvar tempe 5
				
								mulvar tempe 15
				
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 1345 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 1153 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 961 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 769 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 577 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 385 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 193 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 10 addvar TEMP 120
								ifvarl LIGHTNINGDISTANCE 1 { mulvarvar tempe TEMP divvar tempe 100 }
				
								getactorvar[LIGHTNINGACTORDMGID].ENEMYHASSHIKON? TEMPVAR2
								ifvarn TEMPVAR2 0 divvar tempe 10
				
								getactorvar[LIGHTNINGACTORDMGID].ACTORHP TEMPVAR2
								setvarvar tempb TEMPVAR2
								subvarvar tempb tempe
								ifvarl tempb 0 setvar tempb 0
								getactorvar[LIGHTNINGACTORDMGID].ACTORMAXHP TEMP2
								mulvar TEMP2 2
								ifvarvarg tempb TEMP2 setvarvar tempb TEMP2
								setactor[LIGHTNINGACTORDMGID].htpicnum -1
								setactor[LIGHTNINGACTORDMGID].htowner THISACTOR
								setvarvar TEMPVAR2 tempb
								setactorvar[LIGHTNINGACTORDMGID].ACTORHP TEMPVAR2
				
								ifvarl tempe 0 setactorvar[LIGHTNINGACTORDMGID].ACTORHPDAMAGED? -1
				
								ifvarg tempe 0
								{
									setvarvar SHOWDAMAGE tempe
									setvar SHOWDAMAGETYPE 0
									setvarvar SHOWDAMAGEACTORID LIGHTNINGACTORDMGID
									state showdamage
								}
								else ifvarl tempe 0
								{
									setvarvar ITEMSEEK LIGHTNINGACTORDMGID
									setvarvar ITEMSEEKC tempe
									mulvar ITEMSEEKC -1
									state showhealing_actorhp
								}
				
								ifvarg tempe 0
								{
									setactorvar[LIGHTNINGACTORDMGID].ACTORHPDAMAGED? 1
									state lightning_damagesounds
								}   
								else sound NODAMAGE
							}
							else sound INVULNITEM3
						}
			
					}
			
				}
			}
			break
		
		/*
		case SECTOREFFECTOR
			ifvare SKILLSET? 0
			{
				espawn SECTOREFFECTORFAKE
				setactor[RETURN].xrepeat 64
				setactor[RETURN].yrepeat 64
				setactor[RETURN].pal 0
				setvar SKILLSET? 1
			}
			break
		*/
		
		case ACTIVATOR
		case TOUCHPLATE
		case ACTIVATORLOCKED
		case LOCATORS
		case CYCLER
		case MASTERSWITCH
		case RESPAWN
		case GPSPEED
		case SECTOREFFECTORFAKE
			ifvarg debugtoggle 0 setactor[THISACTOR].cstat 0 else setactor[THISACTOR].cstat 32767
			break
		
		case FOOTPRINTS
		case FOOTPRINTS2
		case FOOTPRINTS3
		case FOOTPRINTS4
			getactor[THISACTOR].pal temp
			ifvare temp 0
			{
				setvar temp 20
				setactor[THISACTOR].pal temp
			}
			getsector[THISACTOR].lotag temp
			ifvare temp 1 killit // In-Water Sector
			else ifvare temp 2 killit // Underwater Sector
			break

			case BLOODPOOL
		case NEWBLOODPOOL
			getactor[THISACTOR].pal temp
			ifvare temp 0
			{
				setvar temp 2
				setactor[THISACTOR].pal temp
			}
			getsector[THISACTOR].lotag temp
			ifvare temp 1 killit // In-Water Sector
			else ifvare temp 2 killit // Underwater Sector
			break
		
		case WALLCLIMBER
			/*
			// Multi-sided Climber [ropes, vines, poles]
			ifvare ACTORFLAGS 4 // Extra = "4"
			{
				ifvare SKILLSET? 0 // Unactivated
				{
					setvar SKILLSET? 1 // Activate :P
					setactor[THISACTOR].cstat 32768 // Make invisible
					setvar temp 0 // Prepare to set an array search
					whilevarn temp 16384 // Will search SpIDs 0 to 16383
					{
						getactor[temp].picnum picnum // Looks for the tile # to find another 'wallclimber' sprite
						ifvare picnum WALLCLIMBER ifvarvarn temp THISACTOR // if one is found that is also NOT the player's spriteid...
						{
							getactorvar[temp].ACTORFLAGS tempb // Check the 'extra' flags to see if they match the current wallclimber
							ifvare tempb 4 // it is another multi-sided wallclimber
							{
								getactorvar[temp].hitagsav tempc // checks the hitag of the other
								ifvarvare hitagsav tempc // if it is the other of the pair
								{
									setvarvar myspawner temp
									setvar SKILLSET? 1
									setvar temp 16383 // we can stop the loop now
									getactor[THISACTOR].z z
									getactor[myspawner].z mz
									ifvarvarg z mz 
									{
										setvar mtype 1 // the bottom of the wallclimber
										setvarvar TOPOFWALL? mz
									}
								}
							}
						}
						addvar temp 1
					}
					ifvare myspawner -1 { setvarvar fta fta_normal setvar ftq 125 }
				}
				ifvare mtype 1 // Bottom of the Ladder
				{
					getplayer[THISACTOR].posz mz
					ifp pducking subvar mz 4096
					getactor[THISACTOR].z z
					ifvarvarg mz TOPOFWALL? ifvarvarl mz z
					{
						getplayer[THISACTOR].i target
						ldist xydist THISACTOR target
			
						// ifangdiffl 384
						ifvarl xydist 448 // 384 384 / 192 512
						{
							ifvare ONAWALL? 0
							{
								setvar WALLTYPE 4
								getplayer[THISACTOR].posx CLIMBWALLX
								getplayer[THISACTOR].posy CLIMBWALLY
								getactor[THISACTOR].x CLIMBWALLIDX
								getactor[THISACTOR].y CLIMBWALLIDY
							}
							getactorvar[PLAYERID].VEHICLEID TEMPVAR
							ifvare TEMPVAR -1 setvar ONAWALL? 3
							ifvarn lotagsav 0 setvarvar WALLCLIMBSOUND lotagsav else setvar WALLCLIMBSOUND -1
						}
					}
				}
			
				ifvarg debugtoggle 0 setactor[THISACTOR].cstat 0
				else setactor[THISACTOR].cstat 32767
			}
			*/
			// One-sided Climber
			ifvare ACTORFLAGS 1 // Extra = "1"
			{
				ifvare SKILLSET? 0 // Unactivated
				{
					setvar SKILLSET? 1 // Activate :P
					setactor[THISACTOR].cstat 32768 // Make invisible
					setvar temp 0 // Prepare to set an array search
					whilevarn temp 16384 // Will search SpIDs 0 to 16383
					{
						getactor[temp].picnum picnum // Looks for the tile # to find another 'wallclimber' sprite
						ifvare picnum WALLCLIMBER ifvarvarn temp THISACTOR // if one is found that is also NOT the player's spriteid...
						{
							getactorvar[temp].ACTORFLAGS tempb // Check the 'extra' flags to see if they match the current wallclimber
							ifvare tempb 1 // it is another 1-sided wallclimber
							{
								getactorvar[temp].hitagsav tempc // checks the hitag of the other
								ifvarvare hitagsav tempc // if it is the other of the pair
								{
									setvarvar myspawner temp
									setvar SKILLSET? 1
									setvar temp 16383 // we can stop the loop now
									getactor[THISACTOR].z z
									getactor[myspawner].z mz
									ifvarvarg z mz 
									{
										setvar mtype 1 // the bottom of the wallclimber
										setvarvar TOPOFWALL? mz
									}
								}
							}
						}
						addvar temp 1
					}
					ifvare myspawner -1 { setvarvar fta fta_normal setvar ftq 125 }
				}
				ifvare mtype 1 // Bottom of the Ladder
				{
					getplayer[THISACTOR].posz mz
					ifp pducking subvar mz 4096
					getactor[THISACTOR].z z
					ifvarvarg mz TOPOFWALL? ifvarvarl mz z
					{
						getplayer[THISACTOR].i target
						ldist xydist THISACTOR target
			
						ifangdiffl 384 ifvarl xydist 384 // 384 384 / 192 512
						{
							ifvare ONAWALL? 0
							{
								setvar WALLTYPE 1
								getplayer[THISACTOR].posx CLIMBWALLX
								getplayer[THISACTOR].posy CLIMBWALLY
								getactor[THISACTOR].x CLIMBWALLIDX
								getactor[THISACTOR].y CLIMBWALLIDY
							}
																getactorvar[PLAYERID].VEHICLEID TEMPVAR
							ifvare TEMPVAR -1 setvar ONAWALL? 3
							ifvarn lotagsav 0 setvarvar WALLCLIMBSOUND lotagsav else setvar WALLCLIMBSOUND -1
						}
					}
				}
			
				ifvarg debugtoggle 0 setactor[THISACTOR].cstat 0
				else setactor[THISACTOR].cstat 32767
			}
			break
			
		case HEAVYHBOMB
		case MORTER
			state pipebomb-checkfloor
			break
		
		case FREEZEBLAST
		state freezeblast-freezefloors
			ifvare mainmenu 0
			{
				getactor[THISACTOR].xvel TEMP
				ifvare TEMP 1
				{
					setthisprojectile[THISACTOR].vel PROJECTILESPEED
					setthisprojectile[THISACTOR].trail PROJECTILETRAIL
					setactor[THISACTOR].xvel ACTORXVEL
					setactor[THISACTOR].yvel ACTORYVEL
					setactor[THISACTOR].zvel ACTORZVEL
					setactor[THISACTOR].x x
					setactor[THISACTOR].y y
					setactor[THISACTOR].z z
					/*
					//addlogvar THISACTOR
					//addlogvar PROJECTILESPEED
					//addlogvar PROJECTILETRAIL
					//addlogvar ACTORXVEL
					//addlogvar ACTORYVEL
					//addlogvar ACTORZVEL
					//addlogvar x
					//addlogvar y
					//addlogvar z
					*/
				}
				getthisprojectile[THISACTOR].vel PROJECTILESPEED
				getthisprojectile[THISACTOR].trail PROJECTILETRAIL
				getactor[THISACTOR].xvel ACTORXVEL
				getactor[THISACTOR].yvel ACTORYVEL
				getactor[THISACTOR].zvel ACTORZVEL
				getactor[THISACTOR].x x
				getactor[THISACTOR].y y
				getactor[THISACTOR].z z
			}
			else
			{
				getactor[THISACTOR].xvel TEMP
				ifvarn TEMP 1
				{
					getthisprojectile[THISACTOR].vel PROJECTILESPEED
					getthisprojectile[THISACTOR].trail PROJECTILETRAIL
					getactor[THISACTOR].xvel ACTORXVEL
					getactor[THISACTOR].yvel ACTORYVEL
					getactor[THISACTOR].zvel ACTORZVEL
					getactor[THISACTOR].x x
					getactor[THISACTOR].y y
					getactor[THISACTOR].z z
					/*
					//addlogvar THISACTOR
					//addlogvar PROJECTILESPEED
					//addlogvar PROJECTILETRAIL
					//addlogvar ACTORXVEL
					//addlogvar ACTORYVEL
					//addlogvar ACTORZVEL
					//addlogvar x
					//addlogvar y
					//addlogvar z
					*/
				}
				setthisprojectile[THISACTOR].vel 1
				setthisprojectile[THISACTOR].trail -1
				setactor[THISACTOR].xvel 1
				setactor[THISACTOR].yvel 1
				setactor[THISACTOR].zvel 1
				setactor[THISACTOR].x x
				setactor[THISACTOR].y y
				setactor[THISACTOR].z z
			}
			break
			
		case RPG
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case BIOMETRICBLAST1
			state itemfullbright
			state projectiles_menufreeze
			setvarvar TEMPVAR5 CURRENTBIOSHIELDPOWER
			divvarvar TEMPVAR5 MAXHITPOINTS
			ifvarl TEMPVAR5 16 { setthisprojectile[THISACTOR].pal 0 }
			else ifvarg TEMPVAR5 15 ifvarl TEMPVAR5 64 { setthisprojectile[THISACTOR].pal 17 }
			else ifvarg TEMPVAR5 63 ifvarl TEMPVAR5 256 { setthisprojectile[THISACTOR].pal 23 }
			else ifvarg TEMPVAR5 255 ifvarl TEMPVAR5 1024 { setthisprojectile[THISACTOR].pal 21 }
			else ifvarg TEMPVAR5 1023 { setthisprojectile[THISACTOR].pal 20 }
			ifvare mainmenu 0
			{
				addvar tempe 1
				ifvarg tempe 129 killit
			}
			break
		
		case FIRELASER 
		case FIRELASERP
			state itemfullbright
			state projectiles_menufreeze
			ifvare mainmenu 0
			{
				addvar tempe 1
				ifvarg tempe 129 killit
			}
			break
			
		case SPIT
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case SHRINKER
		case SHRINKSPARK
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case RPG_NOAIM
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case COOLEXPLOSION1
			// Try to make projectile disappear fully when hitting a PK-Shielded player.
			findnearsprite APLAYER 512 TEMP
			ifvarn TEMP -1 // If it's a player, check for PKShield
			{
				ifnotmoving
				{
					ifvarand PLAYERSTATUS? 1024 // PK Shield
					{
						getactor[THISACTOR].htg_t 0 DEFLECTATTACK_FRAME
						getactor[THISACTOR].x DEFLECTATTACK_X
						getactor[THISACTOR].y DEFLECTATTACK_Y
						getactor[THISACTOR].z DEFLECTATTACK_Z
						getactor[THISACTOR].ang DEFLECTATTACK_ANGLE
						ifvare PKSHIELDHITTYPE 1
						{
							eshoot COOLEXPLOSION1
							setactor[RETURN].owner TEMP
							setactor[RETURN].htg_t 0 DEFLECTATTACK_FRAME
							setactor[RETURN].x DEFLECTATTACK_X
							setactor[RETURN].y DEFLECTATTACK_Y
							setactor[RETURN].z DEFLECTATTACK_Z
							randvar TEMP2 1024
							ifrnd 128 mulvar TEMP2 -1
							setactor[RETURN].zvel TEMP2
							addvar DEFLECTATTACK_ANGLE 1024
							randvar TEMPVAR3 128
							ifrnd 128 addvarvar DEFLECTATTACK_ANGLE TEMPVAR3 else subvarvar DEFLECTATTACK_ANGLE TEMPVAR3
							setactor[RETURN].ang DEFLECTATTACK_ANGLE
						}
						ifvarl DEFLECTATTACK_FRAME 3 killit
					}
			
					// Deletes "stuck" Mindblasts after 1/3 of a second so they don't play their annoying sounds over and over :P
					addvar tempe 1
					ifvarg tempe 9 ifrnd 64 killit
				}
			}
			else // If it's another object [i.e. enemy], check for it's PK Shield if any
			{
				ifnotmoving
				{
					getactorvar[TEMP].ACTORSTATUS? TEMP3
					ifvarand TEMP3 1024 killit // PK Shield
				}
			} 
			break
		
		case OCTANINE_RPG
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case GENERAL_RPG
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case COMMANDER_RPG
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case LEADER_RPG
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case BAALO_RPG
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case ZAPPER1
			state itemfullbright
			state projectiles_menufreeze
			ifvare mainmenu 0
			{
				addvar sparkcount1 1
				ifvarg sparkcount1 4
				{
					state sparkstate
					ifrnd 128 state sparkstate
					ifrnd 64 state sparkstate
					setvar sparkcount1 0
				}
			}
			break
		
		case ZAPPER2
			state itemfullbright
			state projectiles_menufreeze
			ifvare mainmenu 0
			{
				addvar sparkcount1 1
				ifvarg sparkcount1 4
				{
					state sparkstate
					ifrnd 128 state sparkstate
					ifrnd 64 state sparkstate
					setvar sparkcount1 0
				}
			}
		 break
		
		case ZAPPER3
			state itemfullbright
			state projectiles_menufreeze
			ifvare mainmenu 0
			{
				addvar sparkcount1 1
				ifvarg sparkcount1 4
				{
					state sparkstate
					ifrnd 128 state sparkstate
					ifrnd 64 state sparkstate
					setvar sparkcount1 0
				}
			}
			break
		
		case GATEMISSILE_SPLIT
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case GATEMISSILE_MAIN
			state itemfullbright
			state projectiles_menufreeze
			ifvarg DEATHMISSILEACTIVATED 0
			{
				getactor[THISACTOR].htg_t 9 TEMP3
				// Top Middle
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 0
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop -96
				
				// Bottom Middle
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 0
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop 96
				
				// Top Left Missile
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 16
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop -128
				
				// Bottom Left Missile
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 16
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop 128
				
				// Top Right Missile
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -16
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop -128
				
				// Bottom Right Missile
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -16
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop 128
				
				
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 32
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop -64
				
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 32
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop 64
				
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -32
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop -64
				
				ezshoot TEMP3 GATEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -32
				state deathmissileangadjust
				setactor[RETURN].extra 105
				state gatestroke_zvelalt
				setthisprojectile[RETURN].drop 64
				
				espawn EXPLOSION2CUSTOM
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				setactor[RETURN].xrepeat 10
				setactor[RETURN].yrepeat 10
				sound GATEMISSILE_EXPLODE
			
				killit
			}
			break
		
		case STROKEMISSILE_SPLIT
			state itemfullbright
			state projectiles_menufreeze
			break
		
		case STROKEMISSILE_MAIN
			state itemfullbright
			state projectiles_menufreeze
			ifvarg DEATHMISSILEACTIVATED 0
			{
				getactor[THISACTOR].htg_t 9 TEMP3
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 16
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -16
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 32
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -32
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 48
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -48
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 64
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -64
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 80
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -80
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 8
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -8
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 24
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -24
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 40
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -40
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 56
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -56
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 72
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -72
				state deathmissileangadjust
				setthisprojectile[RETURN].drop -128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 16
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -16
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 32
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -32
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 48
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -48
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 64
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -64
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 80
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -80
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 64
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 8
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -8
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 24
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -24
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 40
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -40
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 56
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -56
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR 72
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
				ezshoot TEMP3 STROKEMISSILE_SPLIT
				getactor[THISACTOR].ang TEMPVAR
				addvar TEMPVAR -72
				state deathmissileangadjust
				setthisprojectile[RETURN].drop 128
				state gatestroke_zvelalt
				setactor[RETURN].extra 140
			
			
				espawn EXPLOSION2CUSTOM
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				state randomshrapnel
				setactor[RETURN].xrepeat 20
				setactor[RETURN].yrepeat 20
				sound STROKEMISSILE_EXPLODE
				killit
			}
			break
	endswitch


	// End Character Checking Code here
	
	ifvare mainmenu 0
	{
		ifvare oldskoolmode 0 
		{
			ifp ponsteroids
			{
				ifvare SKILLLEVEL 0 { inittimer 60 setvar SOUNDPITCH -800 }
				ifvare SKILLLEVEL 1 { inittimer 66 setvar SOUNDPITCH -720 }
				ifvare SKILLLEVEL 2 { inittimer 72 setvar SOUNDPITCH -640 }
				ifvare SKILLLEVEL 3 { inittimer 78 setvar SOUNDPITCH -560 } 
				ifvare SKILLLEVEL 4 { inittimer 84 setvar SOUNDPITCH -480 }
				ifvare SKILLLEVEL 5 { inittimer 90 setvar SOUNDPITCH -400 }
				ifvare SKILLLEVEL 6 { inittimer 96 setvar SOUNDPITCH -320 }
				ifvare SKILLLEVEL 7 { inittimer 102 setvar SOUNDPITCH -240 }
				ifvare SKILLLEVEL 8 { inittimer 108 setvar SOUNDPITCH -160 }
				ifvare SKILLLEVEL 9 { inittimer 114 setvar SOUNDPITCH -80 }
			}
			else { inittimer 120 setvar SOUNDPITCH 0 }
		}
		else { inittimer 120 setvar SOUNDPITCH 0 }
	}
	else { inittimer 120 setvar SOUNDPITCH 0 }
	
	setplayer[THISACTOR].sound_pitch SOUNDPITCH
	getuserdef[THISACTOR].overhead_on AUTOMAPMODE
	state experiencecheat
	state checkmaxsupports
	state killcheat
	state groupcheat // Scans for entry of "setvar CHARACTERCHEAT? [1, 2, 3 or 4]"
	state accquiregroup // Makes sure the proper bitfields are set when a character adds to or leaves from your group
	
	ifactor RPG
	{
		ifspawnedby LIZTROOP state setrpgsize
		else ifspawnedby PIGCOP state setrpgsize
		else ifspawnedby LIZMAN state setrpgsize
		else ifspawnedby OCTABRAIN state setrpgsize
		else ifspawnedby DRONE state setrpgsize
		else ifspawnedby TANK state setrpgsize
		else ifspawnedby SCORPIONTANK state setrpgsize
	}
	
	getactor[THISACTOR].picnum ACTORPICNUM
	getactor[THISACTOR].pal ACTORPAL
	
	switch ACTORPICNUM 
	
		case MONEY:
			state deleteoldmoney
			break
	
		case FEMMAG1
		case FEMMAG2
			changespritestat THISACTOR 1
			break
	
		case SHARK
		case ROTATEGUN
		case LIZTROOP
		case LIZTROOPSTAYPUT
		case LIZTROOPJETPACK
		case LIZTROOPDUCKING
		case LIZTROOPJUSTSIT
		case LIZTROOPONTOILET
		case LIZTROOPRUNNING
		case LIZTROOPSHOOT
		case PIGCOP
		case PIGCOPDIVE
		case PIGCOPSTAYPUT
		case LIZMAN
		case LIZMANSTAYPUT
		case LIZMANSPITTING
		case LIZMANJUMP
		case OCTABRAIN
		case OCTABRAINSTAYPUT
		case DRONE
		case COMMANDER
		case COMMANDERSTAYPUT
		case NEWBEAST
		case NEWBEASTSTAYPUT
		case NEWBEASTJUMP
		case NEWBEASTHANG
		case TANK
		case SCORPIONTANK
		case BOSS1
		case BOSS1STAYPUT
		case BOSS1SHOOT
		case BOSS1LOB
		case BOSS2
		case BOSS2STAYPUT
		case BOSS2SHOOT
		case BOSS2BREATH
		case BOSS3
		case BOSS3STAYPUT
		case BOSS3LOB
		case BOSS4
		case BOSS4STAYPUT
			ifvare gameover? 0
			{
				ifvare mainmenu 1 { sleeptime 1 ifvarl SKILLSET? 0 { changespritestat THISACTOR 0 } } else { ifvarl SKILLSET? 0 { sleeptime 0 changespritestat THISACTOR 1 } }
			}
			else
			{
				ifvarg gameovertransitiontimer 3 { sleeptime 1 ifvarl SKILLSET? 0 { changespritestat THISACTOR 0 } }
			}
			break
	
		case RECON:
			ifvare gameover? 0
			{
				ifvare mainmenu 1 { sleeptime 1 ifvarl SKILLSET? 0 { changespritestat THISACTOR 0 } } else { ifvarl SKILLSET? 0 { sleeptime 0 changespritestat THISACTOR 1 } }
			}
			else
			{
				ifvarg gameovertransitiontimer 3 { sleeptime 1 ifvarl SKILLSET? 0 { changespritestat THISACTOR 0 } }
			}
			ifai 0
			{
				addvar JETPACKSMOKEVAR 1
				ifvarg JETPACKSMOKEVAR 3
				{
					ifvare sector[THISACTOR].lotag 2 state jetpackbubbles else state jetpacksmoke
					setvar JETPACKSMOKEVAR 0
				}
				ifvare RANDOMIZERSET? 0
				{
					//readgamevar ENEMYRANDOMIZERCHANCE // CRITICAL for Randomizations on a new game or loading an unique usermap
					displayrandvar TEMPVAR8 999 addvar TEMPVAR8 1
					// addlogvar TEMPVAR8
					// addlogvar ENEMYRANDOMIZERCHANCE
					ifvarvarg TEMPVAR8 ENEMYRANDOMIZERCHANCE nullop
					else
					{
						displayrandvar TEMPVAR7 999 addvar TEMPVAR7 1
						ifvarg TEMPVAR7 0 ifvarl TEMPVAR7 151 { setactor[THISACTOR].pal 14 spritepal 14 sizeat 40 40 } // Sargeant-Driven [15%]
						else ifvarg TEMPVAR7 150 ifvarl TEMPVAR7 401 { setactor[THISACTOR].pal 21 spritepal 21 sizeat 40 40 } // Captain-Driven [25%]
						else ifvarg TEMPVAR7 400 ifvarl TEMPVAR7 1001 { setactor[THISACTOR].pal 0 spritepal 0 sizeat 40 40 } // Normal-Driven [60%]
						// addlogvar TEMPVAR7
						getactor[THISACTOR].pal TEMPVAR8 // addlogvar TEMPVAR8
					}
					addvar RANDOMIZERSET? 1
					// addlogvar RANDOMIZERSET?
				}
				ifvare SKILLSET? 0 
				{
					setvar ACTORHP RECONSTRENGTH
					state getenemylevel 
					state newenemystatcalc
					setactor[THISACTOR].extra ACTORHP
					setvarvar ARRAYPOSITION THISACTOR
					state addtomaxkills
					state getenemyid setvar SKILLSET? -1
					getactor[THISACTOR].pal TEMPVAR7 // addlogvar TEMPVAR7
				}
		
				getactor[THISACTOR].extra ACTORHP // TODO: Leave alone [RECON]
				ifvarl ACTORHP 1 // Since there is no 'ifdead' condition...
				{
					ifvare GAVEEXP? 0 // Only give awards once
					{
						randvar RANKPOINTSTEMP RECONRANKPOINTSRAND 
						addvar RANKPOINTSTEMP RECONRANKPOINTSSOLID 
						randvar EXPPTSTEMP RECONEXPERIENCERAND
						addvar EXPPTSTEMP RECONEXPERIENCE
						setvar TEMPVAR 1
						state expmulti
						state exp_given
						addkills -1
						state addtokillamounts state check_a_characters_kills
						state resetenemytimers
						setvar GAVEEXP? 1
					}
				}
			}
			break
	
		case GREENSLIME:
			ifvare gameover? 0 { ifvare mainmenu 1 sleeptime 1 } else { ifvarg gameovertransitiontimer 27 sleeptime 1 }
			ifvare SKILLSET? 0 
			{
				setvar ACTORHP 1
				setvar ACTORMAXHP 1
				setvar ACTORATTACK 1
				setvar ACTORDEFENSE 1
				setvar SKILLSET? -1
			}
			/*
			getactor[THISACTOR].htg_t 0 TEMPVAR
			// t0[-5] = frozen solid
			// t0[-4] = on the player
			// t0[-3] = dead[?]
			// t0[-2] = on top of actor [eating actor]
			// t0[-1] = Shrinking down
			// t0[0] = on ground
			// t0[1] = ?
			// t0[2] = on ceiling
			// t0[3] = ?
			*/
			break
	
	endswitch

	ifactor CAMERA1
	{
		getplayer[THISACTOR].newowner TEMP
		ifvarvare TEMP THISACTOR
		{
			ifvare extrasav 1 // Delete this line if you want all cameras to be able to do this
			{
				getinput[THISACTOR].extbits TEMP2
				ifvarand TEMP2 16 // If the player presses 'turn left'
				{
					getactor[THISACTOR].ang TEMP3 // Get the Camera's angle
					subvar TEMP3 16 // Turn it left (subtracting from an angle turns it left)
					setactor[THISACTOR].ang TEMP3 // Change it to the new value
				}
				ifvarand TEMP2 32 // If the player presses 'turn right'
				{
					getactor[THISACTOR].ang TEMP3 // Get the Camera's angle
					addvar TEMP3 16 // Turn it right (adding to an angle turns it right)
					setactor[THISACTOR].ang TEMP3 // Change it to the new value
				}
				getinput[THISACTOR].bits TEMP3
				ifvarand TEMP3 8 // 8192 
				{
					getactor[THISACTOR].shade TEMP4
					ifvarl TEMP4 124
					{
						addvar TEMP4 4
						setactor[THISACTOR].shade TEMP4
					}
				}
				ifvarand TEMP3 16 // 16384 
				{
					getactor[THISACTOR].shade TEMP4
					ifvarg TEMP4 -128
					{
						subvar TEMP4 4
						setactor[THISACTOR].shade TEMP4
					}
				}
			}
		}
	}

	getactor[THISACTOR].picnum ACTORPICNUM 
	switch ACTORPICNUM
		case MONEY:
			cstat 32768
			ifrnd 4 { espawn RANDOMMONEY state setdroppedmoneyowner }
			ifrnd 8 { espawn RANDOMMONEY state setdroppedmoneyowner }
			ifrnd 12 { espawn RANDOMMONEY state setdroppedmoneyowner }
			ifrnd 16 { espawn RANDOMMONEY state setdroppedmoneyowner }
			killit
			break
	endswitch
endevent

action ASHARKCRUZING 0 8 5 1 24
action ASHARKFLEE  0 8 5 1 10
action ASHARKATACK   0 8 5 1 6
action ASHARKSHRUNK  0 8 5 1 24
action ASHARKGROW  0 8 5 1 24
action ASHARKFROZEN  0 1 5 1 24

move SHARKVELS 24
move SHARKFASTVELS 72
move SHARKFLEEVELS 40
move SHARKGLIDEVELS 120
move SHARKUPVELS 80 -40
move SHARKDOWNVELS 80 40

move BLOODSHARKVELS 72
move BLOODSHARKFASTVELS 216
move BLOODSHARKFLEEVELS 180
move BLOODSHARKGLIDEVELS 360
move BLOODSHARKUPVELS 240 -120
move BLOODSHARKDOWNVELS 240 120

ai ENEMYSEEKITEMFORWARD ASHARKCRUZING SHARKGLIDEVELS
ai ENEMYSEEKITEMUP ASHARKCRUZING SHARKUPVELS
ai ENEMYSEEKITEMDOWN ASHARKCRUZING SHARKDOWNVELS

ai AISHARKDODGE ASHARKFLEE SHARKFASTVELS dodgebullet
ai AISHARKDODGEUP ASHARKFLEE SHARKUPVELS dodgebullet
ai AISHARKDODGEDOWN ASHARKFLEE SHARKDOWNVELS dodgebullet

ai AIBLOODSHARKDODGE ASHARKFLEE BLOODSHARKFASTVELS dodgebullet
ai AIBLOODSHARKDODGEUP ASHARKFLEE BLOODSHARKUPVELS dodgebullet
ai AIBLOODSHARKDODGEDOWN ASHARKFLEE BLOODSHARKDOWNVELS dodgebullet

state sharkdodge
	ifspritepal 24
	{
		ifrnd 128
		{
			ifrnd 85 ai AIBLOODSHARKDODGEUP
			else ifrnd 128 ai AIBLOODSHARKDODGEDOWN
			else ai AIBLOODSHARKDODGE
		}
	}
	else
	{
		ifrnd 16
		{
			ifrnd 85 ai AISHARKDODGEUP
			else ifrnd 128 ai AISHARKDODGEDOWN
			else ai AISHARKDODGE
		}
	}
ends

state getsharkspeeds
	ifmove SHARKVELS setvar ACTORSPEED 24
	else ifmove SHARKFASTVELS setvar ACTORSPEED 72
	else ifmove SHARKFLEEVELS setvar ACTORSPEED 40
	else ifmove SHARKGLIDEVELS setvar ACTORSPEED 120
	else ifmove SHARKUPVELS setvar ACTORSPEED 80
	else ifmove SHARKDOWNVELS setvar ACTORSPEED 80
	else ifmove BLOODSHARKVELS setvar ACTORSPEED 72
	else ifmove BLOODSHARKFASTVELS setvar ACTORSPEED 216
	else ifmove BLOODSHARKFLEEVELS setvar ACTORSPEED 180
	else ifmove BLOODSHARKGLIDEVELS setvar ACTORSPEED 360
	else ifmove BLOODSHARKUPVELS setvar ACTORSPEED 240
	else ifmove BLOODSHARKDOWNVELS setvar ACTORSPEED 240
	
	ifvarn ACTORSPEED 0
	{
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	}
ends

actor SHARK SHARKSTRENGTH ASHARKCRUZING SHARKVELS randomangle geth

	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 

	state actorproperangle
	state enemyfloorhurt
	state accquireenemystats
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifai 0
	{
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			//addlogvar SKILLSET?
			state rankstarbeta
			state checkbosslifemeters 
			state getenemyid setvar SKILLSET? -1
			//addlogvar SKILLSET?
		}
		
		ifvare SKILLSET? 0 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
			//addlogvar SKILLSET?
			state enemytyperandomizer
			state cstat2048toeliteflag
			state rankstarbeta
			ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
			{
			setvar ACTORHP SHARKSTRENGTH
			setvar ACTORMAXHP SHARKSTRENGTH
			setvar ACTORMAXAIRTIME SHARKAIRTIME
			setvar ACTORAIRTIME SHARKAIRTIME
			}
			else
			ifspritepal 24
			{
			sizeat 160 160
			setvar ACTORHP BLOODSHARKSTRENGTH
			setvar ACTORMAXAIRTIME BLOODSHARKAIRTIME
			setvar ACTORAIRTIME BLOODSHARKAIRTIME
			setvar ACTORATTACK BLOODSHARKBASEATTACK
			setvar ACTORDEFENSE BLOODSHARKBASEDEFENSE
			setvar ACTORMAXAP BLOODSHARKSTRENGTH
			setvar ACTORMAXFALLRESIST 65536
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BLOODSHARKCRITCHANCE
			setvar ACTORSURVIVALVALUE BLOODSHARKSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORSTRONGFLAGS 1
			setvar ACTORWEAKNESSFLAGS 2
			}
			else
			{
			setvar ACTORHP SHARKSTRENGTH
			setvar ACTORMAXAIRTIME SHARKAIRTIME
			setvar ACTORAIRTIME SHARKAIRTIME
			setvar ACTORATTACK SHARKBASEATTACK
			setvar ACTORDEFENSE SHARKBASEDEFENSE
			setvar ACTORMAXAP SHARKSTRENGTH
			setvar ACTORMAXFALLRESIST 65536
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE SHARKCRITCHANCE
			setvar ACTORSURVIVALVALUE SHARKSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORSTRONGFLAGS 2
			setvar ACTORWEAKNESSFLAGS 1
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters 
			state getenemyid setvar SKILLSET? -1
			//addlogvar SKILLSET?
		}
		state enemy_underwater-space
	}

	getactor[THISACTOR].htowner temp 
	ifvarvarn temp THISACTOR
	{
		getactor[THISACTOR].htextra temp
		ifvarg temp -1 
		{
		state status_attack_damage_control 
		} 
	}
	
	ifbulletnear
	{
		ifvarand ACTORSTATUS? 16
		{
			ifvarand ACTORSTATUS? 128
			{
				ifrnd 16 state sharkdodge
			}
			else
			{
				ifrnd 25 state sharkdodge
			}
		}
		else
		{
			ifvarand ACTORSTATUS? 128
			{
				ifrnd 160 state sharkdodge
			}
			else state sharkdodge
		}
	}

	ifaction ASHARKSHRUNK
	{
		ifcount SHRUNKDONECOUNT
			action ASHARKCRUZING
		else 
			ifcount SHRUNKCOUNT
				{ ifspritepal 24 { sizeto 160 160 setvar SHRUNK? 0 } else { sizeto 60 60 setvar SHRUNK? 0 } }
		else
			state genericshrunkcode
		break
	}
	else ifaction ASHARKGROW
	{
		ifcount SHRUNKDONECOUNT
			action ASHARKCRUZING
		else
			ifcount SHRUNKCOUNT
				{ sizeto 24 24 setvar SHRUNK? 0 }
		else
			state genericgrowcode
	}
	else ifaction ASHARKFROZEN
	{
		// move 0
		ifvare mainmenu 0 fall
	
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
	
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ASHARKFLEE
			state unfreeze
			break
		}
		else
		{
			ifvarl FROZENTIMER 39 ifactioncount 26 resetactioncount
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST break
	
			lotsofglass 30
			state frozenactor-breakcode
			state sharkawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
			ifspritepal 9 nullop else { state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_artifacts ifrnd 192 state drop_artifacts ifrnd 192 state drop_artifacts } }
			state resetenemytimers
			killit
		}
		break
	}
	else ifaction ASHARKFLEE
	{
		ifcount 16 ifrnd 48
		{
			action ASHARKCRUZING
			ifspritepal 24 { move BLOODSHARKVELS randomangle geth } else { move SHARKVELS randomangle geth }
		}
	}
	else ifaction ASHARKCRUZING
	{
		ifcansee ifcount 48 ifrnd 2 ifcanshoottarget
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536
				{
					action ASHARKATACK
					getactor[PLAYERID].z temp
					subvar temp 2048
					getactor[THISACTOR].z tempb
					ifvarvarl temp tempb // if the player is higher
					{
						ifspritepal 24 { move BLOODSHARKUPVELS faceplayerslow getv break } else { move SHARKUPVELS faceplayerslow getv break }
					}
					else
					ifvarvarg temp tempb // if the player is lower
					{
						ifspritepal 24 { move BLOODSHARKDOWNVELS faceplayerslow getv break } else { move SHARKDOWNVELS faceplayerslow getv break }
					}
					else
					{
						ifspritepal 24 { move BLOODSHARKFASTVELS faceplayerslow getv break } else { move SHARKFASTVELS faceplayerslow getv break }
					}
				}
			}
			else
			{
				action ASHARKATACK
				getactor[PLAYERID].z temp
				subvar temp 2048
				getactor[THISACTOR].z tempb
				ifvarvarl temp tempb // if the player is higher
				{
					ifspritepal 24 { move BLOODSHARKUPVELS faceplayerslow getv break } else { move SHARKUPVELS faceplayerslow getv break }
				}
				else
				ifvarvarg temp tempb // if the player is lower
				{
					ifspritepal 24 { move BLOODSHARKDOWNVELS faceplayerslow getv break } else { move SHARKDOWNVELS faceplayerslow getv break }
				}
				else
				{
					ifspritepal 24 { move BLOODSHARKFASTVELS faceplayerslow getv break } else { move SHARKFASTVELS faceplayerslow getv break }
				}
			}
		}
	
		ifcount 32 ifnotmoving
		{
			ifrnd 128
			{
				ifspritepal 24 { move BLOODSHARKVELS randomangle geth } else { move SHARKVELS randomangle geth }
			}
			else
			{
				ifspritepal 24 { move BLOODSHARKFASTVELS randomangle geth } else { move SHARKFASTVELS randomangle geth }
			}
		}
	}
	else ifaction ASHARKATACK
	{
		ifcount 4
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536
				{
					getactor[PLAYERID].z temp
					subvar temp 2048
					getactor[THISACTOR].z tempb
					ifvarvarl temp tempb // if the player is higher
					{
						ifspritepal 24 { move BLOODSHARKUPVELS faceplayerslow getv } else { move SHARKUPVELS faceplayerslow getv }
					}
					else
					ifvarvarg temp tempb // if the player is lower
					{
						ifspritepal 24 { move BLOODSHARKDOWNVELS faceplayerslow getv } else { move SHARKDOWNVELS faceplayerslow getv }
					}
					else
					{
						ifspritepal 24 { move BLOODSHARKFASTVELS faceplayerslow getv } else { move SHARKFASTVELS faceplayerslow getv }
					}
					ifpdistl 1280
					{
						ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3
						ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
			
						state miscmeleeangle_check
						ifvarvarg tempc temp ifvarvarl tempc tempb // prevents shark-bite from occuring if Shark is confused and facing AWAY from the player upclose
						{
							ifvarg CURRENTHITPOINTS 0 // ifp palive 
							{
								ifcanshoottarget
								{
									ifspritepal 24
									{
										setvar MELEEDAMAGE 180 // MELEEDAMAGE
										randvar MELEEDAMAGEVAR 60 // MELEEDAMAGE
									} 
									else
									{
										setvar MELEEDAMAGE 9 // MELEEDAMAGE
										randvar MELEEDAMAGEVAR 3 // MELEEDAMAGE
									} 
									state meleerandomdmg
				
									ifvarg CURRENTHITPOINTS 0 state getmeleedmg2
				
									ifvarg INVULNTIME 0 state invulnflash 
									else ifvarl PLAYERDAMAGE 1 state nullflash
									else
									{
										ifvarg CURRENTHITPOINTS 0 // ifp palive
										{
											ifvarg PLAYERDAMAGE 0 
											{ 
												getactorvar[PLAYERID].VEHICLEID tempvehicleid
												ifvare tempvehicleid -1
												{
													setvarvar PAINSOUNDFACTOR PLAYERDAMAGE
													state checkpainfactor
						
													state characterpainsounds
												}
												else palfrom 32 0 32
											}
										}
									}
								}
							}
							action ASHARKFLEE
							ifspritepal 24 { move BLOODSHARKFLEEVELS fleeenemy } else { move SHARKFLEEVELS fleeenemy }        
						}
					}
				}
				else
				{
					action ASHARKCRUZING
					ifspritepal 24 { move BLOODSHARKVELS randomangle geth } else { move SHARKVELS randomangle geth }
				}
			}
			else
			{
				getactor[PLAYERID].z temp
				subvar temp 2048
				getactor[THISACTOR].z tempb
				ifvarvarl temp tempb // if the player is higher
				{
					ifspritepal 24 { move BLOODSHARKUPVELS faceplayerslow getv } else { move SHARKUPVELS faceplayerslow getv }
				}
				else
				ifvarvarg temp tempb // if the player is lower
				{
					ifspritepal 24 { move BLOODSHARKDOWNVELS faceplayerslow getv } else { move SHARKDOWNVELS faceplayerslow getv }
				}
				else
				{
					ifspritepal 24 { move BLOODSHARKFASTVELS faceplayerslow getv } else { move SHARKFASTVELS faceplayerslow getv }
				}
				ifpdistl 1280
				{
					ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3
					ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
					findnearsprite APLAYER 2048 TEMP 
					ifvarn TEMP -1 
					{
						getactor[TEMP].x mx
						getactor[TEMP].y my
						getactor[THISACTOR].x x 
						getactor[THISACTOR].y y
						subvarvar mx x
						subvarvar my y
						getangle angvar mx my
						setvarvar temp angvar
						subvarvar temp 256
						setvarvar tempb angvar
						addvarvar tempb 256
					} 
					ifvarvarg angvar temp ifvarvarl angvar tempb // prevents shark-bite from occuring if Shark is confused and facing AWAY from the player upclose
					{
						ifvarg CURRENTHITPOINTS 0 // ifp palive 
						{
							ifcanshoottarget
							{
								ifspritepal 24
								{
									setvar MELEEDAMAGE 180 // MELEEDAMAGE
									randvar MELEEDAMAGEVAR 60 // MELEEDAMAGE
								} 
								else
								{
									setvar MELEEDAMAGE 9 // MELEEDAMAGE
									randvar MELEEDAMAGEVAR 3 // MELEEDAMAGE
								} 
								state meleerandomdmg
				
								ifvarg CURRENTHITPOINTS 0 state getmeleedmg2
				
								ifvarg INVULNTIME 0 state invulnflash 
								else ifvarl PLAYERDAMAGE 1 state nullflash
								else
								{
									ifvarg CURRENTHITPOINTS 0 // ifp palive
									{
										ifvarg PLAYERDAMAGE 0 
										{ 
											getactorvar[PLAYERID].VEHICLEID tempvehicleid
											ifvare tempvehicleid -1
											{
												setvarvar PAINSOUNDFACTOR PLAYERDAMAGE
												state checkpainfactor
												state characterpainsounds
											}
											else palfrom 32 0 32
										}
									}
								}
							}
						}
						action ASHARKFLEE
						ifspritepal 24 { move BLOODSHARKFLEEVELS fleeenemy } else { move SHARKFLEEVELS fleeenemy }        
					}
				}
			}
		}
		else ifnotmoving
		{
			ifcount 32
			{
				action ASHARKCRUZING
				ifspritepal 24 { move BLOODSHARKVELS randomangle geth } else { move SHARKVELS randomangle geth }
			}
		}
		else ifcount 48 ifrnd 2
		{
			action ASHARKCRUZING
			ifspritepal 24 { move BLOODSHARKFASTVELS randomangle geth } else { move SHARKFASTVELS randomangle geth }
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			ifwasweapon GROWSPARK
			{
				state expanding
				move 0
				cstat 0
				action ASHARKGROW
				sound ACTOR_GROWING
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				spritepal 1
				state frosty
				strength 0
				move 0
				action ASHARKFROZEN
				state freezeup
			}
			else
			{
				sound SQUISHED
				guts JIBS6 5
				state sharkawards
				state exp_given
				state addtokillamounts state check_a_characters_kills
				ifspritepal 9 nullop else { state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_artifacts ifrnd 192 state drop_artifacts ifrnd 192 state drop_artifacts } }
				state resetenemytimers
				killit
			}
		}
		else
		{
			ifwasweapon SHRINKSPARK
			{
				ifvarg INVULNTIME 0 state deflectshrinker
				else
				{
					ifvarand ACTORFLAGS 512
					{
						ifspritepal 24 
						{ 
							ifvare oldskoolmode 0
							{
								ifrnd 255 state deflectshrinker
								else 
								{ 
									setvar SHRUNK? 1
									action ASHARKSHRUNK
									sound ACTOR_SHRINKING
									move 0
									break
								} 
							}
							else
							{
								setvar SHRUNK? 1
								action ASHARKSHRUNK
								sound ACTOR_SHRINKING
								move 0
								break
							}
						}
						else
						{
							ifvare oldskoolmode 0
							{
								ifrnd 194 state deflectshrinker
								else 
								{ 
									setvar SHRUNK? 1
									action ASHARKSHRUNK
									sound ACTOR_SHRINKING
									move 0
									break
								}
							}
							else
							{
								setvar SHRUNK? 1
								action ASHARKSHRUNK
								sound ACTOR_SHRINKING
								move 0
								break
							}
						}
					}
					else
					{
						ifspritepal 24 
						{ 
							ifvare oldskoolmode 0
							{
								ifrnd 255 state deflectshrinker
								else 
								{ 
									setvar SHRUNK? 1
									action ASHARKSHRUNK
									sound ACTOR_SHRINKING
									move 0
									break
								} 
							}
							else
							{
								setvar SHRUNK? 1
								action ASHARKSHRUNK
								sound ACTOR_SHRINKING
								move 0
								break
							}
						}
						else
						{
							ifvare oldskoolmode 0
							{
								ifrnd 8 state deflectshrinker
								else 
								{ 
									setvar SHRUNK? 1
									action ASHARKSHRUNK
									sound ACTOR_SHRINKING
									move 0
									break
								}
							}
							else
							{
								setvar SHRUNK? 1
								action ASHARKSHRUNK
								sound ACTOR_SHRINKING
								move 0
								break
							}
						}
					}
				}
			}
			else
			{
				ifvarl ACTORINVULNTIME 1
				{
					ifvarg ACTORLASTDAMAGE 0
					{
						ifwasweapon GROWSPARK sound EXPANDERHIT
		
						ifspritepal 24
						{
							ifrnd 128 state sharkdodge
							else
							{
								action ASHARKATACK
								getactor[PLAYERID].z temp
								subvar temp 2048
								getactor[THISACTOR].z tempb
								ifvarvarl temp tempb // if the player is higher
								{
									ifspritepal 24 { move BLOODSHARKUPVELS faceplayerslow getv break } else { move SHARKUPVELS faceplayerslow getv break }
								}
								else
								ifvarvarg temp tempb // if the player is lower
								{
									ifspritepal 24 { move BLOODSHARKDOWNVELS faceplayerslow getv break } else { move SHARKDOWNVELS faceplayerslow getv break }
								}
								else
								{
									ifspritepal 24 { move BLOODSHARKFASTVELS faceplayerslow getv break } else { move SHARKFASTVELS faceplayerslow getv break }
								}
							}
						}
						else
						{
							ifrnd 85 state sharkdodge
							else
							ifrnd 128
							{
								action ASHARKATACK
								getactor[PLAYERID].z temp
								subvar temp 2048
								getactor[THISACTOR].z tempb
								ifvarvarl temp tempb // if the player is higher
								{
									ifspritepal 24 { move BLOODSHARKUPVELS faceplayerslow getv break } else { move SHARKUPVELS faceplayerslow getv break }
								}
								else
								ifvarvarg temp tempb // if the player is lower
								{
									ifspritepal 24 { move BLOODSHARKDOWNVELS faceplayerslow getv break } else { move SHARKDOWNVELS faceplayerslow getv break }
								}
								else
								{
									ifspritepal 24 { move BLOODSHARKFASTVELS faceplayerslow getv break } else { move SHARKFASTVELS faceplayerslow getv break }
								}
							}
						}
					}
					else
					{
						sound NODAMAGE
						ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
						ifwasweapon SHOTGUN spawn SMALLSMOKE
						ifwasweapon CHAINGUN spawn SMALLSMOKE
					}
					ifspritepal 24 { move BLOODSHARKVELS randomangle geth } else { move SHARKVELS randomangle geth }
				}
				else
				{
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE
				}
			}
		}
	}
	
	state getsharkspeeds
enda

action BLIMPWAITTORESPAWN
state blimphitstate
	cstat 0
	spawn FIRSTGUNSPRITE
	spawn EXPLOSION2
	
	debris SCRAP1 80      // Weapons and ammo!
	debris SCRAP2 32
	debris SCRAP3 32
	debris SCRAP4 32
	debris SCRAP5 32
	
	sound PIPEBOMB_EXPLODE
	ifrespawn
	{
		action BLIMPWAITTORESPAWN
		count 0
		cstat 32768
	}
	else
	killit
ends

actor BLIMP 1
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ifaction BLIMPWAITTORESPAWN
	{
		ifcount BLIMPRESPAWNTIME
		{
			action 0
			cstat 0
		}
		break
	}
	
	ifhitweapon
	{
		state blimphitstate
		strength 1
	}
enda

state fourrats
	ifrnd 128 spawn RAT
	ifrnd 128 spawn RAT
	ifrnd 128 spawn RAT
	ifrnd 128 spawn RAT
ends

state rats
	state fourrats
	state fourrats
ends

action RUBCANDENT 1 1 1 1 1

actor RUBBERCAN WEAK
	ifaction RUBCANDENT
	{
		ifactioncount 16
		{
			strength 0
			action ANULLACTION
			break
		}
	}
	else
	ifhitweapon
	{
		ifwasweapon RADIUSEXPLOSION
		{
			state rats
			ifrnd 48 spawn BURNING
			debris SCRAP3 12
			killit
		}
		else
			action RUBCANDENT
	}
enda

action ABURGERROTS 0 1 5
useractor notenemy DUKEBURGER PIRATEGALSTRENGTH ABURGERROTS 
	state breakobject 
enda

state body
	ifp pfacing ifpdistl 3840 ifhitspace globalsound GENERIC_AMBIENCE16
ends

useractor notenemy DCFLASK1EMPTY WEAK state breakobject enda
useractor notenemy DCFLASK1FILLED WEAK state breakobject enda
useractor notenemy DCFLASK2EMPTY WEAK state breakobject enda
useractor notenemy DCFLASK2FILLED WEAK state breakobject enda
useractor notenemy DCFLASK3EMPTY WEAK state breakobject enda
useractor notenemy DCFLASK3FILLED WEAK state breakobject enda
useractor notenemy DCVIALS1 WEAK state breakobject enda
useractor notenemy DCTUBES1 WEAK state breakobject enda
useractor notenemy DCFLASK4FILLED WEAK state breakobject enda
useractor notenemy DCFLASK5FILLED WEAK state breakobject enda
useractor notenemy DCFLASK6FILLED WEAK state breakobject enda
useractor notenemy DCTUBES2 WEAK state breakobject enda
useractor notenemy DCTUBES3 WEAK state breakobject enda
useractor notenemy MOP WEAK state breakobject enda
useractor notenemy BROOM WEAK state breakobject enda
useractor notenemy WETFLOOR WEAK state breakobject enda
useractor notenemy DESKLAMP WEAK state breakobject enda
useractor notenemy DUKECUTOUT WEAK state breakobject enda
useractor notenemy HATRACK WEAK state breakobject enda
useractor notenemy GUNPOWDERBARREL TOUGH state breakobject enda
useractor notenemy COFFEEMACHINE WEAK state breakobject enda
useractor notenemy TEDDYBEAR WEAK state breakobject enda
useractor notenemy TOPSECRET WEAK state breakobject enda

useractor notenemy ROBOTMOUSE ROBOTMOUSESTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy MAN PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy MAN2 PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy WOMAN PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATE1A PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATE2A PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATE3A PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATE4A PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATE5A PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATE6A PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy ROBOTPIRATE PIRATEGALSTRENGTH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

useractor notenemy PIRATEHALF TOUGH
	state breakobject
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
enda

eventloadactor CHESTOFGOLD
	getactor[THISACTOR].zvel ACTORFLAGS
	setactor[THISACTOR].zvel 0
enda
useractor notenemy CHESTOFGOLD WEAK
	sizeat 40 40
	state breakobject
enda

action ADOGSIT 0 2 1 1 8
action ADOGFROZEN 1
action ADOGSHRUNK 0 2 1 1 8
action ADOGGROW 0

useractor notenemy ROBOTDOG PIRATEGALSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0 
	{
		setactor[THISACTOR].cstat 257
		setvar ACTORMAXHP 120
		randvar TEMPVAR 8
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		setvarvar ACTORHP ACTORMAXHP
		
		setvar ACTORMAXAP 120
		randvar TEMPVAR 8
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 520 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST DOGNPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		sizeat 40 40
		action ADOGSIT
		state maxcivsincrease 
		setvar SKILLSET? 1 
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	
	ifaction ADOGSIT
	{
		ifvare oldskoolmode 0 ifvarn CANUSECOILS? 0 state dogsave
	}
	
	ifaction ADOGFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADOGSIT
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP DOGKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP DOGKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifaction ADOGSHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ADOGSIT
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 40 40 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADOGGROW
	{
		ifcount 32
		{
			guts JIBS4 9
			guts JIBS6 8
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP DOGKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP DOGKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				action ADOGGROW
				soundonce DEAD_DOG
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADOGFROZEN
				strength 0
				break
			}
	
			soundonce DEAD_DOG
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce WHINING_DOG
				}
				else ifwasweapon SHRINKSPARK { stopsound WHINING_DOG } else sound NODAMAGE
			}
			else
			{ 
				setactor[THISACTOR].htextra -1
				stopsound WHINING_DOG
				sound INVULNITEM3
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ADOGSHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		}
	}
	
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown 
	state enemy_general_stuff 
	state freezecode_actor
	state healingsector_actor
enda

action ADOG2SIT 0 3 1 1 8
action ADOG2FROZEN 1
action ADOG2SHRUNK 0 3 1 1 8
action ADOG2GROW 0

useractor notenemy ROBOTDOG2 PIRATEGALSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setactor[THISACTOR].cstat 257
		setvar ACTORMAXHP 120
		randvar TEMPVAR 8
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		setvarvar ACTORHP ACTORMAXHP
	
		setvar ACTORMAXAP 120
		randvar TEMPVAR 8
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 520 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST DOGNPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta 
		sizeat 40 40
		action ADOG2SIT
		state maxcivsincrease 
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state dogsave }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	
	ifaction ADOG2SIT
	{
		ifvare oldskoolmode 0 ifvarn CANUSECOILS? 0 state dogsave
	}
	
	ifaction ADOG2FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADOG2SIT
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
			ifactioncount 26
			{
				spawn WATERDRIP
				resetactioncount 
			}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP DOGKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP DOGKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifaction ADOG2SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ADOG2SIT
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 40 40 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADOG2GROW
	{
		ifcount 32
		{
			guts JIBS4 9
			guts JIBS6 8
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP DOGKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP DOGKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				action ADOG2GROW
				soundonce DEAD_DOG
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADOG2FROZEN
				strength 0
				break
			}
			soundonce DEAD_DOG
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce WHINING_DOG
				}
				else ifwasweapon SHRINKSPARK { stopsound WHINING_DOG } else sound NODAMAGE
			}
			else
			{ 
				setactor[THISACTOR].htextra -1
				stopsound WHINING_DOG
				sound INVULNITEM3
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ADOG2SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		}
	}
	
	state actorseekingitem
	state checkfallcounter_nonplayer
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

useractor notenemy PLEASEWAIT WEAK state breakobject enda
useractor notenemy FOODOBJECT1 WEAK	state breakobject enda
useractor notenemy FOODOBJECT2 WEAK	state breakobject enda
useractor notenemy FOODOBJECT3 WEAK state breakobject enda
useractor notenemy FOODOBJECT4 WEAK state breakobject enda
useractor notenemy FOODOBJECT5 WEAK state breakobject enda
useractor notenemy FOODOBJECT6 WEAK state breakobject enda
useractor notenemy FOODOBJECT7 WEAK state breakobject enda
useractor notenemy FOODOBJECT8 WEAK state breakobject enda
useractor notenemy FOODOBJECT9 WEAK state breakobject enda
useractor notenemy FOODOBJECT10 WEAK state breakobject enda
useractor notenemy FOODOBJECT11 WEAK state breakobject enda
useractor notenemy FOODOBJECT12 WEAK state breakobject enda
useractor notenemy FOODOBJECT13 WEAK state breakobject enda
useractor notenemy FOODOBJECT14 WEAK state breakobject enda
useractor notenemy FOODOBJECT15 WEAK state breakobject enda
useractor notenemy FOODOBJECT16 WEAK state breakobject enda
useractor notenemy FOODOBJECT17 WEAK state breakobject enda
useractor notenemy FOODOBJECT18 WEAK state breakobject enda
useractor notenemy FOODOBJECT19 WEAK state breakobject enda
useractor notenemy FOODOBJECT20 WEAK state breakobject enda
useractor notenemy JOLLYMEAL WEAK state breakobject enda
useractor notenemy GUMBALLMACHINE WEAK state breakobject enda
useractor notenemy GUMBALLMACHINEBROKE WEAK state breakobject enda
useractor notenemy POLICELIGHTPOLE TOUGH state breakobject enda
useractor notenemy CLOCK WEAK state breakobject enda
useractor notenemy MAILBAG WEAK state breakobject enda
useractor notenemy FEATHEREDCHICKEN WEAK state breakobject enda
useractor notenemy SKINNEDCHICKEN WEAK state breakobject enda
useractor notenemy HEADLAMP WEAK state breakobject enda
useractor notenemy DOLPHIN1 DOLPHINSTRENGTH state breakobject enda
useractor notenemy DOLPHIN2 DOLPHINSTRENGTH state breakobject enda
useractor notenemy SNAKEP MEDIUMSTRENGTH state breakobject enda
useractor notenemy GAVALS WEAK state breakobject enda
useractor notenemy GAVALS2 WEAK state breakobject enda
useractor notenemy CUPS WEAK state breakobject enda
useractor notenemy FLOORBASKET WEAK state breakobject enda
useractor notenemy METER WEAK state breakobject enda
useractor notenemy DESKPHONE WEAK state breakobject enda
useractor notenemy MACE WEAK state breakobject enda
useractor notenemy SHOPPINGCART WEAK state breakobject enda
useractor notenemy COFFEEMUG WEAK state breakobject enda

useractor notenemy PRESIDENTCLINTON MANWOMANSTRENGTH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		setvarvar ACTORHP ACTORMAXHP
		
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORATTACK 24
		setvar ACTORDEFENSE 100
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 16 16
		state rankstarbeta
		setvar SKILLSET? 1 
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	state actorseekingitem
	state breakobject 
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

useractor notenemy HERMIT TOUGH state breakobject enda
useractor notenemy VIDEO1 WEAK state breakobject enda
useractor notenemy VIDEO2 WEAK state breakobject enda
useractor notenemy VIDEO3 WEAK state breakobject enda
useractor notenemy E-GLASS WEAK state breakobject enda

useractor notenemy BODY1 WEAK 
	state body
	state breakobject 
enda

useractor notenemy BODY2 WEAK 
	state body
	state breakobject 
enda

useractor notenemy BODY3 WEAK 
	state body
	state breakobject 
enda
 
useractor notenemy OTTO TOUGH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		setvar ACTORHP TOUGH
		setvar SKILLSET? 1
		sizeat 40 40
	} 
	soundonce ENDSEQVOL2SND3
	ifvare mainmenu 0 ifpdistl 1280
	{ 
		soundonce BOS4_LAY 
		setvar MELEEDAMAGE 2
		randvar MELEEDAMAGEVAR 1
		state meleerandomdmg
		ifvarg CURRENTHITPOINTS 0 state getmeleedmg2
	  
		ifvarg INVULNTIME 0 state invulnflash 
		else ifvarl MELEEDAMAGE 1 state nullflash
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifrnd 96 state characterpainsounds
			}
		}
	}
	state breakobject 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ADANCE1DANCEFORWARDS 0 5 1 1 12
action ADANCE1DANCEBACKWARDS 4 5 1 -1 12
action ADANCE1SHRUNKFORWARDS 0 5 1 1 12
action ADANCE1SHRUNKBACKWARDS 4 5 1 -1 12
action ADANCE1GROW
action ADANCE1FROZEN

useractor notenemy DANCE1 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0 
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 20 17 // 20 20 is about Duke's Height
		action ADANCE1DANCEFORWARDS
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	setvar TEMP 0
	ifaction ADANCE1DANCEFORWARDS { addvar TEMP 1 ifactioncount 4 action ADANCE1DANCEBACKWARDS }
	else ifaction ADANCE1DANCEBACKWARDS { addvar TEMP 1 ifactioncount 4 action ADANCE1DANCEFORWARDS }
	ifvarg TEMP 0
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	setvar TEMP 0
	ifaction ADANCE1SHRUNKFORWARDS { addvar TEMP 1 ifactioncount 4 action ADANCE1SHRUNKBACKWARDS }
	else ifaction ADANCE1SHRUNKBACKWARDS { addvar TEMP 1 ifactioncount 4 action ADANCE1SHRUNKFORWARDS }
	ifvarg TEMP 0
	{
		ifcount SHRUNKDONECOUNT
		{
			ifaction ADANCE1SHRUNKFORWARDS action ADANCE1DANCEFORWARDS
			ifaction ADANCE1SHRUNKBACKWARDS action ADANCE1DANCEBACKWARDS
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 20 17 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE1GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE1FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE1DANCEFORWARDS
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ADANCE1GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADANCE1FROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
				spawn BLOOD
				ifrnd 85 soundonce MALENPC_PAIN1
				else ifrnd 128 soundonce MALENPC_PAIN2
				else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				ifaction ADANCE1DANCEFORWARDS action ADANCE1SHRUNKFORWARDS
				ifaction ADANCE1DANCEBACKWARDS action ADANCE1SHRUNKBACKWARDS
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		}
	}
	
	// state breakobject
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown 
	state enemy_general_stuff 
	state freezecode_actor
	state healingsector_actor
enda 

action ADANCE2DANCE 0 2 1 1 12
action ADANCE2SHRUNK 0 2 1 1 12
action ADANCE2GROW
action ADANCE2FROZEN

useractor notenemy DANCE2 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0 
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 24 21 // 24 24 is about correct height
		action ADANCE2DANCE
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1 
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ADANCE2DANCE
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ADANCE2SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ADANCE2DANCE
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 24 21 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE2GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE2FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE2DANCE
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }

			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action ADANCE2GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADANCE2FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
	
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ADANCE2SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}
	
	// state breakobject  state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ADANCE3DANCEFORWARDS 0 4 1 1 12
action ADANCE3DANCEBACKWARDS 3 4 1 -1 12
action ADANCE3SHRUNKFORWARDS 0 4 1 1 12
action ADANCE3SHRUNKBACKWARDS 3 4 1 -1 12
action ADANCE3GROW
action ADANCE3FROZEN

useractor notenemy DANCE3 TOUGH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 22 19 // 22 22 is about correct height
		action ADANCE3DANCEFORWARDS
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1 
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	setvar TEMP 0
	ifaction ADANCE3DANCEFORWARDS { addvar TEMP 1 ifactioncount 3 action ADANCE3DANCEBACKWARDS }
	else ifaction ADANCE3DANCEBACKWARDS { addvar TEMP 1 ifactioncount 3 action ADANCE3DANCEFORWARDS }
	ifvarg TEMP 0
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	setvar TEMP 0
	ifaction ADANCE3SHRUNKFORWARDS { addvar TEMP 1 ifactioncount 3 action ADANCE3SHRUNKBACKWARDS }
	else ifaction ADANCE3SHRUNKBACKWARDS { addvar TEMP 1 ifactioncount 3 action ADANCE3SHRUNKFORWARDS }
	ifvarg TEMP 0
	{
		ifcount SHRUNKDONECOUNT
		{
			ifaction ADANCE3SHRUNKFORWARDS action ADANCE3DANCEFORWARDS
			ifaction ADANCE3SHRUNKBACKWARDS action ADANCE3DANCEBACKWARDS
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 22 19 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE3GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE3FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE3DANCEFORWARDS
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action ADANCE3GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADANCE3FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				ifaction ADANCE3DANCEFORWARDS action ADANCE3SHRUNKFORWARDS
				ifaction ADANCE3DANCEBACKWARDS action ADANCE3SHRUNKBACKWARDS
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ADANCE5DANCEFORWARDS 0 6 1 1 12
action ADANCE5DANCEBACKWARDS 5 6 1 -1 12
action ADANCE5SHRUNKFORWARDS 0 6 1 1 12
action ADANCE5SHRUNKBACKWARDS 5 6 1 -1 12
action ADANCE5GROW
action ADANCE5FROZEN

useractor notenemy DANCE5 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{ 
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 20 17 // 22 22 is about correct height
		action ADANCE5DANCEFORWARDS
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	setvar TEMP 0
	ifaction ADANCE5DANCEFORWARDS { addvar TEMP 1 ifactioncount 5 action ADANCE5DANCEBACKWARDS }
	else ifaction ADANCE5DANCEBACKWARDS { addvar TEMP 1 ifactioncount 5 action ADANCE5DANCEFORWARDS }
	ifvarg TEMP 0
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	setvar TEMP 0
	ifaction ADANCE5SHRUNKFORWARDS { addvar TEMP 1 ifactioncount 5 action ADANCE5SHRUNKBACKWARDS }
	else ifaction ADANCE5SHRUNKBACKWARDS { addvar TEMP 1 ifactioncount 5 action ADANCE5SHRUNKFORWARDS }
	ifvarg TEMP 0
	{
		ifcount SHRUNKDONECOUNT
		{
			ifaction ADANCE5SHRUNKFORWARDS action ADANCE5DANCEFORWARDS
			ifaction ADANCE5SHRUNKBACKWARDS action ADANCE5DANCEBACKWARDS
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 20 17 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE5GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE5FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE5DANCEFORWARDS
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action ADANCE5GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADANCE5FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				ifaction ADANCE5DANCEFORWARDS action ADANCE5SHRUNKFORWARDS
				ifaction ADANCE5DANCEBACKWARDS action ADANCE5SHRUNKBACKWARDS
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ADANCE6STAND
action ADANCE6SHRUNK
action ADANCE6GROW
action ADANCE6FROZEN

useractor notenemy DANCE6 TOUGH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 20 17 // 20 20 is about correct height
		action ADANCE6STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1 
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ADANCE6STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ADANCE6SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ADANCE6STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 20 17 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE6GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE6FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE6STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action ADANCE6GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADANCE6FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ADANCE6SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ADANCE7DANCEFORWARDS 0 8 1 1 12
action ADANCE7DANCEBACKWARDS 7 8 1 -1 12
action ADANCE7SHRUNKFORWARDS 0 8 1 1 12
action ADANCE7SHRUNKBACKWARDS 7 8 1 -1 12
action ADANCE7GROW
action ADANCE7FROZEN

useractor notenemy DANCE7 TOUGH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 22 19 // 22 22 is about correct height
		action ADANCE7DANCEFORWARDS
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	setvar TEMP 0
	ifaction ADANCE7DANCEFORWARDS { addvar TEMP 1 ifactioncount 7 action ADANCE7DANCEBACKWARDS }
	else ifaction ADANCE7DANCEBACKWARDS { addvar TEMP 1 ifactioncount 7 action ADANCE7DANCEFORWARDS }
	ifvarg TEMP 0
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	setvar TEMP 0
	ifaction ADANCE7SHRUNKFORWARDS { addvar TEMP 1 ifactioncount 7 action ADANCE7SHRUNKBACKWARDS }
	else ifaction ADANCE7SHRUNKBACKWARDS { addvar TEMP 1 ifactioncount 7 action ADANCE7SHRUNKFORWARDS }
	ifvarg TEMP 0
	{
		ifcount SHRUNKDONECOUNT
		{
			ifaction ADANCE7SHRUNKFORWARDS action ADANCE7DANCEFORWARDS
			ifaction ADANCE7SHRUNKBACKWARDS action ADANCE7DANCEBACKWARDS
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 22 19 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE7GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE7FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE7DANCEFORWARDS
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ADANCE7GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
			state freezeup
			state frosty
			spritepal 1
			move 0
			action ADANCE7FROZEN
			strength 0
			break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				ifaction ADANCE7DANCEFORWARDS action ADANCE7SHRUNKFORWARDS
				ifaction ADANCE7DANCEBACKWARDS action ADANCE7SHRUNKBACKWARDS
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ADANCE9DANCEFORWARDS 0 3 1 1 12
action ADANCE9DANCEBACKWARDS 2 3 1 -1 12
action ADANCE9SHRUNKFORWARDS 0 3 1 1 12
action ADANCE9SHRUNKBACKWARDS 2 3 1 -1 12
action ADANCE9GROW
action ADANCE9FROZEN

useractor notenemy DANCE9 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 22 19 // 22 22 is about correct height
		action ADANCE9DANCEFORWARDS
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	setvar TEMP 0
	ifaction ADANCE9DANCEFORWARDS { addvar TEMP 1 ifactioncount 2 action ADANCE9DANCEBACKWARDS }
	else ifaction ADANCE9DANCEBACKWARDS { addvar TEMP 1 ifactioncount 2 action ADANCE9DANCEFORWARDS }
	ifvarg TEMP 0
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	setvar TEMP 0
	ifaction ADANCE9SHRUNKFORWARDS { addvar TEMP 1 ifactioncount 2 action ADANCE9SHRUNKBACKWARDS }
	else ifaction ADANCE9SHRUNKBACKWARDS { addvar TEMP 1 ifactioncount 2 action ADANCE9SHRUNKFORWARDS }
	ifvarg TEMP 0
	{
		ifcount SHRUNKDONECOUNT
		{
			ifaction ADANCE9SHRUNKFORWARDS action ADANCE9DANCEFORWARDS
			ifaction ADANCE9SHRUNKBACKWARDS action ADANCE9DANCEBACKWARDS
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 22 19 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADANCE9GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADANCE9FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADANCE9DANCEFORWARDS
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action ADANCE9GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADANCE9FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				spawn BLOOD
				soundonce LADY_SCREAM    
			}
			else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
		}
	
		ifwasweapon SHRINKSPARK
		{
			setvar SHRUNK? 1
			sound ACTOR_SHRINKING
			move 0
			ifaction ADANCE9DANCEFORWARDS action ADANCE9SHRUNKFORWARDS
			ifaction ADANCE9DANCEBACKWARDS action ADANCE9SHRUNKBACKWARDS
			cstat 0
			break
		}
		else
		ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}
	
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ASTAND1STAND
action ASTAND1SHRUNK
action ASTAND1GROW
action ASTAND1FROZEN

useractor notenemy STAND1 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0 
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 20 17 // 20 20 is about correct height
		action ASTAND1STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ASTAND1STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ASTAND1SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ASTAND1STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 20 17 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ASTAND1GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ASTAND1FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ASTAND1STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ASTAND1GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ASTAND1FROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ASTAND1SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ASTAND3STAND
action ASTAND3SHRUNK
action ASTAND3GROW
action ASTAND3FROZEN

useractor notenemy STAND3 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 24 23 // 22 22 is about correct height
		action ASTAND3STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ASTAND3STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ASTAND3SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ASTAND3STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 24 23 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ASTAND3GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ASTAND3FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ASTAND3STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ASTAND3GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
			state freezeup
			state frosty
			spritepal 1
			move 0
			action ASTAND3FROZEN
			strength 0
			break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ASTAND3SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda 

action ASTAND4STAND
action ASTAND4SHRUNK
action ASTAND4GROW
action ASTAND4FROZEN

useractor notenemy STAND4 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 23 20 // 26 26 is about correct height
		action ASTAND4STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ASTAND4STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ASTAND4SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ASTAND4STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 23 20 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ASTAND4GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ASTAND4FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ASTAND4STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ASTAND4GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ASTAND4FROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ASTAND4SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
			}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
enda

action ACOP1STAND
action ACOP1SHRUNK
action ACOP1GROW
action ACOP1FROZEN

useractor notenemy COP1 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP REALLYTOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP REALLYTOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 26 23 // 26 26 is about correct height
		action ACOP1STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ACOP1STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ACOP1SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ACOP1STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 26 23 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ACOP1GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ACOP1FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ACOP1STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ACOP1GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ACOP1FROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ACOP1SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ACOP2STAND
action ACOP2SHRUNK
action ACOP2GROW
action ACOP2FROZEN

useractor notenemy COP2 TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP REALLYTOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP REALLYTOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 20 17 // 18 18 is about correct height
		action ACOP2STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	
	ifaction ACOP2STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ACOP2SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ACOP2STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 20 17 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ACOP2GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ACOP2FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ACOP2STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ACOP2GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ACOP2FROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ACOP2SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action APUNKDUDESTAND
action APUNKDUDESHRUNK
action APUNKDUDEGROW
action APUNKDUDEFROZEN

useractor notenemy PUNKDUDE TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 18 15 // 17 17 is about correct height
		action APUNKDUDESTAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction APUNKDUDESTAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction APUNKDUDESHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action APUNKDUDESTAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 18 15 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction APUNKDUDEGROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction APUNKDUDEFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action APUNKDUDESTAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action APUNKDUDEGROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action APUNKDUDEFROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action APUNKDUDESHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action ASITDUDESIT
action ASITDUDESHRUNK
action ASITDUDEGROW
action ASITDUDEFROZEN

useractor notenemy SITTINGDUDE TOUGH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP TOUGH
		randvar TEMPVAR 3
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 22 19 // 22 22 is about correct height
		action ASITDUDESIT
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction ASITDUDESIT
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction ASITDUDESHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ASITDUDESIT
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 22 19 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ASITDUDEGROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ASITDUDEFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ASITDUDESIT
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ASITDUDEGROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ASITDUDEFROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				spawn BLOOD
				ifrnd 85 soundonce MALENPC_PAIN1
				else ifrnd 128 soundonce MALENPC_PAIN2
				else soundonce MALENPC_PAIN3
			}
			else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
		}
	
		ifwasweapon SHRINKSPARK
		{
	
			setvar SHRUNK? 1
			sound ACTOR_SHRINKING
			move 0
			action ASITDUDESHRUNK
			cstat 0
			break
		}
		else
		ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}
	
	state actorseekingitem
	state checkfallcounter_nonplayer
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action AANIME1STAND 0 2 1 1 8
action AANIME1DRILL 2 2 1 1 8
action AANIME1SHRUNK 0 2 1 1 8
action AANIME1GROW
action AANIME1FROZEN

useractor notenemy ANIMEGIRL1 MANWOMANSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		randvar ACTORATTACK 15
		addvar ACTORATTACK 21
		randvar ACTORDEFENSE 17
		addvar ACTORDEFENSE 17
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 16 16
		action AANIME1STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction AANIME1STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}

	// ifaction AANIME1DRILL { }

	ifaction AANIME1SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action AANIME1STAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 16 16 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction AANIME1GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction AANIME1FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action AANIME1STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action AANIME1GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action AANIME1FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action AANIME1SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action AANIME2STAND 0 2 1 1 8
action AANIME2SHOOT 2 2 1 1 8
action AANIME2SHRUNK 0 2 1 1 8
action AANIME2GROW
action AANIME2FROZEN

useractor notenemy ANIMEGIRL2 MANWOMANSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		randvar ACTORATTACK 14
		addvar ACTORATTACK 18
		randvar ACTORDEFENSE 15
		addvar ACTORDEFENSE 19
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 16 16
		action AANIME2STAND
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction AANIME2STAND
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}

	// ifaction AANIME2SHOOT { }

	ifaction AANIME2SHRUNK
	{
	ifcount SHRUNKDONECOUNT
	{
		action AANIME2STAND
		cstat 257
	}
	else
		ifcount SHRUNKCOUNT { sizeto 16 16 setvar SHRUNK? 0 }
	else
		state genericshrunkcode
	}
	
	ifaction AANIME2GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction AANIME2FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action AANIME2STAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action AANIME2GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action AANIME2FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action AANIME2SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}

	// state breakobject 
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action AANIME3SIT 0 2 1 1 8
action AANIME3THROW 2 1 1 1 8
action AANIME3SHRUNK 0 2 1 1 8
action AANIME3GROW
action AANIME3FROZEN

useractor notenemy ANIMEGIRL3 MANWOMANSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		randvar ACTORATTACK 12
		addvar ACTORATTACK 15
		randvar ACTORDEFENSE 21
		addvar ACTORDEFENSE 20
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 16 16
		action AANIME3SIT
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction AANIME3SIT
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}

	// ifaction AANIME3THROW { }

	ifaction AANIME3SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
		action AANIME3SIT
		cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 16 16 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction AANIME3GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction AANIME3FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action AANIME3SIT
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action AANIME3GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action AANIME3FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
	
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action AANIME3SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}
	
	state breakobject 
	
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action AANIME4WASH 0 2 1 1 8
action AANIME4SHOOT 2 2 1 1 8
action AANIME4SHRUNK 0 2 1 1 8
action AANIME4GROW
action AANIME4FROZEN

useractor notenemy ANIMEGIRL4 MANWOMANSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		randvar ACTORATTACK 16
		addvar ACTORATTACK 16
		randvar ACTORDEFENSE 16
		addvar ACTORDEFENSE 16
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 16 16
		action AANIME4WASH
		state rankstarbeta
		state maxcivsincrease 
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction AANIME4WASH
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}

	// ifaction AANIME4SHOOT { }

	ifaction AANIME4SHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action AANIME4WASH
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 16 16 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction AANIME4GROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction AANIME4FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action AANIME4WASH
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce LADY_SCREAM    
				action AANIME4GROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action AANIME4FROZEN
				strength 0
				break
			}
	
			soundonce LADY_SCREAM    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					soundonce LADY_SCREAM    
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
	
			ifwasweapon SHRINKSPARK
			{
		
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action AANIME4SHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}
	
	state actorseekingitem
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

action AWOLFDANCE 0 2 1 1 16
action AWOLFFROZEN 0
action AWOLFSHRUNK 0 2 1 1 16
action AWOLFGROW

useractor notenemy WOLFDUDE 1453
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP 1453
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP 1453
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 56 53
		action AWOLFDANCE
		state maxcivsincrease 
		state rankstarbeta
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	// ifp pfacing ifpdistl 1280 ifhitspace soundonce GETBACKTOWORK
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state useswitchcheckwall
	
	
	ifaction AWOLFDANCE
	{
		ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	}
	
	ifaction AWOLFSHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action AWOLFDANCE
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 56 53 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction AWOLFGROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction AWOLFFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action AWOLFDANCE
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action AWOLFGROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action AWOLFFROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
				spawn BLOOD
				ifrnd 85 soundonce MALENPC_PAIN1
				else ifrnd 128 soundonce MALENPC_PAIN2
				else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
		
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action AWOLFSHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
		
		}
	}
	
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

state leave
	espawn TRANSPORTERBEAM
	getactor[THISACTOR].xrepeat TEMPVAR
	setactor[RETURN].xrepeat TEMPVAR
	getactor[THISACTOR].yrepeat TEMPVAR
	setactor[RETURN].yrepeat TEMPVAR
	setactor[RETURN].pal 20
	sound TELEPORTER
	setactor[THISACTOR].extra -1 // To remove a dealer's lifebar when he teleports away
	killit
ends

// The hitag of the dealer actor is the shop_id
eventloadactor DEALER 
	getactor[THISACTOR].hitag hitagsav
	getactor[THISACTOR].lotag lotagsav
	setactor[THISACTOR].hitag 0
	setactor[THISACTOR].lotag 0 
enda 

action ADEALERSTAND 0
action ADEALERFROZEN 0
action ADEALERSHRUNK 0
action ADEALERGROW 0

useractor notenemy DEALER TOUGH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 

	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP GOTTASMART
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP GOTTASMART
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST MALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		sizeat 26 23 // 26 26 is about correct height
		state rankstarbeta
		state maxcivsincrease 
		action ADEALERSTAND
		cstat 257
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	state useswitchcheckwall
	
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	
	ifaction ADEALERSTAND
	{
		ifp pfacing
		{
			ifpdistl 1280 ifvare TEMP2 1
			{
				ifhitspace ifcansee
				{
					ifvare oldskoolmode 1
					{
						tip
						ifrnd 128 spawn RPGSPRITE 
						else spawn DEVISTATORSPRITE 
						state leave
					}
					else
					{
						ifvarn lotagsav 0
						{
							ifvarg DOLLARS 99 
							{
								tip
								subvar DOLLARS 100
								subvar DISPLAYDOLLARS 100
								state displaymoney
								ifrnd 128 spawn RPGSPRITE 
								else spawn DEVISTATORSPRITE 
								state leave
							}
							else
							{
								sound MENU_ERROR
								ifvare GENDER? 0 redefinequote 130 ^10NOT ENOUGH MONEY, MAN!
								else ifvare GENDER? 1 redefinequote 130 ^10NOT ENOUGH MONEY, LADY!
								else redefinequote 130 ^10NOT ENOUGH MONEY, YOU!
								setvarvar fta fta_normal setvar ftq 130 
							}
						}
						else
						{
							setvar com_pause 10
							setvarvar shop_id hitagsav
							setvar shoptype 1
							setvarvar shoppage 0
							setvarvar shopselection 0
							setvarvar shopowner THISACTOR
							state stopsearchsounds
							globalsound SHOP_ENTER
						}
					}
				}
			}
		}
	}
	
	ifaction ADEALERSHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action ADEALERSTAND
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT { sizeto 26 23 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	
	ifaction ADEALERGROW
	{
		ifcount 32
		{
			guts JIBS4 26
			guts JIBS6 24
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
	
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	ifaction ADEALERFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action ADEALERSTAND
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount 
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
		
			randvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP CIVILIANKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 24
			state frozenactor-breakcode
			killit
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				soundonce MALENPC_DEATH1    
				action ADEALERGROW
				break
			}
			else
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ADEALERFROZEN
				strength 0
				break
			}
	
			soundonce MALENPC_DEATH1    
			state drop_artifacts
			state civiliankilled
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					spawn BLOOD
					ifrnd 85 soundonce MALENPC_PAIN1
					else ifrnd 128 soundonce MALENPC_PAIN2
					else soundonce MALENPC_PAIN3
				}
				else ifwasweapon SHRINKSPARK nullop else sound NODAMAGE
			}
	
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action ADEALERSHRUNK
				cstat 0
				break
			}
			else
			ifwasweapon GROWSPARK sound EXPANDERHIT
	
		}
	}
	
	state checkfallcounter_nonplayer
	state enemyfloorhurt
	state enemy_underwater-space
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

useractor notenemy BARSTOOL TOUGH state breakobject enda
useractor notenemy TABLE TOUGH state breakobject enda

action EXPBARRELFRAME     0   2   1   1   15
actor EXPLODINGBARREL 26
	ifvare mainmenu 0 fall
	ifaction EXPBARRELFRAME
	{
		ifactioncount 2
		{
			hitradius 1024 WEAKEST WEAK MEDIUMSTRENGTH TOUGH
			spawn EXPLOSION2
			debris SCRAP2 2
			sound PIPEBOMB_EXPLODE
			killit
		}
		break
	}
	ifsquished
	{
		debris SCRAP1 5
	
		killit
		break
	}
	ifhitweapon
		action EXPBARRELFRAME
enda

state fire_warmth
	ifpdistl 6144
	{
		ifpdistl 3072
		{
			ifpdistl 1536
			{
				ifpdistl 768
				{
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 8 addvar tempg 9 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
				}
				else
				{
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
				}
			}
			else
			{
				ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
				{
					getactorvar[PLAYERID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
				}
				ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
				{
					getactorvar[PLAYERID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
				}
			}
		}
		else
		{
			ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
			{
				getactorvar[PLAYERID].freezetimer tempf
				ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
			}
		}
	}
ends

state floorflame_warmth
	ifpdistl 9216
	{
		ifpdistl 4608
		{
			ifpdistl 2304
			{
				ifpdistl 1152
				{
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 9 addvar tempg 10 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 12 addvar tempg 13 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
				}
				else
				{
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 9 addvar tempg 10 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
				}
			}
			else
			{
				ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
				{
					getactorvar[PLAYERID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
				}
				ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
				{
					getactorvar[PLAYERID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
				}
			}
		}
		else
		{
			ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
			{
				getactorvar[PLAYERID].freezetimer tempf
				ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
			}
		}
	}
ends

action BURNING_FLAME  0   12   1   1   2
move BURNING_VELS 

state burningstate
	ifvare sector[THISACTOR].lotag 2 
	{ 
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		killit 
	} // this makes fire fissile out underwater like it should :P

	state fire_warmth
	state fireheatactors
	
	sleeptime 300
	
	ifspawnedby BURNING
	{
		ifgapzl 16
			break
	}
	else
		ifspawnedby BURNING2
	{
		ifgapzl 16
			break
	}
	
	ifpdistg 10240
		break
	
	
	ifcount 128
	{
		ifspawnedby TIRE
		{
			ifactioncount 512
				killit
			ifrnd 16
				sizeto 64 48
		}
		else
		{
			sizeto 8 8
			sizeto 8 8
			ifcount 192
				killit
		}
	}
	else
	{
		ifmove 0
			move BURNING_VELS
	
		sizeto 52 52
	
		// Player Damage Support
		ifvarg CURRENTHITPOINTS 0 // ifp palive
		{
			ifpdistl 844
			{
				ifcansee
				{
					ifvare VEHICLEID -1
					{
						ifrnd 32
						{
							setvar MELEEDAMAGE 5
							randvar MELEEDAMAGEVAR 2
							state meleerandomdmg
							ifvarg CURRENTHITPOINTS 0 // ifp palive 
							{ 
								state getmeleedmg
								setvarvar TEMPDAMAGEVAR MELEEDAMAGE
								state char_firedamage_misc
								setvarvar MELEEDAMAGE TEMPDAMAGEVAR
				
								//****************
								//*Support System*
								//****************
								ifvarg MELEEDAMAGE 0
								{
									setvar DAMAGEMODIFIER 1000
				
									//**Fire Support / Ted**
									state support-fireresist
				
									state damagemod-enemy-melee       
								}
								
								//*********************************
								//*Support System [ESSence Support*
								//*********************************
								ifvarg MELEEDAMAGE 0
								{
									setvar DAMAGEMODIFIER 1000
									//**Overall Support / ESSence**
									state support-overallresist
									state damagemod-enemy-melee          
								}
				
								//******************
								//*Equipment System*
								//******************
								ifvarg MELEEDAMAGE 0
								{
									setvar DAMAGEMODIFIER 1000
									// Equipment Slot #1
									ifvare PLAYEREQUIPSLOTITEM1 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #2
									ifvare PLAYEREQUIPSLOTITEM2 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #3
									ifvare PLAYEREQUIPSLOTITEM3 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #4
									ifvare PLAYEREQUIPSLOTITEM4 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #5
									ifvare PLAYEREQUIPSLOTITEM5 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #6
									ifvare PLAYEREQUIPSLOTITEM6 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #7
									ifvare PLAYEREQUIPSLOTITEM7 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #8
									ifvare PLAYEREQUIPSLOTITEM8 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
									state damagemod-enemy-melee        
								}
			
								ifvarand CHEATBITFIELD? 16 { divvar MELEEDAMAGE 1000 ifvarl MELEEDAMAGE 1 setvar MELEEDAMAGE 1 state cheatersound }
							}
							ifvarg INVULNTIME 0     
							{
								state invulnflash 
							}
							else
							ifvarl PLAYERDAMAGE 1
							{
								state nullflash
							}
							else
							{
								ifvarg CURRENTHITPOINTS 0 // ifp palive
								{
									ifvarg PLAYERDAMAGE 0
									{
										setvarvar PAINSOUNDFACTOR PLAYERDAMAGE
										state checkpainfactor
										state characterpainsounds
									}
								}
							}
						}
					}
					else
					{
						ifrnd 32
						{
							setvar MELEEDAMAGE 3
							randvar MELEEDAMAGEVAR 1
							state meleerandomdmg
							ifvarg CURRENTHITPOINTS 0 state getmeleedmg
							ifvarg INVULNTIME 0 state invulnflash 
							else ifvarl PLAYERDAMAGE 1 state nullflash
							else
							{
								ifvarg CURRENTHITPOINTS 0 // ifp palive
								{
									ifvarg PLAYERDAMAGE 0 palfrom 24 0 16
								}
							}
						}
					}
				}
			}
		}
	
		// Actor Damage Support
		state firedmgactors
		// Actor Damage Support
	}
ends

actor BURNING 0 BURNING_FLAME
	state burningstate
enda

actor BURNING2 0 BURNING_FLAME
	state burningstate
enda

action TOILETWATERFRAMES 0 4 1 1 1
actor TOILETWATER 0 TOILETWATERFRAMES
	ifpdistl 8192
	{
		soundonce WATER_GURGLE
		ifspawnedby TOILET
			sizeto 34 34
		else
		{
			ifspawnedby WATERFOUNTAINBROKE
				sizeto 6 15
			else
				ifspawnedby TOILETWATER
					nullop
			else
				sizeto 24 32
		}
	
		ifvarg CURRENTHITPOINTS 0 // ifp palive
		{
			ifpdistl RETRIEVEDISTANCE
			{
				ifp pfacing
				{
					ifactioncount 32
					{
						ifhitspace
						{
							ifcansee
							{
								state usewaterfountain
							}
							resetactioncount
						}
					}
				}
			}
		}
	}
enda

action WOODENHORSEFRAME  0   1   4
action WOODENFALLFRAME  122  1   5

actor HORSEONSIDE WEAKEST
	cactor WOODENHORSE
	action WOODENFALLFRAME
enda
actor WOODENHORSE WEAK WOODENHORSEFRAME
	ifvare mainmenu 0 fall
	ifhitweapon
	{
		ifdead
		{
			debris SCRAP1 4
			debris SCRAP2 3
			killit
		}
		else
			action WOODENFALLFRAME
	}
enda

state steamcode
	ifpdistl 6144 soundonce STEAM_HISSING
	
	ifpdistl 4608
	{
		ifpdistl 2304
		{
			ifpdistl 1152
			{
				ifpdistl 576
				{
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 3 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 3 addvar tempg 4 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
				}
				else
				{
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
					ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
					{
						getactorvar[PLAYERID].freezetimer tempf
						ifvarg tempf 0 { randvar tempg 3 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
					}
				}
			}
			else
			{
				ifrnd 256 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
				{
					getactorvar[PLAYERID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
				}
				ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
				{
					getactorvar[PLAYERID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
				}
			}
		}
		else
		{
			ifrnd 64 ifvare VEHICLEID -1 ifvarl INVULNTIME 1
			{
				getactorvar[PLAYERID].freezetimer tempf
				ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[PLAYERID].freezetimer tempf }
			}
		}
	}
	
	
	//******************************************
	//*Warming up in Freezing Environs [Actors]*
	//******************************************
	addvar FINDNEAR_INTERVAL 1
	ifvarvarg FINDNEAR_INTERVAL FINDNEAR_INTERVAL_MAX
	{
		findnearactor3d FEM1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM2 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM3 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM4 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM5 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM6 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM7 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM9 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d FEM10 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d WOMAN 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d ROBOTDOG 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d ROBOTDOG2 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d TOUGHGAL 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d NAKED1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d PODFEM1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d WOLFDUDE 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE2 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE3 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE5 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE6 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE7 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DANCE9 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d STAND1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d DEALER 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d STAND3 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d STAND4 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d PUNKDUDE 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d COP1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d COP2 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d SITTINGDUDE 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL2 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL3 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL4 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d PRESIDENTCLINTON 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d SHARK 4608 STEAMACTORDMGID state steamdetectifdead_heat 
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOP 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPSTAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPSHOOT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPDUCKING 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPJETPACK 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPRUNNING 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPJUSTSIT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPONTOILET 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d PIGCOP 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d PIGCOPDIVE 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d PIGCOPSTAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZMAN 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZMANSTAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZMANJUMP 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d LIZMANSPITTING 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d OCTABRAIN 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d OCTABRAINSTAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEAST 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEASTSTAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEASTJUMP 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEASTHANG 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d COMMANDER 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d COMMANDERSTAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1STAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1SHOOT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1LOB 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2STAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2SHOOT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2BREATH 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS3 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS3STAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS3LOB 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS4 4608 STEAMACTORDMGID state steamdetectifdead_heat
		ifvare STEAMACTORDMGID -1 findnearactor3d BOSS4STAYPUT 4608 STEAMACTORDMGID state steamdetectifdead_heat
		setvar FINDNEAR_INTERVAL 0
	
		ifvarn STEAMACTORDMGID -1
		{
			ifvare mainmenu 0
			{
				getactorvar[STEAMACTORDMGID].ACTORINVULNTIME TEMP3
				ifvarl TEMP3 1
				{
					getactorvar[STEAMACTORDMGID].ACTORHP TEMPVAR2
					ifvarg TEMPVAR2 0
					{
						ifvarg STEAMDISTANCE 2304 ifvarl STEAMDISTANCE 4609 
						{
							ifrnd 64
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
						}
						else
						ifvarg STEAMDISTANCE 1152 ifvarl STEAMDISTANCE 2305 
						{
							ifrnd 256
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
							ifrnd 64
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
						}
						else
						ifvarg STEAMDISTANCE 576 ifvarl STEAMDISTANCE 1153 
						{
							ifrnd 256
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
							ifrnd 256
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
							ifrnd 64
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 3 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
						}
						else
						ifvarl STEAMDISTANCE 577
						{
							ifrnd 256
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 1 addvar tempg 2 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
							ifrnd 256
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 2 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
							ifrnd 256
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 3 addvar tempg 3 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
							ifrnd 64
							{
								getactorvar[STEAMACTORDMGID].freezetimer tempf
								ifvarg tempf 0 { randvar tempg 3 addvar tempg 4 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[STEAMACTORDMGID].freezetimer tempf }
							}
						}
					}
				}
			}
		}
	}
	
	ifcount 20
	{
		resetcount
		// Player Damage Support
		ifvarg CURRENTHITPOINTS 0 // ifp palive
		{
			ifpdistl 1024
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive 
				{ 
					ifvare VEHICLEID -1
					{
						setvar MELEEDAMAGE 5
						randvar MELEEDAMAGEVAR 2
						state meleerandomdmg
						state getmeleedmg
			
						setvarvar TEMPDAMAGEVAR MELEEDAMAGE
						state char_firedamage_misc
						setvarvar MELEEDAMAGE TEMPDAMAGEVAR
			
						//****************
						//*Support System*
						//****************
						ifvarg MELEEDAMAGE 0
						{
							setvar DAMAGEMODIFIER 1000
							//**Fire Support / Ted**
							state support-fireresist
							state damagemod-enemy-melee       
						}
			
						//*********************************
						//*Support System [ESSence Support*
						//*********************************
						ifvarg MELEEDAMAGE 0
						{
							setvar DAMAGEMODIFIER 1000
							//**Overall Support / ESSence**
							state support-overallresist
							state damagemod-enemy-melee          
						}
			
						//******************
						//*Equipment System*
						//******************
						ifvarg MELEEDAMAGE 0
						{
							setvar DAMAGEMODIFIER 1000
							// Equipment Slot #1
							ifvare PLAYEREQUIPSLOTITEM1 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #2
							ifvare PLAYEREQUIPSLOTITEM2 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #3
							ifvare PLAYEREQUIPSLOTITEM3 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #4
							ifvare PLAYEREQUIPSLOTITEM4 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #5
							ifvare PLAYEREQUIPSLOTITEM5 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #6
							ifvare PLAYEREQUIPSLOTITEM6 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #7
							ifvare PLAYEREQUIPSLOTITEM7 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							// Equipment Slot #8
							ifvare PLAYEREQUIPSLOTITEM8 1 addvar DAMAGEMODIFIER -250 // Sun Ring
							ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
							state damagemod-enemy-melee        
						}
						ifvarand CHEATBITFIELD? 16 { divvar MELEEDAMAGE 1000 ifvarl MELEEDAMAGE 1 setvar MELEEDAMAGE 1 state cheatersound }
			
						ifvarg INVULNTIME 0 state invulnflash 
						else ifvarl MELEEDAMAGE 1 state nullflash
						else
						{
							ifvarg CURRENTHITPOINTS 0 // ifp palive
							{
								ifvarg MELEEDAMAGE 0 palfrom 16 16
							}
						}
					}
					else
					{
						setvar MELEEDAMAGE 3
						randvar MELEEDAMAGEVAR 1
						state meleerandomdmg
						state getmeleedmg
			
						ifvarg INVULNTIME 0 state invulnflash 
						else ifvarl MELEEDAMAGE 1 state nullflash
						else
						{
							ifvarg CURRENTHITPOINTS 0 // ifp palive
							{
								ifvarg MELEEDAMAGE 0 palfrom 16 0 16
							}
						}
					}
				}
			}
		}
	
		//**********************
		//*Actor Damage Support*
		//**********************
		addvar FINDNEAR_INTERVAL 1
		ifvarvarg FINDNEAR_INTERVAL FINDNEAR_INTERVAL_MAX
		{
			findnearactor3d FEM1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM2 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM3 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM4 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM5 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM6 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM7 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM9 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d FEM10 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d WOMAN 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ROBOTDOG 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ROBOTDOG2 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d TOUGHGAL 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d NAKED1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d PODFEM1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d WOLFDUDE 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE2 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE3 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE5 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE6 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE7 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DANCE9 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d STAND1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DEALER 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d STAND3 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d STAND4 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d PUNKDUDE 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d COP1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d COP2 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d SITTINGDUDE 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL2 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL3 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ANIMEGIRL4 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d PRESIDENTCLINTON 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d ROTATEGUN 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d SHARK 1024 STEAMACTORDMGID state steamdetectifdead 
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOP 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPSTAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPSHOOT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPDUCKING 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPJETPACK 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPRUNNING 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPJUSTSIT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZTROOPONTOILET 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d PIGCOP 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d PIGCOPDIVE 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d PIGCOPSTAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZMAN 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZMANSTAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZMANJUMP 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d LIZMANSPITTING 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d DRONE 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d OCTABRAIN 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d OCTABRAINSTAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEAST 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEASTSTAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEASTJUMP 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d NEWBEASTHANG 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d COMMANDER 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d COMMANDERSTAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d TANK 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d EMPTYTANK 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d SCORPIONTANK 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1STAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1SHOOT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS1LOB 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2STAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2SHOOT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS2BREATH 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS3 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS3STAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS3LOB 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS4 1024 STEAMACTORDMGID state steamdetectifdead
			ifvare STEAMACTORDMGID -1 findnearactor3d BOSS4STAYPUT 1024 STEAMACTORDMGID state steamdetectifdead
			setvar FINDNEAR_INTERVAL 0
		
			ifvarn STEAMACTORDMGID -1
			{
				ifvare mainmenu 0
				{
					getactorvar[STEAMACTORDMGID].ACTORINVULNTIME TEMP3
					ifvarl TEMP3 1
					{
						getactorvar[STEAMACTORDMGID].ACTORHP TEMPVAR2
						ifvarg TEMPVAR2 0
						{
							setactor[STEAMACTORDMGID].extra 16384
							randvar tempe 2
							addvar tempe 5
							ifvarl STEAMDISTANCE 1025 
							{
								setactor[STEAMACTORDMGID].htextra tempe
								setactor[STEAMACTORDMGID].htowner THISACTOR
								setactor[STEAMACTORDMGID].htpicnum STEAM
							}
						}
					}
					else sound INVULNITEM3
				}
			}
		}
	}
	else
	{
		ifspawnedby STEAM
			break
		else
		ifspawnedby CEILINGSTEAM
			break
	
		sizeto 24 24
	}
ends

state steam_checkforpipespawn
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].owner TEMPVAR
		getactor[TEMPVAR].picnum TEMPVAR3
	
		ifvare TEMPVAR3 PIPE1
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE1B
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE2
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE2B
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE3
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE3B
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE4
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE4B
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE5
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE5B
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE6
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		else
		ifvare TEMPVAR3 PIPE6B
		{
			getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
			setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
		}
		setvar SKILLSET? 1
	}
ends

action STEAMFRAMES    0     5     1     1     1
actor STEAM 0 STEAMFRAMES
	state steam_checkforpipespawn
	state steamcode
enda

actor CEILINGSTEAM 0 STEAMFRAMES
	state steam_checkforpipespawn
	state steamcode
enda

actor WATERBUBBLEMAKER 0 0 randomangle
	espawn AIRBUBBLEGENERATOR
	getactor[THISACTOR].x temp
	setactor[RETURN].x temp
	getactor[THISACTOR].y temp
	setactor[RETURN].y temp
	getactor[THISACTOR].z temp
	setactor[RETURN].z temp
	getactor[THISACTOR].cstat temp
	setactor[RETURN].cstat temp
	getactor[THISACTOR].xrepeat temp
	setactor[RETURN].xrepeat temp
	getactor[THISACTOR].yrepeat temp
	setactor[RETURN].yrepeat temp
	killit
enda

action BUBBLE
action CRACKEDBUBBLE  1
move BUBMOVE       -10 -36
move BUBMOVEFAST     -10 -52

actor WATERBUBBLE 0 BUBBLE BUBMOVE getv geth randomangle
	ifaction CRACKEDBUBBLE
	{
		ifinwater
			ifrnd 192
				killit
		ifactioncount 7
			killit
	}
	else
	{
		ifcount 4
		{
			ifrnd 192
				move BUBMOVE getv geth randomangle
			else
				move BUBMOVEFAST getv geth randomangle
			resetcount
	
			ifrnd 84
				sizeat 8 10
			else
				ifrnd 84
					sizeat 10 8
			else
				sizeat 9 9
		}
	
		ifonwater
		{
			iffloordistl 8
				action CRACKEDBUBBLE
		}
		else
			ifactioncount 40
				action CRACKEDBUBBLE
	}
enda


move SMOKEVEL 8 -16
move ENGINE_SMOKE 64 -64
move SMOKESHOOTOUT -192
action SMOKEFRAMES 0 4 1 1 10
actor SMALLSMOKE 0 SMOKEFRAMES
	ifmove 0
	{
		ifspawnedby RECON
			move SMOKESHOOTOUT geth
		else
			ifspawnedby SECTOREFFECTOR
				move ENGINE_SMOKE geth getv
		else
			move SMOKEVEL geth getv faceplayer
		ifspawnedby RPG
			cstat 2
	}
	ifpdistl 1596
		ifspawnedby RPG
			killit
	ifactioncount 4
		killit
enda

action BARREL_DENTING  2 2 1 1 6

action BARREL_DENTED   1
action BARREL_DENTED2  2

move SPAWNED_BLOOD

actor NUKEBARRELDENTED WEAK
	cactor NUKEBARREL
	action BARREL_DENTED
enda

actor NUKEBARRELLEAKED WEAK
	cactor NUKEBARREL
	action BARREL_DENTED2
enda

state random_ooz
	ifrnd 128
		spawn OOZ2
	else
		spawn OOZ
ends

actor NUKEBARREL MEDIUMSTRENGTH
	ifsquished
	{
		debris SCRAP1 32
		espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34
		state random_ooz
		killit
	}
	ifvare mainmenu 0 fall
	ifaction BARREL_DENTING
	{
		ifactioncount 2
		{
			debris SCRAP1 10
			ifrnd 2 { espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34 }
			killit
		}
	}
	else
		ifhitweapon
	{
		ifdead
		{
			sound VENT_BUST
			ifrnd 128 { espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34 }
			action BARREL_DENTING
		}
		else
		{
			ifaction 0
				action BARREL_DENTED
			else
				ifaction BARREL_DENTED
			{
				action BARREL_DENTED2
				espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34
			}
			else
				ifaction BARREL_DENTED2
					action BARREL_DENTING
		}
	}
enda

state burningbarrelcode
	ifvare mainmenu 0 fall
	
	ifvare sector[THISACTOR].lotag 2 
	{ 
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		ifactor FIREVASE espawn FIREVASE_OUT
		ifactor FIREBARREL espawn FIREBARREL_OUT
		getactor[THISACTOR].xrepeat temp
		setactor[RETURN].xrepeat temp
		getactor[THISACTOR].yrepeat temp
		setactor[RETURN].yrepeat temp
		getactor[THISACTOR].pal temp
		setactor[RETURN].pal temp
		getactor[THISACTOR].shade temp
		setactor[RETURN].shade temp
		getactor[THISACTOR].cstat temp
		setactor[RETURN].cstat temp
		killit 
	} // this makes fire fissile out underwater like it should :P
	
	state fire_warmth
	state fireheatactors

	ifcount 32
	{
		resetcount
		ifvarg CURRENTHITPOINTS 0 // ifp palive
		{
			ifpdistl 1480
			{
				ifp phigher
				{
					ifvare VEHICLEID -1
					{
						ifvarg CURRENTHITPOINTS 0 // ifp palive 
						{ 
							setvar MELEEDAMAGE 5
							randvar MELEEDAMAGEVAR 2
							state meleerandomdmg
							state getmeleedmg
			
							setvarvar TEMPDAMAGEVAR MELEEDAMAGE
							state char_firedamage_misc
							setvarvar MELEEDAMAGE TEMPDAMAGEVAR
			
							//****************
							//*Support System*
							//****************
							ifvarg MELEEDAMAGE 0
							{
								setvar DAMAGEMODIFIER 1000
								//**Fire Support / Ted**
								state support-fireresist
								state damagemod-enemy-melee       
							}
			
							//*********************************
							//*Support System [ESSence Support*
							//*********************************
							ifvarg MELEEDAMAGE 0
							{
								setvar DAMAGEMODIFIER 1000
								//**Overall Support / ESSence**
								state support-overallresist
								state damagemod-enemy-melee          
							}
			
							//******************
							//*Equipment System*
							//******************
							ifvarg MELEEDAMAGE 0
							{
								setvar DAMAGEMODIFIER 1000
								// Equipment Slot #1
								ifvare PLAYEREQUIPSLOTITEM1 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #2
								ifvare PLAYEREQUIPSLOTITEM2 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #3
								ifvare PLAYEREQUIPSLOTITEM3 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #4
								ifvare PLAYEREQUIPSLOTITEM4 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #5
								ifvare PLAYEREQUIPSLOTITEM5 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #6
								ifvare PLAYEREQUIPSLOTITEM6 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #7
								ifvare PLAYEREQUIPSLOTITEM7 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #8
								ifvare PLAYEREQUIPSLOTITEM8 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
								state damagemod-enemy-melee        
							}
			
							ifvarand CHEATBITFIELD? 16 { divvar MELEEDAMAGE 1000 ifvarl MELEEDAMAGE 1 setvar MELEEDAMAGE 1 state cheatersound }
							ifvarg INVULNTIME 0 state invulnflash 
							else ifvarl PLAYERDAMAGE 1 state nullflash
							else
							{
								ifvarg CURRENTHITPOINTS 0 // ifp palive
								{
									ifvarg PLAYERDAMAGE 0
									{
										ifrnd 96
										{
											setvarvar PAINSOUNDFACTOR PLAYERDAMAGE
											state checkpainfactor
											state characterpainsounds
										}
									}
								}
							}
						}
					}
					else
					{
						ifvarg CURRENTHITPOINTS 0 // ifp palive 
						{ 
							setvar MELEEDAMAGE 3
							randvar MELEEDAMAGEVAR 3
							state meleerandomdmg
							state getmeleedmg
			
							ifvarg INVULNTIME 0 state invulnflash 
							else ifvarl PLAYERDAMAGE 1 state nullflash
							else
							{
								ifvarg CURRENTHITPOINTS 0 // ifp palive
								{
									ifvarg PLAYERDAMAGE 0 palfrom 16 0 16
								}
							}
						}
					}
				}
			}
		}
		// Actor Damage Support
		state firedmgactors
		// Actor Damage Support
	}
	ifhitweapon
	{
		sound VENT_BUST
		debris SCRAP1 10
		getactorvar[THISACTOR].ACTORATTACK temp
		setvarvar tempb temp
		divvar tempb 10
		ifvarl tempb 1 setvar tempb 1
		randvarvar tempc tempb
		ifrnd 128 addvarvar temp tempc else subvarvar temp tempc
		ifvarl temp 0 setvar temp 0
	
		ifrnd 128 espawn BURNING else espawn BURNING2
	
		setactorvar[RETURN].ACTORATTACK temp
		killit
	}
ends

actor FIREBARREL
	state burningbarrelcode
enda
actor FIREVASE
	state burningbarrelcode
enda

actor FIREBARREL_OUT
	ifvare mainmenu 0 fall
	ifhitweapon
	{
		sound VENT_BUST
		debris SCRAP1 10
		killit
	}
enda
actor FIREVASE_OUT
	ifvare mainmenu 0 fall
	ifhitweapon
	{
		sound VENT_BUST
		debris SCRAP1 10
		killit
	}
enda

action SHRINKERFRAMES 0 4 1 1 10
actor SHRINKEREXPLOSION 0 SHRINKERFRAMES
	ifactioncount 4
		killit
enda


action EXPLOSION_FRAMES 0 20 1 1  4
actor EXPLOSION2 1 EXPLOSION_FRAMES
	ifactioncount 20
		killit
enda

action EXPLOSION_FRAMES2 -1 20 1 1  4
useractor notenemy EXPLOSION2CUSTOM 1 EXPLOSION_FRAMES2
	state itemfullbright
	ifactioncount 20
		killit
enda

actor EXPLOSION2BOT 1 EXPLOSION_FRAMES
	ifactioncount 20
		killit
enda

action FFLAME_FR 0 16 1 1 1
action FFLAME 0 1 1 1 1

actor FLOORFLAME 0 FFLAME_FR
	ifaction FFLAME_FR
	{
		state floorflame_warmth
	
		// Player Damage Support
		ifpdistl 1024
		{
			getplayer[THISACTOR].last_extra temp
			setactor[PLAYERID].extra temp
			palfrom 0 0 0 0
			ifvare mainmenu 0
			{
				setvar MISCARRAYID 26 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // DEATHSWITCH-DELAY
				ifvare MISCARRAYID_AMOUNTTEMP 0
				{
					ifvarand CHEATBITFIELD? 32 nullop else
					{
						ifvarl INVULNTIME 1
						{
							getactorvar[PLAYERID].VEHICLEID TEMPVAR2
							ifvare TEMPVAR2 -1
							{
								ifvarg CURRENTHITPOINTS 0 setactor[PLAYERID].extra 16384
								setvar tempd 10
								randvar tempc 5
								ifrnd 128 addvarvar tempd tempc else subvarvar tempd tempc
								setvarvar tempe MAXHITPOINTS
								mulvarvar tempe tempd
								divvar tempe 1000
								ifvarl tempe 1 setvar tempe 1
					
								setvarvar TEMPDAMAGEVAR tempe
								state char_firedamage_misc
								setvarvar tempe TEMPDAMAGEVAR
					
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 769 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 513 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 257 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 1 { mulvarvar tempe TEMP divvar tempe 100 }
					
								//*********************
								//*Check Malakian Gems*
								//*********************
								setvarvar TEMP7 tempe
								state malakiangemcheck 
								setvarvar tempe TEMP7
					
								//****************
								//*Support System*
								//****************
								ifvarg tempe 0
								{
									setvar DAMAGEMODIFIER 1000
									//**Fire Support / Ted**
									state support-fireresist
									state damagemod-tempvar       
								}
					
								//*********************************
								//*Support System [ESSence Support*
								//*********************************
								ifvarg tempe 0
								{
									setvar DAMAGEMODIFIER 1000
									//**Overall Support / ESSence**
									state support-overallresist
									state damagemod-tempvar          
								}
					
								//******************
								//*Equipment System*
								//******************
								ifvarg tempe 0
								{
									setvar DAMAGEMODIFIER 1000
									// Equipment Slot #1
									ifvare PLAYEREQUIPSLOTITEM1 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #2
									ifvare PLAYEREQUIPSLOTITEM2 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #3
									ifvare PLAYEREQUIPSLOTITEM3 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #4
									ifvare PLAYEREQUIPSLOTITEM4 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #5
									ifvare PLAYEREQUIPSLOTITEM5 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #6
									ifvare PLAYEREQUIPSLOTITEM6 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #7
									ifvare PLAYEREQUIPSLOTITEM7 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									// Equipment Slot #8
									ifvare PLAYEREQUIPSLOTITEM8 1 addvar DAMAGEMODIFIER -250 // Sun Ring
									ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
									state damagemod-tempvar        
								}
					
								ifvarand CHEATBITFIELD? 16 { divvar tempe 1000 ifvarl tempe 1 setvar tempe 1 state cheatersound }
					
								setvarvar TEMPDAMAGEVAR tempe
								state lisashield_misc
								setvarvar tempe TEMPDAMAGEVAR
					
								state player_specialarmor
					
								setvarvar tempb CURRENTHITPOINTS
								subvarvar tempb tempe
								ifvarl tempe 0 setvar PLAYERHPDAMAGED? -1
								ifvarg tempe 0 setvar PLAYERHPDAMAGED? 1
								ifvarl tempb 0 setvar tempb 0
								ifvarvarg tempb MAXHITPOINTSATOMIC setvarvar tempb MAXHITPOINTSATOMIC
								setactor[PLAYERID].htpicnum -1
								setvarvar CURRENTHITPOINTS tempb
								state checkbuddhamode
					
								ifvare CHARACTERSELECTED? 8
								{
									ifvare HAVEENERGYSHIELD? 1
									{
										ifvare ENERGYSHIELDMODE 1 
										{
											ifvarg CURRENTCELLS -1 ifvarg DAMAGEINCELL 0
											{
												ifvarg FULLSHIELDDAMAGE 0
												{
													setvar ATTACKINGACTORPICNUM 2333
													getactor[THISACTOR].pal TEMP
													setvarvar ATTACKINGACTORPAL TEMP
													setvar ACTORCRITICAL? 0
													setvar ATTACKERDISPLAYTIMER 0 setvar BIOSHIELDNULLDAMAGE 0
													setvar CELLDAMAGETIMER 0
												}
												else
												{
													setvar ATTACKINGACTORPICNUM 2333
													getactor[THISACTOR].pal TEMP
													setvarvar ATTACKINGACTORPAL TEMP
													setvar ACTORCRITICAL? 0
													setvar ATTACKERDISPLAYTIMER 0 setvar BIOSHIELDNULLDAMAGE 1
													setvar CELLDAMAGETIMER 0
												}
											}
										}
									}
								}
					
								ifvarn player[THISACTOR].over_shoulder_on 0
								{
									ifvarg CELLDAMAGETEMP 0
									{
										setvarvar SHOWDAMAGE CELLDAMAGETEMP
										setvar SHOWDAMAGETYPE 2
										setvarvar SHOWDAMAGEACTORID PLAYERID
										state showdamage
									}
								}
								ifvare CHARACTERSELECTED? 8
								{
									ifvare HAVEENERGYSHIELD? 1
									{
										ifvare ENERGYSHIELDMODE 1 
										{
											ifvarg CURRENTCELLS -1 ifvarg DAMAGEINCELL 0 nullop
											else state floorflamedmgdisplays
										}
										else state floorflamedmgdisplays
									}
									else state floorflamedmgdisplays
								}
								else state floorflamedmgdisplays
							}
							else
							{
								getactorvar[PLAYERID].VEHICLEID TEMPVAR2
								getactorvar[TEMPVAR2].ACTORHP TEMPVAR3
								getactorvar[TEMPVAR2].ACTORMAXHP TEMPVAR4
								ifvarg TEMPVAR3 0 setactor[TEMPVAR2].extra 16384
								setvar tempd 6
								randvar tempc 3
								ifrnd 128 addvarvar tempd tempc else subvarvar tempd tempc
								setvarvar tempe TEMPVAR4
								mulvarvar tempe tempd
								divvar tempe 1000
								ifvarl tempe 1 setvar tempe 1
					
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 769 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 513 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 257 { mulvarvar tempe TEMP divvar tempe 100 }
								randvar TEMP 5 addvar TEMP 110
								ifpdistl 1 { mulvarvar tempe TEMP divvar tempe 100 }
					
								//*********************
								//*Check Malakian Gems*
								//*********************
								setvarvar TEMP7 tempe
								state malakiangemcheck 
								setvarvar tempe TEMP7
					
								state player_specialarmor
					
								getactorvar[PLAYERID].VEHICLEID TEMPVAR2
								getactorvar[TEMPVAR2].ACTORHP TEMPVAR3
								setvarvar tempb TEMPVAR3
								subvarvar tempb tempe
								ifvarl tempe 0 setvar VEHICLEHPDAMAGED? -1
								ifvarg tempe 0 setvar VEHICLEHPDAMAGED? 1
								ifvarl tempb 0 setvar tempb 0
								getactorvar[TEMPVAR2].ACTORMAXHP TEMPVAR4
								mulvar TEMPVAR4 2
								ifvarvarg tempb TEMPVAR4 setvarvar tempb TEMPVAR4
								setactor[PLAYERID].htpicnum -1
								setvarvar TEMPVAR3 tempb
								setactorvar[TEMPVAR2].ACTORHP TEMPVAR3

								state floorflamedmgdisplays
							}
						}
						else
						{
							sound INVULNITEM3
							palfrom 16 16 16 16
						}
					}
				}
			}
		
		}
		// Player Damage Support
	
		//******************************************
		//*Warming up in Freezing Environs [Actors]*
		//******************************************
		addvar FINDNEAR_INTERVAL 1
		ifvarvarg FINDNEAR_INTERVAL FINDNEAR_INTERVAL_MAX
		{
		findnearactor3d FEM1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM2 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM3 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM4 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM5 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM6 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM7 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM9 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM10 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d WOMAN 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ROBOTDOG 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ROBOTDOG2 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d TOUGHGAL 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NAKED1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PODFEM1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d WOLFDUDE 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE2 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE3 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE5 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE6 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE7 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE9 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d STAND1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DEALER 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d STAND3 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d STAND4 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PUNKDUDE 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COP1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COP2 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d SITTINGDUDE 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL2 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL3 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL4 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PRESIDENTCLINTON 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d SHARK 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat 
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOP 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPSTAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPSHOOT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPDUCKING 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPJETPACK 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPRUNNING 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPJUSTSIT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPONTOILET 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PIGCOP 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PIGCOPDIVE 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PIGCOPSTAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMAN 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMANSTAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMANJUMP 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMANSPITTING 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d OCTABRAIN 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d OCTABRAINSTAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEAST 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEASTSTAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEASTJUMP 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEASTHANG 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COMMANDER 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COMMANDERSTAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1STAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1SHOOT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1LOB 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2STAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2SHOOT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2BREATH 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS3 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS3STAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS3LOB 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS4 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS4STAYPUT 9216 FLOORFLAMEACTORDMGID state floorflamedetectifdead_heat
		setvar FINDNEAR_INTERVAL 0
	
		ifvarn FLOORFLAMEACTORDMGID -1
		{
			ifvare mainmenu 0
			{
			getactorvar[FLOORFLAMEACTORDMGID].ACTORINVULNTIME TEMP3
			ifvarl TEMP3 1
			{
				getactorvar[FLOORFLAMEACTORDMGID].ACTORHP TEMPVAR2
				ifvarg TEMPVAR2 0
				{
				ifvarg FLOORFLAMEDISTANCE 4608 ifvarl FLOORFLAMEDISTANCE 9217
				{
					ifrnd 64
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
				}
				else
				ifvarg FLOORFLAMEDISTANCE 2304 ifvarl FLOORFLAMEDISTANCE 4609 
				{
					ifrnd 256
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
					ifrnd 64
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
				}
				else
				ifvarg FLOORFLAMEDISTANCE 1152 ifvarl FLOORFLAMEDISTANCE 2305
				{
					ifrnd 256
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
					ifrnd 256
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
					ifrnd 64
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 9 addvar tempg 10 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
				}
				else
				ifvarl FLOORFLAMEDISTANCE 1153
				{
					ifrnd 256
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 4 addvar tempg 5 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
					ifrnd 256
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 6 addvar tempg 7 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
					ifrnd 256
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 9 addvar tempg 10 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
					ifrnd 64
					{
					getactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf
					ifvarg tempf 0 { randvar tempg 12 addvar tempg 13 subvarvar tempf tempg ifvarl tempf 0 setvar tempf 0 setactorvar[FLOORFLAMEACTORDMGID].freezetimer tempf }
					}
				}
				}
			}
			}
		}
		}
	
		// Actor Damage Support
		addvar FINDNEAR_INTERVAL 1
		ifvarvarg FINDNEAR_INTERVAL FINDNEAR_INTERVAL_MAX
		{
		findnearactor3d FEM1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM2 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM3 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM4 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM5 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM6 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM7 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM9 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d FEM10 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d WOMAN 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ROBOTDOG 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ROBOTDOG2 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d TOUGHGAL 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NAKED1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PODFEM1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d WOLFDUDE 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE2 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE3 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE5 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE6 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE7 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DANCE9 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d STAND1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DEALER 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d STAND3 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d STAND4 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PUNKDUDE 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COP1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COP2 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d SITTINGDUDE 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL2 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL3 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ANIMEGIRL4 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PRESIDENTCLINTON 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d ROTATEGUN 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d SHARK 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead 
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOP 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPSTAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPSHOOT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPDUCKING 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPJETPACK 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPRUNNING 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPJUSTSIT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZTROOPONTOILET 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PIGCOP 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PIGCOPDIVE 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d PIGCOPSTAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMAN 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMANSTAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMANJUMP 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d LIZMANSPITTING 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d DRONE 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d OCTABRAIN 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d OCTABRAINSTAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEAST 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEASTSTAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEASTJUMP 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d NEWBEASTHANG 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COMMANDER 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d COMMANDERSTAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d TANK 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d EMPTYTANK 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d SCORPIONTANK 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1STAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1SHOOT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS1LOB 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2STAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2SHOOT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS2BREATH 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS3 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS3STAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS3LOB 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS4 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		ifvare FLOORFLAMEACTORDMGID -1 findnearactor3d BOSS4STAYPUT 1024 FLOORFLAMEACTORDMGID state floorflamedetectifdead
		setvar FINDNEAR_INTERVAL 1
		}
	
		ifvarn FLOORFLAMEACTORDMGID -1
		{
	
			ifvare mainmenu 0
			{
			getactorvar[FLOORFLAMEACTORDMGID].ACTORINVULNTIME TEMP3
			ifvarl TEMP3 1
			{
				getactorvar[FLOORFLAMEACTORDMGID].ACTORHP TEMPVAR2
				ifvarg TEMPVAR2 0 setactor[FLOORFLAMEACTORDMGID].extra 16384
	
				setvar tempd 10
				randvar tempc 5
				ifrnd 128 addvarvar tempd tempc else subvarvar tempd tempc
				getactorvar[FLOORFLAMEACTORDMGID].ACTORMAXHP TEMP4
				setvarvar tempe TEMP4
				mulvarvar tempe tempd
				divvar tempe 1000
				ifvarl tempe 1 setvar tempe 1
	
				getactor[FLOORFLAMEACTORDMGID].picnum TEMP2
				getactor[FLOORFLAMEACTORDMGID].pal TEMP3
				ifvare TEMP2 LIZTROOP
				{
				ifvare TEMP3 19 divvar tempe 3
				}
	
				randvar TEMP 5 addvar TEMP 110
				ifvarl FLOORFLAMEDISTANCE 769 { mulvarvar tempe TEMP divvar tempe 100 }
				randvar TEMP 5 addvar TEMP 110
				ifvarl FLOORFLAMEDISTANCE 513 { mulvarvar tempe TEMP divvar tempe 100 }
				randvar TEMP 5 addvar TEMP 110
				ifvarl FLOORFLAMEDISTANCE 257 { mulvarvar tempe TEMP divvar tempe 100 }
				randvar TEMP 5 addvar TEMP 110
				ifvarl FLOORFLAMEDISTANCE 1 { mulvarvar tempe TEMP divvar tempe 100 }
	
				getactorvar[FLOORFLAMEACTORDMGID].ACTORAP TEMPVAR3
				getactorvar[FLOORFLAMEACTORDMGID].ACTORMAXAP TEMP2
				getactorvar[FLOORFLAMEACTORDMGID].ACTORARMORPERCENT TEMP3
				state enemy_specialarmor
				ifvarg tempd 0
				{
				setvarvar SHOWDAMAGE tempd
				setvar SHOWDAMAGETYPE 1
				setvarvar SHOWDAMAGEACTORID FLOORFLAMEACTORDMGID
				state showdamage
				}
				setactorvar[FLOORFLAMEACTORDMGID].ACTORAP TEMPVAR3       
	
				getactorvar[FLOORFLAMEACTORDMGID].ACTORHP TEMPVAR2
				setvarvar tempb TEMPVAR2
				subvarvar tempb tempe
				ifvarl tempb 0 setvar tempb 0
	
				getactorvar[FLOORFLAMEACTORDMGID].ACTORMAXHP TEMP2
				mulvar TEMP2 2
				ifvarvarg tempb TEMP2 setvarvar tempb TEMP2
	
				setvarvar TEMPVAR2 tempb
				setactorvar[FLOORFLAMEACTORDMGID].ACTORHP TEMPVAR2
	
				setactor[FLOORFLAMEACTORDMGID].htpicnum -1
				setactor[FLOORFLAMEACTORDMGID].htowner THISACTOR
	
				ifvarg tempe 0
				{
				setvarvar SHOWDAMAGE tempe
				setvar SHOWDAMAGETYPE 0
				setvarvar SHOWDAMAGEACTORID FLOORFLAMEACTORDMGID
				state showdamage
				}
				ifvarg tempe 0
				{
				setactorvar[FLOORFLAMEACTORDMGID].ACTORHPDAMAGED? 1
				state floorflame_damagesounds
				}   
				else sound NODAMAGE
			}
			else sound INVULNITEM3
			}
		}
		// Actor Damage Support
		ifactioncount 16
			action FFLAME
	}
	ifaction FFLAME
	{
		ifvare mainmenu 0
		{
		ifrnd 4
		{
			action FFLAME_FR
			sound CAT_FIRE
			resetactioncount
		}
		}
	}
enda

state getturrethealth

	ifai 0
	{ 
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			//addlogvar SKILLSET?
			state rankstarbeta
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
			//addlogvar SKILLSET?
		}
		
		ifvare SKILLSET? 0
		{
			//addlogvar SKILLSET?
			state enemytyperandomizer
			state rankstarbeta
			ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
			{
				setvar ACTORHP ROTTURRETSTRENGTH
				setvar ACTORMAXAIRTIME ROTTURRETAIRTIME
				setvar ACTORAIRTIME ROTTURRETAIRTIME
				setvar ACTORMAXHP ROTTURRETSTRENGTH
			}
			else
			ifspritepal 19
			{
				setvar ACTORHP RPGTURRETSTRENGTH
				setvar ACTORMAXAIRTIME RPGTURRETAIRTIME
				setvar ACTORAIRTIME RPGTURRETAIRTIME
				setvar ACTORATTACK RPGTURRETBASEATTACK
				setvar ACTORDEFENSE RPGTURRETBASEDEFENSE
				setvar ACTORMAXAP RPGTURRETSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE RPGTURRETCRITCHANCE
				setvar ACTORSURVIVALVALUE RPGTURRETSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 16 // Explosives
				setvar ACTORWEAKNESSFLAGS 10 // Ice, Electric
			}
			else
			ifspritepal 17
			{
				setvar ACTORHP SHOTTURRETSTRENGTH
				setvar ACTORMAXAIRTIME SHOTTURRETAIRTIME
				setvar ACTORAIRTIME SHOTTURRETAIRTIME
				setvar ACTORATTACK SHOTTURRETBASEATTACK
				setvar ACTORDEFENSE SHOTTURRETBASEDEFENSE
				setvar ACTORMAXAP SHOTTURRETSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE SHOTTURRETCRITCHANCE
				setvar ACTORSURVIVALVALUE SHOTTURRETSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 32 // Metal
				setvar ACTORWEAKNESSFLAGS 10 // Ice, Electric
			}
			else
			{
				setvar ACTORHP ROTTURRETSTRENGTH
				setvar ACTORMAXAIRTIME ROTTURRETAIRTIME
				setvar ACTORAIRTIME ROTTURRETAIRTIME
				setvar ACTORATTACK ROTTURRETBASEATTACK
				setvar ACTORDEFENSE ROTTURRETBASEDEFENSE
				setvar ACTORMAXAP ROTTURRETSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE ROTTURRETCRITCHANCE
				setvar ACTORSURVIVALVALUE ROTTURRETSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 257 // Fire (1), Ion/Energy (256)
				setvar ACTORWEAKNESSFLAGS 10 // Ice, Electric
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
			//addlogvar SKILLSET?
		}
	} 
ends

action ASATNSPIN     0 5 1 1 4
action ASATSHOOTING   -10 3 5 1 40
action ASATWAIT      0 1 5 1 1
move TURRVEL

actor ROTATEGUN ROTTURRETSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state accquireenemystats
	state enemy_underwater-space
	state enemyfloorhurt
	state enemymaxhpcountdown
	state enemy_general_stuff 
	// state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifaction 0
	{
		state getturrethealth
		ifvarn SKILLSET? -1 
		{
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
		ifvarand ACTORSTATUS? 16 // check dimness
		{
			ifpdistl 1536
			{
				action ASATSHOOTING
				ifvarand ACTORSTATUS? 128 move TURRVEL else move TURRVEL faceplayer
			}
			else
			{
				action ASATWAIT
				ifvarand ACTORSTATUS? 128 move TURRVEL else move TURRVEL faceplayer
			}
		}
		else
		{
			action ASATSHOOTING
			ifvarand ACTORSTATUS? 128 move TURRVEL else move TURRVEL faceplayer
		}
	}
	else ifaction ASATNSPIN
	{
		ifactioncount 32
		{
			action ASATWAIT
			move TURRVEL faceplayer
		}
	}
	else ifaction ASATSHOOTING
	{
		ifactioncount 12
		{
			ifrnd 32
			{
				action ASATWAIT
				move 0
			}
		}
	
		ifcount 32 resetcount
		else ifcount 22
		{
			ifcount 23 nullop
			else
			{
				ifvarand ACTORSTATUS? 16 // If Dim and player is a distance away, return to normal waiting instead of popping off blind shots
				{
					ifpdistl 1536 nullop
					else
					{
						action ASATWAIT
						move TURRVEL
					}
				}
			}
		}
		else ifcount 16
		{
			ifcount 17 nullop
			else
			{
				state echeckquadtime
				state echeckvampiretime
				ifspritepal 19
				{ 
					sound RPG_SHOOT
					eshoot RPG
				}
				else
				ifspritepal 17 
				{ 
					sound PIG_ATTACK
					state pigshotgun
				}
				else
				{
					sound PRED_ATTACK
					eshoot FIRELASER
				}
			}
		}
		else ifcount 10
		{
			ifcount 11 nullop
			else
			{
				ifvarand ACTORSTATUS? 16 // If Dim and player is a distance away, return to normal waiting instead of popping off blind shots
				{
					ifpdistl 1536 nullop
					else
					{
						action ASATWAIT
						move TURRVEL
					}
				}
			}
		}
		else ifcount 4
		{
			ifcount 5 nullop
			else
			{
				ifcansee ifcanshoottarget
				{
					state echeckquadtime
					state echeckvampiretime
					ifspritepal 19
					{ 
						sound RPG_SHOOT
						eshoot RPG
					}
					else
					ifspritepal 17 
					{ 
						sound PIG_ATTACK
						state pigshotgun
					}
					else
					{
						sound PRED_ATTACK
						eshoot FIRELASER
					}
				}
			}
		}
	}
	else ifaction ASATWAIT
	{
		ifactioncount 64
		{
			ifrnd 32
			{
				ifvarg CURRENTHITPOINTS 0 // ifp palive
				{
					ifcansee
					{
						ifvarand ACTORSTATUS? 16 // check dimness for range check
						{
							ifpdistl 1536
							{
								action ASATSHOOTING
								ifvarand ACTORSTATUS? 128 move TURRVEL else move TURRVEL faceplayer
							}
							else
							{
								action ASATWAIT
								move 0
							}
						}
						else
						{
							action ASATSHOOTING
							ifvarand ACTORSTATUS? 128 move TURRVEL else move TURRVEL faceplayer
						}
					}
				}
			}
		}
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifspritepal 9 nullop
			else
			ifspritepal 17
			{
				randvar RANKPOINTSTEMP SHOTTURRETRANKPOINTSRAND 
				addvar RANKPOINTSTEMP SHOTTURRETRANKPOINTSSOLID 
				randvar EXPPTSTEMP SHOTTURRETEXPERIENCERAND
				addvar EXPPTSTEMP SHOTTURRETEXPERIENCE
			}
			else
			ifspritepal 19
			{
				randvar RANKPOINTSTEMP RPGTURRETRANKPOINTSRAND 
				addvar RANKPOINTSTEMP RPGTURRETRANKPOINTSSOLID 
				randvar EXPPTSTEMP RPGTURRETEXPERIENCERAND
				addvar EXPPTSTEMP RPGTURRETEXPERIENCE
			}
			else
			{
				randvar RANKPOINTSTEMP ROTTURRETRANKPOINTSRAND 
				addvar RANKPOINTSTEMP ROTTURRETRANKPOINTSSOLID 
				randvar EXPPTSTEMP ROTTURRETEXPERIENCERAND
				addvar EXPPTSTEMP ROTTURRETEXPERIENCE
			}
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
			sound LASERTRIP_EXPLODE
			ifspritepal 19 
			{
				debris SCRAP1 15
				hitradius 1780 64 128 192 256 
				espawn EXPLOSION2
				setactor[RETURN].xrepeat 40
				setactor[RETURN].yrepeat 40
			}
			else 
			ifspritepal 17 
			{
				debris SCRAP1 9
				hitradius 1068 18 37 55 74
				espawn EXPLOSION2
				setactor[RETURN].xrepeat 25
				setactor[RETURN].yrepeat 25
			}
			else
			{
				debris SCRAP1 7
				hitradius 890 8 16 24 32
				espawn EXPLOSION2
				setactor[RETURN].xrepeat 20
				setactor[RETURN].yrepeat 20
			}
			ifspritepal 9 nullop else { state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_artifacts ifrnd 192 state drop_artifacts ifrnd 192 state drop_artifacts } }
			state resetenemytimers
			killit
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					state sparkstate
					ifrnd 85 sound HITMETAL
					else ifrnd 128 sound HITMETAL2
					else sound HITMETAL3
					action ASATNSPIN
					debris SCRAP1 4
				}
				else soundonce NODAMAGE
			}
		}
		move 0
	}
enda

action RIP_F 0 8 1 1 1
actor FORCERIPPLE 0 RIP_F
	ifactioncount 8
		killit
enda

action TRANSFOWARD 0  6  1  1  2
action TRANSBACK   5  6  1 -1  2
actor TRANSPORTERSTAR 0 TRANSFOWARD
	ifaction TRANSFOWARD
		ifactioncount 6
			action TRANSBACK
	else
		ifactioncount 6
			killit
enda

action BEAMFOWARD  0  4  1  1  9
actor TRANSPORTERBEAM 0 BEAMFOWARD
	sizeto 32 64
	sizeto 32 64
	sizeto 32 64
	ifactioncount 4
		killit
enda

action FIRE_FRAMES   -1 14 1 1 1
move FIREVELS

state firestate

	ifvare sector[THISACTOR].lotag 2 
	{ 
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		spawn WATERBUBBLE state bubblesounds
		killit 
	} // this makes fire fissile out underwater like it should :P

	state fire_warmth
	state fireheatactors
	
	ifaction 0 ifrnd 16
	{
		action FIRE_FRAMES
		cstator 128
	}
	
	sleeptime 300         // Never let it fall to sleep
	
	ifspawnedby FIRE
	{
		ifgapzl 16
			break
	}
	else
		ifspawnedby FIRE2
	{
		ifgapzl 16
			break
	}
	
	ifinwater
		killit

	// Player Damage Support
	ifvarg CURRENTHITPOINTS 0 // ifp palive
	{
		ifpdistl 844
		{
			ifrnd 32
			{
				ifcansee
				{
					ifvare VEHICLEID -1
					{
						setvar MELEEDAMAGE 5
						randvar MELEEDAMAGEVAR 2
						state meleerandomdmg
						ifvarg CURRENTHITPOINTS 0 // ifp palive 
						{ 
							state getmeleedmg
							setvarvar TEMPDAMAGEVAR MELEEDAMAGE
							state char_firedamage_misc
							setvarvar MELEEDAMAGE TEMPDAMAGEVAR
			
							//****************
							//*Support System*
							//****************
							ifvarg MELEEDAMAGE 0
							{
								setvar DAMAGEMODIFIER 1000
								//**Fire Support / Ted**
								state support-fireresist
								state damagemod-enemy-melee       
							}
			
							//*********************************
							//*Support System [ESSence Support*
							//*********************************
							ifvarg MELEEDAMAGE 0
							{
								setvar DAMAGEMODIFIER 1000
								//**Overall Support / ESSence**
								state support-overallresist
								state damagemod-enemy-melee          
							}
			
							//******************
							//*Equipment System*
							//******************
							ifvarg MELEEDAMAGE 0
							{
								setvar DAMAGEMODIFIER 1000
								// Equipment Slot #1
								ifvare PLAYEREQUIPSLOTITEM1 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #2
								ifvare PLAYEREQUIPSLOTITEM2 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #3
								ifvare PLAYEREQUIPSLOTITEM3 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #4
								ifvare PLAYEREQUIPSLOTITEM4 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #5
								ifvare PLAYEREQUIPSLOTITEM5 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #6
								ifvare PLAYEREQUIPSLOTITEM6 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #7
								ifvare PLAYEREQUIPSLOTITEM7 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								// Equipment Slot #8
								ifvare PLAYEREQUIPSLOTITEM8 1 addvar DAMAGEMODIFIER -250 // Sun Ring
								ifvarl DAMAGEMODIFIER 0 setvar DAMAGEMODIFIER 0
								state damagemod-enemy-melee        
							}
			
						}
						ifvarg INVULNTIME 0 state invulnflash 
						else ifvarl PLAYERDAMAGE 1 state nullflash
						else
						{
							ifvarg CURRENTHITPOINTS 0 // ifp palive
							{          
								ifvarg PLAYERDAMAGE 0
								{
									setvarvar PAINSOUNDFACTOR PLAYERDAMAGE
									state checkpainfactor
									state characterpainsounds
								}
							}
						}
					}
					else
					{
						ifrnd 32
						{
							setvar MELEEDAMAGE 3
							randvar MELEEDAMAGEVAR 1
							state meleerandomdmg
							ifvarg CURRENTHITPOINTS 0 state getmeleedmg
							ifvarg INVULNTIME 0 state invulnflash 
							else ifvarl PLAYERDAMAGE 1 state nullflash
							else
							{
								ifvarg CURRENTHITPOINTS 0 // ifp palive
								{
									ifvarg PLAYERDAMAGE 0 palfrom 24 0 16
								}
							}
						}
					}
				}
			}
		}
	}
	// Actor Damage Support
	state firedmgactors
	// Actor Damage Support

	ifactor FIRE
	{
		ifspawnedby FIRE
			break
	}
	else
		ifactor FIRE2
			ifspawnedby FIRE2
				break
	
	iffloordistl 128
	{
		ifrnd 128
		{
			ifcount 84
				killit
			else
				ifcount 42
					sizeto 0 0
			else
				sizeto 32 32
		}
	}
	else
		killit
ends

useractor notenemy FIRE 0 0 FIREVELS 
	state firestate 
enda

useractor notenemy FIRE2 0 0 FIREVELS 
	state firestate 
enda

actor FECES
	ifcount 24
	{
		ifpdistl RETRIEVEDISTANCE
		{
			ifrnd SWEARFREQUENCY { ifvare CHARACTERSELECTED? 1 soundonce DUKE_STEPONFECES }
	
			sound STEPNIT
	
			espawn NEWBLOODPOOL setactor[RETURN].pal 15 setactor[RETURN].cstat 34 // Will be brown
			killit
		}
	}
	else
		sizeto 32 32
enda

state random_wall_jibs
	ifrnd 96 shoot BLOODSPLAT1
	ifrnd 96 shoot BLOODSPLAT2
	ifrnd 96 shoot BLOODSPLAT3
	ifrnd 96 shoot BLOODSPLAT4
	ifrnd 96 shoot BLOODSPLAT1
ends

action FEMSHRUNK
action FEMFROZEN1 1
action FEMGROW
action FEMFROZEN2
action FEMDANCE1 19 1 1 1 16
action FEMDANCE3 19 1 1 1 26
action FEMDANCE2 20 2 1 1 10

action FEMANIMATESLOW 0 2 1 1 100
action TOUGHGALANIM   0 5 1 1 25
action FEMANIMATE

state femcode
	ifactor NAKED1 nullop
	else ifactor FEM6 nullop
	else
	{
		ifvare mainmenu 0 fall
		ifactor BLOODYPOLE ifhitweapon ifdead
		{
			state standard_jibs
			killit
		}
	}
	
	ifaction FEMSHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action FEMANIMATE
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT
				{ sizeto 40 40 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	else ifaction FEMGROW
	{
		ifcount 32
		{
			respawnhitag
			guts JIBS4 20
			guts JIBS6 20
			spritepal 6
			soundonce LADY_SCREAM
			ifactor NAKED1
				debris SCRAP3 4
			else
				ifactor PODFEM1
					debris SCRAP3 4
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			{ espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			spawn EXPLOSION2
			randvar RANKPOINTSTEMP FEMKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP FEMKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	
	else
		ifaction FEMDANCE1
	{
		ifactioncount 2
			action FEMDANCE2
	}
	else
		ifaction FEMDANCE2
	{
		ifactioncount 8
			action FEMDANCE3
	}
	else
		ifaction FEMDANCE3
	{
		ifactioncount 2
		action FEMANIMATE
	}
	else
		ifaction FEMFROZEN1
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action FEMANIMATE
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
			lotsofglass 30
			state frozenactor-breakcode
			respawnhitag
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 514 setactor[RETURN].pal 1 }
			randvar RANKPOINTSTEMP FEMKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP FEMKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			killit
		}
		else
			ifp pfacing
				ifpdistl FROZENQUICKKICKDIST
					pkick
		break
	}
	else ifaction FEMFROZEN2
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ifactor TOUGHGAL
				action TOUGHGALANIM
			else
				ifactor FEM10
					action FEMANIMATESLOW
			else
				action FEMANIMATE
	
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	
			lotsofglass 30
	
			state frozenactor-breakcode
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			respawnhitag
	
			ifrnd 128
				sound DUKE_HIT_STRIPPER1
			else
				sound DUKE_HIT_STRIPPER2
			randvar RANKPOINTSTEMP FEMKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP FEMKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
						killit
		}
		else
			ifp pfacing ifpdistl FROZENQUICKKICKDIST
				pkick
		break
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				action FEMGROW
				break
			}
			else ifwasweapon FREEZEBLAST
			{
				ifaction FEMSHRUNK
					break
	
				ifactor NAKED1
					action FEMFROZEN2
				else
					ifactor FEM5
						action FEMFROZEN2
				else
					ifactor FEM6
						action FEMFROZEN2
				else
					ifactor FEM8
						action FEMFROZEN2
				else
					ifactor FEM9
						action FEMFROZEN2
				else
					ifactor FEM10
						action FEMFROZEN2
				else
					ifactor TOUGHGAL
						action FEMFROZEN2
				else
					ifactor PODFEM1
						action FEMFROZEN2
				else
					action FEMFROZEN1
	
				move 0
				spritepal 1
				state frosty
				strength 0
	
				state freezeup
	
				break
			}
	
			ifrnd 128
				sound DUKE_HIT_STRIPPER1
			else
				sound DUKE_HIT_STRIPPER2
	
			respawnhitag
			state standard_jibs
			state random_wall_jibs
			espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34
	
			ifactor FEM1
				money 5
			else ifactor FEM2
			{
				money 7
				cactor BARBROKE
				cstat 0
				setactor[THISACTOR].extra -1
			}
			else ifactor FEM3
				money 4
			else ifactor FEM7
				money 8
	
			spritepal 6
			soundonce LADY_SCREAM
			ifactor NAKED1
				debris SCRAP3 18
			else
				ifactor PODFEM1
					debris SCRAP3 18
			randvar RANKPOINTSTEMP FEMKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP FEMKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			state checkkillerofciv
			state expmulti
			state exp_given
			killit
		}
		else
		{
			ifwasweapon SHRINKSPARK
			{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				move 0
				action FEMSHRUNK
				cstat 0
				break
			}
			else
				ifwasweapon GROWSPARK
					sound EXPANDERHIT
	
			ifactor FEM8
				break
	
			ifactor TOUGHGAL
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					state toughgalspeech
					ifrnd 12 guts JIBS6 1
				}
				else
				{
					sound NODAMAGE
				}
			}
			else
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					sound SQUISHED
					ifrnd 12 guts JIBS6 1
				}
				else
				{
					sound NODAMAGE
				}
			}
		}
	}
ends

state killme
	ifinwater nullop
	else
	ifp pfacing ifpdistl 1280 ifhitspace
		soundonce KILLME
ends

state tipme
	ifp pfacing ifpdistl 1280 ifhitspace	ifcount 26
	{
		ifvarg DOLLARS 99
		{
			resetcount
			tip
			subvar DOLLARS 100
			subvar DISPLAYDOLLARS 100
			state displaymoney
			ifrnd 128 { soundonce DUKE_TIP1 break }
			else { soundonce DUKE_TIP2 break }
			ifactor FEM1 { action FEMDANCE1 break }
		}
		else 
		{ 
			sound MENU_ERROR
			redefinequote 130 ^10NOT ENOUGH MONEY, MAN! 
			setvarvar fta fta_normal setvar ftq 130
		}
	}
ends

state toughgaltalk
  ifp pfacing
    ifpdistl 1280
      ifhitspace
        state toughgalspeech
ends

eventloadactor FEM1 
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM1 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

useractor notenemy POLEFEM2 TOUGH
	ifhitweapon
	{
		ifdead
		{
			sound VENT_BUST
			ifrnd 64 state randomshrapnel
			ifrnd 64 state randomshrapnel
			ifrnd 128 state randomshrapnel
			ifrnd 128 state randomshrapnel 
			state randomshrapnel
			state randomshrapnel
			killit
		}
	}
enda

eventloadactor FEM2
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM2 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM3
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM3 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM4
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM4 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM5
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM5 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state killme
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM6
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM6 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state killme
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM7
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM7 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
		
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
		
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state tipme
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM8
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP 0
		setvar ACTORMAXAP 0
		setvar SKILLSET? 1
	}
enda
actor FEM8 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP 0
		setvar ACTORMAXAP 0
		setvar SKILLSET? 1
	}
	state femcode
enda

eventloadactor FEM9
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM9 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor FEM10
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor FEM10 TOUGH FEMANIMATESLOW
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state tipme
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor TOUGHGAL
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor TOUGHGAL MANWOMANSTRENGTH TOUGHGALANIM
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP MANWOMANSTRENGTH
		randvar TEMPVAR 6
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state toughgaltalk
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

eventloadactor NAKED1
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda
actor NAKED1 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state killme
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

useractor notenemy PODFEM1POD TOUGH
	ifaction FEMSHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			action FEMANIMATE
			cstat 257
		}
		else
			ifcount SHRUNKCOUNT
			{ sizeto 40 40 setvar SHRUNK? 0 }
		else
			state genericshrunkcode
	}
	else ifaction FEMGROW
	{
		ifcount 32
		{
			guts JIBS4 20
			guts JIBS6 20
			spritepal 6
			debris SCRAP3 4
			sound SQUISHED
			sound PIPEBOMB_EXPLODE
			hitradius 2048 60 70 80 90
			spawn EXPLOSION2
			setvar TEMPVAR 1
			killit
		}
		else
			sizeto MAXXSTRETCH MAXYSTRETCH
	}
	else ifaction FEMFROZEN2
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action FEMANIMATE
	
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	
			lotsofglass 30
	
			state frozenactor-breakcode
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			respawnhitag
	
			randvar RANKPOINTSTEMP FEMKILLRANKPOINTSRAND 
			addvar RANKPOINTSTEMP FEMKILLRANKPOINTSSOLID 
			setvar TEMPVAR 1
			killit
		}
		else
			ifp pfacing
				ifpdistl FROZENQUICKKICKDIST
					pkick
		break
	}
	
	ifhitweapon
	{
		ifwasweapon SHRINKSPARK
		{
			setvar SHRUNK? 1
			sound ACTOR_SHRINKING
			move 0
			action FEMSHRUNK
			cstat 0
			break
		}
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				action FEMGROW
				break
			}
			else ifwasweapon FREEZEBLAST
			{
				ifaction FEMSHRUNK
					break
		
				action FEMFROZEN2
		
				move 0
				spritepal 1
				state frosty
				strength 0
		
				state freezeup
		
				break
			}
			spritepal 6
			state standard_jibs
			state random_wall_jibs
			debris SCRAP3 18
			sound SQUISHED
			killit
		}
	}
enda

eventloadactor PODFEM1 
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
	}
enda

actor PODFEM1 TOUGH FEMANIMATE
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare SKILLSET? 0
	{
		setvar ACTORMAXHP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR else subvarvar ACTORMAXHP TEMPVAR
		mulvar ACTORMAXHP DUKEHITPOINTSSTART
		divvar ACTORMAXHP 100
		setvarvar TEMPVAR ACTORMAXHP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXHP TEMPVAR2 else subvarvar ACTORMAXHP TEMPVAR2
	
		setvar ACTORMAXAP FEMSTRENGTH
		randvar TEMPVAR 4
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR else subvarvar ACTORMAXAP TEMPVAR
		mulvar ACTORMAXAP DUKEHITPOINTSSTART
		divvar ACTORMAXAP 100
		setvarvar TEMPVAR ACTORMAXAP
		divvar TEMPVAR 10
		randvarvar TEMPVAR2 TEMPVAR
		ifrnd 128 addvarvar ACTORMAXAP TEMPVAR2 else subvarvar ACTORMAXAP TEMPVAR2
	
		setvarvar ACTORHP ACTORMAXHP
		setvarvar ACTORMAXHPATOMIC ACTORMAXHP
		mulvar ACTORMAXHPATOMIC 2
		setvarvar ACTORMAXAPATOMIC ACTORMAXAP
		mulvar ACTORMAXAPATOMIC 2
		setvar ACTORMAXAIRTIME 390 setvarvar ACTORAIRTIME ACTORMAXAIRTIME
		setvar ACTORMAXFALLRESIST FEMALENPCFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state rankstarbeta
		setvar SKILLSET? 1
		changespritestat THISACTOR 1
	}
	ifvare SKILLSET? 1 state rankstarbeta
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state actorseekingitem
	state checkfallcounter_nonplayer 
	state enemyfloorhurt
	state enemy_underwater-space
	ifvare oldskoolmode 0 { ifvarn CANUSECOILS? 0 state civsave }
	state killme
	state femcode
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
enda

actor BLOODYPOLE TOUGH
	state femcode
enda
actor STATUEFLASH
	ifvare mainmenu 0 fall
	ifcount 32
		cactor STATUE
enda
actor STATUE
	ifvare mainmenu 0 fall
	ifp pfacing ifpdistl 1280 ifhitspace
	{
		cactor STATUEFLASH
		move 0
	}
enda

actor MIKE
	ifp pfacing
		ifpdistl 1280
			ifhitspace
				mikesnd
enda

state troop_body_jibs
	ifrnd 64 guts HEADJIB1 1
	ifrnd 64 guts LEGJIB1 2
	ifrnd 64 guts ARMJIB1 2
	ifrnd 48 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
ends

state liz_body_jibs
	ifrnd 64 guts LIZMANHEAD1 1
	ifrnd 64 guts LIZMANLEG1 2
	ifrnd 64 guts LIZMANARM1 2
	ifrnd 48
	{
		espawn NEWBLOODPOOL
		setactor[RETURN].cstat 34
		getactor[THISACTOR].pal temp
		ifvare temp 6 setactor[RETURN].pal 22
		else ifvare temp 8 setactor[RETURN].pal 22
		else setactor[RETURN].pal 2
	}
ends

action BLOODFRAMES 0 4 1 1 15
actor BLOOD 0 BLOODFRAMES
	sizeto 72 72 sizeto 72 72 sizeto 72 72
	
	ifpdistg 3144 killit
	ifactioncount 4 killit
enda

action EGGOPEN1 1 1 1 1 4
action EGGOPEN2 2 1 1 1 4
action EGGOPEN3 2 1 1 1 4
action EGGWAIT  0
action EGGFROZEN 1
action EGGFROZENCLOSED 0
action EGGGROW 1
action EGGSHRUNK 1

state eggbonuses
	state eggawards
	state monster_drop_bonus1 state monster_drop_bonus2
	ifvarg SKILLLEVEL 1 { state monster_drop_bonus1 state monster_drop_bonus2 }
	ifvarg SKILLLEVEL 3 { state monster_drop_bonus1 state monster_drop_bonus2 }
	ifvarg SKILLLEVEL 5 { state monster_drop_bonus1 state monster_drop_bonus2 }
	ifvarg SKILLLEVEL 7 { state monster_drop_bonus1 state monster_drop_bonus2 }
ends

state setegghealth
	ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
	{
		ifvare SKILLSET? 0
		{
			setvar ACTORHP EGGSTRENGTH
			setvar ACTORMAXHP EGGSTRENGTH
			setvar SKILLSET? -1
		}
	}
	else
	{ 
		ifvare SKILLSET? 0
		{
			setvar ACTORHP EGGSTRENGTH
			setvar ACTORMAXHP EGGSTRENGTH
			setvar SKILLSET? -1
		}
	}
ends

actor EGG EGGSTRENGTH
	state setegghealth
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ifvare mainmenu 0 fall
	ifaction 0
	{
		ifcount 64
		{
			ifrnd 128
			{
				// state setegghealth
				action EGGWAIT
				move 0
			}
			else
			{
				sound SLIM_HATCH
				action EGGOPEN1
				setvar ACTORHP 1
			}
		}
	}
	else
	ifaction EGGOPEN1 ifactioncount 4 action EGGOPEN2
	else
	ifaction EGGOPEN2 ifactioncount 4
	{
		spawn GREENSLIME
		action EGGOPEN3
	}
	else
	ifaction EGGGROW
		{ state genericgrowcode }
	else
	ifaction EGGSHRUNK
		{ state genericshrunkcode }
	else
	ifaction EGGFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action 0
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
			ifrnd 32 spawn SUPERATOM 
			lotsofglass 30
	
			state frozenactor-breakcode
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].pal 1 setactor[RETURN].cstat 34 }
			ifaction EGGFROZEN nullop
			else ifaction EGGFROZENCLOSED state eggawards
			killit
		}
	
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
	
		break
	}
	else
	ifaction EGGFROZENCLOSED
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			action 0
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
			ifrnd 32 spawn SUPERATOM 
			lotsofglass 30
	
			state frozenactor-breakcode
			ifrnd 84 { espawn BLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			ifaction EGGFROZEN nullop
			else
			ifaction EGGFROZENCLOSED
			{
				state eggawards
			}
			killit
		}
	
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
	
		break
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon FREEZEBLAST
			{
				state frosty
				state freezeup
				spritepal 1
				move 0
				ifaction EGGOPEN1 action EGGFROZENCLOSED
				else ifaction EGGOPEN2 action EGGFROZENCLOSED
				else ifaction EGGOPEN3 action EGGFROZEN
				else action EGGFROZENCLOSED
				strength 0
				break
			}
			else
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				move 0
				sound ACTOR_GROWING
				action EGGGROW
				break
			}
	
			ifspritepal 9 nullop
			else
			{
				ifaction EGGOPEN1 state eggbonuses
				else ifaction EGGOPEN2 state eggbonuses
				else ifaction EGGOPEN3 nullop
				else state eggbonuses
			}
			sound SQUISHED
	
			state standard_jibs
			killit
		}
		else
		ifwasweapon SHRINKSPARK
		{
			setvar SHRUNK? 1
			move 0
			sound ACTOR_SHRINKING
			action EGGSHRUNK
			break
		}
	  
		ifwasweapon GROWSPARK
			sound EXPANDERHIT
	}
	else
	ifaction EGGWAIT
	{
		ifcount 512
			ifrnd 2
		{
			ifaction EGGSHRUNK
				break
			sound SLIM_HATCH
			action EGGOPEN1
		}
	}
enda

state brokentv
	sound VENT_BUST
	ifrnd 85 lotsofglass 25 else ifrnd 128 lotsofglass 20 else lotsofglass 15
	randvar temp 2
	ifvare temp 0 setwall[hitwall].picnum 7502
	ifvare temp 1 setwall[hitwall].picnum 7503
	ifvare temp 2 setwall[hitwall].picnum 7504
ends

actor KNEE KNEE_WEAPON_STRENGTH enda

actor SPIT SPIT_WEAPON_STRENGTH enda
actor CHAINGUN CHAINGUN_WEAPON_STRENGTH enda
actor SHOTGUN SHOTGUN_WEAPON_STRENGTH enda
actor FIRELASER FIRELASER_WEAPON_STRENGTH enda

actor HEAVYHBOMB HANDBOMB_WEAPON_STRENGTH enda

actor BOUNCEMINE BOUNCEMINE_WEAPON_STRENGTH enda
actor MORTER MORTER_WEAPON_STRENGTH enda
actor SHRINKSPARK SHRINKER_WEAPON_STRENGTH enda

actor GROWSPARK GROWSPARK_WEAPON_STRENGTH
	ifcount 18
		killit
	else ifcount 9
	{
		sizeto 0 0
		sizeto 0 0
		sizeto 0 0
		sizeto 0 0
	}
	else
	{
		sizeto 28 28
		sizeto 28 28
		sizeto 28 28
		sizeto 28 28
	}
enda

actor RPG RPG_WEAPON_STRENGTH enda

actor FREEZEBLAST FREEZETHROWER_WEAPON_STRENGTH enda
actor DEVISTATORBLAST FREEZETHROWER_WEAPON_STRENGTH enda
actor COOLEXPLOSION1 COOL_EXPLOSION_STRENGTH 
	ifnotmoving
	{
		addvar tempe 1
		ifvarg tempe 9 ifrnd 64 killit
	}
enda

eventloadactor TRIPBOMB 
	getactor[THISACTOR].owner TEMP
	//addlogvar TEMP
	ifvare TEMP -1 state calculatetripbombatk
enda

actor TRIPBOMB TRIPBOMB_STRENGTH enda

action WEAP2FRAMES 0  4  1  1  6
actor SHOTSPARK1 PISTOL_WEAPON_STRENGTH WEAP2FRAMES

	ifdead
		killit
	ifactioncount 4
		killit
	else
	{
		ifactioncount 3
		{
			ifinwater { spawn WATERBUBBLE state bubblesounds }
		}
		else
			ifcount 2 nullop
			else
				ifonwater
					spawn WATERSPLASH2
	}
	
	ifcount 1 nullop else
	{
		state getfloordist
		getactor[THISACTOR].htg_t 6 hitwall
		ifvarn hitwall -1
		{
			getwall[hitwall].overpicnum FLOORTEX // check for forcefields first
			ifvare FLOORTEX 230 nullop // BIGFORCE
			else ifvare FLOORTEX 503 { ifrnd 160 sound GLASSCRACKSND } // GLASS
			else ifvare FLOORTEX 560 { ifrnd 16 sound GLASSCRACKSND } // MIRROR
			else ifvare FLOORTEX 663 nullop // W_FORCEFIELD
			else ifvare FLOORTEX 664 nullop // W_FORCEFIELD [invisible]
			else
			{
				getwall[hitwall].picnum FLOORTEX
				ifvarg FLOORTEX 4805 ifvarl FLOORTEX 4851 state brokentv
				else ifvarg FLOORTEX 4958 ifvarl FLOORTEX 5030 state brokentv
				else ifvare FLOORTEX 6252 state brokentv
				else ifvarg FLOORTEX 7490 ifvarl FLOORTEX 7502 state brokentv
			}
			state CHECKSTEPS
			state BULLETHITSOUNDS
		}
		else
		ifvarl z 0
		{
			getsector[THISACTOR].floorpicnum FLOORTEX
			state CHECKSTEPS
			state BULLETHITSOUNDS
			ifvare FLOORTEX W_TECHWALL1 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].floorpicnum 363 } else
			ifvare FLOORTEX W_TECHWALL2 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].floorpicnum 362 } else
			ifvare FLOORTEX W_TECHWALL3 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].floorpicnum 360 } else
			ifvare FLOORTEX W_TECHWALL4 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].floorpicnum 361 } else
			ifvare FLOORTEX 5645 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].floorpicnum 5638 }
		}
		else
		ifceilingdistl 3
		{
			getsector[THISACTOR].ceilingpicnum FLOORTEX
			state CHECKSTEPS
			state BULLETHITSOUNDS
			ifvare FLOORTEX W_TECHWALL1 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].ceilingpicnum 363 } else
			ifvare FLOORTEX W_TECHWALL2 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].ceilingpicnum 362 } else
			ifvare FLOORTEX W_TECHWALL3 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].ceilingpicnum 360 } else
			ifvare FLOORTEX W_TECHWALL4 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].ceilingpicnum 361 } else
			ifvare FLOORTEX 5645 { sound VENT_BUST debris SCRAP1 8 setsector[THISACTOR].ceilingpicnum 5638 }
		}
	
		getactor[THISACTOR].htg_t 8 temp // temp = hitsprite
		ifvarn temp -1
		{
			getactor[temp].picnum FLOORTEX
			ifvare FLOORTEX CRATE1
			{
				getactor[temp].pal tempb
				ifvare tempb 30
				{
					state WOODHITSOUND
				}
				else 
				{
					state HITMETALSOUND
					state sparkstate
				}
			}
			ifvare FLOORTEX CRATE2
			{
				getactor[temp].pal tempb
				ifvare tempb 30
				{
					state HITMETALSOUND
					state sparkstate
				}
				else state WOODHITSOUND
			}
		}
	}
enda

useractor notenemy HITSCANDOT 0
	sizeat 40 40
	ifcount 1 killit
enda

//************************
//************************
//************************
//************************
include APLAYER.CON // Moved APLAYER actor code and related stuff to it's own CON file. :P
//************************
//************************
//************************
//************************

/*
actor ORGANTIC TURRETSTRENGTH
	ifcount 48
		resetcount
	else
	{
		ifcount 32
		sizeto 32 32
	}
	else
		ifcount 16
		{
			sizeto 48 18
			ifpdistl 2048
			{
				sound TURR_ATTACK
				addphealth -2
				palfrom 32 16
			}
		}
	ifhitweapon
	{
		ifdead
		{
			state addtokillamounts state check_a_characters_kills
			sound TURR_DYING
			guts JIBS5 10
			killit
		}
		sound TURR_PAIN
		break
	}
	ifrnd 1
		soundonce TURR_ROAM
enda
*/

state rf
	ifrnd 128 cstat 4 else cstat 0
ends

state liztroopexplode
	ifvare ACTORBOMBER? 1
	{
		sound RPG_EXPLODE
		ifspritepal 19
		{
			setvar TEMP 2800
			setvarvar TEMP2 ACTORATTACK
			mulvar TEMP2 1
			addvar TEMP2 43
			setvarvar TEMP3 ACTORATTACK
			mulvar TEMP3 2
			addvar TEMP3 86
			setvarvar TEMP4 ACTORATTACK
			mulvar TEMP4 3
			addvar TEMP4 129
			setvarvar TEMP5 ACTORATTACK
			mulvar TEMP5 4
			addvar TEMP5 172
			espawn EXPLOSION2
			setactor[RETURN].xrepeat 52
			setactor[RETURN].yrepeat 52
			debris SCRAP1 2
			debris SCRAP2 1
			debris SCRAP3 1
		}
		else
		{
			setvar TEMP 1780
			setvarvar TEMP2 ACTORATTACK
			mulvar TEMP2 2
			divvar TEMP2 4
			addvar TEMP2 35
			setvarvar TEMP3 ACTORATTACK
			mulvar TEMP3 3
			divvar TEMP3 4
			addvar TEMP3 70
			setvarvar TEMP4 ACTORATTACK
			mulvar TEMP4 4
			divvar TEMP4 4
			addvar TEMP4 105
			setvarvar TEMP5 ACTORATTACK
			mulvar TEMP5 5
			divvar TEMP5 4
			addvar TEMP5 140
			espawn EXPLOSION2
			setactor[RETURN].xrepeat 40
			setactor[RETURN].yrepeat 40
		}
		debris SCRAP1 4
		debris SCRAP2 2
		debris SCRAP3 3
		debris SCRAP4 1
		ifvarg QUADTIME 0 mulvar TEMP2 4
		ifvarg QUADTIME 0 mulvar TEMP3 4
		ifvarg QUADTIME 0 mulvar TEMP4 4
		ifvarg QUADTIME 0 mulvar TEMP5 4
		ifvarg QUADTIME 0 sound QUADDAMAGE
		hitradiusvar TEMP TEMP2 TEMP3 TEMP4 TEMP5
		setvar ACTORBOMBER? 0
		setvar ACTORBOMBTIMER 0
		state resetenemytimers
	}
	sound SQUISHED
	// OFF-LIMITS
	setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
	// END OFF-LIMITS
	state troop_body_jibs
	state standard_jibs
	killit
ends

//
//
//    TROOP/LIZTROOP CODE
//
//

state checktrooppalette
	ifai 0
	{
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			state rankstarbeta
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
		
		ifvare SKILLSET? 0
		{
			state enemytyperandomizer
			state cstat2048toeliteflag
			state rankstarbeta
			setvar ACTORJETPACKAMOUNT JETPACK_AMOUNT
			ifspritepal 11 // Palette 11 is 'Old School' Trooper (No abnormal stat calculations)
			{
				setvar ACTORHP TROOPSTRENGTH
				setvar ACTORMAXAIRTIME TROOPAIRTIME
				setvar ACTORAIRTIME TROOPAIRTIME
				setvar ACTORMAXHP TROOPSTRENGTH
			}
			else
			ifspritepal 10 // Palette 10 will be 'Old School' Captain (No abnormal stat calculations)
			{
				setvar ACTORHP CAPTAINSTRENGTH
				setvar ACTORMAXAIRTIME CAPTAINAIRTIME
				setvar ACTORAIRTIME CAPTAINAIRTIME
				setvar ACTORMAXHP CAPTAINSTRENGTH
			}
			else
			ifspritepal 14
			{
				setvar ACTORHP SHRINKTROOPSTRENGTH
				setvar ACTORMAXAIRTIME SHRINKTROOPAIRTIME
				setvar ACTORAIRTIME SHRINKTROOPAIRTIME
				setvar ACTORATTACK SHRINKTROOPBASEATTACK
				setvar ACTORDEFENSE SHRINKTROOPBASEDEFENSE
				setvar ACTORMAXAP SHRINKTROOPSTRENGTH
				setvar ACTORMAXFALLRESIST SHRINKTROOPFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE SHRINKTROOPCRITCHANCE
				setvar ACTORSURVIVALVALUE SHRINKTROOPSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 257 // Fire (1), Ion/Energy (256)
			}
			else
			ifspritepal 17
			{
				sizeat 55 55
				setvar ACTORHP ZERMANSTRENGTH
				setvar ACTORMAXAIRTIME ZERMANAIRTIME
				setvar ACTORAIRTIME ZERMANAIRTIME
				setvar ACTORATTACK ZERMANBASEATTACK
				setvar ACTORDEFENSE ZERMANBASEDEFENSE
				setvar ACTORMAXAP ZERMANSTRENGTH
				setvar ACTORMAXFALLRESIST ZERMANFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE ZERMANCRITCHANCE
				setvar ACTORSURVIVALVALUE ZERMANSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 290 // Ice, Metal, Ion/Energy (256)
				setvar ACTORWEAKNESSFLAGS 9 // Fire (1), Electric
			}
			else
			ifspritepal 19
			{
				setvar ACTORHP RAVAGERCAPTAINSTRENGTH
				setvar ACTORMAXAIRTIME RAVAGERCAPTAINAIRTIME
				setvar ACTORAIRTIME RAVAGERCAPTAINAIRTIME
				setvar ACTORATTACK RAVAGERCAPTAINBASEATTACK
				setvar ACTORDEFENSE RAVAGERCAPTAINBASEDEFENSE
				setvar ACTORMAXAP RAVAGERCAPTAINSTRENGTH
				setvar ACTORMAXFALLRESIST RAVAGERCAPTAINFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE RAVAGERCAPTAINCRITCHANCE
				setvar ACTORSURVIVALVALUE RAVAGERCAPTAINSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 272 // Explosion, Ion/Energy (256)
				setvar ACTORWEAKNESSFLAGS 2 // Ice
			}
			else
			ifspritepal 21
			{
				setvar ACTORHP CAPTAINSTRENGTH
				setvar ACTORMAXAIRTIME CAPTAINAIRTIME
				setvar ACTORAIRTIME CAPTAINAIRTIME
				setvar ACTORATTACK CAPTAINBASEATTACK
				setvar ACTORDEFENSE CAPTAINBASEDEFENSE
				setvar ACTORMAXAP CAPTAINSTRENGTH
				setvar ACTORMAXFALLRESIST CAPTAINFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE CAPTAINCRITCHANCE
				setvar ACTORSURVIVALVALUE CAPTAINSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 256 // Ion/Energy (256)
			}
			else
			{
				setvar ACTORHP TROOPSTRENGTH
				setvar ACTORMAXAIRTIME TROOPAIRTIME
				setvar ACTORAIRTIME TROOPAIRTIME
				setvar ACTORATTACK TROOPBASEATTACK
				setvar ACTORDEFENSE TROOPBASEDEFENSE
				setvar ACTORMAXAP TROOPSTRENGTH
				setvar ACTORMAXFALLRESIST TROOPFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE TROOPCRITCHANCE
				setvar ACTORSURVIVALVALUE TROOPSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 256 // Ion/Energy (256)
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
	}
ends

action ATROOPSTAND     0  1  5  1  1
action ATROOPGROW    0  1  5  1  1
action ATROOPSTAYSTAND  -2  1  5  1  1
action ATROOPWALKING   0  4  5  1   12
action ATROOPWALKINGBACK 15   4  5   -1   12
action ATROOPRUNNING   0  4  5  1  8
action ATROOPSHOOT    35  1  5  1   30
action ATROOPJETPACK  40  1  5  1  1
action ATROOPJETPACKILL 40  2  5  1   50
action ATROOPFLINTCH  50  1  1  1  6
action ATROOPDYING    50  5  1  1   16
action ATROOPDEAD     54
action ATROOPPLAYDEAD   54
action ATROOPSUFFERDEAD 58  2  1   -4   24
action ATROOPSUFFERING  59  2  1  1   21
action ATROOPDUCK     64  1  5  1  3
action ATROOPDUCKSHOOT  64  2  5  1   25
action ATROOPABOUTHIDE  74  1  1  1   25
action ATROOPHIDE     79  1  1  1   25
action ATROOPREAPPEAR   74  1  1  1   25
action ATROOPFROZEN    0  1  5
action ATROOPARMBOMB  74  1  1  1   25

move TROOPWALKVELS 72
move TROOPWALKVELSBACK -72
move TROOPJETPACKVELS 64 -84
move TROOPJETPACKILLVELS 192 -38
move TROOPRUNVELS 108
move TROOPRUNITEMVELS 135
move TROOPSWIMUPVELS 64 -84
move TROOPSWIMUPVELSFAST 192 -63
move TROOPSWIMDOWNVELS 64 84
move TROOPSWIMDOWNVELSFAST 192 63
move TROOPBOMBRUNVELS 128
move TROOPBOMBRUNITEMVELS 157
move TROOPBOMBJETPACKVELS 80 -84
move TROOPBOMBJETPACKILLVELS 216 -38
move SHRUNKVELS 32
move TROOPSTOPPED
move DONTGETUP

ai AITROOPSEEKENEMY  ATROOPWALKING   TROOPWALKVELS seekplayer
ai AITROOPSEEKPLAYER ATROOPWALKING   TROOPWALKVELS seekplayer
ai AITROOPFLEEING  ATROOPWALKING   TROOPWALKVELS fleeenemy
ai AITROOPFLEEINGBACK ATROOPWALKINGBACK   TROOPWALKVELSBACK faceplayer
ai AITROOPDODGE    ATROOPRUNNING   TROOPRUNVELS  dodgebullet
ai AITROOPSHOOTING   ATROOPSHOOT   TROOPSTOPPED  faceplayer
ai AITROOPDUCKING  ATROOPDUCK    TROOPSTOPPED  faceplayer
ai AITROOPJETPACK  ATROOPJETPACK   TROOPJETPACKVELS seekplayer
ai AITROOPSHRUNK   ATROOPWALKING   SHRUNKVELS fleeenemy
ai AITROOPHIDE     ATROOPABOUTHIDE TROOPSTOPPED faceplayer
ai AITROOPGROW     ATROOPGROW    DONTGETUP faceplayerslow

ai AITROOPARMBOMB  ATROOPARMBOMB   TROOPSTOPPED faceplayer
ai AITROOPBOMBRUN  ATROOPRUNNING   TROOPBOMBRUNVELS seekplayer
ai AITROOPBOMBDODGE  ATROOPRUNNING   TROOPRUNVELS  dodgebullet
ai AITROOPBOMBJETPACK  ATROOPJETPACK   TROOPBOMBJETPACKVELS seekplayer

ai AITROOPGETITEM  ATROOPRUNNING   TROOPRUNITEMVELS  faceplayer

state liztroopseekitem
	state accquireenemystats
	state checkfallcounter_nonplayer
	state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 11 nullop
		else ifspritepal 10 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					ifvare ACTORBOMBER? 0
					{
						state actorseekingitem
						ifvarn ITEMTARGET -1
						{
							state enemyitemzsetup1
							ifvare CANSEEITEM? 1
							{
								state enemyitemzsetup2
								ifai AITROOPSEEKENEMY break
								else
								{
									ifai AITROOPJETPACK { ifvarg ACTORJETPACKAMOUNT 0 break else ai AITROOPSEEKENEMY } else ai AITROOPSEEKENEMY
								}
							}
							else setvar ITEMTARGET -1 
						}
					}
					else setvar ITEMTARGET -1 
				}
			}
		}
	}

ends

state trooparmbombstate
	ifaction ATROOPARMBOMB
	{
		ifactioncount 2
		{
			sound LASERTRIP_ARMING
			sound PRED_PAIN
			ai AITROOPBOMBRUN
		}
	}
ends

state troophidestate
	ifaction ATROOPREAPPEAR
	{
		ifactioncount 2
		{
			sound TELEPORTER
			ai AITROOPSHOOTING
			cstat 257
		}
		else
		{
			ifspritepal 17 sizeto 55 55 else sizeto 40 40
			ifspritepal 17 sizeto 55 55 else sizeto 40 40
			ifspritepal 17 sizeto 55 55 else sizeto 40 40
			ifspritepal 17 sizeto 55 55 else sizeto 40 40
			setvar CLOAKED? 0
			spawn FRAMEEFFECT1
		}
	}
	else ifaction ATROOPWALKING
	{
		ifpdistl 3072 // 2448
			ifpdistg 1024
		{
			ifceilingdistl 48
				break
			ifp pfacing
				break
	
			ifgapzl 64 nullop
			else
			ifawayfromwall
			{
				spawn TRANSPORTERSTAR
				action ATROOPREAPPEAR
				move TROOPSTOPPED
				break
			}
		}
	}
	else ifaction ATROOPHIDE
	{
		ifactioncount 2
		{
			spawn TRANSPORTERSTAR
			sound TELEPORTER
			action ATROOPWALKING
			move TROOPWALKVELS faceplayer
			cstat 32768
			setvar CLOAKED? 1
		}
		else
		{
			ifspritepal 17 sizeto 4 55 else sizeto 4 40
			ifspritepal 17 sizeto 4 55 else sizeto 4 40
			ifspritepal 17 sizeto 4 55 else sizeto 4 40
			ifspritepal 17 sizeto 4 55 else sizeto 4 40
			spawn FRAMEEFFECT1
		}
	}
	else ifaction ATROOPABOUTHIDE
	{
		ifvarand ACTORSTATUS? 16
		{
			ifpdistl 1536
			{
				getactorvar[THISACTOR].ACTORHP TEMP
				getactorvar[THISACTOR].ACTORMAXHP TEMP2
				setvarvar TEMP3 TEMP
				mulvar TEMP3 1000
				divvarvar TEMP3 TEMP2
		
				ifspritepal 19 setvar TEMP4 201
				else setvar TEMP4 51
		
				ifvarvarl TEMP3 TEMP4
				{
					ifactioncount 1
					{
						ai AITROOPARMBOMB
						sound LASERTRIP_ARMING
						setvar ACTORBOMBER? 1
					}
				}
				else
				{
					ifactioncount 2
					{
						action ATROOPHIDE
						cstat 0
					}
				}
			}
			else ai AITROOPSEEKPLAYER
		}
		else
		{
			getactorvar[THISACTOR].ACTORHP TEMP
			getactorvar[THISACTOR].ACTORMAXHP TEMP2
			setvarvar TEMP3 TEMP
			mulvar TEMP3 100
			divvarvar TEMP3 TEMP2
		
			ifspritepal 19 setvar TEMP4 21
			else setvar TEMP4 5
		
			ifvarvarl TEMP3 TEMP4
			{
				ifactioncount 1
				{
					ai AITROOPARMBOMB
					sound LASERTRIP_ARMING
					setvar ACTORBOMBER? 1
				}
			}
			else
			{
				ifactioncount 2
				{
					action ATROOPHIDE
					cstat 0
				}
			}
		}
	}
ends


state troopgunnashoot
	ifp palive
	{
		ifpdistl 1024 ai AITROOPSHOOTING
		else ifactornotstayput
		{
			ifvarand ACTORSTATUS? 16 nullop
			else
			{
				ifactioncount 12 ifrnd 16 ifcanshoottarget
				{
					ifspritepal 21
					{
						ifrnd 4
						{
							ifpdistg 4096
							{
								ifvare ACTORBOMBER? 0
								{
									ifvarl ACTORINVULNTIME 1 ai AITROOPHIDE else ai AITROOPSHOOTING
								}
							}
						}
					}
					else
					ifspritepal 14
					{
						ifrnd 4
						{
							ifpdistg 4096
							{
								ifvare ACTORBOMBER? 0
								{
									ifvarl ACTORINVULNTIME 1 ai AITROOPHIDE else ai AITROOPSHOOTING
								}
							}
						}
					}
					else
					ifspritepal 19
					{
						ifrnd 4
						{
							ifpdistg 4096
							{
								ifvare ACTORBOMBER? 0
								{
									ifvarl ACTORINVULNTIME 1 ai AITROOPHIDE else ai AITROOPSHOOTING
								}
							}
						}
					}
					else
					ifspritepal 17
					{
						ifrnd 4
						{
							ifpdistg 4096
							{
								ifvare ACTORBOMBER? 0
								{
									ifvarl ACTORINVULNTIME 1 ai AITROOPHIDE else ai AITROOPSHOOTING
								}
							}
						}
					}
					else
					{
						ifpdistl 1100
						{
							ifvarl ACTORINVULNTIME 1 ai AITROOPFLEEING else ai AITROOPSHOOTING 
						}
						else
						{
							ifpdistl 4096
								ifcansee
									ifcanshoottarget
										ai AITROOPSHOOTING
							else
							{
								move TROOPRUNVELS seekplayer
								action ATROOPRUNNING
							}
						}
					}
				}
			}
		}
		else // if stayput
		{
			ifcount 26
			{
			ifrnd 32
			{
				ifvarand ACTORSTATUS? 16
				{
				ifpdistl 1536 ai AITROOPSHOOTING
				}
				else ai AITROOPSHOOTING
			}
			}
		}
	}
ends

state troopbomb1
	move TROOPSTOPPED
	setactor[THISACTOR].htowner PLAYERID
	state drop_ammo
	ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_ammo ifrnd 192 state drop_ammo ifrnd 192 state drop_ammo }
	ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
	state random_wall_jibs
	state liztroopawards
	setvar TEMPVAR 0
	state expmulti
	state exp_given
	state addtokillamounts state check_a_characters_kills
	state liztroopexplode
ends

state troopbombseekstate
	ifvarl ACTORINVULNTIME 1
	{
		ifpdistl 1780
		{
			ifpdistl 1335
			{
				ifpdistl 890
				{
					ifpdistl 445
					{
						ifvarand ACTORSTATUS? 16 { ifrnd 51 state troopbomb1 }
						else state troopbomb1
					}
					else
					{
						ifvarand ACTORSTATUS? 16 { ifrnd 38 state troopbomb1 }
						else { ifrnd 192 state troopbomb1 }
					}
				}
				else
				{
					ifvarand ACTORSTATUS? 16 { ifrnd 25 state troopbomb1 }
					else { ifrnd 128 state troopbomb1 }
				}
			}
			else
			{
				ifvarand ACTORSTATUS? 16 { ifrnd 12 state troopbomb1 }
				else { ifrnd 64 state troopbomb1 }
			}
		}
	}
	
	ifinwater
	{
		ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
		break
	}
	
	ifcansee
	{
		ifp phigher
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536
				{
					ifvarg ACTORJETPACKAMOUNT 0
					{
						ifceilingdistl 128 nullop
						else
						{
							ifactornotstayput
							{
								ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
							}
						}
						break
					}
				}
			}
			else
			{
				ifvarg ACTORJETPACKAMOUNT 0
				{
					ifceilingdistl 128 nullop
					else
					{
						ifactornotstayput
						{
							ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
						}
					}
					break
				}
			}
		}
		else ifrnd 32
		{
			ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25
					{
						ifvare ACTORBOMBER? 0
						{
							ifrnd 128 ai AITROOPDODGE
							else ai AITROOPDUCKING
							break
						}
						else ai AITROOPBOMBDODGE
					}
				}
				else
				{
					ifvare ACTORBOMBER? 0
					{
						ifrnd 128 ai AITROOPDODGE
						else ai AITROOPDUCKING
						break
					}
					else ai AITROOPBOMBDODGE
				}
			}
		}
	}
	
	ifnotmoving
	{
		ifvarand ACTORSTATUS? 16
		{
			ifrnd 3 operate
		}
		else
		{
			ifrnd 32 operate
		}
	}
	
	ifrnd 4
	{
		ifrnd 128 soundonce PRED_ROAM
		else soundonce PRED_ROAM2
	}
ends

state troopseek1
	state troopgunnashoot
	
	ifinwater
	{
		ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
		break
	}
	
	ifcansee
	{
		ifmove TROOPRUNVELS
		{
			ifvare ACTORBOMBER? 0
			{
				ifpdistl 1596
					ai AITROOPDUCKING
			}
		}
	
		ifp phigher
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536
				{
					ifvarg ACTORJETPACKAMOUNT 0
					{
						ifceilingdistl 128 nullop
						else
						{
							ifactornotstayput
							{
								ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
							}
						}
						break
					}
				}
			}
			else
			{
				ifvarg ACTORJETPACKAMOUNT 0
				{
					ifceilingdistl 128 nullop
					else
					{
						ifactornotstayput
						{
							ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
						}
					}
					break
				}
			}
		}
		else ifrnd 2
		{
			ifvarand ACTORSTATUS? 16 nullop
			else
			{
				ifspritepal 21
				{
					ifpdistg 1596
					{
						ifvare ACTORBOMBER? 0
						{
							ifvarl ACTORINVULNTIME 1 { ai AITROOPHIDE break } else { ifrnd 128 ai AITROOPSHOOTING }
						}
					}
				}
				else
				ifspritepal 19
				{
					ifpdistg 1596
					{
						ifvare ACTORBOMBER? 0
						{
							ifvarl ACTORINVULNTIME 1 { ai AITROOPHIDE break } else { ifrnd 128 ai AITROOPSHOOTING }
						}
					}
				}
				else
				ifspritepal 14
				{
					ifpdistg 1596
					{
						ifvare ACTORBOMBER? 0
						{
							ifvarl ACTORINVULNTIME 1 { ai AITROOPHIDE break } else { ifrnd 128 ai AITROOPSHOOTING }
						}
					}
				}
				else
				ifspritepal 17
				{
					ifpdistg 1596
					{
						ifvare ACTORBOMBER? 0
						{
							ifvarl ACTORINVULNTIME 1 { ai AITROOPHIDE break } else { ifrnd 128 ai AITROOPSHOOTING }
						}
					}
				}
				else
				ifspritepal 10
				{
					ifpdistg 1596
					{
						ifvare ACTORBOMBER? 0
						{
							ifvarl ACTORINVULNTIME 1 { ai AITROOPHIDE break } else { ifrnd 128 ai AITROOPSHOOTING }
						}
					}
				}
				else
				{
					ifvare ACTORBOMBER? 0
					{
						ifvarg ACTORINVULNTIME 0 { ifrnd 128 ai AITROOPSHOOTING }
					}
				} 
			}
		
			ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25
					{
						ifvare ACTORBOMBER? 0
						{
							ifrnd 128 ai AITROOPDODGE
							else ai AITROOPDUCKING
							break
						}
						else ai AITROOPBOMBDODGE
					}
				}
				else
				{
					ifvare ACTORBOMBER? 0
					{
						ifrnd 128 ai AITROOPDODGE
						else ai AITROOPDUCKING
						break
					}
					else ai AITROOPBOMBDODGE
				}
			}
		
		}
	}
	
	ifnotmoving
	{
		ifvarand ACTORSTATUS? 16
		{
			ifrnd 3 operate
			else
			{
				ifvare ACTORBOMBER? 0
				{
					ifcount 32
					{
						ifp palive
						{
							ifcansee
							{
								ifcanshoottarget
								{
									ifpdistl 1536 ai AITROOPSHOOTING
								}
							}
						}
					}
				}
			}
		}
		else
		{
			ifrnd 32 operate
			else
			{
				ifvare ACTORBOMBER? 0
				{
					ifcount 32
					{
						ifp palive
						{
							ifcansee
							{
								ifcanshoottarget ai AITROOPSHOOTING
							}
						}
					}
				}
			}
		}
	}
ends

state troopseekstate
	ifai AITROOPSEEKENEMY
	{
		ifvare ITEMTARGET -1 state troopseek1
	}
	else state troopseek1
	
	ifvare ACTORBOMBER? 0
	{
		ifrnd 1
		{
			ifrnd 128
				soundonce PRED_ROAM
			else
				soundonce PRED_ROAM2
		}
	}
	else
	{
		ifrnd 4
		{
			ifrnd 128
				soundonce PRED_ROAM
			else
				soundonce PRED_ROAM2
		}
	}
ends

state troopduckstate
	ifaction ATROOPDUCK
	{
		ifactioncount 8
		{
			ifp palive
			{
				ifrnd 128
					action ATROOPDUCKSHOOT
			}
			else
				ifmove DONTGETUP
					break
				else
					ai AITROOPSEEKPLAYER
		}
	}
	else ifaction ATROOPDUCKSHOOT
	{
		ifcount 64
		{
			ifmove DONTGETUP
				resetcount
			else
			{
				ifpdistl 1100
					ai AITROOPFLEEING
				else
					ai AITROOPSEEKPLAYER
			}
		}
		else
		{
			ifactioncount 2
			{
				ifcanshoottarget
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 1536 state liztroopattack
						else ai AITROOPSEEKPLAYER
					}
					else state liztroopattack
					resetactioncount
				}
				else ai AITROOPSEEKPLAYER
			}
		}
	}
ends

state troopshootstate
	ifactioncount 2
	{
		ifcanshoottarget
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536 state liztroopattack
				else ai AITROOPSEEKPLAYER
			}
			else state liztroopattack
			resetactioncount
			ifrnd 128 ai AITROOPSEEKPLAYER
			ifcount 24
			{
				ifrnd 96
				ifpdistg 2048
					ai AITROOPSEEKPLAYER
				else
				{
					ifpdistg 1596
						ai AITROOPFLEEING
					else
						ai AITROOPFLEEINGBACK
				}
			}
		}
		else ai AITROOPSEEKPLAYER
	}
ends

state troopfleestate
	ifactioncount 7
	{
		ifpdistg 3084
		{
			ai AITROOPSEEKPLAYER
			break
		}
		else
		{
			ifrnd 32
			{
				ifp palive
				{
					ifcansee
					{
						ifcanshoottarget
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistl 1536
								{
									ifrnd 128 ai AITROOPDUCKING
									else ai AITROOPSHOOTING
									break
								}
							}
							else
							{
								ifrnd 128 ai AITROOPDUCKING
								else ai AITROOPSHOOTING
								break
							}
						}
					}
				}
			}
		}
	}
	ifnotmoving
	{
		ifvarand ACTORSTATUS? 16
		{
			ifrnd 3 operate
			else
			{
				ifrnd 32
				{
					ifp palive
					{
						ifcansee
						{
							ifcanshoottarget
							{
								ifpdistl 1536
								{
									ifrnd 128 ai AITROOPDUCKING
									else ai AITROOPSHOOTING
									break
								}
							}
						}
					}
				}
			}
		}
		else
		{
			ifrnd 32 operate
			else
			{
				ifrnd 32
				{
					ifp palive
					{
						ifcansee
						{
							ifcanshoottarget
							{
								ifrnd 128 ai AITROOPDUCKING
								else ai AITROOPSHOOTING
								break
							}
						}
					}
				}
			}
		}
	}
ends

state troopdying
	iffloordistl 32
	{
		ifactioncount 5
		{
			cstat 0
			iffloordistl 8
			ifvarn CLOAKED? 0 sound THUD
			// ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			state rf
			strength 0
			move TROOPSTOPPED
			action ATROOPDEAD
		}
		break
	}
	else
	{
		state rf
		move 0
		action ATROOPDYING
	}
ends

state checktroophit
	ifaction ATROOPSUFFERING
	{
		stopsound LIZARD_BEG
		// sound PRED_DYING
		cstat 0
		action ATROOPSUFFERDEAD
		setvar CHOKING? 0
		// OFF-LIMITS
		setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
		// END OFF-LIMITS
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 state liztroopexplode
		}
		break
	}
	ifdead
	{
		setvar ACTORHP 0
		ifwasweapon FREEZEBLAST
		{
			state freezeup
			state frosty
			spritepal 1
			move 0
			action ATROOPFROZEN
			strength 0
			break
		}
	
		state drop_ammo
		ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_ammo ifrnd 192 state drop_ammo ifrnd 192 state drop_ammo }
		ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
		state random_wall_jibs
		state liztroopawards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
	
		sound PRED_DYING
		ifwasweapon GROWSPARK
		{
			state expanding
			cstat 0
			sound ACTOR_GROWING
			ai AITROOPGROW
			break
		}
		else ifwasweapon RPG state liztroopexplode
		else ifwasweapon RPG_NOAIM state liztroopexplode
		else ifwasweapon OCTANINE_RPG state liztroopexplode
		else ifwasweapon GENERAL_RPG state liztroopexplode
		else ifwasweapon COMMANDER_RPG state liztroopexplode
		else ifwasweapon LEADER_RPG state liztroopexplode
		else ifwasweapon BAALO_RPG state liztroopexplode
		else ifwasweapon GATEMISSILE_MAIN state liztroopexplode
		else ifwasweapon GATEMISSILE_SPLIT state liztroopexplode
		else ifwasweapon STROKEMISSILE_MAIN state liztroopexplode
		else ifwasweapon STROKEMISSILE_SPLIT state liztroopexplode
		else ifwasweapon RADIUSEXPLOSION state liztroopexplode
		else
		{
			ifrnd 32 iffloordistl 32
			{
				setactor[THISACTOR].extra 0
				setvar ACTORHP 0
				setvar CHOKING? 1
				sound LIZARD_BEG
				// { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
				strength 0
				move 0
				action ATROOPSUFFERING
				break
			}
			action ATROOPDYING
			break
		}
	}
	else
	{
		ifvare ACTORINVULNTIME 0
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				state random_wall_jibs
				sound PRED_PAIN
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	
		ifwasweapon SHRINKSPARK
		{
			ifvarg ACTORINVULNTIME 0 state deflectshrinker
			else
			{ 
				ifvare oldskoolmode 0
				{
					ifvarand ACTORFLAGS 512 // Elite Monsters are even more Shrink-Resistant :P
					{
						ifspritepal 14
						{ 
							ifrnd 248 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 21
						{ 
							ifrnd 208 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 19
						{ 
							ifrnd 220 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 17 state deflectshrinker
						else
						{
							ifrnd 204 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
					}
					else       
					{
						ifspritepal 14
						{ 
							ifrnd 224 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 21
						{ 
							ifrnd 64 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 19
						{ 
							ifrnd 112 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 17 state deflectshrinker
						else
						{
							ifrnd 48 state deflectshrinker else { sound ACTOR_SHRINKING ai AITROOPSHRUNK setvar SHRUNK? 1 }
						}
					}
				}
				else
				{
					sound ACTOR_SHRINKING
					ai AITROOPSHRUNK
					setvar SHRUNK? 1
				}
			}
		}
		else
		ifwasweapon GROWSPARK
		{
			ifvare ACTORINVULNTIME 0
			{
				ifvarg ACTORLASTDAMAGE 0 sound EXPANDERHIT
			}
		}
		else
		ifvare ACTORINVULNTIME 0
		{
			iffloordistl 32
			{
				ifrnd 96
				{
					ifvarg ACTORLASTDAMAGE 0 action ATROOPFLINTCH
				}
			}
		}
	}
ends

state troopbombjetpackstate
	state enemyfall-flyingcheck
	ifvarl ACTORINVULNTIME 1
	{
		ifpdistl 1780
		{
			move TROOPSTOPPED
			setactor[THISACTOR].htowner PLAYERID
			state drop_ammo
			ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_ammo ifrnd 192 state drop_ammo ifrnd 192 state drop_ammo }
			ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
			state random_wall_jibs
			state liztroopawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
			state liztroopexplode
			setvar ACTORBOMBTIMER 0
			state resetenemytimers
		}
	}
	
	ifinwater nullop else soundonce DUKE_JETPACK_IDLE
	addvar JETPACKSMOKEVAR 1
	ifvarg JETPACKSMOKEVAR 7
	{
		ifvare sector[THISACTOR].lotag 2 state jetpackbubbles else state jetpacksmoke
		setvar JETPACKSMOKEVAR 0
	}
	ifaction ATROOPJETPACKILL
	{
		ifcansee ifactioncount 2
		{
			ifvarand ACTORFLAGS 16
			{
				ifpdistl 1536
				{
					state echeckquadtime
					state echeckvampiretime
					state liztroopattack
					resetactioncount
				}
			}
			else
			{
				state echeckquadtime
				state echeckvampiretime
				state liztroopattack
				resetactioncount
			}
		}
	
		ifp phigher
		{
			ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
		}
		else
		{
			ifinwater
			{
				ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
			}
			else
			ifcount 26
			{
				iffloordistl 32
				{
					ifvare ACTORBOMBER? 0 ai AITROOPSEEKENEMY else ai AITROOPBOMBRUN
				}
			}
		}
	}
	else ifcount 48 ifcansee
	{
		action ATROOPJETPACKILL
		ifvare ACTORBOMBER? 0 { move TROOPJETPACKILLVELS seekplayer } else { move TROOPBOMBJETPACKILLVELS seekplayer }
	}
	
	ifvarl ACTORJETPACKAMOUNT 1
	{
		ifinwater nullop
		else
		{
			ifai AITROOPBOMBJETPACK ai AITROOPBOMBRUN
			else ifai AITROOPJETPACK ai AITROOPSEEKENEMY
		}
	}
ends

state troopjetpackstate
	state enemyfall-flyingcheck
	ifinwater nullop else soundonce DUKE_JETPACK_IDLE
	addvar JETPACKSMOKEVAR 1
	ifvarg JETPACKSMOKEVAR 7
	{
		ifvare sector[THISACTOR].lotag 2 state jetpackbubbles else state jetpacksmoke
		setvar JETPACKSMOKEVAR 0
	}
	
	ifvare ITEMTARGET -1
	{
		ifaction ATROOPJETPACKILL
		{
			ifcansee ifactioncount 2
			{
				ifvarand ACTORFLAGS 16
				{
					ifpdistl 1536
					{
						state echeckquadtime
						state echeckvampiretime
						state liztroopattack
						resetactioncount
					}
				}
				else
				{
					state echeckquadtime
					state echeckvampiretime
					state liztroopattack
					resetactioncount
				}
			}
		
			ifp phigher
			{
				ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
			}
			else
			{
				ifinwater
				{
					ifvare ACTORBOMBER? 0 ai AITROOPJETPACK else ai AITROOPBOMBJETPACK
				}
				else
				ifcount 26
				{
					iffloordistl 32
					{
						ifvare ACTORBOMBER? 0 ai AITROOPSEEKENEMY else ai AITROOPBOMBRUN
					}
				}
			}
		}
		else ifcount 48 ifcansee
		{
			action ATROOPJETPACKILL
			ifvare ACTORBOMBER? 0 { move TROOPJETPACKILLVELS seekplayer } else { move TROOPBOMBJETPACKILLVELS seekplayer }
		}
	}
	
	ifvarl ACTORJETPACKAMOUNT 1
	{
		ifinwater nullop
		else
		{
			ifai AITROOPBOMBJETPACK ai AITROOPBOMBRUN
			else ifai AITROOPJETPACK ai AITROOPSEEKENEMY
		}
	}
ends

state checksquished
	ifsquished
	{    
		state addtokillamounts
		sound SQUISHED
		state standard_jibs
		state random_ooz
		// OFF-LIMITS
		setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
		// END OFF-LIMITS
		killit
	}
ends

state troopsufferingstate
	ifactioncount 2
	{
		ifrnd 16
			spawn WATERDRIP

		ifspritepal 21
		{
			ifvare SKILLLEVEL 0 { ifrnd 1 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 1 { ifrnd 2 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 2 { ifrnd 4 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 3 { ifrnd 7 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 4 { ifrnd 11 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 5 { ifrnd 16 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 6 { ifrnd 22 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 6 { ifrnd 29 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 7 { ifrnd 37 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 8 { ifrnd 46 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 9 { ifrnd 56 setvar ACTORBOMBER? 1 }
		}
		else
		ifspritepal 19
		{
			ifvare SKILLLEVEL 0 { ifrnd 4 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 1 { ifrnd 7 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 2 { ifrnd 11 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 3 { ifrnd 16 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 4 { ifrnd 22 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 5 { ifrnd 29 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 6 { ifrnd 37 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 6 { ifrnd 46 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 7 { ifrnd 56 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 8 { ifrnd 67 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 9 { ifrnd 79 setvar ACTORBOMBER? 1 }
		}
		else
		ifspritepal 14
		{
			ifvare SKILLLEVEL 0 { ifrnd 2 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 1 { ifrnd 4 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 2 { ifrnd 7 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 3 { ifrnd 11 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 4 { ifrnd 16 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 5 { ifrnd 22 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 6 { ifrnd 29 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 6 { ifrnd 37 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 7 { ifrnd 46 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 8 { ifrnd 56 setvar ACTORBOMBER? 1 }
			ifvare SKILLLEVEL 9 { ifrnd 67 setvar ACTORBOMBER? 1 }
		}
	
		ifactioncount 14
		{
			stopsound LIZARD_BEG
			cstat 0
			action ATROOPSUFFERDEAD
			setvar CHOKING? 0
			// OFF-LIMITS
			setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
			// END OFF-LIMITS
			ifvare MONSTERSEXPLODE 1
			{
				ifvare oldskoolmode 0 state liztroopexplode
			}
			break
		}
	}
ends

state troopshrunkstate
	ifcount SHRUNKDONECOUNT
	{ 
		setvar SHRUNK? 0
		ai AITROOPSEEKENEMY
	}
	else
	ifcount SHRUNKCOUNT
	{
		ifspritepal 17 sizeto 55 55 else sizeto 40 40
	}
	else
		state genericshrunkcode
ends


state troopcode 
	ifvare mainmenu 0 fall
		
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifai AITROOPJETPACK nullop else ifai AITROOPBOMBJETPACK nullop else setvar JETPACKSMOKEVAR 0
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifaction ATROOPSTAND
	{
		ifrnd 192
		{
			ifvare ACTORBOMBER? 0
			{
				ifvarand ACTORSTATUS? 16
				{
					ifpdistl 1536 ai AITROOPSHOOTING
					else ai AITROOPSEEKPLAYER
				}
				else
				{
					ai AITROOPSHOOTING
				}
			}
			else ai AITROOPBOMBRUN
		}
		else
		{
			ifvare ACTORBOMBER? 0 ai AITROOPSEEKPLAYER else ai AITROOPBOMBRUN
		}
	}
	else ifaction ATROOPFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ifvare ACTORBOMBER? 0 ai AITROOPSEEKENEMY else ai AITROOPBOMBRUN
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST { strength 0 state freezeblast_frozen-actor break }
	
			state liztroopawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 30
			state frozenactor-breakcode
			// OFF-LIMITS
			setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
			// END OFF-LIMITS
			killit
		}
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
		break
	}
	else ifaction ATROOPPLAYDEAD
	{
		ifhitweapon
		{
			ifwasweapon RADIUSEXPLOSION state liztroopexplode
			break
		}
		else
			state checksquished
	
		ifcount PLAYDEADTIME
		{
			state subtractfromkillamounts
			soundonce PRED_ROAM
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state checktrooppalette
			ifvarn SKILLSET? -1
			{
				state checkbosslifemeters
				setvar SKILLSET? -1
			}
			ifvare ACTORBOMBER? 0 ai AITROOPSHOOTING else ai AITROOPBOMBRUN
		}
		else
			ifp pfacing
				resetcount
	
		break
	}
	else ifaction ATROOPDEAD
	{
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 state liztroopexplode
		}    
		strength 0
		ifrespawn ifcount RESPAWNACTORTIME
		{
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state checktrooppalette
			setvar ACTORBOMBER? 0
			ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
			ifvare ACTORBOMBER? 0 ai AITROOPSEEKENEMY else ai AITROOPBOMBRUN
		}
		ifhitweapon
		{
			ifwasweapon RADIUSEXPLOSION state liztroopexplode
			break
		}
		else
			state checksquished
		break
	}
	else ifaction ATROOPSUFFERDEAD
	{
		ifactioncount 2
		{
			ifrnd 64
			{
				resetcount
				action ATROOPPLAYDEAD
			}
			else
			{
				soundonce PRED_DYING
				action ATROOPDEAD
			}
		}
	}
	else ifaction ATROOPDYING
	{
		state troopdying
		break
	}
	else ifaction ATROOPSUFFERING
	{
		state troopsufferingstate
		ifhitweapon state checktroophit
		break
	}
	else ifaction ATROOPFLINTCH
	{
		ifactioncount 4
		{
			ifvare ACTORBOMBER? 0 ai AITROOPSEEKENEMY else ai AITROOPBOMBRUN
		}
	}
	else
	{
		ifai AITROOPSEEKPLAYER
			state troopseekstate
		else
			ifai AITROOPBOMBRUN
				state troopbombseekstate
		else
			ifai AITROOPJETPACK
				state troopjetpackstate
		else
			ifai AITROOPBOMBJETPACK
				state troopbombjetpackstate
		else
			ifai AITROOPSEEKENEMY
				state troopseekstate
		else
			ifai AITROOPSHOOTING
				state troopshootstate
		else
			ifai AITROOPFLEEING
				state troopfleestate
		else
			ifai AITROOPFLEEINGBACK
				state troopfleestate
		else
			ifai AITROOPDODGE
				state troopseekstate
		else
			ifai AITROOPDUCKING
				state troopduckstate
		else
			ifai AITROOPSHRUNK
				state troopshrunkstate
		else
			ifai AITROOPGROW
				state genericgrowcode
		else
			ifai AITROOPHIDE
			{
				state troophidestate
				break
			}
		else
			ifai AITROOPARMBOMB
				state trooparmbombstate
	}
	
	ifai AITROOPSEEKPLAYER { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AITROOPSEEKENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AITROOPBOMBRUN { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AITROOPDODGE { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AITROOPBOMBDODGE { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AITROOPFLEEING { setvar WALKSNDAI 4 state stepsoundstuff_actor }
	else ifai AITROOPFLEEINGBACK { setvar WALKSNDAI 5 state stepsoundstuff_actor }
	else { setvar WALKSNDAI 0 }
	
	ifai AITROOPJETPACK { ifinwater nullop else { ifvarg ACTORJETPACKAMOUNT 0 addvar ACTORJETPACKAMOUNT -1 } }
	else ifai AITROOPBOMBJETPACK { ifinwater nullop else { ifvarg ACTORJETPACKAMOUNT 0 addvar ACTORJETPACKAMOUNT -1 } }
	
	ifvare ACTORBOMBER? 0 setvar ACTORBOMBTIMER 0
	else ifvare ACTORBOMBER? 1
	{
		addvar ACTORBOMBTIMER 1
		ifvare ACTORBOMBTIMER 39 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 78 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 117 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 156 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 195 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 234 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 273 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 312 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 351 sound EXPLOSIVE_BEEP
		ifvare ACTORBOMBTIMER 390 state liztroopexplode
	}
	
	state checksquished
	
	ifai AITROOPSHRUNK break 
	ifhitweapon state checktroophit
ends


actor LIZTROOPJETPACK TROOPSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checktrooppalette
	ifvarn SKILLSET? -1
	{
		state checkbosslifemeters
		state getenemyid setvar SKILLSET? -1
	}
	ifvare ACTORBOMBER? 1 ai AITROOPBOMBJETPACK else ai AITROOPJETPACK
	
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZTROOP
enda
actor LIZTROOPDUCKING TROOPSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checktrooppalette
	ifvarn SKILLSET? -1
	{
		state checkbosslifemeters
		state getenemyid setvar SKILLSET? -1
	}
	ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPDUCKING
	
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZTROOP
	ifgapzl 48
		move DONTGETUP
enda
actor LIZTROOPSHOOT TROOPSTRENGTH ATROOPSTAND
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checktrooppalette
	ifvarn SKILLSET? -1
	{
		state checkbosslifemeters
		state getenemyid setvar SKILLSET? -1
	}
	ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSHOOTING
	
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZTROOP
enda
actor LIZTROOPSTAYPUT TROOPSTRENGTH ATROOPSTAYSTAND
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checktrooppalette
	ifvarn SKILLSET? -1
	{
		state checkbosslifemeters
		state getenemyid setvar SKILLSET? -1
	}
	ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSEEKPLAYER
	
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZTROOP
enda
actor LIZTROOPRUNNING TROOPSTRENGTH ATROOPSTAND
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checktrooppalette
	ifvarn SKILLSET? -1
	{
		state checkbosslifemeters
		state getenemyid setvar SKILLSET? -1
	}
	ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSEEKPLAYER
	
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZTROOP
enda
actor LIZTROOPONTOILET TROOPSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp 
	ifvarvarn temp THISACTOR
	{
		getactor[THISACTOR].htextra temp 
		ifvarg temp -1 
		{
			sound FLUSH_TOILET
			operate
			ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSEEKPLAYER
			
			ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
			cactor LIZTROOP
			ifvarn SKILLSET? -1
			{
				state checkbosslifemeters
				state getenemyid setvar SKILLSET? -1
			}
			state status_attack_damage_control
		} 
	}
	ifcount 24
	{
		sound FLUSH_TOILET
		operate
		ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSEEKPLAYER
		
		ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
		cactor LIZTROOP
		ifvarn SKILLSET? -1
		{
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
	}
	else
	{
		state checktrooppalette
		ifvarn SKILLSET? -1
		{
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
	}
enda

actor LIZTROOPJUSTSIT TROOPSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	ifvarvarn temp THISACTOR
	{
		getactor[THISACTOR].htextra temp 
		ifvarg temp -1 
		{
			operate
			ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSEEKPLAYER
			
			ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
			cactor LIZTROOP
			ifvarn SKILLSET? -1
			{
				state checkbosslifemeters
				state getenemyid setvar SKILLSET? -1
			}
			state status_attack_damage_control
		} 
	}
	ifcount 30
	{
		operate
		ifvare ACTORBOMBER? 1 ai AITROOPBOMBRUN else ai AITROOPSEEKPLAYER
		
		ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
		ifvarn SKILLSET? -1
		{
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
		cactor LIZTROOP
	}
	else
		ifcount 2
			nullop
	else
		state checktrooppalette
enda

state getliztroopspeeds
	ifmove TROOPWALKVELS setvar ACTORSPEED 72
	else ifmove TROOPWALKVELSBACK setvar ACTORSPEED -72
	else ifmove TROOPJETPACKVELS setvar ACTORSPEED 64
	else ifmove TROOPJETPACKILLVELS setvar ACTORSPEED 192
	else ifmove TROOPRUNVELS setvar ACTORSPEED 108
	else ifmove TROOPRUNITEMVELS setvar ACTORSPEED 135
	else ifmove TROOPSWIMUPVELS setvar ACTORSPEED 64
	else ifmove TROOPSWIMUPVELSFAST setvar ACTORSPEED 192
	else ifmove TROOPSWIMDOWNVELS setvar ACTORSPEED 64
	else ifmove TROOPSWIMDOWNVELSFAST setvar ACTORSPEED 192
	else ifmove TROOPBOMBRUNVELS setvar ACTORSPEED 128
	else ifmove TROOPBOMBRUNITEMVELS setvar ACTORSPEED 157
	else ifmove TROOPBOMBJETPACKVELS setvar ACTORSPEED 80
	else ifmove TROOPBOMBJETPACKILLVELS setvar ACTORSPEED 216
	else ifmove SHRUNKVELS setvar ACTORSPEED 32
	else ifmove TROOPSTOPPED setvar ACTORSPEED 0
	else ifmove DONTGETUP setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 21
		{
			mulvarvar ACTORSPEED 110
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 19
		{
			mulvarvar ACTORSPEED 105
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 14
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 17
		{
			mulvarvar ACTORSPEED 130
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 100
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor LIZTROOP TROOPSTRENGTH ATROOPSTAND
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checktrooppalette
	state troopcode
	state liztroopseekitem
	
	
	state getliztroopspeeds
	
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
enda

//
//
//    LIZMAN CODE
//
//

state lizmanexplode
	sound SQUISHED
	// OFF-LIMITS
	setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
	// END OFF-LIMITS
	state liz_body_jibs
	state standard_jibs
	killit
ends

state checklizmanpalette
	ifai 0
	{
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			state rankstarbeta
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		}
		
		ifvare SKILLSET? 0
		{ 
			state enemytyperandomizer
			state cstat2048toeliteflag
			state rankstarbeta
			ifspritepal 9 // Palette 9 is 'Old School' Enforcer (No abnormal stat calculations)
			{
				setvar ACTORHP LIZSTRENGTH
				setvar ACTORMAXAIRTIME LIZAIRTIME
				setvar ACTORAIRTIME LIZAIRTIME
				setvar ACTORMAXHP LIZSTRENGTH
			}
			else
			ifspritepal 6 // Bio-Warrior Enforcer
			{
				setvar ACTORHP BIOLIZSTRENGTH
				setvar ACTORMAXAIRTIME BIOLIZAIRTIME
				setvar ACTORAIRTIME BIOLIZAIRTIME
				setvar ACTORATTACK BIOLIZBASEATTACK
				setvar ACTORDEFENSE BIOLIZBASEDEFENSE
				setvar ACTORMAXAP BIOLIZSTRENGTH
				setvar ACTORMAXFALLRESIST BIOLIZFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE BIOLIZCRITCHANCE
				setvar ACTORSURVIVALVALUE BIOLIZSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 416 // Metal, Poison, Ion/Energy (256)
				setvar ACTORWEAKNESSFLAGS 2 // Ice
			}
			else
			ifspritepal 17 // Commander Fertang [boss]
			{
				sizeat 55 55
				setvar ACTORHP FERTANGSTRENGTH
				setvar ACTORMAXAIRTIME FERTANGAIRTIME
				setvar ACTORAIRTIME FERTANGAIRTIME
				setvar ACTORATTACK FERTANGBASEATTACK
				setvar ACTORDEFENSE FERTANGBASEDEFENSE
				setvar ACTORMAXAP FERTANGSTRENGTH
				setvar ACTORMAXFALLRESIST FERTANGFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE FERTANGCRITCHANCE
				setvar ACTORSURVIVALVALUE FERTANGSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 416 // Metal, Poison, Ion/Energy (256)
				setvar ACTORWEAKNESSFLAGS 2 // Ice
			}
			else
			ifspritepal 19 // Laser Enforcer
			{
				setvar ACTORHP LASERLIZSTRENGTH
				setvar ACTORMAXAIRTIME LASERLIZAIRTIME
				setvar ACTORAIRTIME LASERLIZAIRTIME
				setvar ACTORATTACK FERTANGBASEATTACK
				setvar ACTORDEFENSE LASERLIZBASEDEFENSE
				setvar ACTORMAXAP LASERLIZSTRENGTH
				setvar ACTORMAXFALLRESIST LASERLIZFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE LASERLIZCRITCHANCE
				setvar ACTORSURVIVALVALUE LASERLIZSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 416 // Metal, Poison, Ion/Energy (256)
				setvar ACTORWEAKNESSFLAGS 2 // Ice
			}
			else // Normal
			{
				setvar ACTORHP LIZSTRENGTH
				setvar ACTORMAXAIRTIME LIZAIRTIME
				setvar ACTORAIRTIME LIZAIRTIME
				setvar ACTORATTACK LIZBASEATTACK
				setvar ACTORDEFENSE LIZBASEDEFENSE
				setvar ACTORMAXAP LIZSTRENGTH
				setvar ACTORMAXFALLRESIST LIZFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE LIZCRITCHANCE
				setvar ACTORSURVIVALVALUE LIZSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 386 // Ice, Poison, Ion/Energy (256)
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters
			state getenemyid setvar SKILLSET? -1
		} 
	}
ends

action ALIZSTAND     0
action ALIZWALKING     0   4  5  1  15
action ALIZRUNNING     0   4  5  1  11
action ALIZTHINK     20  2  5  1  40
action ALIZSCREAM    30  1  5  1  2
action ALIZJUMP      45  3  5  1  20
action ALIZFALL      55  1  5
action ALIZSHOOTING    70  2  5  1  7
action ALIZDYING     60  6  1  1  15
action ALIZLYINGDEAD   65  1
action ALIZFROZEN     0  1  5

move LIZWALKVEL 72
move LIZRUNVEL 192
move LIZJUMPVEL 184
move LIZSWIMUPVELS 72 -84
move LIZSWIMUPVELSFAST 192 -63
move LIZSWIMDOWNVELS 72 84
move LIZSWIMDOWNVELSFAST 192 63
move LIZSTOP

ai AILIZGETENEMY ALIZWALKING LIZWALKVEL seekplayer
ai AILIZDODGE ALIZRUNNING LIZRUNVEL dodgebullet
ai AILIZCHARGEENEMY ALIZRUNNING LIZRUNVEL seekplayer
ai AILIZSEEKITEM ALIZRUNNING LIZRUNVEL seekplayer
ai AILIZFLEENEMY ALIZWALKING LIZWALKVEL fleeenemy
ai AILIZSHOOTENEMY ALIZSHOOTING LIZSTOP faceplayer
ai AILIZJUMPENEMY ALIZJUMP LIZJUMPVEL jumptoplayer
ai AILIZTHINK ALIZTHINK LIZSTOP faceplayerslow
ai AILIZSHRUNK ALIZWALKING SHRUNKVELS fleeenemy
ai AILIZGROW ALIZSTAND  LIZSTOP faceplayerslow
ai AILIZSPIT ALIZSCREAM LIZSTOP faceplayerslow
ai AILIZDYING ALIZDYING LIZSTOP faceplayer

state lizmanseekitem
	
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
				
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AILIZCHARGEENEMY break
							else
							{
								ifai AILIZJUMPENEMY break else ai AILIZCHARGEENEMY
							}
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state lizseekstate
	ifactornotstayput
	{
		ifcansee
		{
			ifp palive
			{
				ifvarand ACTORSTATUS? 16
				{
					ifpdistl 1024
					{
						ifcount 16
						{
							ifcanshoottarget
							{
								ai AILIZSHOOTENEMY
								break
							}
						}
					}
				}
				else
				{
					ifpdistl 2048
					{
						ifcount 16
						{
							ifcanshoottarget
							{
								ai AILIZSHOOTENEMY
								break
							}
						}
					}
				}
			}
		}
	
		ifai AILIZCHARGEENEMY
		{
			ifvare ITEMTARGET -1
			{
				ifcount 72 ifcanshoottarget
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 1536
						{
							ai AILIZSHOOTENEMY
							break
						}
					}
					else
					{
						ai AILIZSHOOTENEMY
						break
					}
				}
				ifp phigher ifrnd 6
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistg 512
						{
							ai AILIZJUMPENEMY
							break
						}
					}
					else
					{
						ifpdistg 2048
						{
							ai AILIZJUMPENEMY
							break
						}
					}
				}
			}
			else
			{
				ifvare ITEMFATARGET -1 // Do not try to jump to First Aid Stations
				{
					getactor[THISACTOR].z tempb
					getactor[ITEMTARGET].z tempc
					ifvarvarl tempc tempb // higher than target item
					{
						ai AILIZJUMPENEMY
						break
					}
				}
			}
		}
		else
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistg 16384
				{
					ifrnd 92
					{
						ifcount 48 ifcanshoottarget
							ai AILIZSHOOTENEMY
					}
					else ifcount 24
					{
						ai AILIZCHARGEENEMY
						break
					}
				}
			}
			else
			{
				ifpdistg 4096
				{
					ifrnd 92
					{
						ifcount 48 ifcanshoottarget
							ai AILIZSHOOTENEMY
					}
					else ifcount 24
					{
						ai AILIZCHARGEENEMY
						break
					}
				}
			}
		}
	
		iffloordistl 16
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536
				{
					ifcount 48 ifnotmoving ifcansee
					{
						ai AILIZJUMPENEMY
						break
					}
				}
			}
			else
			{
				ifcount 48 ifnotmoving ifcansee
				{
					ai AILIZJUMPENEMY
					break
				}
			}
		}
		else
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistg 5120
					ai AILIZJUMPENEMY
					break
			}
			else
			{
				ifpdistg 1280
					ai AILIZJUMPENEMY
					break
			}
		}
	
		ifrnd 4
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 51
				{
					ifnotmoving
						operate
				}
			}
			else
			{
				ifnotmoving
					operate
			}
		}
		else
		{
			ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 1
					{
						ifrnd 25
						{
							ifgapzl 128
								ai AILIZDODGE
							else
							ifactornotstayput
							{
							ifrnd 32
								ai AILIZJUMPENEMY
							else
								ai AILIZDODGE
							}
						}
					}
				}
				else
				{
					ifrnd 1
					{
						ifgapzl 128
							ai AILIZDODGE
						else
						ifactornotstayput
						{
							ifrnd 32
							ai AILIZJUMPENEMY
							else
							ai AILIZDODGE
						}
					}
				}
			}
		}
	}
	else // if stayput
	{
		ifactioncount 16
		{
			ifp palive
			{
				ifrnd 32
				{
					ifcansee
					{
						ifcanshoottarget
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistl 1536
								{
									ai AILIZSHOOTENEMY
								}
							}
							else
							{
								ai AILIZSHOOTENEMY
							}
						}
					}
				}
			}
		}
		ifcount 16
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 192 { move LIZWALKVEL randomangle geth }
			}
			else
			{
				ifrnd 32 { move LIZWALKVEL randomangle geth }
			}
		}
	}

ends

state lizshrunkstate
	ifcount SHRUNKDONECOUNT
	{
		ai AILIZGETENEMY
		setvar SHRUNK? 0
	}
	else
	ifcount SHRUNKCOUNT
	{
		ifspritepal 17 sizeto 55 55 else sizeto 40 40
	}
	else state genericshrunkcode
ends

state lizfleestate
	ifcount 16
	{
		ifrnd 48
			ifp palive
				ifcansee
					ai AILIZSPIT
	}
	else
	{
		iffloordistl 16 nullop
		else
			ai AILIZGETENEMY
		break
	}
ends

state lizthinkstate
	ifrnd 8 soundonce CAPT_ROAM
	
	ifactioncount 3
	{
		ifrnd 32
			ifp palive
				ifcansee
					ai AILIZSPIT
				else
					ifrnd 96
						ai AILIZGETENEMY
	}
	else ifactioncount 2
			ifrnd 1
				spawn FECES
	
	ifbulletnear
	{
		ifvarand ACTORSTATUS? 16
		{
			ifrnd 1 
			{
				ifrnd 25
				{
					ifgapzl 96 ai AILIZDODGE
					else
					{
						ifrnd 128 ai AILIZJUMPENEMY
						else ai AILIZDODGE
					}
				}
			}
		}
		else
		{
			ifrnd 1 
			{
				ifgapzl 96 ai AILIZDODGE
				else
				{
					ifrnd 128 ai AILIZJUMPENEMY
					else ai AILIZDODGE
				}
			}
		}
	}
ends

state lizshootstate
	ifcount 20 ifrnd 8
	{
		ifcansee ifpdistl 2048
		{
			ifrnd 128
				ai AILIZFLEENEMY
				break
		}
	
		ifrnd 80
			ai AILIZTHINK
		else
			ai AILIZGETENEMY
	}

	ifspritepal 17 // Commander Fertang is a faster shooter than the other types of LIZMAN
	{
		ifactioncount 1
		{
			ifcansee
			{
				ifcanshoottarget
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 2560
						{
							state echeckquadtime
							state echeckvampiretime
							ifrnd 42
							{
								sound RPG_SHOOT
								sound RPG_SHOOT
								sound RPG_SHOOT
								sound RPG_SHOOT
								state fourrockets
							}
							else
							ifrnd 53
							{
								sound CAPT_ATTACK
								sound CAPT_ATTACK
								sound CAPT_ATTACK
								sound CAPT_ATTACK
								sound LIZARD_SPIT
								sound LIZARD_SPIT
								sound LIZARD_SPIT
								sound LIZARD_SPIT
								shoot SPIT
								shoot SPIT
								shoot SPIT
								shoot SPIT
								state fireshotspark1_angleeffect
								state fireshotspark1_angleeffect
								state fireshotspark1_angleeffect
								state fireshotspark1_angleeffect
							}
							else
							ifrnd 64
							{  
								sound PRED_ATTACK
								sound PRED_ATTACK
								sound PRED_ATTACK
								sound PRED_ATTACK
								state fourlasers
							}
							else
							ifrnd 128
							{  
								sound PIG_ATTACK
								sound PIG_ATTACK
								sound PIG_ATTACK
								state pigshotgun
								state pigshotgun
								state pigshotgun
							}
							else
							{  
								sound CAT_FIRE
								sound CAT_FIRE
								shoot FREEZEBLAST
								shoot FREEZEBLAST
							}
							resetactioncount
						}
						else
						{
							ifrnd 16 ai AILIZTHINK
							else ai AILIZGETENEMY
						}
					}
					else
					{
						state echeckquadtime
						state echeckvampiretime
						ifrnd 42
						{
							sound RPG_SHOOT
							sound RPG_SHOOT
							sound RPG_SHOOT
							sound RPG_SHOOT
							state fourrockets
						}
						else
						ifrnd 53
						{
							sound CAPT_ATTACK
							sound CAPT_ATTACK
							sound CAPT_ATTACK
							sound CAPT_ATTACK
							sound LIZARD_SPIT
							sound LIZARD_SPIT
							sound LIZARD_SPIT
							sound LIZARD_SPIT
							shoot SPIT
							shoot SPIT
							shoot SPIT
							shoot SPIT
							state fireshotspark1_angleeffect
							state fireshotspark1_angleeffect
							state fireshotspark1_angleeffect
							state fireshotspark1_angleeffect
						}
						else
						ifrnd 64
						{  
							sound PRED_ATTACK
							sound PRED_ATTACK
							sound PRED_ATTACK
							sound PRED_ATTACK
							state fourlasers
						}
						else
						ifrnd 128
						{  
							sound PIG_ATTACK
							sound PIG_ATTACK
							sound PIG_ATTACK
							state pigshotgun
							state pigshotgun
							state pigshotgun
						}
						else
						{  
							sound CAT_FIRE
							sound CAT_FIRE
							shoot FREEZEBLAST
							shoot FREEZEBLAST
						}
						resetactioncount
					}
				}
				else ai AILIZTHINK
			}
			else ai AILIZGETENEMY
		}
	}
	else
	{
		ifactioncount 2
		{
			ifcansee
			{
				ifcanshoottarget
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 1536
						{
							state echeckquadtime
							state echeckvampiretime
							ifspritepal 6
							{  
								sound LIZARD_SPIT
								sound LIZARD_SPIT
								sound PRED_ATTACK
								sound PRED_ATTACK
								sound CAPT_ATTACK
								sound CAPT_ATTACK
								shoot SPIT
								shoot SPIT
								shoot FIRELASER
								shoot FIRELASER
								state fireshotspark1_angleeffect
								state fireshotspark1_angleeffect
								resetactioncount
							}
							else
							ifspritepal 19
							{  
								sound CAPT_ATTACK
								sound PRED_ATTACK
								sound PRED_ATTACK
								state fireshotspark1_angleeffect
								shoot FIRELASER
								shoot FIRELASER
								resetactioncount
							}
							else
							{  
								sound CAPT_ATTACK
								state fireshotspark1_angleeffect
								resetactioncount
							}
						}
						else
						{
							ifrnd 16 ai AILIZTHINK
							else ai AILIZGETENEMY
						}
					}
					else
					{
						state echeckquadtime
						state echeckvampiretime
						ifspritepal 6
						{  
							sound LIZARD_SPIT
							sound LIZARD_SPIT
							sound PRED_ATTACK
							sound PRED_ATTACK
							sound CAPT_ATTACK
							sound CAPT_ATTACK
							shoot SPIT
							shoot SPIT
							shoot FIRELASER
							shoot FIRELASER
							state fireshotspark1_angleeffect
							state fireshotspark1_angleeffect
							resetactioncount
						}
						else
						ifspritepal 19
						{  
							sound CAPT_ATTACK
							sound PRED_ATTACK
							sound PRED_ATTACK
							state fireshotspark1_angleeffect
							shoot FIRELASER
							shoot FIRELASER
							resetactioncount
						}
						else
						{  
							sound CAPT_ATTACK
							state fireshotspark1_angleeffect
							resetactioncount
						}
					}
				}
				else ai AILIZTHINK
			}
			else ai AILIZGETENEMY
		}
	}
	
ends

state checklizhit
	ifvarl ACTORINVULNTIME 1 { ifvarg ACTORLASTDAMAGE 0 spawn BLOOD }
	
	ifai AILIZSHRUNK
	{
		state lizmanawards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
		sound SQUISHED
		state standard_jibs
		// OFF-LIMITS
		setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
		// END OFF-LIMITS
		killit
	}
	
	ifdead
	{
		ifvare ACTORDEAD? 0
		{
			setvar ACTORHP 0
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ALIZFROZEN
				strength 0
				break
			}
			
			ifspritepal 6 spritepal 8 // Bio-Warriors lose their radioactive palette when they die
			else ifspritepal 9 nullop
			else ifspritepal 10 nullop
			else ifspritepal 11 nullop
			else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		
			state resetenemytimers
			ifrnd 32 { state drop_armor ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_armor ifrnd 192 state drop_armor ifrnd 192 state drop_armor } }
			else { state drop_chaingun ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_chaingun ifrnd 192 state drop_chaingun ifrnd 192 state drop_chaingun } }
			state lizmanawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
		
			sound CAPT_DYING
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				sound ACTOR_GROWING
				ai AILIZGROW
				break
			}
			else ifwasweapon RPG state lizmanexplode
			else ifwasweapon RPG_NOAIM state lizmanexplode
			else ifwasweapon OCTANINE_RPG state lizmanexplode
			else ifwasweapon GENERAL_RPG state lizmanexplode
			else ifwasweapon COMMANDER_RPG state lizmanexplode
			else ifwasweapon LEADER_RPG state lizmanexplode
			else ifwasweapon BAALO_RPG state lizmanexplode
			else ifwasweapon GATEMISSILE_MAIN state lizmanexplode
			else ifwasweapon GATEMISSILE_SPLIT state lizmanexplode
			else ifwasweapon STROKEMISSILE_MAIN state lizmanexplode
			else ifwasweapon STROKEMISSILE_SPLIT state lizmanexplode
			else ifwasweapon RADIUSEXPLOSION state lizmanexplode
			else
			{
				state rf
				ai AILIZDYING
				// ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
			}
			setvar ACTORDEAD? 1
		}
	}
	else
	{
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				state random_wall_jibs
				sound CAPT_PAIN
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	
		ifwasweapon SHRINKSPARK
		{
			ifvarg ACTORINVULNTIME 0 state deflectshrinker
			else
			{
				ifvare oldskoolmode 0
				{
					ifvarand ACTORFLAGS 512
					{
						ifspritepal 17 state deflectshrinker
						else 
						ifspritepal 6
						{
							ifrnd 240 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AILIZSHRUNK setvar SHRUNK? 1 break }
						}
						else 
						ifspritepal 19
						{
							ifrnd 216 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AILIZSHRUNK setvar SHRUNK? 1 break }
						}
						else 
						{
							ifrnd 204 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AILIZSHRUNK setvar SHRUNK? 1 break }
						}
					}
					else
					{ 
						ifspritepal 17 state deflectshrinker
						else 
						ifspritepal 6
						{
							ifrnd 192 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AILIZSHRUNK setvar SHRUNK? 1 break }
						}
						else 
						ifspritepal 19
						{
							ifrnd 96 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AILIZSHRUNK setvar SHRUNK? 1 break }
						}
						else 
						{
							ifrnd 48 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AILIZSHRUNK setvar SHRUNK? 1 break }
						}
					}
				}
				else
				{
					sound ACTOR_SHRINKING
					ai AILIZSHRUNK
					setvar SHRUNK? 1
					break
				}
			}
		}
	
		ifwasweapon GROWSPARK
		{
			ifvare ACTORINVULNTIME 0
			{
				ifvarg ACTORLASTDAMAGE 0 sound EXPANDERHIT
			}
		}
	
		ifspritepal 6 break
		else
		{
			ifp palive
			{
				ifcansee
				{
					ifcanshoottarget
					{
						ifvarg ACTORLASTDAMAGE 0
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistl 1536
								{
									ifrnd 224
									{
										ai AILIZSHOOTENEMY
										break
									}
								}
							}
							else
							{
								ifrnd 224
								{
									ai AILIZSHOOTENEMY
									break
								}
							}
						}
						else
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistl 1536
								{
									ifrnd 32
									{
										ai AILIZSHOOTENEMY
										break
									}
								}
							}
							else
							{
								ifrnd 32
								{
									ai AILIZSHOOTENEMY
									break
								}
							}
						}
					}
				}
			}
		}
	}
ends

state lizjumpstate
	ifvare ITEMTARGET -1
	{
		ifaction ALIZFALL
		{
			iffloordistl 16
				ai AILIZGETENEMY
		}
		else
		{
			// Higher ifactioncounts allow higher jumping
			// Check Enemy's Health Levels
			setvarvar TEMPVAR4 ACTORHP
			mulvar TEMPVAR4 1000
			divvarvar TEMPVAR4 ACTORMAXHP
			ifvarl TEMPVAR4 101
			{
				ifactioncount 1 action ALIZFALL
			}
			else
			ifvarg TEMPVAR4 100 ifvarl TEMPVAR4 251
			{
				ifactioncount 2 action ALIZFALL
			}
			else
			{
				ifactioncount 3 action ALIZFALL
			}
		}
	}
	else
	{
		getactor[THISACTOR].z tempb
		getactor[ITEMTARGET].z tempc
	
		ifvarvarg tempc tempb // higher than target item
		{
			ai AILIZCHARGEENEMY
			break
		}
	}
ends

state lizdyingstate
	ifaction ALIZLYINGDEAD
	{
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 state lizmanexplode
		}    
		strength 0
		ifhitweapon
		{
			ifwasweapon RADIUSEXPLOSION state lizmanexplode
			ifwasweapon RPG state lizmanexplode
			ifwasweapon RPG_NOAIM state lizmanexplode
			ifwasweapon OCTANINE_RPG state lizmanexplode
			ifwasweapon GENERAL_RPG state lizmanexplode
			ifwasweapon COMMANDER_RPG state lizmanexplode
			ifwasweapon LEADER_RPG state lizmanexplode
			ifwasweapon BAALO_RPG state lizmanexplode
			ifwasweapon GATEMISSILE_MAIN state lizmanexplode
			ifwasweapon GATEMISSILE_SPLIT state lizmanexplode
			ifwasweapon STROKEMISSILE_MAIN state lizmanexplode
			ifwasweapon STROKEMISSILE_SPLIT state lizmanexplode
		}
	
		ifcount RESPAWNACTORTIME
		{
			ifrespawn
			{
				spawn TRANSPORTERSTAR
				cstat 257
				strength 1
				ifspritepal 8 spritepal 6 // Bio-Warrior will respawn with his radioactive palette
				setvar ACTORDEAD? 0
				setvar SKILLSET? 0
				state checklizmanpalette
				ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
				ai AILIZGETENEMY
			}
		}
	}
	else
	{
		ifai AILIZDYING
		{
			ifactioncount 6
			{
				iffloordistl 8
				sound THUD
				move LIZSTOP
				action ALIZLYINGDEAD
			}
		}
	}
ends

state lizdodgestate
	ifcount 13
		ai AILIZGETENEMY
ends

actor LIZMANSTAYPUT LIZSTRENGTH 
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checklizmanpalette 
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	ai AILIZGETENEMY 
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZMAN 
enda

actor LIZMANSPITTING LIZSTRENGTH 
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checklizmanpalette 
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	ai AILIZSPIT 
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZMAN 
enda

actor LIZMANJUMP LIZSTRENGTH 
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checklizmanpalette 
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	ai AILIZJUMPENEMY 
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor LIZMAN 
enda

state lizcode
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	state checksquished
	
	// Codes the Bio Warrior's Nuclear Aura
	ifspritepal 6 
	{ 
		soundonce ENGINE_OPERATING 
		ifpdistl 2048 
		{
			addvar BIOFIELD 1
			ifvare BIOFIELD 13
			{
				ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3
				ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
				
				setvar MELEEDAMAGE 10
				randvar MELEEDAMAGEVAR 2
				state meleerandomdmg
				ifp palive state getmeleedmg2
	
				ifp palive
				{
					getactorvar[PLAYERID].VEHICLEID tempvehicleid
					ifvare tempvehicleid -1
					{
						// ifvare CHARACTERSELECTED? 1 sound DUKE_GRUNT
						// palfrom 16 0 32
		
						ifvare CHARACTERSELECTED? 8 ifvare HAVEENERGYSHIELD? 1 ifvarl PLAYERDAMAGE 1 nullop
						else
						{
							// Poison/Corrosion [Aura]
							ifvarn CHARACTERSELECTED? 2
							{
								ifvare CHARACTERSELECTED? 4
								{ 
									ifvarand PLAYERSTATUS? 256
									{
										ifrnd 5 state addpoison
										ifrnd 5 state addcorrosion
									}
									else
									{
										ifrnd 24 state addpoison
										ifrnd 24 state addcorrosion
									}
								}
								else
								ifvare CHARACTERSELECTED? 15
								{
									ifrnd 12 state addpoison 
									ifrnd 12 state addcorrosion
								}
								else
								{
									ifrnd 24 state addpoison 
									ifrnd 24 state addcorrosion
								}
							}  
							// Dimness [Aura]
							ifvare CHARACTERSELECTED? 4
							{ 
								ifvarand PLAYERSTATUS? 256
								{
									ifrnd 5 state adddimness
								}
								else
								{
									ifrnd 24 state adddimness
								}
							}
							else
							ifvare CHARACTERSELECTED? 15
							{
								ifrnd 12 state adddimness
							}
							else
							{
								ifrnd 24 state adddimness
							}
			
							// Confusion [Aura]
							ifvare CHARACTERSELECTED? 4
							{ 
								ifvarand PLAYERSTATUS? 256
								{
									ifrnd 5 state addconfusion
								}
								else
								{
									ifrnd 24 state addconfusion
								}
							}
							else
							ifvare CHARACTERSELECTED? 15
							{
								ifrnd 12 state addconfusion
							}
							else
							{
								ifrnd 24 state addconfusion
							}
						}
					}
					// else palfrom 8 0 32
				}
			setvar BIOFIELD 0
			}
		}
		else
		{
			addvar BIOFIELD 1
			ifvare BIOFIELD 13
			{
				ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3
				ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
				setvar BIOFIELD 0
			}
		}
	}

	ifai 0
		ai AILIZGETENEMY
	else
		ifaction ALIZLYINGDEAD
	{
		ifvare mainmenu 0 fall
		state lizdyingstate
		break
	}
	else
		ifaction ALIZFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ai AILIZGETENEMY
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	
			state lizmanawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 30
			state frozenactor-breakcode
			killit
		}
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
		break
	}
	else
		ifai AILIZJUMPENEMY
			state lizjumpstate
	else
	{
		ifvare mainmenu 0 fall
		ifai AILIZGETENEMY
			state lizseekstate
		else
			ifai AILIZCHARGEENEMY
				state lizseekstate
		else
			ifai AILIZDODGE
				state lizdodgestate
		else
			ifai AILIZSHOOTENEMY
				state lizshootstate
		else
			ifai AILIZFLEENEMY
				state lizfleestate
		else
			ifai AILIZTHINK
				state lizthinkstate
		else
			ifai AILIZSHRUNK
				state lizshrunkstate
		else
			ifai AILIZGROW
				state genericgrowcode
		else
			ifai AILIZDYING
				state lizdyingstate
		else
			ifai AILIZSPIT
		{
			ifcount 26
				ai AILIZGETENEMY
			else
			ifcount 18 ifrnd 96
			{
				state echeckquadtime
				state echeckvampiretime
				shoot SPIT
				sound LIZARD_SPIT
			}
		}
	}
	
	ifai AILIZGETENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AILIZCHARGEENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AILIZFLEENEMY { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AILIZDODGE { setvar WALKSNDAI 4 state stepsoundstuff_actor }
	else { setvar WALKSNDAI 0 }
	
	ifai AILIZSHRUNK break
	ifhitweapon state checklizhit
ends

state getlizmanspeeds
	ifmove LIZWALKVEL setvar ACTORSPEED 72
	else ifmove LIZRUNVEL setvar ACTORSPEED 192
	else ifmove LIZJUMPVEL setvar ACTORSPEED 184
	else ifmove LIZSWIMUPVELS setvar ACTORSPEED 72 
	else ifmove LIZSWIMUPVELSFAST setvar ACTORSPEED 192
	else ifmove LIZSWIMDOWNVELS setvar ACTORSPEED 72
	else ifmove LIZSWIMDOWNVELSFAST setvar ACTORSPEED 192
	else ifmove SHRUNKVELS setvar ACTORSPEED 32
	else ifmove LIZSTOP setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 19
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 6
		{
			mulvarvar ACTORSPEED 110
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 17
		{
			mulvarvar ACTORSPEED 135
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 100
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor LIZMAN LIZSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checklizmanpalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state lizmanseekitem 
	ifvare mainmenu 0 fall
	state lizcode
	
	state getlizmanspeeds
enda


state eliteinheritance
	getactorvar[THISACTOR].ACTORFLAGS temp
	setvar tempb 0
	ifvarand temp 512 addvar tempb 512
	setactor[RETURN].zvel tempb
	setactorvar[RETURN].ACTORFLAGS tempb
ends


action DRONEFRAMES   0   1   7   1   1
action DRONESCREAM   0   1   7   1   1
move DRONERUNVELS 128 64
move DRONERUNUPVELS 128 -64
move DRONEBULLVELS 252 -64
move DRONEBACKWARDS -64 -64
move DRONERISE 32 -32
move DRONESTOPPED -16

move SUPERDRONERUNVELS 256 128
move SUPERDRONERUNUPVELS 256 -128
move SUPERDRONEBULLVELS 504 -128
move SUPERDRONEBACKWARDS -128 -128
move SUPERDRONERISE 64 -64
move SUPERDRONESTOPPED -16

ai AIDRONEGETE DRONESCREAM DRONERUNVELS faceplayerslow getv
ai AISUPERDRONEGETE DRONESCREAM SUPERDRONERUNVELS faceplayerslow getv

ai AIDRONEWAIT DRONEFRAMES DRONESTOPPED faceplayerslow
ai AISUPERDRONEWAIT DRONEFRAMES SUPERDRONESTOPPED faceplayerslow

ai AIDRONEGETUP DRONESCREAM DRONERUNUPVELS faceplayer getv
ai AISUPERDRONEGETUP DRONESCREAM SUPERDRONERUNUPVELS faceplayer getv

ai AIDRONEPULLBACK DRONEFRAMES DRONEBACKWARDS faceplayerslow
ai AISUPERDRONEPULLBACK DRONEFRAMES SUPERDRONEBACKWARDS faceplayerslow

ai AIDRONEHIT DRONESCREAM DRONEBACKWARDS faceplayer
ai AISUPERDRONEHIT DRONESCREAM SUPERDRONEBACKWARDS faceplayer

ai AIDRONESHRUNK DRONEFRAMES SHRUNKVELS fleeenemy

ai AIDRONEDODGE DRONEFRAMES DRONEBULLVELS dodgebullet geth
ai AISUPERDRONEDODGE DRONEFRAMES SUPERDRONEBULLVELS dodgebullet geth

ai AIDRONEDODGEUP DRONEFRAMES DRONERISE getv geth
ai AISUPERDRONEDODGEUP DRONEFRAMES SUPERDRONERISE getv geth

state getdronehealth
	ifvarn SKILLSET? 0
	ifvarn SKILLSET? -1
	{
		ai AIDRONEGETE
		state rankstarbeta
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{ 
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
			ai AIDRONEGETE
			setvar ACTORHP DRONESTRENGTH
			setvar ACTORMAXAIRTIME DRONEAIRTIME
			setvar ACTORAIRTIME DRONEAIRTIME
			setvar ACTORMAXHP DRONESTRENGTH
		}
		else
		ifspritepal 25 
		{
			sizeat 80 80 
			ai AISUPERDRONEGETE
			setvar ACTORHP SUPERDRONESTRENGTH
			setvar ACTORMAXAIRTIME SUPERDRONEAIRTIME
			setvar ACTORAIRTIME SUPERDRONEAIRTIME
			setvar ACTORATTACK SUPERDRONEBASEATTACK
			setvar ACTORDEFENSE SUPERDRONEBASEDEFENSE
			setvar ACTORMAXAP SUPERDRONESTRENGTH
			setvar ACTORMAXFALLRESIST 65536
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE SUPERDRONECRITCHANCE
			setvar ACTORSURVIVALVALUE SUPERDRONESURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 8
		}
		else 
		{
			ai AIDRONEGETE
			setvar ACTORHP DRONESTRENGTH
			setvar ACTORMAXAIRTIME DRONEAIRTIME
			setvar ACTORAIRTIME DRONEAIRTIME
			setvar ACTORATTACK DRONEBASEATTACK
			setvar ACTORDEFENSE DRONEBASEDEFENSE
			setvar ACTORMAXAP DRONESTRENGTH
			setvar ACTORMAXFALLRESIST 65536
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE DRONECRITCHANCE
			setvar ACTORSURVIVALVALUE DRONESURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 8
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state droneseekitem
	state accquireenemystats
	state enemyfloorhurt
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
				
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifspritepal 25 
							{ 
								ifai AISUPERDRONEDODGE break else ai AISUPERDRONEDODGE
							}
							else 
							{ 
								ifai AIDRONEDODGE break else ai AIDRONEDODGE
							}
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state superdronespawnenemy
	ifvarand ACTORSTATUS? 16
	{
		ifpdistl 3072
		{
			sound TELEPORTER 
			espawn TRANSPORTERBEAM 
			setactor[RETURN].pal 6
			ifrnd 240 // Spawns Non-Boss type enemies 15/16 times
			{
				ifrnd 28 
				{ 
					espawn LIZTROOP
					ifrnd 64 setactor[RETURN].pal 22
					else ifrnd 85 setactor[RETURN].pal 21
					else ifrnd 128  setactor[RETURN].pal 19
					else setactor[RETURN].pal 14
				}
				else ifrnd 32
				{
					espawn PIGCOP
					ifrnd 85 setactor[RETURN].pal 0
					else ifrnd 128 setactor[RETURN].pal 21
					else setactor[RETURN].pal 14
				}
				else ifrnd 37
				{
					espawn LIZMAN
					ifrnd 85 setactor[RETURN].pal 0
					else ifrnd 128 setactor[RETURN].pal 19
					else setactor[RETURN].pal 6
				}
				else ifrnd 42
				{
					espawn OCTABRAIN
					ifrnd 192 setactor[RETURN].pal 0
					else setactor[RETURN].pal 14
				}
				else ifrnd 53
				{
					espawn DRONE
					ifrnd 255 setactor[RETURN].pal 0
					else setactor[RETURN].pal 25
				}
				else ifrnd 64
				{
					espawn NEWBEAST
					ifrnd 85 setactor[RETURN].pal 0
					else ifrnd 128 setactor[RETURN].pal 17
					else setactor[RETURN].pal 20
				}
				else ifrnd 85 
				{
					espawn COMMANDER
					ifrnd 85 setactor[RETURN].pal 14
					else ifrnd 128 setactor[RETURN].pal 0
					else setactor[RETURN].pal 25
				}
				else ifrnd 128 
				{
					espawn TANK
					ifrnd 85 setactor[RETURN].pal 19
					else ifrnd 128 setactor[RETURN].pal 17
					else setactor[RETURN].pal 0
				}
				else espawn SCORPIONTANK

				state eliteinheritance
				ifrnd 8
				{ 
					getactorvar[RETURN].ACTORFLAGS TEMP
					ifvarand TEMP 512 nullop
					else
					{
						addvar TEMP 512
						setactorvar[RETURN].ACTORFLAGS TEMP
					}
				}
			}
			else
			{
				ifrnd 64
				{
					espawn BOSS1
					ifrnd 16 setactor[RETURN].pal 24
					else ifrnd 64 setactor[RETURN].pal 3
					else setactor[RETURN].pal 21
				}
				else ifrnd 85
				{
					espawn BOSS2
					ifrnd 16 setactor[RETURN].pal 24
					else ifrnd 64 setactor[RETURN].pal 3
					else setactor[RETURN].pal 21
				}
				else ifrnd 128 
				{
					espawn BOSS3 
					ifrnd 16 setactor[RETURN].pal 24
					else ifrnd 64 setactor[RETURN].pal 3
					else setactor[RETURN].pal 21
				}
				else
				{
					espawn BOSS4
					ifrnd 16 setactor[RETURN].pal 3
					else setactor[RETURN].pal 15
				}
			
				state eliteinheritance
				ifrnd 1 
				{ 
					getactorvar[RETURN].ACTORFLAGS TEMP
					ifvarand TEMP 512 nullop
					else
					{
						addvar TEMP 512
						setactorvar[RETURN].ACTORFLAGS TEMP
					}
				}
			}
		}
	}
	else
	{
		sound TELEPORTER 
		espawn TRANSPORTERBEAM 
		setactor[RETURN].pal 6
		ifrnd 240 // Spawns Non-Boss type enemies 15/16 times
		{
			ifrnd 28 
			{ 
				espawn LIZTROOP
				ifrnd 64 setactor[RETURN].pal 22
				else ifrnd 85 setactor[RETURN].pal 21
				else ifrnd 128  setactor[RETURN].pal 19
				else setactor[RETURN].pal 14
			}
			else ifrnd 32
			{
				espawn PIGCOP
				ifrnd 85 setactor[RETURN].pal 0
				else ifrnd 128 setactor[RETURN].pal 21
				else setactor[RETURN].pal 14
			}
			else ifrnd 37
			{
				espawn LIZMAN
				ifrnd 85 setactor[RETURN].pal 0
				else ifrnd 128 setactor[RETURN].pal 19
				else setactor[RETURN].pal 6
			}
			else ifrnd 42
			{
				espawn OCTABRAIN
				ifrnd 192 setactor[RETURN].pal 0
				else setactor[RETURN].pal 14
			}
			else ifrnd 53 
			{
				espawn DRONE
				ifrnd 255 setactor[RETURN].pal 0
				else setactor[RETURN].pal 25
			}
			else ifrnd 64
			{
				espawn NEWBEAST
				ifrnd 85 setactor[RETURN].pal 0
				else ifrnd 128 setactor[RETURN].pal 17
				else setactor[RETURN].pal 20
			}
			else ifrnd 85 
			{
				espawn COMMANDER
				ifrnd 85 setactor[RETURN].pal 14
				else ifrnd 128 setactor[RETURN].pal 0
				else setactor[RETURN].pal 25
			}
			else ifrnd 128 
			{
				espawn TANK
				ifrnd 85 setactor[RETURN].pal 19
				else ifrnd 128 setactor[RETURN].pal 17
				else setactor[RETURN].pal 0
			}
			else espawn SCORPIONTANK

			state eliteinheritance
			ifrnd 8
			{ 
				getactorvar[RETURN].ACTORFLAGS TEMP
				ifvarand TEMP 512 nullop
				else
				{
					addvar TEMP 512
					setactorvar[RETURN].ACTORFLAGS TEMP
				}
			}
		}
		else // BOSS-type summons
		{
			ifrnd 64
			{
				espawn BOSS1
				ifrnd 16 setactor[RETURN].pal 24
				else ifrnd 64 setactor[RETURN].pal 3
				else setactor[RETURN].pal 21
			}
			else ifrnd 85
			{
				espawn BOSS2
				ifrnd 16 setactor[RETURN].pal 24
				else ifrnd 64 setactor[RETURN].pal 3
				else setactor[RETURN].pal 21
			}
			else ifrnd 128 
			{
				espawn BOSS3 
				ifrnd 16 setactor[RETURN].pal 24
				else ifrnd 64 setactor[RETURN].pal 3
				else setactor[RETURN].pal 21
			}
			else
			{
				espawn BOSS4
				ifrnd 16 setactor[RETURN].pal 3
				else setactor[RETURN].pal 15
			}
		
			state eliteinheritance
			ifrnd 1 
			{ 
				getactorvar[RETURN].ACTORFLAGS TEMP
				ifvarand TEMP 512 nullop
				else
				{
					addvar TEMP 512
					setactorvar[RETURN].ACTORFLAGS TEMP
				}
			}
		}
	}
ends

state droneexplosions
	ifspritepal 25
	{
		debris SCRAP1 2
		debris SCRAP2 1
		debris SCRAP3 1
		sound RPG_EXPLODE
		sound RPG_EXPLODE
		spawn EXPLOSION2
		sound RPG_EXPLODE 
		ifrnd 192 state superdronespawnenemy
		setvar TEMP 5120
		setvarvar TEMP2 ACTORATTACK
		mulvar TEMP2 3
		addvar TEMP2 300
		setvarvar TEMP3 ACTORATTACK
		mulvar TEMP3 3
		addvar TEMP3 400
		setvarvar TEMP4 ACTORATTACK
		mulvar TEMP4 3
		addvar TEMP4 500
		setvarvar TEMP5 ACTORATTACK
		mulvar TEMP5 3
		addvar TEMP5 600
	}
	else 
	{
		spawn EXPLOSION2
		sound RPG_EXPLODE 
		setvar TEMP 2048
		setvarvar TEMP2 ACTORATTACK
		mulvar TEMP2 3
		divvar TEMP2 2
		addvar TEMP2 15
		setvarvar TEMP3 ACTORATTACK
		mulvar TEMP3 3
		divvar TEMP3 2
		addvar TEMP3 20
		setvarvar TEMP4 ACTORATTACK
		mulvar TEMP4 3
		divvar TEMP4 2
		addvar TEMP4 25
		setvarvar TEMP5 ACTORATTACK
		mulvar TEMP5 3
		divvar TEMP5 2
		addvar TEMP5 30
	}
	hitradiusvar TEMP TEMP2 TEMP3 TEMP4 TEMP5
ends

state dronedead
	setvar ACTORHP 0
	ifspritepal 9 nullop
	else
	ifspritepal 25
	{ 
		randvar RANKPOINTSTEMP SUPERDRONERANKPOINTSRAND 
		addvar RANKPOINTSTEMP SUPERDRONERANKPOINTSSOLID 
		randvar EXPPTSTEMP SUPERDRONEEXPERIENCERAND
		addvar EXPPTSTEMP SUPERDRONEEXPERIENCE
		randvar TEMPVAR SUPERDRONEEXPLODEEXPERIENCERANDMULTI
		addvar TEMPVAR SUPERDRONEEXPLODEEXPERIENCEMULTI
		mulvarvar EXPPTSTEMP TEMPVAR
		setvar TEMPVAR 0
		state expmulti
		state exp_given
	}
	else
	{ 
		randvar RANKPOINTSTEMP DRONERANKPOINTSRAND 
		addvar RANKPOINTSTEMP DRONERANKPOINTSSOLID 
		randvar EXPPTSTEMP DRONEEXPERIENCERAND
		addvar EXPPTSTEMP DRONEEXPERIENCE
		setvar TEMPVAR 0
		state expmulti
		state exp_given
	}
	state addtokillamounts state check_a_characters_kills
	debris SCRAP1 8
	debris SCRAP2 4
	debris SCRAP3 7
	ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
	state resetenemytimers
	state droneexplosions
	// OFF-LIMITS
	// setvar ACTORHP 0
	setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
	// END OFF-LIMITS
	killit
ends

state checkdronehitstate
	state enemy_underwater-space
	ifdead state dronedead
	else ifsquished state dronedead
	else
	{
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				state sparkstate
				ifrnd 85 sound HITMETAL
				else ifrnd 128 sound HITMETAL2
				else sound HITMETAL3
				sound DRON_PAIN
				ifspritepal 25
				{
					ifrnd 25 state superdronespawnenemy
				}
				ifbulletnear
				{
					ifceilingdistl 64
					{
						ifrnd 48
						{
							ifspritepal 25 ai AISUPERDRONEDODGE else ai AIDRONEDODGE
						}
						else 
						{
							ifspritepal 25 ai AISUPERDRONEDODGEUP else ai AIDRONEDODGEUP
						}
					}
				}
				else
				{
					ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE
				}
			}
			else
			{
				sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	}
ends

state droneshrunkstate
	ifcount 24
		killit
	else
		sizeto 1 1
ends

state checkdronenearplayer
	ifp palive ifpdistl 1596
	{
		ifcount 8
		{
			ifspritepal 25 // Super Drone RAMS the player instead of exploding, also knocking them backward somewhat
			{
				ifcount 19
				{
					ifp palive
					{
						state echeckquadtime
						state echeckvampiretime
		
						state miscmeleeangle_check
						ifvarvarg tempc temp ifvarvarl tempc tempb
						{
							setvar MELEEDAMAGE 240
							randvar MELEEDAMAGEVAR 40
							state meleerandomdmg
							ifp palive 
							{
								ifvare mainmenu 0
								{
									setvar MISCARRAYID 26 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // DEATHSWITCH-DELAY
									ifvare MISCARRAYID_AMOUNTTEMP 0 ifvarn INVULNTIME 0 ifvarg MELEEDAMAGE 0
									{
										ifvarand CHEATBITFIELD? 32 nullop else
										{
											ifvare CHARACTERSELECTED? 1 setvar knockbackstr 352
											ifvare CHARACTERSELECTED? 2 setvar knockbackstr 540
											ifvare CHARACTERSELECTED? 3 setvar knockbackstr 576
											ifvare CHARACTERSELECTED? 4 setvar knockbackstr 641
											ifvare CHARACTERSELECTED? 5 setvar knockbackstr 422
											ifvare CHARACTERSELECTED? 6 setvar knockbackstr 76
											ifvare CHARACTERSELECTED? 7 setvar knockbackstr 426
											ifvare CHARACTERSELECTED? 8 setvar knockbackstr 607
											ifvare CHARACTERSELECTED? 9 setvar knockbackstr 66
											ifvare CHARACTERSELECTED? 10 
											{ 
												setvar MISCARRAYID 110 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // NETHRA-FORM?
												ifvare MISCARRAYID_AMOUNTTEMP 0 setvar knockbackstr 692 else setvar knockbackstr 571 
											}
											ifvare CHARACTERSELECTED? 11 setvar knockbackstr 652
											ifvare CHARACTERSELECTED? 12 setvar knockbackstr 580
											ifvare CHARACTERSELECTED? 13 setvar knockbackstr 626
											ifvare CHARACTERSELECTED? 14 setvar knockbackstr 563
											ifvare CHARACTERSELECTED? 15 setvar knockbackstr 636
											state setknockback_player
										}
									}
								}
								state getmeleedmg2
							}
			
							ifvarg INVULNTIME 0 state invulnflash 
							else ifvarand CHEATBITFIELD? 32 state invulnflash 
							else ifvarl MELEEDAMAGE 1 state nullflash
							else
							{
								ifp palive palfrom 32 32
							}
							ifp palive sound RAM_IMPACT
						}
					}
					ai AISUPERDRONEWAIT
					resetcount
				}
			}
			else // Other Drones do the normal kamikaze explosion
			{
				ifvare ACTORINVULNTIME 0
				{
					ifcanseetarget
					{
						state addtokillamounts
						state echeckquadtime
						state echeckvampiretime
						sound DRON_ATTACK2
						debris SCRAP1 8
						debris SCRAP2 4
						debris SCRAP3 7
						setactor[THISACTOR].htowner PLAYERID
						ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
						state droneexplosions
		
						ifspritepal 9 nullop
						else
						{
							randvar RANKPOINTSTEMP DRONERANKPOINTSRAND 
							addvar RANKPOINTSTEMP DRONERANKPOINTSSOLID 
							randvar EXPPTSTEMP DRONEEXPERIENCERAND
							addvar EXPPTSTEMP DRONEEXPERIENCE
							randvar TEMPVAR DRONEEXPLODEEXPERIENCERANDMULTI
							addvar TEMPVAR DRONEEXPLODEEXPERIENCEMULTI
							mulvarvar EXPPTSTEMP TEMPVAR
							setvar TEMPVAR 0
							state expmulti
							state exp_given
						}
						state resetenemytimers
						// OFF-LIMITS
						// setvar ACTORHP 0
						setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
						// END OFF-LIMITS
						killit
					}
				}
			}
		}
		else ifcount 3 nullop
		else { ifvarl ACTORINVULNTIME 1 ifcanseetarget { ifspritepal 25 nullop else sound LASERTRIP_ARMING } }
	}
ends

state dronegetstate
	state enemy_underwater-space
	ifrnd 192
	{
		ifcansee
		{
			ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25
					{
						ifspritepal 25 ai AISUPERDRONEDODGE else ai AIDRONEDODGE
						break
					}
				}
				else
				{
					ifspritepal 25 ai AISUPERDRONEDODGE else ai AIDRONEDODGE
					break
				}
			}
			ifmove SUPERDRONEBULLVELS
			{
				ifcount 64 { ifspritepal 25 ai AISUPERDRONEPULLBACK else ai AIDRONEPULLBACK }
				else ifnotmoving ifcount 16 { ifspritepal 25 ai AISUPERDRONEPULLBACK else ai AIDRONEPULLBACK }
			}
			ifmove DRONEBULLVELS
			{
				ifcount 64 { ifspritepal 25 ai AISUPERDRONEPULLBACK else ai AIDRONEPULLBACK }
				else ifnotmoving ifcount 16 { ifspritepal 25 ai AISUPERDRONEPULLBACK else ai AIDRONEPULLBACK }
			}
			ifspritepal 25 // Super Drone pours on a flood of lasers [and sometimes rockets] as it seeks at their target
			{
				ifactioncount 2
				{
					ifvare mainmenu 0
					{
						ifvarand ACTORSTATUS? 16
						{
							ifpdistl 3072
							{
								ifvarg SKILLLEVEL 4 { ifrnd 128 { eshoot FIRELASER sound PRED_ATTACK } }
								ifvarg SKILLLEVEL 2 { ifrnd 64 { eshoot FIRELASER sound PRED_ATTACK } }
								ifvarg SKILLLEVEL 1 { ifrnd 32 { eshoot FIRELASER sound PRED_ATTACK } }
								ifvarg SKILLLEVEL 0 { ifrnd 16 { eshoot FIRELASER sound PRED_ATTACK } }
								ifrnd 8 { eshoot FIRELASER sound PRED_ATTACK }
								ifvarg SKILLLEVEL 4 { ifrnd 8 { eshoot RPG sound RPG_SHOOT } }
								ifvarg SKILLLEVEL 2 { ifrnd 4 { eshoot RPG sound RPG_SHOOT } }
								ifvarg SKILLLEVEL 1 { ifrnd 2 { eshoot RPG sound RPG_SHOOT } }
								ifvarg SKILLLEVEL 0 { ifrnd 1 { eshoot RPG sound RPG_SHOOT } }
								ifrnd 1 { ifrnd 128 { eshoot RPG sound RPG_SHOOT } }
								ifvarg SKILLLEVEL 4 { ifrnd 4 state superdronespawnenemy }
								ifrnd 4 state superdronespawnenemy
							}
						}
						else
						{
							ifvarg SKILLLEVEL 4 { ifrnd 128 { eshoot FIRELASER sound PRED_ATTACK } }
							ifvarg SKILLLEVEL 2 { ifrnd 64 { eshoot FIRELASER sound PRED_ATTACK } }
							ifvarg SKILLLEVEL 1 { ifrnd 32 { eshoot FIRELASER sound PRED_ATTACK } }
							ifvarg SKILLLEVEL 0 { ifrnd 16 { eshoot FIRELASER sound PRED_ATTACK } }
							ifrnd 8 { eshoot FIRELASER sound PRED_ATTACK }
							ifvarg SKILLLEVEL 4 { ifrnd 8 { eshoot RPG sound RPG_SHOOT } }
							ifvarg SKILLLEVEL 2 { ifrnd 4 { eshoot RPG sound RPG_SHOOT } }
							ifvarg SKILLLEVEL 1 { ifrnd 2 { eshoot RPG sound RPG_SHOOT } }
							ifvarg SKILLLEVEL 0 { ifrnd 1 { eshoot RPG sound RPG_SHOOT } }
							ifrnd 1 { ifrnd 128 { eshoot RPG sound RPG_SHOOT } }
							ifvarg SKILLLEVEL 4 { ifrnd 4 state superdronespawnenemy }
							ifrnd 4 state superdronespawnenemy
						}
					}
					resetactioncount
				}
			}
			else ifcount 32 // 32
			{
				ifp phigher
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 3072
						{
							ifspritepal 25 { move SUPERDRONEBULLVELS geth getv } else { move DRONEBULLVELS geth getv }
						}
						else
						{
							ifspritepal 25 { move SUPERDRONEBULLVELS geth } else { move DRONEBULLVELS geth }
						}
					}
					else
					{
						ifspritepal 25 { move SUPERDRONEBULLVELS geth getv } else { move DRONEBULLVELS geth getv }
					}
				}
				else
				{
					ifspritepal 25 { move SUPERDRONEBULLVELS geth } else { move DRONEBULLVELS geth }
				}
			}
		}
		else
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 1 { ifrnd 25 operate }
			}
			else
			{
				ifrnd 1 operate
			}
		}
	}
ends

state dronedodgestate
	state enemy_underwater-space
	ifai AIDRONEDODGEUP
	{
		ifcount 8 { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
		else ifnotmoving { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
	}
	else
	ifai AISUPERDRONEDODGEUP
	{
		ifcount 8 { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
		else ifnotmoving { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
	}
	else
	{
		ifvare ITEMTARGET -1
		{
		ifcount 8 { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
		else ifnotmoving { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
		}
	}
ends

state getdronespeeds
	ifmove DRONERUNVELS setvar ACTORSPEED 128
	else ifmove DRONERUNUPVELS setvar ACTORSPEED 128
	else ifmove DRONEBULLVELS setvar ACTORSPEED 252
	else ifmove DRONEBACKWARDS setvar ACTORSPEED -64
	else ifmove DRONERISE setvar ACTORSPEED 32
	else ifmove DRONESTOPPED setvar ACTORSPEED -16
	else ifmove SUPERDRONERUNVELS setvar ACTORSPEED 256
	else ifmove SUPERDRONERUNUPVELS setvar ACTORSPEED 256
	else ifmove SUPERDRONEBULLVELS setvar ACTORSPEED 504
	else ifmove SUPERDRONEBACKWARDS setvar ACTORSPEED -128
	else ifmove SUPERDRONERISE setvar ACTORSPEED 64
	else ifmove SUPERDRONESTOPPED setvar ACTORSPEED -16
	
	ifvarn ACTORSPEED 0
	{
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	}
ends

actor DRONE DRONESTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	// state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checkdronenearplayer
	state droneseekitem
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifrnd 2
		ifvare mainmenu 0 fall
	else
		soundonce DRON_JETSND
	
	ifaction 0
	{
		state getdronehealth
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	}
	else
	ifai AIDRONEWAIT
	{
		state enemy_underwater-space
		ifactioncount 4
		{
			ifrnd 16
			{
				ifcansee
				{
					sound DRON_ATTACK1
					ifp phigher { ifspritepal 25 ai AISUPERDRONEGETUP else ai AIDRONEGETUP }
					else { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
				}
			}
		}
	}
	else
	ifai AISUPERDRONEWAIT
	{
		state enemy_underwater-space
		ifactioncount 4
		{
			ifrnd 16
			{
				ifcansee
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 3072 sound DRON_ATTACK1
					}
					else
					{
						sound DRON_ATTACK1
					}
					ifp phigher { ifspritepal 25 ai AISUPERDRONEGETUP else ai AIDRONEGETUP }
					else { ifspritepal 25 ai AISUPERDRONEGETE else ai AIDRONEGETE }
				}
			}
		}
	}
	else
	ifai AIDRONEGETE
		state dronegetstate
	else
	ifai AISUPERDRONEGETE
		state dronegetstate
	else
	ifai AIDRONEGETUP
		state dronegetstate
	else
	ifai AISUPERDRONEGETUP
		state dronegetstate
	else ifai AIDRONEPULLBACK
	{    
		state enemy_underwater-space
		ifcount 32 { ifspritepal 25 ai AISUPERDRONEWAIT else ai AIDRONEWAIT }
	}
	else
	ifai AISUPERDRONEPULLBACK
	{    
		state enemy_underwater-space
		ifcount 32 { ifspritepal 25 ai AISUPERDRONEWAIT else ai AIDRONEWAIT }
	}
	else
	ifai AIDRONEHIT
	{
		state enemy_underwater-space
		ifcount 8 { ifspritepal 25 ai AISUPERDRONEWAIT else ai AIDRONEWAIT }
	}
	else
	ifai AISUPERDRONEHIT
	{ 
		state enemy_underwater-space
		ifcount 8 { ifspritepal 25 ai AISUPERDRONEWAIT else ai AIDRONEWAIT }
		// ai AIDRONEWAIT
	}
	else
	ifai AIDRONESHRUNK
		state droneshrunkstate
	else
	ifai AIDRONEDODGE
		state dronedodgestate
	else
	ifai AISUPERDRONEDODGE
		state dronedodgestate
	else
	ifai AIDRONEDODGEUP
		state dronedodgestate
	else
	ifai AISUPERDRONEDODGEUP
		state dronedodgestate
	
	ifhitweapon
		state checkdronehitstate
	
	ifrnd 1
		soundonce DRON_ROAM
	
	state getdronespeeds
enda

state normalenemyexplode
	sound SQUISHED
	state standard_jibs
	killit
ends

state checkoctapalette
	ifai 0
	{
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			state rankstarbeta
			state checkbosslifemeters state getenemyid setvar SKILLSET? -1
		}
		
		ifvare SKILLSET? 0
		{
			state enemytyperandomizer
			state cstat2048toeliteflag
			state rankstarbeta
			ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
			{
				setvar ACTORHP OCTASTRENGTH
				setvar ACTORMAXAIRTIME OCTAAIRTIME
				setvar ACTORAIRTIME OCTAAIRTIME
				setvar ACTORMAXHP OCTASTRENGTH
			}
			else
			ifspritepal 14
			{
				sizeat 48 48
				setvar ACTORHP OCTANINESTRENGTH
				setvar ACTORMAXAIRTIME OCTANINEAIRTIME
				setvar ACTORAIRTIME OCTANINEAIRTIME
				setvar ACTORATTACK OCTANINEBASEATTACK
				setvar ACTORDEFENSE OCTANINEBASEDEFENSE
				setvar ACTORMAXAP OCTANINESTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE OCTANINECRITCHANCE
				setvar ACTORSURVIVALVALUE OCTANINESURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORIMMUNEFLAGS 64 // Psionic
				setvar ACTORSTRONGFLAGS 2 // Ice
				setvar ACTORWEAKNESSFLAGS 273 // Fire (1), Explosion (16), Ion/Energy (256)
			}
			else
			{
				setvar ACTORHP OCTASTRENGTH
				setvar ACTORMAXAIRTIME OCTAAIRTIME
				setvar ACTORAIRTIME OCTAAIRTIME
				setvar ACTORATTACK OCTABASEATTACK
				setvar ACTORDEFENSE OCTABASEDEFENSE
				setvar ACTORMAXAP OCTASTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE OCTACRITCHANCE
				setvar ACTORSURVIVALVALUE OCTASURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORIMMUNEFLAGS 64 // Psionic (64)
				setvar ACTORSTRONGFLAGS 2 // Ice (2)
				setvar ACTORWEAKNESSFLAGS 273 // Fire (1), Explosion (16), Ion/Energy (256)
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters state getenemyid setvar SKILLSET? -1
		}
	}
ends

action AOCTAWALK    0   3   5   1   15
action AOCTASTAND     0   1   5   1   15
action AOCTASCRATCH   0   4   5   1   15
action AOCTAHIT    30   1   1   1   10
action AOCTASHOOT    20   1   5   1   10
action AOCTADYING    30   8   1   1   17
action AOCTADEAD     38   1   1   1  1
action AOCTAFROZEN    0   1   5

move OCTAWALKVELS 96 -30
move NINEWALKVELS 168 -30 // 96+72=168
move OCTAUPVELS 96 -70
move NINEUPVELS 168 -70
move OCTASTOPPED 0 -30
move NINESTOPPED 0 -30
move OCTAINWATER 96 24
move NINEINWATER 168 24

ai AIOCTAGETENEMY AOCTAWALK OCTAWALKVELS seekplayer
ai AININEGETENEMY AOCTAWALK NINEWALKVELS seekplayer

ai AIOCTASHOOTENEMY AOCTASHOOT OCTASTOPPED faceplayer
ai AININESHOOTENEMY AOCTASHOOT NINESTOPPED faceplayer

ai AIOCTASCRATCHENEMY AOCTASCRATCH OCTASTOPPED faceplayerslow
ai AININESCRATCHENEMY AOCTASCRATCH NINESTOPPED faceplayerslow

ai AIOCTAHIT AOCTAHIT OCTASTOPPED faceplayer
ai AININEHIT AOCTAHIT NINESTOPPED faceplayer

ai AIOCTASHRUNK AOCTAWALK SHRUNKVELS faceplayer
ai AININESHRUNK AOCTAWALK SHRUNKVELS faceplayer

ai AIOCTAGROW AOCTASTAND OCTASTOPPED faceplayerslow
ai AININEGROW AOCTASTAND NINESTOPPED faceplayerslow

ai AIOCTADYING AOCTADYING OCTASTOPPED faceplayer
ai AININEDYING AOCTADYING NINESTOPPED faceplayer

state octaseekitem
	
	state accquireenemystats
	state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifspritepal 14 { ifai AININEGETENEMY break else ai AININEGETENEMY }
							else { ifai AIOCTAGETENEMY break else ai AIOCTAGETENEMY }
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state octagetenemystate
	ifvare ITEMTARGET -1
	{
		ifcansee
		{
			ifactioncount 32
			{
				ifrnd 48 ifcanshoottarget
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 1536
						{
							ifspritepal 14 sound NINE_ATTACK1 else sound OCTA_ATTACK1
							ifspritepal 14 ai AININESHOOTENEMY else ai AIOCTASHOOTENEMY
							break
						}
					}
					else
					{
						ifspritepal 14 sound NINE_ATTACK1 else sound OCTA_ATTACK1
						ifspritepal 14 ai AININESHOOTENEMY else ai AIOCTASHOOTENEMY
						break
					}
				}
			}
			else ifpdistl 1280
			{
				ifspritepal 14 ai AININESCRATCHENEMY else ai AIOCTASCRATCHENEMY
			}
		}
	}
ends

state octabite
	state echeckquadtime
	state echeckvampiretime
	
	state meleerandomdmg
	ifp palive state getmeleedmg2
ends

state octascratchenemystate
	ifpdistg 1280 { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
	else
	{
		ifspritepal 14
		{
			ifcount 20 // Octanines bite 75% faster than other Octabrains [0.76 seconds]
			{
				resetcount
				ifspritepal 14 sound NINE_ATTACK2 else sound OCTA_ATTACK2
		
				state miscmeleeangle_check
				ifvarvarg tempc temp ifvarvarl tempc tempb // prevents damage from occuring if Octabrain/Octanine is confused and facing AWAY from the player upclose
				{
					setvar MELEEDAMAGE 33
					randvar MELEEDAMAGEVAR 15
					state octabite
				}
			}
		}
		else
		{
			ifcount 32 // 1.23 seconds
			{
				resetcount
				ifspritepal 14 sound NINE_ATTACK2 sound OCTA_ATTACK2
		
				state miscmeleeangle_check
				ifvarvarg tempc temp ifvarvarl tempc tempb // prevents damage from occuring if Octabrain/Octanine is confused and facing AWAY from the player upclose
				{
					setvar MELEEDAMAGE 11
					randvar MELEEDAMAGEVAR 5
					state octabite
				}
			}
		}
	}
ends

state octashootenemystate
	ifspritepal 14
	{
		ifvarand ACTORSTATUS? 16
		{ 
			ifpdistl 1536
			{
				ifvarand ACTORSTATUS? 128 nullop
				else
				{
					findnearsprite APLAYER 32768 TEMP 
					ifvarn TEMP -1 
					{
						getactor[TEMP].x mx
						getactor[TEMP].y my
						getactor[THISACTOR].x x 
						getactor[THISACTOR].y y
						subvarvar mx x
						subvarvar my y
						getangle angvar mx my
						setactor[THISACTOR].ang angvar
					} 
				}
		
				ifcount 27 { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
				else
				ifcount 20
				{ 
					state echeckquadtime 
					state echeckvampiretime
			
					state firecoolexplosion1_angleeffect
					state firecoolexplosion1_angleeffect
					state firecoolexplosion1_angleeffect
					state firecoolexplosion1_angleeffect
					ifrnd 96
					{
						getactor[THISACTOR].ang ACTORANGLE eshoot FIRELASER setactor[RETURN].ang ACTORANGLE
						getactor[THISACTOR].ang ACTORANGLE eshoot FIRELASER setactor[RETURN].ang ACTORANGLE
					}
					ifrnd 32
					{
						getactor[THISACTOR].ang ACTORANGLE eshoot RPG setactor[RETURN].ang ACTORANGLE
					}
					ifcount 24 
					{
						shoot DRAGONICRIPBULLET 
						ifvarg SKILLLEVEL 0 { getactor[THISACTOR].ang ACTORANGLE eshoot DRAGONICRIPBULLET setactor[RETURN].ang ACTORANGLE }
						ifvarg SKILLLEVEL 3 { getactor[THISACTOR].ang ACTORANGLE eshoot DRAGONICRIPBULLET setactor[RETURN].ang ACTORANGLE }
						ifvarg SKILLLEVEL 6 { getactor[THISACTOR].ang ACTORANGLE eshoot DRAGONICRIPBULLET setactor[RETURN].ang ACTORANGLE }
						ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3 
						ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
					} 
				}
				else ifactioncount 6 resetactioncount 
			}
			else { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
		}
		else
		{
			ifvarand ACTORSTATUS? 128 nullop
			else
			{
				findnearsprite APLAYER 32768 TEMP 
				ifvarn TEMP -1 
				{
					getactor[TEMP].x mx
					getactor[TEMP].y my
					getactor[THISACTOR].x x 
					getactor[THISACTOR].y y
					subvarvar mx x
					subvarvar my y
					getangle angvar mx my
					setactor[THISACTOR].ang angvar
				} 
			}
		
			ifcount 27 { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
			else
			ifcount 20
			{ 
				state echeckquadtime 
				state echeckvampiretime
		
				state firecoolexplosion1_angleeffect
				state firecoolexplosion1_angleeffect
				state firecoolexplosion1_angleeffect
				state firecoolexplosion1_angleeffect
				ifrnd 96
				{
					getactor[THISACTOR].ang ACTORANGLE eshoot FIRELASER setactor[RETURN].ang ACTORANGLE
					getactor[THISACTOR].ang ACTORANGLE eshoot FIRELASER setactor[RETURN].ang ACTORANGLE
				}
				ifrnd 32
				{
					getactor[THISACTOR].ang ACTORANGLE eshoot RPG setactor[RETURN].ang ACTORANGLE
				}
				ifcount 24 
				{
					shoot DRAGONICRIPBULLET 
					ifvarg SKILLLEVEL 0 { getactor[THISACTOR].ang ACTORANGLE eshoot DRAGONICRIPBULLET setactor[RETURN].ang ACTORANGLE }
					ifvarg SKILLLEVEL 3 { getactor[THISACTOR].ang ACTORANGLE eshoot DRAGONICRIPBULLET setactor[RETURN].ang ACTORANGLE }
					ifvarg SKILLLEVEL 6 { getactor[THISACTOR].ang ACTORANGLE eshoot DRAGONICRIPBULLET setactor[RETURN].ang ACTORANGLE }
					ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3 
					ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
				} 
			}
			else ifactioncount 6 resetactioncount 
		}
	}
	else
	{
		ifvarand ACTORSTATUS? 16
		{ 
			ifpdistl 1536
			{
				ifcount 25 { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
				else ifcount 24
				{ 
					state firecoolexplosion1_angleeffect
					ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3 
					ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
				}
				else ifactioncount 6 resetactioncount 
			}
			else { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
		}
		else
		{
			ifcount 25 { ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY }
			else ifcount 24
			{ 
				state firecoolexplosion1_angleeffect
				ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3 
				ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
			}
			else ifactioncount 6 resetactioncount 
		}
	}
ends

state checkoctahitstate
	ifdead
	{
		setvar ACTORHP 0
		ifwasweapon FREEZEBLAST
		{
			state freezeup
			state frosty
			spritepal 1
			move 0
			action AOCTAFROZEN
			strength 0
			break
		}
	
		ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
		state octabrainawards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
	
		ifspritepal 14 sound NINE_DYING sound OCTA_DYING
		ifwasweapon RPG state normalenemyexplode
		else ifwasweapon RPG_NOAIM state normalenemyexplode
		else ifwasweapon OCTANINE_RPG state normalenemyexplode
		else ifwasweapon GENERAL_RPG state normalenemyexplode
		else ifwasweapon COMMANDER_RPG state normalenemyexplode
		else ifwasweapon LEADER_RPG state normalenemyexplode
		else ifwasweapon BAALO_RPG state normalenemyexplode
		else ifwasweapon GATEMISSILE_MAIN state normalenemyexplode
		else ifwasweapon GATEMISSILE_SPLIT state normalenemyexplode
		else ifwasweapon STROKEMISSILE_MAIN state normalenemyexplode
		else ifwasweapon STROKEMISSILE_SPLIT state normalenemyexplode
		else ifwasweapon RADIUSEXPLOSION state normalenemyexplode
		else ifwasweapon GROWSPARK
		{
			state expanding
			cstat 0
			sound ACTOR_GROWING
			ifspritepal 14 ai AININEGROW else ai AIOCTAGROW
			break
		}
		else
		{
			state rf
			ifspritepal 14 ai AININEDYING else ai AIOCTADYING
		}
	}
	else
	{
	
		ifwasweapon SHRINKSPARK
		{
			ifvarg ACTORINVULNTIME 0 state deflectshrinker
			else
			{
				ifvare oldskoolmode 0
				{
					ifvarand ACTORFLAGS 512
					{
						ifspritepal 14 
						{ 
							ifrnd 244 state deflectshrinker     
							else { sound ACTOR_SHRINKING ai AININESHRUNK setvar SHRUNK? 1 }
						} 
						else
						{
							ifrnd 205 state deflectshrinker     
							else { sound ACTOR_SHRINKING ai AIOCTASHRUNK setvar SHRUNK? 1 }
						}
					}
					else
					{
						ifspritepal 14 
						{ 
							ifrnd 208 state deflectshrinker     
							else { sound ACTOR_SHRINKING ai AININESHRUNK setvar SHRUNK? 1 }
						} 
						else
						{
							ifrnd 52 state deflectshrinker     
							else { sound ACTOR_SHRINKING ai AIOCTASHRUNK setvar SHRUNK? 1 }
						}
					}
				}
				else
				{
					sound ACTOR_SHRINKING
					ifspritepal 14 ai AININESHRUNK else ai AIOCTASHRUNK
					setvar SHRUNK? 1
				}
			}
		}
	
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				state random_wall_jibs
				ifwasweapon GROWSPARK sound EXPANDERHIT
		
				ifwasweapon SHRINKSPARK nullop else { ifspritepal 14 sound NINE_PAIN else sound OCTA_PAIN spawn BLOOD }
				ifrnd 64 { ifspritepal 14 ai AININEHIT else ai AIOCTAHIT }
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	}
ends

state octashrunkstate
	ifcount SHRUNKDONECOUNT
	{
		ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY
		setvar SHRUNK? 0
	}
	else
	ifcount SHRUNKCOUNT
	{ 
		ifspritepal 14 sizeto 48 48 else sizeto 40 40 
	}
	else
		state genericshrunkcode
ends


state octadyingstate
	ifactioncount 8
	{
		// ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
		ifspritepal 14 move NINESTOPPED else move OCTASTOPPED
		action AOCTADEAD
		break
	}
	else
		ifactioncount 5 nullop
	else
		ifactioncount 4
			iffloordistl 8
				sound THUD
ends

actor OCTABRAINSTAYPUT OCTASTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkoctapalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ifspritepal 14 
	{ 
		stopsound OCTA_RECOG 
		soundonce NINE_RECOG 
	}
	ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor OCTABRAIN
enda

state getoctabrainspeeds
	ifmove OCTAWALKVELS setvar ACTORSPEED 96
	else ifmove NINEWALKVELS setvar ACTORSPEED 168
	else ifmove OCTAUPVELS setvar ACTORSPEED 96
	else ifmove NINEUPVELS setvar ACTORSPEED 168
	else ifmove OCTASTOPPED setvar ACTORSPEED 0
	else ifmove NINESTOPPED setvar ACTORSPEED 0
	else ifmove OCTAINWATER setvar ACTORSPEED 96
	else ifmove NINEINWATER setvar ACTORSPEED 168
	else ifmove SHRUNKVELS setvar ACTORSPEED 32
	
	ifvarn ACTORSPEED 0
	{
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	}
ends

actor OCTABRAIN OCTASTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkoctapalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ifvare mainmenu 0 fall
	state octaseekitem
	state checksquished
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifai 0
	{
		ifspritepal 14 
		{ 
			stopsound OCTA_RECOG 
			soundonce NINE_RECOG 
		}
		ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY
	}
	else ifaction AOCTADEAD
	{
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 
			{
				sound SQUISHED
				state standard_jibs
				killit
			}
		}    
		strength 0
		ifcount RESPAWNACTORTIME ifrespawn
		{
			state subtractfromkillamounts
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state checkoctapalette
			ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
			ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY
		}
		ifhitweapon ifwasweapon RADIUSEXPLOSION
		{
			state standard_jibs
			killit
		}
		break
	}
	else ifaction AOCTAFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			state unfreeze
			ifspritepal 14 ai AININEGETENEMY else ai AIOCTAGETENEMY
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	
			state octabrainawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	
			lotsofglass 30
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			state frozenactor-breakcode
			killit
		}
		ifp pfacing ifpdistl FROZENQUICKKICKDIST pkick
		break
	}
	else
	{
		ifrnd 1
		{
			ifspritepal 14 soundonce NINE_ROAM else soundonce OCTA_ROAM
		}
	
		ifai AIOCTAGETENEMY
			state octagetenemystate
		else
		ifai AININEGETENEMY
			state octagetenemystate
		else
		ifai AIOCTAHIT
		{
			ifcount 8 ai AIOCTASHOOTENEMY
		}
		else
		ifai AININEHIT
		{
			ifcount 8 ai AININESHOOTENEMY
		}
		else
		ifai AIOCTADYING
		{
			state octadyingstate
			break
		}
		else
		ifai AININEDYING
		{
			state octadyingstate
			break
		}
		else
		ifai AININESCRATCHENEMY
			state octascratchenemystate
		else
		ifai AIOCTASCRATCHENEMY
			state octascratchenemystate
		else
		ifai AININESHOOTENEMY
			state octashootenemystate
		else
		ifai AIOCTASHOOTENEMY
			state octashootenemystate
		else
		ifai AIOCTASHRUNK
		{
			state octashrunkstate
			break
		}
		else
		ifai AININESHRUNK
		{
			state octashrunkstate
			break
		}
		else
		ifai AIOCTAGROW
			state genericgrowcode
		else
		ifai AININEGROW
			state genericgrowcode
	
		ifspritepal 14
		{
			ifmove NINEUPVELS nullop
			else
			ifp phigher
				move NINEUPVELS seekplayer
			else
			ifmove NINEINWATER nullop
			else
				ifinwater
					move NINEINWATER seekplayer
		}
		else
		{
			ifmove OCTAUPVELS nullop
			else
			ifp phigher
				move OCTAUPVELS seekplayer
			else
				ifmove OCTAINWATER nullop
			else
				ifinwater
					move OCTAINWATER seekplayer
		}
	
		ifhitweapon
			state checkoctahitstate
	}
	
	state getoctabrainspeeds
enda



state checkpigcoppalette
	ifai 0
	{
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			state rankstarbeta
			state checkbosslifemeters state getenemyid setvar SKILLSET? -1
		}
		
		ifvare SKILLSET? 0
		{
			state enemytyperandomizer
			state cstat2048toeliteflag
			state rankstarbeta
			ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
			{
				setvar ACTORHP PIGCOPSTRENGTH
				setvar ACTORMAXAIRTIME PIGCOPAIRTIME
				setvar ACTORAIRTIME PIGCOPAIRTIME
				setvar ACTORMAXHP PIGCOPSTRENGTH
			}
			else
			ifspritepal 21
			{
				setvar ACTORHP PIGCAPTAINSTRENGTH
				setvar ACTORMAXAIRTIME PIGCAPTAINAIRTIME
				setvar ACTORAIRTIME PIGCAPTAINAIRTIME
				setvar ACTORATTACK PIGCAPTAINBASEATTACK
				setvar ACTORDEFENSE PIGCAPTAINBASEDEFENSE
				setvar ACTORMAXAP PIGCAPTAINSTRENGTH
				setvar ACTORMAXFALLRESIST PIGCAPTAINFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE PIGCAPTAINCRITCHANCE
				setvar ACTORSURVIVALVALUE PIGCAPTAINSURVIVALCHANCE
				state enemy_general_stuff
				state freezecode_actor
				state healingsector_actor
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 48 // Explosive, Metal
			}
			else
			ifspritepal 14
			{
				setvar ACTORHP PIGSARGEANTSTRENGTH
				setvar ACTORMAXAIRTIME PIGSARGEANTAIRTIME
				setvar ACTORAIRTIME PIGSARGEANTAIRTIME
				setvar ACTORATTACK PIGSARGEANTBASEATTACK
				setvar ACTORDEFENSE PIGSARGEANTBASEDEFENSE
				setvar ACTORMAXAP PIGSARGEANTSTRENGTH
				setvar ACTORMAXFALLRESIST PIGSARGEANTFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE PIGSARGEANTCRITCHANCE
				setvar ACTORSURVIVALVALUE PIGSARGEANTSURVIVALCHANCE
				state enemy_general_stuff
				state freezecode_actor
				state healingsector_actor
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 48 // Explosive, Metal
			}
			else
			ifspritepal 24
			{
				sizeat 55 55
				setvar ACTORHP RAMONESTRENGTH
				setvar ACTORMAXAIRTIME RAMONEAIRTIME
				setvar ACTORAIRTIME RAMONEAIRTIME
				setvar ACTORATTACK RAMONEBASEATTACK
				setvar ACTORDEFENSE RAMONEBASEDEFENSE
				setvar ACTORMAXAP RAMONESTRENGTH
				setvar ACTORMAXFALLRESIST RAMONEFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE RAMONECRITCHANCE
				setvar ACTORSURVIVALVALUE RAMONESURVIVALCHANCE
				state enemy_general_stuff
				state freezecode_actor
				state healingsector_actor
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 48 // Explosive, Metal
			}
			else
			{
				setvar ACTORHP PIGCOPSTRENGTH
				setvar ACTORMAXAIRTIME PIGCOPAIRTIME
				setvar ACTORAIRTIME PIGCOPAIRTIME
				setvar ACTORATTACK PIGCOPBASEATTACK
				setvar ACTORDEFENSE PIGCOPBASEDEFENSE
				setvar ACTORMAXAP PIGCOPSTRENGTH
				setvar ACTORMAXFALLRESIST PIGCOPFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE PIGCOPCRITCHANCE
				setvar ACTORSURVIVALVALUE PIGCOPSURVIVALCHANCE
				state enemy_general_stuff
				state freezecode_actor
				state healingsector_actor
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 48 // Explosive, Metal
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters state getenemyid setvar SKILLSET? -1
		}
	}
ends

action APIGWALK     0  4 5 1 20
action APIGRUN      0  4 5 1 11
action APIGSHOOT    30 2 5 1 58
action APIGCOCK     25 1 5 1 16
action APIGSTAND    30 1 5 1 1
action APIGDIVE     40 2 5 1 40
action APIGDIVESHOOT  45 2 5 1 58
action APIGDYING    55 5 1 1 15
action APIGHIT      55 1 1 1 10
action APIGDEAD     60 1 1 1 1
action APIGFROZEN    0 1 5
action APIGGROW      0


move PIGWALKVELS 72
move PIGRUNVELS 108
move PIGSTOPPED

ai AIPIGSEEKENEMY APIGWALK PIGWALKVELS seekplayer
ai AIPIGSHOOTENEMY APIGSHOOT PIGSTOPPED faceplayer
ai AIPIGFLEEENEMY APIGWALK PIGWALKVELS fleeenemy
ai AIPIGSHOOT APIGSHOOT PIGSTOPPED faceplayer
ai AIPIGDODGE APIGRUN PIGRUNVELS dodgebullet
ai AIPIGCHARGE APIGRUN PIGRUNVELS seekplayer
ai AIPIGSEEKITEM APIGRUN PIGRUNVELS seekplayer
ai AIPIGDIVING APIGDIVE PIGSTOPPED faceplayer
ai AIPIGDYING APIGDYING PIGSTOPPED faceplayer
ai AIPIGSHRINK APIGWALK SHRUNKVELS fleeenemy
ai AIPIGGROW APIGGROW PIGSTOPPED faceplayerslow
ai AIPIGHIT APIGHIT PIGSTOPPED faceplayer

state pigcopseekitem
	
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AIPIGCHARGE break else ai AIPIGCHARGE
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state pigseekenemystate
	ifai AIPIGCHARGE
	{
		ifvare ITEMTARGET -1
		{
			ifcansee ifpdistl 3084
			{
				ifnotmoving ai AIPIGSEEKENEMY
				else
				{
					ifvarand ACTORSTATUS? 16 ai AIPIGSEEKENEMY
					else ai AIPIGDIVING
				}
			}
			break
		}
	}
	else iffloordistl 32
	{
		ifvarand ACTORSTATUS? 16
		{
			ifpdistg 16384
			{
				ifactornotstayput ai AIPIGCHARGE
			}
		}
		else
		{
			ifpdistg 4096
			{
				ifactornotstayput ai AIPIGCHARGE
			}
		}
		ifbulletnear
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 8 { ifrnd 25 ai AIPIGDODGE }
			}
			else
			{
				ifrnd 8 ai AIPIGDODGE
			}
		}
	}
	
	ifrnd 128 ifcansee
	{
		ifai AIPIGDODGE
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistg 16384
				{
					ifcount 32 ai AIPIGCHARGE
				}
				else
				{
					ifcount 32 ai AIPIGSEEKENEMY
				}
			}
			else
			{
				ifcount 32 ai AIPIGCHARGE
			}
			break
		}
	
		iffloordistl 32
		{
			ifpdistl 1024
			{
				ifp palive
				{
					ifcanshoottarget
					{
						ai AIPIGSHOOTENEMY
						break
					}
				}
			}
		
			ifcount 48
			{
				ifrnd 8
				{
					ifp palive
					{
						ifcanshoottarget
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistl 1536 ai AIPIGSHOOTENEMY
							}
							else
							{
								ifrnd 192
									ai AIPIGSHOOTENEMY
								else
									ai AIPIGDIVING
							}
							break
						}
					}
				}
			}
		}
	}
ends


state pigshootenemystate
	ifspritepal 24 // Ramone [36 tics]
	{
		ifcount 12 nullop
		else
		ifcount 11
		{
			ifcanshoottarget
			{
				state echeckquadtime
				state echeckvampiretime
	
				sound PIG_ATTACK
				sound PIG_ATTACK
				sound PIG_ATTACK
				state pigshotgun
				state pigshotgun
				state pigshotgun
				state pigshotgun
			}
			else
				ai AIPIGSEEKENEMY
		}
		ifcount 18 nullop
		else
		ifcount 17
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}

		ifcount 24 nullop
		else
		ifcount 23
		{
			ifcanshoottarget
			{
				state echeckquadtime
				state echeckvampiretime
	
				sound PIG_ATTACK
				sound PIG_ATTACK
				sound PIG_ATTACK
				state pigshotgun
				state pigshotgun
				state pigshotgun
				state pigshotgun
			}
			else
				ai AIPIGSEEKENEMY
		}
		ifcount 30 nullop
		else
		ifcount 29
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
		ifcount 36
		{
			ifrnd 64
				resetcount
			else
			{
				ifpdistl 768
					ai AIPIGFLEEENEMY
				else
					ai AIPIGSEEKENEMY
			}
		}
		ifaction APIGCOCK ifactioncount 2 action APIGSHOOT
	}
	else
	ifspritepal 21 // Pig Captain [36 tics]
	{
		ifcount 12 nullop
		else
		ifcount 11
		{
			ifcanshoottarget
			{
				state echeckquadtime
				state echeckvampiretime
	
				sound PIG_ATTACK
				sound PIG_ATTACK
				sound PIG_ATTACK
				state pigshotgun
				state pigshotgun
			}
			else
				ai AIPIGSEEKENEMY
		}
	
		ifcount 18 nullop
		else
		ifcount 17
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
	
		ifcount 24 nullop
		else
		ifcount 23
		{
			ifcanshoottarget
			{
				state echeckquadtime
				state echeckvampiretime
	
				sound PIG_ATTACK
				sound PIG_ATTACK
				sound PIG_ATTACK
				state pigshotgun
				state pigshotgun
			}
			else
				ai AIPIGSEEKENEMY
		}
	
		ifcount 30 nullop
		else
		ifcount 29
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
	
		ifcount 36
		{
			ifrnd 64
				resetcount
			else
			{
				ifpdistl 768
					ai AIPIGFLEEENEMY
				else
					ai AIPIGSEEKENEMY
			}
		}
	
		ifaction APIGCOCK ifactioncount 2
			action APIGSHOOT
	}
	else
	ifspritepal 14 // Pig Sarge [36 tics]
	{
		ifcount 12 nullop
		else
		ifcount 11
		{
			ifcanshoottarget state pigsargeattack1
			else ai AIPIGSEEKENEMY
		}
	
		ifcount 18 nullop
		else
		ifcount 17
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
	
		ifcount 24 nullop
		else
		ifcount 23
		{
			ifcanshoottarget state pigsargeattack2
			else ai AIPIGSEEKENEMY
		}
	
		ifcount 30 nullop
		else
		ifcount 29
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
	
		ifcount 36
		{
			ifrnd 64
				resetcount
			else
			{
				ifpdistl 768
					ai AIPIGFLEEENEMY
				else
					ai AIPIGSEEKENEMY
			}
		}
	
		ifaction APIGCOCK ifactioncount 2
			action APIGSHOOT
	}
	else // Pigcop [72 tics]
	{
		ifcount 12 nullop
		else
		ifcount 11
		{
			ifcanshoottarget
			{
				state echeckquadtime
				state echeckvampiretime
	
				sound PIG_ATTACK
				state pigshotgun
			}
			else
				ai AIPIGSEEKENEMY
		}
	
		ifcount 25 nullop
		else
		ifcount 24
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
	
		ifcount 48 nullop
		else
		ifcount 47
		{
			ifcanshoottarget
			{
				state echeckquadtime
				state echeckvampiretime
	
				sound PIG_ATTACK
				state pigshotgun
			}
			else
				ai AIPIGSEEKENEMY
		}
	
		ifcount 60 nullop
		else
		ifcount 59
		{
			action APIGCOCK
			sound SHOTGUN_COCK
		}
	
		ifcount 72
		{
			ifrnd 64
				resetcount
			else
			{
				ifpdistl 768
					ai AIPIGFLEEENEMY
				else
					ai AIPIGSEEKENEMY
			}
		}
	
		ifaction APIGCOCK ifactioncount 2
			action APIGSHOOT
	}
	/*
	else
		ai AIPIGSEEKENEMY
	*/
ends

state pigfleeenemystate
	ifactioncount 8
		ai AIPIGSEEKENEMY
	else
		ifnotmoving
			ai AIPIGSEEKENEMY
ends

state pigdivestate
	ifaction APIGDIVESHOOT
	{
		ifcansee
		{
			ifspritepal 24 // Ramone [30 tics]
			{
				ifcount 12 nullop
				else
				ifcount 11
				{
					ifcanshoottarget
					{
						state echeckquadtime
						state echeckvampiretime
		
						sound PIG_ATTACK
						sound PIG_ATTACK
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						state pigshotgun
						state pigshotgun
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 18 nullop
				else
				ifcount 17
					sound SHOTGUN_COCK
				ifcount 24 nullop
				else
				ifcount 23
				{
					ifcanshoottarget
					{
						state echeckquadtime
						state echeckvampiretime
		
						sound PIG_ATTACK
						sound PIG_ATTACK
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						state pigshotgun
						state pigshotgun
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 30 nullop
				else
				ifcount 29
				{
					sound SHOTGUN_COCK
					ifgapzl 32
						ai AIPIGDIVING
					else
					{
						ifpdistl 4096
							ai AIPIGFLEEENEMY
						else
							ai AIPIGSEEKENEMY
					}
				}
			}
			else
			ifspritepal 21 // Pig Captain [30 tics]
			{
				ifcount 12 nullop
				else
				ifcount 11
				{
					ifcanshoottarget
					{
						state echeckquadtime
						state echeckvampiretime
		
						sound PIG_ATTACK
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 18 nullop
				else
				ifcount 17
					sound SHOTGUN_COCK
				ifcount 24 nullop
				else
				ifcount 23
				{
					ifcanshoottarget
					{
						state echeckquadtime
						state echeckvampiretime
		
						sound PIG_ATTACK
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 30 nullop
				else
				ifcount 29
				{
					sound SHOTGUN_COCK
					ifgapzl 32
						ai AIPIGDIVING
					else
					{
						ifpdistl 4096
							ai AIPIGFLEEENEMY
						else
							ai AIPIGSEEKENEMY
					}
				}
			}
			else
			ifspritepal 14 // Pig Sarge [30 tics]
			{
				ifcount 12 nullop
				else
				ifcount 11
				{
					ifcanshoottarget
					{
						state pigsargeattack1
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 18 nullop
				else
				ifcount 17
					sound SHOTGUN_COCK
				ifcount 24 nullop
				else
				ifcount 23
				{
					ifcanshoottarget
					{
						state pigsargeattack2
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 30 nullop
				else
				ifcount 29
				{
					sound SHOTGUN_COCK
					ifgapzl 32
						ai AIPIGDIVING
					else
					{
						ifpdistl 4096
							ai AIPIGFLEEENEMY
						else
							ai AIPIGSEEKENEMY
					}
				}
			}
			else // Pigcop [60 tics]
			{
				ifcount 12 nullop
				else
				ifcount 11
				{
					ifcanshoottarget
					{
						state echeckquadtime
						state echeckvampiretime
		
						sound PIG_ATTACK
						state pigshotgun
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 25 nullop
				else
				ifcount 24
					sound SHOTGUN_COCK
				ifcount 48 nullop
				else
				ifcount 47
				{
					ifcanshoottarget
					{
						state echeckquadtime
						state echeckvampiretime
		
						sound PIG_ATTACK
						state pigshotgun
					}
					else
						ai AIPIGSEEKENEMY
				}
				ifcount 60 nullop
				else
				ifcount 59
				{
					sound SHOTGUN_COCK
					ifgapzl 32
						ai AIPIGDIVING
					else
					{
						ifpdistl 4096
							ai AIPIGFLEEENEMY
						else
							ai AIPIGSEEKENEMY
					}
				}
			}
		}
		else
			ifgapzl 32
				ai AIPIGDIVING
			else
				ai AIPIGSEEKENEMY
	}
	else
	ifactioncount 2 ifp palive
	{
		resetcount
		action APIGDIVESHOOT
	}
ends

state checkpighitstate
	ifvare ACTORINVULNTIME 0 spawn BLOOD
	
	ifdead
	{
		setvar ACTORHP 0
		state random_wall_jibs
		ifwasweapon FREEZEBLAST
		{
			state freezeup
			state frosty
			spritepal 1
			move 0
			action APIGFROZEN
			strength 0
			break
		}
	
		ifspritepal 9 nullop else ifspritepal 10 nullop else ifspritepal 11 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
		ifrnd 32 { state drop_armor ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_armor ifrnd 192 state drop_armor ifrnd 192 state drop_armor } }
		else { state drop_shotgun ifvarand ACTORFLAGS 512 { ifrnd 192 state drop_shotgun ifrnd 192 state drop_shotgun ifrnd 192 state drop_shotgun } }
		state pigcopawards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
	
		sound PIG_DYING
		ifwasweapon GROWSPARK
		{
			state expanding
			cstat 0
			sound ACTOR_GROWING
			ai AIPIGGROW
			break
		}
		ifwasweapon RADIUSEXPLOSION state normalenemyexplode
		else ifwasweapon RPG state normalenemyexplode
		else ifwasweapon RPG_NOAIM state normalenemyexplode
		else ifwasweapon OCTANINE_RPG state normalenemyexplode
		else ifwasweapon GENERAL_RPG state normalenemyexplode
		else ifwasweapon COMMANDER_RPG state normalenemyexplode
		else ifwasweapon LEADER_RPG state normalenemyexplode
		else ifwasweapon BAALO_RPG state normalenemyexplode
		else ifwasweapon GATEMISSILE_MAIN state normalenemyexplode
		else ifwasweapon GATEMISSILE_SPLIT state normalenemyexplode
		else ifwasweapon STROKEMISSILE_MAIN state normalenemyexplode
		else ifwasweapon STROKEMISSILE_SPLIT state normalenemyexplode
		else ai AIPIGDYING
	
	}
	else
	{
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				sound PIG_PAIN
				state random_wall_jibs
			}
		}
	
		ifwasweapon SHRINKSPARK
		{
			ifvarg ACTORINVULNTIME 0 state deflectshrinker
			else
			{
				ifvare oldskoolmode 0
				{
					ifvarand ACTORFLAGS 512
					{
						ifspritepal 24 state deflectshrinker
						else 
						ifspritepal 14 
						{
							ifrnd 240 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIPIGSHRINK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 21 
						{
							ifrnd 216 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIPIGSHRINK setvar SHRUNK? 1 }
						}
						else 
						{
							ifrnd 204 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIPIGSHRINK setvar SHRUNK? 1 }
						}
					}
					else
					{
						ifspritepal 24 state deflectshrinker
						else 
						ifspritepal 14 
						{
							ifrnd 192 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIPIGSHRINK setvar SHRUNK? 1 }
						}
						else 
						ifspritepal 21 
						{
							ifrnd 96 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIPIGSHRINK setvar SHRUNK? 1 }
						}
						else 
						{
							ifrnd 48 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIPIGSHRINK setvar SHRUNK? 1 }
						}
					}
				}
				else
				{
					sound ACTOR_SHRINKING
					ai AIPIGSHRINK
					setvar SHRUNK? 1
				}
			}
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					ifwasweapon GROWSPARK sound EXPANDERHIT
			
					ifrnd 32 ai AIPIGHIT
					else ifrnd 85 ai AIPIGSHOOTENEMY
					else
					{
						ai AIPIGDIVING
						action APIGDIVESHOOT
					}
				}
				else
				{
					ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE      
				}
			}
			else
			{
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
	}
ends

state pigshrinkstate
	ifcount SHRUNKDONECOUNT
	{
		ai AIPIGSEEKENEMY
		setvar SHRUNK? 0
	}
	else
	ifcount SHRUNKCOUNT
	{
		ifspritepal 24 { sizeto 55 55 } else { sizeto 40 40 }
	}
	else
		state genericshrunkcode
ends

state pigdyingstate
	ifactioncount 5
	{
		// ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
		state rf
		iffloordistl 8 sound THUD
		action APIGDEAD
		move PIGSTOPPED
		break
	}
ends

actor PIGCOPDIVE PIGCOPSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkpigcoppalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ai AIPIGDIVING
	action APIGDIVESHOOT
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 setactor[THISACTOR].htextra 10 }
	cactor PIGCOP
enda
actor PIGCOPSTAYPUT PIGCOPSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkpigcoppalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ai AIPIGSEEKENEMY
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 setactor[THISACTOR].htextra 10 }
	cactor PIGCOP
enda

state getpigcopspeeds
	ifmove PIGWALKVELS setvar ACTORSPEED 72
	else ifmove PIGRUNVELS setvar ACTORSPEED 108
	else ifmove SHRUNKVELS setvar ACTORSPEED 32
	else ifmove PIGSTOPPED setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 21
		{
			mulvarvar ACTORSPEED 105
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 14
		{
			mulvarvar ACTORSPEED 110
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 24
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 100
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor PIGCOP PIGCOPSTRENGTH APIGSTAND
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare mainmenu 0 fall
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkpigcoppalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checksquished
	state pigcopseekitem
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifaction APIGSTAND ai AIPIGSEEKENEMY
	else ifaction APIGDEAD
	{
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 
			{
				sound SQUISHED
				state standard_jibs
				killit
			}
		}    
		ifrespawn ifcount RESPAWNACTORTIME
		{
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state checkpigcoppalette
			ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
			ai AIPIGSEEKENEMY
		}
		else
		{
			strength 0
			ifhitweapon ifwasweapon RADIUSEXPLOSION
			{
				sound SQUISHED
				state standard_jibs
				killit
			}
			break
		}
	}
	else ifaction APIGFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ai AIPIGSEEKENEMY
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifrnd 8 spawn WATERDRIP
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	
			state pigcopawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	
			lotsofglass 30
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			state frozenactor-breakcode
			killit
		}
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
		break
	}
	else
	ifai AIPIGDYING
		state pigdyingstate
	else
	ifai AIPIGHIT
	{
		ifactioncount 3
		ai AIPIGSEEKENEMY
	}
	else
	ifai AIPIGSHRINK
		state pigshrinkstate
	else
	{
		ifai AIPIGSEEKENEMY
			state pigseekenemystate
		else
		ifai AIPIGDODGE
			state pigseekenemystate
		else
		ifai AIPIGSHOOTENEMY
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536 state pigshootenemystate
				else ai AIPIGSEEKENEMY
			} 
			else
			{
				state pigshootenemystate
			}
		}
		else
		ifai AIPIGGROW
			state genericgrowcode
		else
		ifai AIPIGFLEEENEMY
			state pigfleeenemystate
		else
		ifai AIPIGDIVING
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536 state pigdivestate
				else ai AIPIGSEEKENEMY
			} 
			else
			{
				state pigdivestate
			}
		}
		else
		ifai AIPIGCHARGE
			state pigseekenemystate
		ifhitweapon
			state checkpighitstate
		ifrnd 1
		{
			ifrnd 32
				soundonce PIG_ROAM
			else
				ifrnd 64
					soundonce PIG_ROAM2
			else
				soundonce PIG_ROAM3
		}
	}
	
	ifai AIPIGSEEKENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AIPIGDODGE { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AIPIGCHARGE { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AIPIGFLEEENEMY { setvar WALKSNDAI 4 state stepsoundstuff_actor }
	else setvar WALKSNDAI 0
	
	state getpigcopspeeds
enda

state bosscrushdamage
	ifvare mainmenu 0
	{
		ifp palive
		{
			ifcansee
			{
				ifpdistl 1280
				{
					ifvarand CHEATBITFIELD? 32 nullop else
					{
						ifvarl INVULNTIME 1
						{
							ifspritepal 0
							{
								setactor[PLAYERID].htextra 51
								setactor[PLAYERID].htpicnum 3770
								setactor[PLAYERID].htowner THISACTOR
								palfrom 31 63
							}
							else
							ifspritepal 3
							{
								setactor[PLAYERID].htextra 51
								setactor[PLAYERID].htpicnum 3770
								setactor[PLAYERID].htowner THISACTOR
								palfrom 31 63
							}
							else
							ifspritepal 9
							{
								setactor[PLAYERID].htextra 51
								setactor[PLAYERID].htpicnum 3770
								setactor[PLAYERID].htowner THISACTOR
								palfrom 31 63
							}
							else
							ifspritepal 24 
							{
								setactor[PLAYERID].htextra 17
								setactor[PLAYERID].htpicnum 3770
								setactor[PLAYERID].htowner THISACTOR
								palfrom 15 63 
							}
							else
							{
								ifvarg SKILLLEVEL 6
								{
									setactor[PLAYERID].htextra 6
									setactor[PLAYERID].htpicnum 3770
									setactor[PLAYERID].htowner THISACTOR
									palfrom 5 63 
								}
							}
						}
					}
				}
			}
		}
	}
ends

state bossendgamestuff
	cstat 0 
	ifvare gameover? 0 ifvare mainmenu 0 addvar ACTORDEADTIMER 1
	ifvare ACTORDEADTIMER 56
	{
		// addlogvar ACTORFLAGS
		ifvarand ACTORFLAGS 2
		{
			setvar MISCARRAYID 80 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // DISPLAY-EPISODE
			setvarvar TEMP2 MISCARRAYID_AMOUNTTEMP
			ifvare TEMP2 1 startlevel 1 0
			else ifvare TEMP2 2 startlevel 2 0
			else ifvare TEMP2 3 startlevel 3 0
			else ifvare TEMP2 4 startlevel 4 0
			else ifvare TEMP2 5 startlevel 5 0
			else ifvare TEMP2 6 startlevel 6 0
			else ifvare TEMP2 7 startlevel 0 0
		}
		else endofgame 4
	}
ends

action ABOSS1LOCKED        0  1  5  1  12
action ABOSS1WALK        0  4  5  1  12
action ABOSS1FROZEN        30 1  5
action ABOSS1RUN         0  6  5  1  5
action ABOSS1SHOOT         30 2  5  1  4
action ABOSS1LOB         40 2  5  1  35
action ABOSS1DYING        50 5  1  1  35
action BOSS1FLINTCH       50 1  1  1  1
action ABOSS1DEAD         55

move PALBOSS1SHRUNKRUNVELS 32
move PALBOSS1RUNVELS 128
move ESSBOSS1RUNVELS 212
move BOSS1WALKVELS 208
move BOSS1RUNVELS 296
move BOSS1STOPPED

ai AIBOSS1SEEKENEMY ABOSS1WALK BOSS1WALKVELS seekplayer
ai AIBOSS1RUNENEMY ABOSS1RUN BOSS1RUNVELS faceplayer
ai AIBOSS1SHOOTENEMY ABOSS1SHOOT BOSS1STOPPED faceplayer
ai AIBOSS1LOBBED ABOSS1LOB BOSS1STOPPED faceplayer // faceplayersmart
ai AIBOSS1DYING ABOSS1DYING BOSS1STOPPED faceplayer
ai AIBOSS1PALSHRINK ABOSS1WALK PALBOSS1SHRUNKRUNVELS furthestdir

ai AIBOSS1GETITEM ABOSS1RUN BOSS1RUNVELS faceplayer

state essattack1
	ifrnd 96 eshoot FIRELASER else state fireshotspark1_angleeffect
	ifrnd 24 eshoot FREEZEBLAST else state fireshotspark1_angleeffect
	ifrnd 1 { ifrnd 192 eshoot RPG } else state fireshotspark1_angleeffect
ends

state setboss1health

	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		ifspritepal 9 { clipdist 164 sizeat 80 80 ai AIBOSS1RUNENEMY }
		else ifspritepal 10 { clipdist 82 sizeat 40 40 { ifrnd 128 ai AIBOSS1SHOOTENEMY else ai AIBOSS1RUNENEMY } }
		else ifspritepal 0 { clipdist 164 sizeat 80 80 ai AIBOSS1RUNENEMY }
		else ifspritepal 3 { clipdist 164 sizeat 80 80 ai AIBOSS1RUNENEMY }
		else ifspritepal 24 { clipdist 98 sizeat 48 48 { ifrnd 85 ai AIBOSS1SHOOTENEMY else ifrnd 128 ai AIBOSS1RUNENEMY else ai AIBOSS1SEEKENEMY } }
		else { clipdist 82 sizeat 40 40 { ifrnd 128 ai AIBOSS1SHOOTENEMY else ai AIBOSS1RUNENEMY } }
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS1RUNENEMY
			setvar ACTORHP BOSS1STRENGTH
			setvar ACTORMAXAIRTIME BOSS1AIRTIME
			setvar ACTORAIRTIME BOSS1AIRTIME
			setvar ACTORMAXHP BOSS1STRENGTH
		}
		else
		ifspritepal 10 // Palette 10 will be 'Old School' (No abnormal stat calculations)
		{
			clipdist 30
			sizeat 40 40
			ifrnd 128 ai AIBOSS1SHOOTENEMY else ai AIBOSS1RUNENEMY
			setvar ACTORHP BOSS1PALSTRENGTH
			setvar ACTORMAXAIRTIME BOSS1PALAIRTIME
			setvar ACTORAIRTIME BOSS1PALAIRTIME
			setvar ACTORMAXHP BOSS1PALSTRENGTH
		}
		else
		ifspritepal 0
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS1RUNENEMY
			setvar ACTORHP BOSS1STRENGTH
			setvar ACTORMAXAIRTIME BOSS1AIRTIME
			setvar ACTORAIRTIME BOSS1AIRTIME
			setvar ACTORATTACK BOSS1BASEATTACK
			setvar ACTORDEFENSE BOSS1BASEDEFENSE
			setvar ACTORMAXAP BOSS1STRENGTH
			setvar ACTORMAXFALLRESIST BOSS1FALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS1CRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS1SURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		ifspritepal 3
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS1RUNENEMY
			setvar ACTORHP BOSS1STRENGTH
			setvar ACTORMAXAIRTIME BOSS1AIRTIME
			setvar ACTORAIRTIME BOSS1AIRTIME
			setvar ACTORATTACK BOSS1BASEATTACK
			setvar ACTORDEFENSE BOSS1BASEDEFENSE
			setvar ACTORMAXAP BOSS1STRENGTH
			setvar ACTORMAXFALLRESIST BOSS1FALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS1CRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS1SURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		ifspritepal 24
		{
			clipdist 36
			sizeat 48 48
			ifrnd 85 ai AIBOSS1SHOOTENEMY else ifrnd 128 ai AIBOSS1RUNENEMY else ai AIBOSS1SEEKENEMY
			setvar ACTORHP BOSS1ESSSTRENGTH
			setvar ACTORMAXAIRTIME BOSS1ESSAIRTIME
			setvar ACTORAIRTIME BOSS1ESSAIRTIME
			setvar ACTORATTACK BOSS1ESSBASEATTACK
			setvar ACTORDEFENSE BOSS1ESSBASEDEFENSE
			setvar ACTORMAXAP BOSS1ESSSTRENGTH
			setvar ACTORMAXFALLRESIST BOSS1ESSFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS1ESSCRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS1ESSSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		{
			clipdist 30
			sizeat 40 40
			ifrnd 128 ai AIBOSS1SHOOTENEMY else ai AIBOSS1RUNENEMY
			setvar ACTORHP BOSS1PALSTRENGTH
			setvar ACTORMAXAIRTIME BOSS1PALAIRTIME
			setvar ACTORAIRTIME BOSS1PALAIRTIME
			setvar ACTORATTACK BOSS1PALBASEATTACK
			setvar ACTORDEFENSE BOSS1PALBASEDEFENSE
			setvar ACTORMAXAP BOSS1PALSTRENGTH
			setvar ACTORMAXFALLRESIST BOSS1PALFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS1PALCRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS1PALSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state boss1seekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AIBOSS1GETITEM break else ai AIBOSS1GETITEM
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
	
ends

state boss1palshrunkstate
	ifcount SHRUNKDONECOUNT
	{
		cstat 257
		ai AIBOSS1SEEKENEMY // AILIZSEEKENEMY
		setvar SHRUNK? 0
	}
	else
	ifcount SHRUNKCOUNT
	{
		ifspritepal 24 sizeto 48 48
		else ifspritepal 0 sizeto 80 80
		else ifspritepal 3 sizeto 80 80
		else ifspritepal 9 sizeto 80 80
		else sizeto 40 40
	}
	else
		state genericshrunkcode
ends

state checkboss1seekstate
	ai AIBOSS1SEEKENEMY
	ifspritepal 0 nullop
	else ifspritepal 3 nullop
	else ifspritepal 9 nullop 
	else ifspritepal 24 { move ESSBOSS1RUNVELS seekplayer }
	else { move PALBOSS1RUNVELS seekplayer }
ends

state boss1getitemstate
	ifvare ITEMTARGET -1 ai AIBOSS1SEEKENEMY
ends

state boss1runenemystate
	ifpdistl 2048
	{
		ifp palive ai AIBOSS1SHOOTENEMY
		break
	}
	else ifcansee
	{
		ifactioncount 6
		{
			ifcanshoottarget
			{
				resetactioncount
				ifvare footstepsndtoggle 0 sound BOS1_WALK 
			}
			else ai AIBOSS1SEEKENEMY
		}
	}
	else ai AIBOSS1SEEKENEMY

	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS1STOPPED
		action ABOSS1LOCKED
	}
	*/
ends

state boss1seekenemystate
	ifrnd 2 soundonce BOS1_ROAM
	else ifactioncount 6
	{
		resetactioncount
		ifvare footstepsndtoggle 0 sound BOS1_WALK
	}
	
	ifp palive
	{
		ifvarand ACTORSTATUS? 16
		{
			ifpdistl 2048
			{
				ai AIBOSS1SHOOTENEMY
				break
			}
		}
		else
		{
			ifpdistl 2548 
			{
				ai AIBOSS1SHOOTENEMY
				break
			}
		}
	}
	
	ifcansee ifcount 32
	{
		ifrnd 32
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 2048
				{
					ifp palive ifcanshoottarget
						ai AIBOSS1SHOOTENEMY
				}
			}
			else
			{
				ifp palive ifcanshoottarget
					ai AIBOSS1SHOOTENEMY
			}
		}
		else
		ifpdistg 2548 ifrnd 192 ifcanshoottarget
		{
			ifvarand ACTORSTATUS? 16
			{
				ai AIBOSS1RUNENEMY
	    
				ifspritepal 0 nullop
				else ifspritepal 24 { move ESSBOSS1RUNVELS seekplayer }
				else { move PALBOSS1RUNVELS seekplayer }
			}
			else
			{
				ifrnd 64
				{
				ai AIBOSS1RUNENEMY
	    
				ifspritepal 0 nullop
				else ifspritepal 24 { move ESSBOSS1RUNVELS seekplayer }
				else { move PALBOSS1RUNVELS seekplayer }
				}
				else ai AIBOSS1LOBBED
			}
		}
	}
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS1STOPPED
		action ABOSS1LOCKED
	}
	*/
ends

state boss1dyingstate
	ifaction ABOSS1DEAD
	{
		state bossendgamestuff
		ifspritepal 0
			break
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0
			{
				state boss_jibs
				state normalenemyexplode
			}
		}
		ifrespawn
			ifcount RESPAWNACTORTIME
		{
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state setboss1health
			ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
			state checkboss1seekstate
		}
		else
		{
			strength 0
			ifhitweapon
			{
				ifwasweapon RADIUSEXPLOSION
				{
					state boss_jibs
					state normalenemyexplode
				}
				ifwasweapon INVULNICON
				{
					state boss_jibs
					state normalenemyexplode
				}
			}
			break
		}
	}
	ifactioncount 5
	{
		iffloordistl 8
			sound THUD
		action ABOSS1DEAD
	}
ends

state boss1lobbedstate
	ifvarand ACTORSTATUS? 16 state checkboss1seekstate
	else
	{
		ifcansee
		{
			ifspritepal 24
			{
				ifactioncount 1 // ESS shoots at double speed
				{
					resetactioncount
					sound BOS1_ATTACK2
					state echeckquadtime
					state echeckvampiretime
		
					shoot MORTER
					ifrnd 16 eshoot RPG
					ifrnd 16 shoot SHRINKER
				}
				else ifcount 64 ifrnd 16 state checkboss1seekstate
			}
			else
			{
				ifactioncount 2
				{
					resetactioncount
					sound BOS1_ATTACK2
					state echeckquadtime
					state echeckvampiretime
		
					shoot MORTER
				}
				else ifcount 64 ifrnd 16 state checkboss1seekstate
			}
		}
		else state checkboss1seekstate
	}
ends

state boss1shootenemy
	ifvarand ACTORSTATUS? 16
	{
		ifpdistl 2048
		{
			ifcount 72 state checkboss1seekstate
			else ifspritepal 24 ifaction ABOSS1SHOOT ifactioncount 1 // ESS shoots at double speed
			{
				state echeckquadtime
				state echeckvampiretime
		
				sound BOS1_ATTACK1
				state essattack1
				state essattack1
				resetactioncount
			}
			else ifaction ABOSS1SHOOT ifactioncount 2
			{
				state echeckquadtime
				state echeckvampiretime
		
				sound BOS1_ATTACK1
				state fireshotgun_angleeffect
				resetactioncount
			}
		}
		else state checkboss1seekstate
	}
	else
	{
		ifcount 72 state checkboss1seekstate
		else ifspritepal 24 ifaction ABOSS1SHOOT ifactioncount 1 // ESS shoots at double speed
		{
			state echeckquadtime
			state echeckvampiretime
	
			sound BOS1_ATTACK1
			state essattack1
			state essattack1
			resetactioncount
		}
		else ifaction ABOSS1SHOOT ifactioncount 2
		{
			state echeckquadtime
			state echeckvampiretime
	
			sound BOS1_ATTACK1
			state fireshotgun_angleeffect
			resetactioncount
		}
	}
ends

state boss1death-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound DUKE_TALKTOBOSSFALL
		redefinequote 340 ^17Duke: Die you son of a bitch!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8
	{
		globalsound LISA_KILLBOSS1 
		redefinequote 340 ^7Lisa: I guess you didn't know you were facing the terrifying 'Sunset Lisa'!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15
	{
		globalsound MAKEN_KILLBOSS1 
		redefinequote 340 ^10Maken: In the end, you were always worthless scum!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state checkboss1hitstate
	ifvarl ACTORINVULNTIME 1
	{
		ifvarg ACTORLASTDAMAGE 0
		{  
			ifrnd 2 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
		}
	}
	ifdead
	{
		setvar ACTORHP 0
		ifspritepal 0 state boss1death-chartaunts
		else ifspritepal 3 state boss1death-chartaunts
		else ifspritepal 9 state boss1death-chartaunts
		else ifspritepal 24 state boss1death-chartaunts
		else
		{
			ifrnd 64 state boss1death-chartaunts
	
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ABOSS1FROZEN
				strength 0
				break
			}
		}
	
		state boss1awards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
		ifspritepal 9 nullop else ifspritepal 10 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
	
		ifwasweapon INVULNICON
		{
			ifspritepal 0
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 3
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 9
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 24
			{
				sound BOS1_DYING
				state boss_jibs
				state normalenemyexplode
			}
			else
			{
				sound BOS1_DYING
				state boss_jibs
				state normalenemyexplode
			}
		}
		else
		ifwasweapon GATEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 3
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 9
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 224
				{
					sound BOS1_DYING
					ai AIBOSS1DYING
				}
				else
				{
					sound BOS1_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 56
				{
					sound BOS1_DYING
					ai AIBOSS1DYING
				}
				else
				{
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		ifwasweapon STROKEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 3
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 9
			{
				sound BOS1_DYING
				ai AIBOSS1DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 56
				{
					sound BOS1_DYING
					ai AIBOSS1DYING
				}
				else
				{
					sound BOS1_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 14
				{
					sound BOS1_DYING
					ai AIBOSS1DYING
				}
				else
				{
					sound BOS1_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		{
			sound BOS1_DYING
			ai AIBOSS1DYING
		}
	}
	else
	{
		ifwasweapon SHRINKSPARK
		{
			ifvarg ACTORINVULNTIME 0 state deflectshrinker
			else
			{
				ifvare oldskoolmode 0
				{
					ifvarand ACTORFLAGS 512
					{
						ifspritepal 24 state deflectshrinker
						else ifspritepal 0 state deflectshrinker
						else ifspritepal 3 state deflectshrinker
						else
						{
							ifrnd 240 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIBOSS1PALSHRINK setvar SHRUNK? 1 cstat 0 break }
						}
					}
					else
					{
						ifspritepal 24 state deflectshrinker
						else ifspritepal 0 state deflectshrinker
						else ifspritepal 3 state deflectshrinker
						else
						{
							ifrnd 192 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIBOSS1PALSHRINK setvar SHRUNK? 1 cstat 0 break }
						}
					}
				}
				else
				{
					sound ACTOR_SHRINKING
					ai AIBOSS1PALSHRINK
					setvar SHRUNK? 1
					cstat 0
					break
				}
			}
		}
	
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				ifspritepal 24 
				{ 
					ifrnd 144
					{
						ifrnd 32
						{
							action BOSS1FLINTCH
							move 0
						}
						ifrnd 24 
						{
							debris SCRAP1 1 
							guts JIBS6 1 
						}
						soundonce BOS1_PAIN
					}
				} 
				else
				{ 
					ifrnd 32
					{
						action BOSS1FLINTCH
						move 0
					}
					ifrnd 96 
					{
						debris SCRAP1 1
						guts JIBS6 1 
					}
					ifrnd 24
					{
						debris SCRAP1 1 
						guts JIBS6 1 
					}
					soundonce BOS1_PAIN
				} 
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	}
ends

state boss1-chartaunts
	ifvare CHARACTERSELECTED? 1 
	{
		globalsound DUKETALKTOBOSS1
		redefinequote 340 ^17Duke: Eww... Who's your plastic surgeon!?
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 5 
	{
		globalsound WANG_TAUNTBOSS1
		redefinequote 340 ^15Higa: Hey!! You look like you need ass kicked!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8 
	{
		globalsound LISA_TAUNTBOSS1
		redefinequote 340 ^7Lisa: Ha! Do you actually know how to use that gun of yours?!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15
	{
		globalsound MAKEN_TAUNTBOSS1 
		redefinequote 340 ^10Maken: Sooo... you wanna challenge me now...? Burn alien scumbag!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state boss1code
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifaction ABOSS1LOCKED ifvare mainmenu 0 ai AIBOSS1SEEKENEMY
	
	ifaction ABOSS1FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ai AIBOSS1SEEKENEMY
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	
			state boss1awards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
			lotsofglass 30
	
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			state frozenactor-breakcode
			killit
		}
		ifp pfacing ifpdistl FROZENQUICKKICKDIST pkick
		break
	}
	
	ifai 0
	{
		ifspritepal 9 state boss1-chartaunts
		else ifspritepal 0 state boss1-chartaunts
		else ifspritepal 3 state boss1-chartaunts
	
		state setboss1health
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	}
	else ifaction BOSS1FLINTCH
	{
		ifactioncount 3
		ai AIBOSS1SHOOTENEMY
	}
	else ifai AIBOSS1SEEKENEMY state boss1seekenemystate
	else ifai AIBOSS1RUNENEMY state boss1runenemystate
	else ifai AIBOSS1SHOOTENEMY state boss1shootenemy
	else ifai AIBOSS1LOBBED state boss1lobbedstate
	else ifai AIBOSS1PALSHRINK state boss1palshrunkstate
	else ifai AIBOSS1GETITEM state boss1getitemstate
	
	ifai AIBOSS1DYING state boss1dyingstate
	else
	{
		ifhitweapon state checkboss1hitstate
		else 
		{
			ifvarn SHRUNK? 1 state bosscrushdamage
		}
	}
	
	ifai AIBOSS1RUNENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AIBOSS1SEEKENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else setvar WALKSNDAI 0
ends

useractor enemy BOSS1LOB BOSS1STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss1health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ai AIBOSS1LOBBED
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS1
enda

useractor enemy BOSS1SHOOT BOSS1STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss1health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ai AIBOSS1SHOOTENEMY
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS1
enda

actor BOSS1STAYPUT BOSS1STRENGTH  
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss1health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS1 
enda

state getboss1speeds
	ifmove PALBOSS1SHRUNKRUNVELS setvar ACTORSPEED 32
	else ifmove PALBOSS1RUNVELS setvar ACTORSPEED 128
	else ifmove ESSBOSS1RUNVELS setvar ACTORSPEED 212
	else ifmove BOSS1WALKVELS setvar ACTORSPEED 208
	else ifmove BOSS1RUNVELS setvar ACTORSPEED 296
	else ifmove BOSS1STOPPED setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 10
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 9
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 3
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 0
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 24
		{
			mulvarvar ACTORSPEED 105
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor BOSS1 BOSS1STRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare mainmenu 0 fall
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state boss1code 
	state boss1seekitem
	
	state getboss1speeds
enda


action ABOSS2LOCKED      0  1  5  1  30
action ABOSS2WALK        0  4  5  1  30
action ABOSS2FROZEN        0  1  5
action ABOSS2RUN         0  4  5  1  15
action ABOSS2SHOOT         20 2  5  1  15
action ABOSS2LOB         30 2  5  1  105
action ABOSS2DYING        40 8  1  1  35
action BOSS2FLINTCH       40 1  1  1  1
action ABOSS2DEAD         48

move PALBOSS2SHRUNKRUNVELS 32
move PALBOSS2RUNVELS 128
move ESSBOSS2RUNVELS 212
move BOSS2WALKVELS 192
move BOSS2RUNVELS 256
move BOSS2STOPPED

ai AIBOSS2SEEKENEMY ABOSS2WALK BOSS2WALKVELS seekplayer
ai AIBOSS2RUNENEMY ABOSS2RUN BOSS2RUNVELS faceplayer
ai AIBOSS2SHOOTENEMY ABOSS2SHOOT BOSS2STOPPED faceplayer
ai AIBOSS2LOBBED ABOSS2LOB BOSS2STOPPED faceplayer
ai AIBOSS2DYING ABOSS2DYING BOSS2STOPPED faceplayer
ai AIBOSS2PALSHRINK ABOSS2WALK PALBOSS2SHRUNKRUNVELS furthestdir

ai AIBOSS2GETITEM ABOSS2RUN BOSS2RUNVELS faceplayer

state boss2voidattack1
	eshoot RPG 
	shoot FIRELASER
	ifrnd 224 shoot FIRELASER
	ifrnd 192 shoot FIRELASER 
	ifrnd 160 shoot FIRELASER
	ifrnd 128 shoot FIRELASER
ends

state setboss2health

	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		ifspritepal 10 { clipdist 82 sizeat 40 40 { ifrnd 128 { ai AIBOSS2SHOOTENEMY } else { ai AIBOSS2RUNENEMY } } }
		else ifspritepal 0 { clipdist 164 sizeat 80 80 ai AIBOSS2RUNENEMY }
		else ifspritepal 3 { clipdist 164 sizeat 80 80 ai AIBOSS2RUNENEMY }
		else ifspritepal 9 { clipdist 164 sizeat 80 80 ai AIBOSS2RUNENEMY }
		else ifspritepal 24 { clipdist 98 sizeat 48 48 { ifrnd 85 { ai AIBOSS2SHOOTENEMY } else ifrnd 128 { ai AIBOSS2RUNENEMY } else { ai AIBOSS2SEEKENEMY } } }
		else { clipdist 82 sizeat 40 40 { ifrnd 128 ai AIBOSS2SHOOTENEMY else ai AIBOSS2RUNENEMY } }
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 10 // Palette 10 will be 'Old School' (No abnormal stat calculations)
		{
			clipdist 30
			sizeat 40 40
			ifrnd 128 ai AIBOSS2SHOOTENEMY else ai AIBOSS2RUNENEMY
			setvar ACTORHP BOSS2PALSTRENGTH
			setvar ACTORMAXAIRTIME BOSS2PALAIRTIME
			setvar ACTORAIRTIME BOSS2PALAIRTIME
			setvar ACTORMAXHP BOSS2PALSTRENGTH
		}
		else
		ifspritepal 0
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS2RUNENEMY
			setvar ACTORHP BOSS2STRENGTH
			setvar ACTORMAXAIRTIME BOSS2AIRTIME
			setvar ACTORAIRTIME BOSS2AIRTIME
			setvar ACTORATTACK BOSS2BASEATTACK
			setvar ACTORDEFENSE BOSS2BASEDEFENSE
			setvar ACTORMAXAP BOSS2STRENGTH
			setvar ACTORMAXFALLRESIST BOSS2FALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS2CRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS2SURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		ifspritepal 3
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS2RUNENEMY
			setvar ACTORHP BOSS2STRENGTH
			setvar ACTORMAXAIRTIME BOSS2AIRTIME
			setvar ACTORAIRTIME BOSS2AIRTIME
			setvar ACTORATTACK BOSS2BASEATTACK
			setvar ACTORDEFENSE BOSS2BASEDEFENSE
			setvar ACTORMAXAP BOSS2STRENGTH
			setvar ACTORMAXFALLRESIST BOSS2FALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS2CRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS2SURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		ifspritepal 9
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS2RUNENEMY
			setvar ACTORHP BOSS2STRENGTH
			setvar ACTORMAXAIRTIME BOSS2AIRTIME
			setvar ACTORAIRTIME BOSS2AIRTIME
			setvar ACTORMAXHP BOSS2STRENGTH
			setvar ACTORATTACK BOSS2PROLOUGEBASEATTACK
			setvar ACTORDEFENSE BOSS2PROLOUGEBASEDEFENSE
		}
		else
		ifspritepal 24
		{
			clipdist 36
			sizeat 48 48
			ifrnd 85 ai AIBOSS2SHOOTENEMY else ifrnd 128 ai AIBOSS2RUNENEMY else ai AIBOSS2SEEKENEMY
			setvar ACTORHP BOSS2MEGATONSTRENGTH
			setvar ACTORMAXAIRTIME BOSS2MEGATONAIRTIME
			setvar ACTORAIRTIME BOSS2MEGATONAIRTIME
			setvar ACTORATTACK BOSS2MEGATONBASEATTACK
			setvar ACTORDEFENSE BOSS2MEGATONBASEDEFENSE
			setvar ACTORMAXAP BOSS2MEGATONSTRENGTH
			setvar ACTORMAXFALLRESIST BOSS2MEGATONFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS2MEGACRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS2MEGASURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		{
			clipdist 30
			sizeat 40 40
			ifrnd 128 ai AIBOSS2SHOOTENEMY else ai AIBOSS2RUNENEMY
			setvar ACTORHP BOSS2PALSTRENGTH
			setvar ACTORMAXAIRTIME BOSS2PALAIRTIME
			setvar ACTORAIRTIME BOSS2PALAIRTIME
			setvar ACTORATTACK BOSS2PALBASEATTACK
			setvar ACTORDEFENSE BOSS2PALBASEDEFENSE
			setvar ACTORMAXAP BOSS2PALSTRENGTH
			setvar ACTORMAXFALLRESIST BOSS2PALFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS2PALCRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS2PALSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state boss2seekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop 
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AIBOSS2GETITEM break else ai AIBOSS2GETITEM
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state boss2palshrunkstate
	ifcount SHRUNKDONECOUNT
	{
		cstat 257
		ai AIBOSS2SEEKENEMY
		setvar SHRUNK? 0
	}
	else
	ifcount SHRUNKCOUNT
	{
		ifspritepal 24 sizeto 48 48
		else ifspritepal 0 sizeto 80 80
		else ifspritepal 3 sizeto 80 80
		else ifspritepal 9 sizeto 80 80
		else sizeto 40 40
	}
	else
		state genericshrunkcode
ends

state checkboss2seekstate
	ai AIBOSS2SEEKENEMY
	ifspritepal 0
	{
		move BOSS2RUNVELS seekplayer
	}
	else
	ifspritepal 3
	{
		move BOSS2RUNVELS seekplayer
	}
	else
	ifspritepal 9
	{
		move BOSS2RUNVELS seekplayer
	}
	else
	ifspritepal 24
	{
		move ESSBOSS2RUNVELS seekplayer
	}
	else // a fake way of doing a ifspritepal NOT.
	{
		move PALBOSS2RUNVELS seekplayer
	}
ends

state boss2getitemstate
	ifvare ITEMTARGET -1 state checkboss2seekstate
ends

state boss2runenemystate
	ifcansee
	{
		ifactioncount 3
		{
			ifcanshoottarget
			{
				resetactioncount
				ifvare footstepsndtoggle 0 sound BOS1_WALK
			}
			else ai AIBOSS2SEEKENEMY
		}
		ifcount 48 ifrnd 2
		{
			ifp palive
			{
				ifvarand ACTORSTATUS? 16
				{
					ifpdistl 2048
					{
						sound BOS2_ATTACK
						ai AIBOSS2SHOOTENEMY
					}
				}
				else
				{
					sound BOS2_ATTACK
					ai AIBOSS2SHOOTENEMY
				}
			}
			break
		}
	}
	else ai AIBOSS2SEEKENEMY
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS2STOPPED
		action ABOSS2LOCKED
	}
	*/
ends

state boss2seekenemystate
	ifrnd 2 soundonce BOS2_ROAM
	else ifactioncount 3
	{
		resetactioncount
		ifvare footstepsndtoggle 0 sound BOS1_WALK
	}
	
	ifcansee ifcount 32 ifp palive ifrnd 48 ifcanshoottarget
	{
		ifrnd 64 ifpdistg 4096
		{
			ai AIBOSS2RUNENEMY
			ifspritepal 0 nullop
			else
				move PALBOSS2RUNVELS seekplayer
			break
		}
	
		ifvarand ACTORSTATUS? 16
		{
			ifpdistl 1024
			{
				ifrnd 128
				{
					sound BOS2_ATTACK
					ai AIBOSS2LOBBED
				}
			}
			else ifpdistl 2048
			{
				sound BOS2_ATTACK
				ai AIBOSS2SHOOTENEMY
			}
		}
		else
		{
			ifpdistl 10240
			{
				ifrnd 128
				{
					sound BOS2_ATTACK
					ai AIBOSS2LOBBED
				}
			}
			else
			{
				sound BOS2_ATTACK
				ai AIBOSS2SHOOTENEMY
			}
		}
	}
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS2STOPPED
		action ABOSS2LOCKED
	}
	*/
ends

state boss2dyingstate
	ifaction ABOSS2DEAD
	{
		state bossendgamestuff
		ifspritepal 0
			break
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 
			{
				state boss_jibs
				state normalenemyexplode
			}
		}    
		ifrespawn ifcount RESPAWNACTORTIME
		{
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			soundonce BOS2_RECOG
			state setboss2health
			ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
			state checkboss2seekstate
		}
		else
		{
			strength 0
			ifhitweapon
			{
				ifwasweapon RADIUSEXPLOSION
				{
					state boss_jibs
					state normalenemyexplode
				}
				ifwasweapon INVULNICON
				{
					state boss_jibs
					state normalenemyexplode
				}
			}
			break
		}
	}
	ifactioncount 8
	{
		iffloordistl 8
			sound THUD
		action ABOSS2DEAD
	}
ends

state boss2lobbedstate
	ifvarand ACTORSTATUS? 16
	{
		ifpdistl 3584
		{
			ifcansee
			{
				ifactioncount 2 resetactioncount
				else ifactioncount 1
				{
					ifspritepal 24
					{
						state echeckquadtime 
						state echeckvampiretime 
			
						ifrnd 240 { state firecoolexplosion1_angleeffect state fireshotgun_angleeffect state firechaingun_angleeffect state fireshotspark1_angleeffect }
						ifrnd 192 { state firecoolexplosion1_angleeffect state fireshotgun_angleeffect state firechaingun_angleeffect state firegrowspark_angleeffect }
						ifrnd 144 { state firecoolexplosion1_angleeffect state fireshotgun_angleeffect state fireshotspark1_angleeffect state firegrowspark_angleeffect }
						ifrnd 96 { state firecoolexplosion1_angleeffect state firechaingun_angleeffect state fireshotspark1_angleeffect state firegrowspark_angleeffect }
						ifrnd 48 { state fireshotgun_angleeffect state firechaingun_angleeffect state fireshotspark1_angleeffect state firegrowspark_angleeffect }
					}
					else
					{
						ifrnd 128 state firecoolexplosion1_angleeffect 
					}
					ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3
					ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
				}
				else ifcount 64 ifrnd 16 state checkboss2seekstate
			}
			else state checkboss2seekstate
		}
		else state checkboss2seekstate
	}
	else
	{
		ifcansee
		{
			ifactioncount 2 resetactioncount
			else ifactioncount 1
			{
				ifspritepal 24
				{
					state echeckquadtime
					state echeckvampiretime
			
					ifrnd 240 { state firecoolexplosion1_angleeffect state fireshotgun_angleeffect state firechaingun_angleeffect state fireshotspark1_angleeffect }
					ifrnd 192 { state firecoolexplosion1_angleeffect state fireshotgun_angleeffect state firechaingun_angleeffect state firegrowspark_angleeffect }
					ifrnd 144 { state firecoolexplosion1_angleeffect state fireshotgun_angleeffect state fireshotspark1_angleeffect state firegrowspark_angleeffect }
					ifrnd 96 { state firecoolexplosion1_angleeffect state firechaingun_angleeffect state fireshotspark1_angleeffect state firegrowspark_angleeffect }
					ifrnd 48 { state fireshotgun_angleeffect state firechaingun_angleeffect state fireshotspark1_angleeffect state firegrowspark_angleeffect }
				}
				else
				{
					ifrnd 128 state firecoolexplosion1_angleeffect 
				}
				ifvarg ACTORQUADTIME 0 sound QUADDAMAGE3
				ifvarg ACTORVAMPIRETIME 0 sound SHOOT_VAMPIREITEM
			}
			else ifcount 64 ifrnd 16 state checkboss2seekstate
		}
		else state checkboss2seekstate
	}
ends

state boss2shootenemy
	ifvarand ACTORSTATUS? 16
	{
		ifpdistl 2048
		{
			ifcount 72 state checkboss2seekstate
			else
			{ 
				ifspritepal 24 ifaction ABOSS2SHOOT ifactioncount 1 // Void-Annhilator Shoots at Double-Speed
				{
					state echeckquadtime
					state echeckvampiretime
	
					state boss2voidattack1   
					ifrnd 64 state boss2voidattack1
					ifrnd 16 state boss2voidattack1
					ifrnd 4 state boss2voidattack1
					ifrnd 1 state boss2voidattack1
					resetactioncount
				}
				else ifaction ABOSS2SHOOT ifactioncount 2
				{
					state echeckquadtime
					state echeckvampiretime
	
					ifspritepal 0 state threerockets
					else ifspritepal 3 state threerockets
					else ifspritepal 9 state threerockets
					else eshoot RPG  
	
					resetactioncount
				}
			}
		}
		else state checkboss2seekstate
	}
	else
	{
		ifcount 72 state checkboss2seekstate
		else
		{ 
			ifspritepal 24 ifaction ABOSS2SHOOT ifactioncount 1 // Void-Annhilator Shoots at Double-Speed
			{
				state echeckquadtime
				state echeckvampiretime
	
				state boss2voidattack1   
				ifrnd 64 state boss2voidattack1
				ifrnd 16 state boss2voidattack1
				ifrnd 4 state boss2voidattack1
				ifrnd 1 state boss2voidattack1
				resetactioncount
			}
			else ifaction ABOSS2SHOOT ifactioncount 2
			{
				state echeckquadtime
				state echeckvampiretime
	
				ifspritepal 0 state threerockets
				else ifspritepal 3 state threerockets
				else ifspritepal 9 state threerockets
				else eshoot RPG 
	
				resetactioncount
			}
		}
	}
ends

state boss2death-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound DUKE_TALKTOBOSSFALL
		redefinequote 340 ^17Duke: Die you son of a bitch!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8
	{
		globalsound LISA_KILLBOSS2 
		redefinequote 340 ^7Lisa: I take it back!! You weren't a terrible fighter, for an alien scumbag!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15
	{
		globalsound MAKEN_KILLBOSS2 
		redefinequote 340 ^10Maken: Oh how the mighty, one-eyed freak has fallen!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state checkboss2hitstate
	ifvarl ACTORINVULNTIME 1
	{
		ifvarg ACTORLASTDAMAGE 0
		{  
			ifrnd 2 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
		}
	}
	ifdead
	{
		setvar ACTORHP 0
		ifspritepal 0 state boss2death-chartaunts
		else ifspritepal 3 state boss2death-chartaunts
		else ifspritepal 9 state boss2death-chartaunts
		else ifspritepal 24 state boss2death-chartaunts
		else
		{
			ifrnd 64 state boss2death-chartaunts
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ABOSS2FROZEN
				strength 0
				break
			}
		}
	 
		ifspritepal 9 nullop else ifspritepal 10 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
		state boss2awards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
	
		ifwasweapon INVULNICON
		{
			ifspritepal 0
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 3
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 9
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 24
			{
				sound BOS2_DYING
				state boss_jibs
				state normalenemyexplode
			}
			else
			{
				sound BOS2_DYING
				state boss_jibs
				state normalenemyexplode
			}
		}
		else
		ifwasweapon GATEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 3
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 9
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 224
				{
					sound BOS2_DYING
					ai AIBOSS2DYING
				}
				else
				{
					sound BOS2_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 56
				{
					sound BOS2_DYING
					ai AIBOSS2DYING
				}
				else
				{
					sound BOS2_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		ifwasweapon STROKEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 3
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 9
			{
				sound BOS2_DYING
				ai AIBOSS2DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 56
				{
					sound BOS2_DYING
					ai AIBOSS2DYING
				}
				else
				{
					sound BOS2_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 14
				{
					sound BOS2_DYING
					ai AIBOSS2DYING
				}
				else
				{
					sound BOS2_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		{
			sound BOS2_DYING
			ai AIBOSS2DYING
		}
	}
	else
	{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					ifspritepal 24
					{
						ifrnd 144
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistl 2048
								{
									ifrnd 32
									{
										action BOSS2FLINTCH
										move 0
									}
									else
									{
										sound BOS2_ATTACK
										ai AIBOSS2SHOOTENEMY
									}
								}
								else
								{
									action BOSS2FLINTCH
									move 0
								}
							}
							else
							{
								ifrnd 32
								{
									action BOSS2FLINTCH
									move 0
								}
								else
								{
									sound BOS2_ATTACK
									ai AIBOSS2SHOOTENEMY
								}
							}
							soundonce BOS2_PAIN
							debris SCRAP1 1
							guts JIBS6 1
						}
					}
					else
					{
						ifvarand ACTORSTATUS? 16
						{
							ifpdistl 2048
							{
								ifrnd 32
								{
									action BOSS2FLINTCH
									move 0
								}
								else
								{
									sound BOS2_ATTACK
									ai AIBOSS2SHOOTENEMY
								}
							}
							else
							{
								action BOSS2FLINTCH
								move 0
							}
						}
						else
						{
							ifrnd 32
							{
								action BOSS2FLINTCH
								move 0
							}
							else
							{
								sound BOS2_ATTACK
								ai AIBOSS2SHOOTENEMY
							}
						}
						soundonce BOS2_PAIN
						debris SCRAP1 1
						guts JIBS6 1
					}
				}
				else
				{
					ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE      
				}
			}
			else
			{
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
	
			ifwasweapon SHRINKSPARK
			{
				ifvarg ACTORINVULNTIME 0 state deflectshrinker
				else
				{
					ifvare oldskoolmode 0
					{
						ifvarand ACTORFLAGS 512
						{
							ifspritepal 24 state deflectshrinker
							else ifspritepal 0 state deflectshrinker
							else ifspritepal 3 state deflectshrinker
							else ifspritepal 9 state deflectshrinker
							else
							{
								ifrnd 240 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AIBOSS2PALSHRINK setvar SHRUNK? 1 cstat 0 break }
							}
						}
						else
						{
							ifspritepal 24 state deflectshrinker
							else ifspritepal 0 state deflectshrinker
							else ifspritepal 3 state deflectshrinker
							else ifspritepal 9 state deflectshrinker
							else
							{
								ifrnd 192 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AIBOSS2PALSHRINK setvar SHRUNK? 1 cstat 0 break }
							}
						}
					}
					else
					{
						sound ACTOR_SHRINKING
						ai AIBOSS2PALSHRINK
						setvar SHRUNK? 1
						cstat 0
						break
					}
				}
			}
	}
ends

state boss2-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound DUKETALKTOBOSS2
		redefinequote 340 ^17Duke: It's down to you and me... you one-eyed freak!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 5
	{
		globalsound WANG_TAUNTBOSS1 
		redefinequote 340 ^15Higa: Hey!! You look like you need ass kicked!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8 
	{
		globalsound LISA_TAUNTBOSS2 
		redefinequote 340 ^7Lisa: I doubt your bite is that much worse than your bark!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15 
	{
		globalsound MAKEN_TAUNTBOSS2 
		redefinequote 340 ^10Maken: You think you can destroy me!?!? BRING IT ON, CYCLOPS!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state boss2code
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifaction ABOSS2LOCKED ifvare mainmenu 0 ai AIBOSS2SEEKENEMY
	
	ifaction ABOSS2FROZEN
	{
			state actorcheck_frozentimer
			ifvarl FROZENTIMER 1 // ifcount THAWTIME
			{
					ai AIBOSS2SEEKENEMY
					state unfreeze
			}
			else
			{
				ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
				{
					ifactioncount 26
					{
							spawn WATERDRIP
							resetactioncount
					}
				}
			}
	
			ifhitweapon
			{
					ifwasweapon FREEZEBLAST
					{
							strength 0
							state freezeblast_frozen-actor
							break
					}
	
					state boss2awards
					setvar TEMPVAR 0
					state expmulti
					state exp_given
					state addtokillamounts state check_a_characters_kills
	
					lotsofglass 30
					state frozenactor-breakcode
					ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
					killit
			}
			ifp pfacing
					ifpdistl FROZENQUICKKICKDIST
							pkick
			break
	}
	ifai 0
	{
			soundonce BOS2_RECOG
	
			ifspritepal 9 state boss2-chartaunts
			else ifspritepal 0 state boss2-chartaunts
			else ifspritepal 3 state boss2-chartaunts
	
			state setboss2health
			ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	}
	else ifaction BOSS2FLINTCH
	{
			ifactioncount 3
					ai AIBOSS2SEEKENEMY
	}
	else ifai AIBOSS2SEEKENEMY state boss2seekenemystate
	else ifai AIBOSS2RUNENEMY state boss2runenemystate
	else ifai AIBOSS2SHOOTENEMY state boss2shootenemy
	else ifai AIBOSS2LOBBED state boss2lobbedstate
	else ifai AIBOSS2PALSHRINK state boss2palshrunkstate
	else ifai AIBOSS2GETITEM state boss2getitemstate
	
	ifai AIBOSS2DYING state boss2dyingstate
	else
	{
		ifhitweapon state checkboss2hitstate
		else 
		{
			ifvarn SHRUNK? 1 state bosscrushdamage
		}
	}

	ifai AIBOSS2RUNENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AIBOSS2SEEKENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else setvar WALKSNDAI 0
ends

useractor enemy BOSS2BREATH BOSS2STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss2health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ai AIBOSS2LOBBED
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS2
enda

useractor enemy BOSS2SHOOT BOSS2STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss2health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ai AIBOSS2SHOOTENEMY
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS2
enda

useractor enemystayput BOSS2STAYPUT BOSS2STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss2health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS2
enda

state getboss2speeds
	ifmove PALBOSS2SHRUNKRUNVELS setvar ACTORSPEED 32
	else ifmove PALBOSS2RUNVELS setvar ACTORSPEED 128
	else ifmove ESSBOSS2RUNVELS setvar ACTORSPEED 212
	else ifmove BOSS2WALKVELS setvar ACTORSPEED 192
	else ifmove BOSS2RUNVELS setvar ACTORSPEED 296
	else ifmove BOSS2STOPPED setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 10
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 9
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 3
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 0
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 24
		{
			mulvarvar ACTORSPEED 105
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor BOSS2 BOSS2STRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare mainmenu 0 fall
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state boss2code 
	state boss2seekitem
	
	state getboss2speeds
enda

action ABOSS3LOCKED      0  1  5  1  5
action ABOSS3LOCKEDF     30 1  5  1  5

action ABOSS3WALK        0  4  5  1  30
action ABOSS3FROZEN        0  1  5
action ABOSS3RUN         0  4  5  1  15
action ABOSS3LOB        20 4  5  1  50
action ABOSS3LOBBING      30 2  5  1  15
action ABOSS3DYING        40 8  1  1  20
action BOSS3FLINTCH       40 1  1  1  1
action ABOSS3DEAD         48

move PALBOSS3SHRUNKRUNVELS 32
move PALBOSS3RUNVELS 128
move ESSBOSS3RUNVELS 212
move BOSS3WALKVELS 208
move BOSS3RUNVELS 270
move BOSS3STOPPED

ai AIBOSS3SEEKENEMY ABOSS3WALK BOSS3WALKVELS seekplayer
ai AIBOSS3RUNENEMY ABOSS3RUN BOSS3RUNVELS faceplayerslow
ai AIBOSS3LOBENEMY ABOSS3LOB BOSS3STOPPED faceplayer
ai AIBOSS3DYING ABOSS3DYING BOSS3STOPPED faceplayer
ai AIBOSS3PALSHRINK ABOSS3WALK PALBOSS3SHRUNKRUNVELS faceplayer

ai AIBOSS3GETITEM ABOSS3RUN BOSS3RUNVELS faceplayer

state setboss3health
	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		ifspritepal 9 { clipdist 164 sizeat 80 80 ai AIBOSS3RUNENEMY }
		else ifspritepal 10 { clipdist 82 sizeat 40 40 { ifrnd 128 { ai AIBOSS3LOBENEMY } else { ai AIBOSS3RUNENEMY } } }
		else ifspritepal 0 { clipdist 164 sizeat 80 80 ai AIBOSS3RUNENEMY }
		else ifspritepal 3 { clipdist 164 sizeat 80 80 ai AIBOSS3RUNENEMY }
		else ifspritepal 24 { clipdist 98 sizeat 48 48 { ifrnd 85 { ai AIBOSS3LOBENEMY } else ifrnd 128 { ai AIBOSS3RUNENEMY } else { ai AIBOSS3SEEKENEMY } } }
		else { clipdist 82 sizeat 40 40 { ifrnd 128 ai AIBOSS3LOBENEMY else ai AIBOSS3RUNENEMY } }
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
				clipdist 60
				sizeat 80 80
				ai AIBOSS3RUNENEMY
				setvar ACTORHP BOSS3STRENGTH
				setvar ACTORMAXAIRTIME BOSS3AIRTIME
				setvar ACTORAIRTIME BOSS3AIRTIME
				setvar ACTORMAXHP BOSS3STRENGTH
		}
		else
		ifspritepal 10 // Palette 10 will be 'Old School' (No abnormal stat calculations)
		{
				clipdist 30
				sizeat 40 40
				ifrnd 128 ai AIBOSS3LOBENEMY else ai AIBOSS3RUNENEMY
				setvar ACTORHP BOSS3PALSTRENGTH
				setvar ACTORMAXAIRTIME BOSS3PALAIRTIME
				setvar ACTORAIRTIME BOSS3PALAIRTIME
				setvar ACTORMAXHP BOSS3PALSTRENGTH
		}
		else
		ifspritepal 0
		{
				clipdist 60
				sizeat 80 80
				ai AIBOSS3RUNENEMY
				setvar ACTORHP BOSS3STRENGTH
				setvar ACTORMAXAIRTIME BOSS3AIRTIME
				setvar ACTORAIRTIME BOSS3AIRTIME
				setvar ACTORATTACK BOSS3BASEATTACK
				setvar ACTORDEFENSE BOSS3BASEDEFENSE
				setvar ACTORMAXAP BOSS3STRENGTH
				setvar ACTORMAXFALLRESIST BOSS3FALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE BOSS3CRITCHANCE
				setvar ACTORSURVIVALVALUE BOSS3SURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		ifspritepal 3
		{
				clipdist 60
				sizeat 80 80
				ai AIBOSS3RUNENEMY
				setvar ACTORHP BOSS3STRENGTH
				setvar ACTORMAXAIRTIME BOSS3AIRTIME
				setvar ACTORAIRTIME BOSS3AIRTIME
				setvar ACTORATTACK BOSS3BASEATTACK
				setvar ACTORDEFENSE BOSS3BASEDEFENSE
				setvar ACTORMAXAP BOSS3STRENGTH
				setvar ACTORMAXFALLRESIST BOSS3FALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE BOSS3CRITCHANCE
				setvar ACTORSURVIVALVALUE BOSS3SURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		ifspritepal 24
		{
				clipdist 36
				sizeat 48 48
				ifrnd 85 ai AIBOSS3LOBENEMY else ifrnd 128 ai AIBOSS3RUNENEMY else ai AIBOSS3SEEKENEMY
				setvar ACTORHP BOSS3VOIDSTRENGTH
				setvar ACTORMAXAIRTIME BOSS3VOIDAIRTIME
				setvar ACTORAIRTIME BOSS3VOIDAIRTIME
				setvar ACTORATTACK BOSS3VOIDBASEATTACK
				setvar ACTORDEFENSE BOSS3VOIDBASEDEFENSE
				setvar ACTORMAXAP BOSS3VOIDSTRENGTH
				setvar ACTORMAXFALLRESIST BOSS3VOIDFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE BOSS3VOIDCRITCHANCE
				setvar ACTORSURVIVALVALUE BOSS3VOIDSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		else
		{
				clipdist 30
				sizeat 40 40
				ifrnd 128 ai AIBOSS3LOBENEMY else ai AIBOSS3RUNENEMY
				setvar ACTORHP BOSS3PALSTRENGTH
				setvar ACTORMAXAIRTIME BOSS3PALAIRTIME
				setvar ACTORAIRTIME BOSS3PALAIRTIME
				setvar ACTORATTACK BOSS3PALBASEATTACK
				setvar ACTORDEFENSE BOSS3PALBASEDEFENSE
				setvar ACTORMAXAP BOSS3PALSTRENGTH
				setvar ACTORMAXFALLRESIST BOSS3PALFALLRESIST
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE BOSS3PALCRITCHANCE
				setvar ACTORSURVIVALVALUE BOSS3PALSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORWEAKNESSFLAGS 2 // Ice
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state boss3seekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AIBOSS3GETITEM break else ai AIBOSS3GETITEM
						}
						else setvar ITEMTARGET -1
					}
				}
			}
		}
	}
ends

state boss3palshrunkstate
	ifcount SHRUNKDONECOUNT
	{
		cstat 257
		ai AIBOSS3SEEKENEMY
		setvar SHRUNK? 0
	}
	else
	ifcount SHRUNKCOUNT
	{
		ifspritepal 24 sizeto 48 48
		else ifspritepal 0 sizeto 80 80
		else ifspritepal 3 sizeto 80 80
		else ifspritepal 9 sizeto 80 80
		else sizeto 40 40
	}
	else
		state genericshrunkcode
ends

state checkboss3seekstate
	ai AIBOSS3SEEKENEMY
	ifspritepal 0 nullop
	else ifspritepal 3 nullop
	else ifspritepal 9 nullop
	else ifspritepal 24 { move ESSBOSS3RUNVELS seekplayer }
	else { move PALBOSS3RUNVELS seekplayer }  // a fake way of doing a ifspritepal NOT.
ends

state boss3getitemstate
	ifvare ITEMTARGET -1 state checkboss3seekstate
ends

state boss3runenemystate
	ifcansee
	{
		ifactioncount 3
		{
			ifcanshoottarget
			{
				resetactioncount
				ifvare footstepsndtoggle 0 sound BOS1_WALK
			}
			else ai AIBOSS3SEEKENEMY
		}
	}
	else ai AIBOSS3SEEKENEMY
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS3STOPPED
		action ABOSS3LOCKED
	}
	*/
ends

state boss3seekenemystate

	ifrnd 2 soundonce BOS3_ROAM
	else ifactioncount 3
	{
		resetactioncount
		ifvare footstepsndtoggle 0 sound BOS1_WALK
	}
	
	ifcansee ifcount 32 ifrnd 48 ifcanshoottarget
	{
		ifrnd 64
		{
			ifpdistg 4096
			{
					ai AIBOSS3RUNENEMY
					ifspritepal 0
						break
					move PALBOSS3RUNVELS seekplayer
						break
			}
		}
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 2048
				{
					ifp palive ai AIBOSS3LOBENEMY
				}
			}
			else
			{
				ifp palive ai AIBOSS3LOBENEMY
			}
	}
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS3STOPPED
		action ABOSS3LOCKED
	}
	*/
ends

state boss3dyingstate
	ifaction ABOSS3DEAD
	{
		state bossendgamestuff
		ifspritepal 0
				break
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 
			{
				state boss_jibs
				state normalenemyexplode
			}
		}    
		ifrespawn ifcount RESPAWNACTORTIME
		{
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state setboss3health
			ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
			state checkboss3seekstate
		}
		else
		{
			strength 0
			ifhitweapon
			{
				ifwasweapon RADIUSEXPLOSION
				{
					state boss_jibs
					state normalenemyexplode
				}
				ifwasweapon INVULNICON
				{
					state boss_jibs
					state normalenemyexplode
				}
			}
			break
		}
	}
	ifactioncount 8
	{
		iffloordistl 8
			sound THUD
		action ABOSS3DEAD
	}
ends

state boss3lobbedstate
	ifvarand ACTORSTATUS? 16
	{
		ifpdistl 2048
		{
			ifcansee
			{
				ifaction ABOSS3LOBBING ifactioncount 2
				{
					state echeckquadtime
					state echeckvampiretime
	
					ifspritepal 24 
					{ 
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
	
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
	
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
						sound PIG_ATTACK
						state pigshotgun
						state pigshotgun
					}
					else ifspritepal 0 state threerockets
					else ifspritepal 3 state threerockets
					else ifspritepal 9 state threerockets
					else eshoot RPG
	
					resetactioncount
					ifrnd 8 ai AIBOSS3SEEKENEMY
				}
	
				ifactioncount 3
				{
					action ABOSS3LOBBING
					resetcount
				}
			}
			else state checkboss3seekstate
		}
		else state checkboss3seekstate
	}
	else
	{
		ifcansee
		{
			ifaction ABOSS3LOBBING ifactioncount 2
			{
				state echeckquadtime
				state echeckvampiretime
	   
				ifspritepal 24 
				{ 
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
	   
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
	   
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
					sound PIG_ATTACK
					state pigshotgun
					state pigshotgun
				}
				else ifspritepal 0 state threerockets
				else ifspritepal 3 state threerockets
				else ifspritepal 9 state threerockets
				else eshoot RPG
	   
				resetactioncount
				ifrnd 8 ai AIBOSS3SEEKENEMY
			}
	
			ifactioncount 3
			{
				action ABOSS3LOBBING
				resetcount
			}
		}
		else state checkboss3seekstate
	}
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS3STOPPED
		action ABOSS3LOCKEDF
	}
	*/
ends

state boss3death-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound DUKE_TALKTOBOSSFALL
		redefinequote 340 ^17Duke: Die you son of a bitch!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8
	{
		globalsound LISA_KILLBOSS3 
		redefinequote 340 ^7Lisa: Wow... your attacks were waaay too predictable!! No, wait... you just suck!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15
	{
		globalsound MAKEN_KILLBOSS3 
		redefinequote 340 ^10Maken: I knew your species were always a bunch of has-beens!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state checkboss3hitstate
	ifvarl ACTORINVULNTIME 1
	{
		ifvarg ACTORLASTDAMAGE 0
		{  
			ifrnd 2 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
		}
	}
	ifdead
	{
		setvar ACTORHP 0
		ifspritepal 0 state boss3death-chartaunts
		else ifspritepal 3 state boss3death-chartaunts
		else ifspritepal 9 state boss3death-chartaunts
		else ifspritepal 24 state boss3death-chartaunts
		else
		{
			ifrnd 64 state boss3death-chartaunts
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ABOSS3FROZEN
				strength 0
				break
			}
		}
	 
		state boss3awards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
		ifspritepal 9 nullop else ifspritepal 10 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
	 
		ifwasweapon INVULNICON
		{
			ifspritepal 0
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 3
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 9
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 24
			{
				sound BOS3_DYING
				state boss_jibs
				state normalenemyexplode
			}
			else
			{
				sound BOS3_DYING
				state boss_jibs
				state normalenemyexplode
			}
		}
		else
		ifwasweapon GATEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 3
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 9
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 224
				{
					sound BOS3_DYING
					sound JIBBED_ACTOR9
					ai AIBOSS3DYING
				}
				else
				{
					sound BOS3_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 56
				{
					sound BOS3_DYING
					sound JIBBED_ACTOR9
					ai AIBOSS3DYING
				}
				else
				{
					sound BOS3_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		ifwasweapon STROKEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 3
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 9
			{
				sound BOS3_DYING
				sound JIBBED_ACTOR9
				ai AIBOSS3DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 56
				{
					sound BOS3_DYING
					sound JIBBED_ACTOR9
					ai AIBOSS3DYING
				}
				else
				{
					sound BOS3_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 14
				{
					sound BOS3_DYING
					sound JIBBED_ACTOR9
					ai AIBOSS3DYING
				}
				else
				{
					sound BOS3_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		{
			sound BOS3_DYING
			sound JIBBED_ACTOR9
			ai AIBOSS3DYING
		}
	}
	else
	{
		ifwasweapon SHRINKSPARK
		{
			ifvarg ACTORINVULNTIME 0 state deflectshrinker
			else
			{
				ifvare oldskoolmode 0
				{
					ifvarand ACTORFLAGS 512
					{
						ifspritepal 24 state deflectshrinker
						else ifspritepal 0 state deflectshrinker
						else ifspritepal 3 state deflectshrinker
						else
						{
							ifrnd 240 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIBOSS3PALSHRINK setvar SHRUNK? 1 cstat 0 break }
						}
					}
					else
					{
						ifspritepal 24 state deflectshrinker
						else ifspritepal 0 state deflectshrinker
						else ifspritepal 3 state deflectshrinker
						else
						{
							ifrnd 192 state deflectshrinker
							else { sound ACTOR_SHRINKING ai AIBOSS3PALSHRINK setvar SHRUNK? 1 cstat 0 break }
						}
					}
				}
				else
				{
					sound ACTOR_SHRINKING
					ai AIBOSS3PALSHRINK
					setvar SHRUNK? 1
					cstat 0
					break
				}
			}
		}
	
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				ifspritepal 24
				{
					ifrnd 144
					{
						ifrnd 32
						{
							action BOSS3FLINTCH
							move 0
						}
						soundonce BOS3_PAIN
						debris SCRAP1 1
						guts JIBS6 1
					}
				}
				else
				{
					ifrnd 32
					{
						action BOSS3FLINTCH
						move 0
					}
					soundonce BOS3_PAIN
					debris SCRAP1 1
					guts JIBS6 1
				}
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	}
ends

state boss3-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound DUKETALKTOBOSS3
		redefinequote 340 ^17Duke: I'll rip your head off and shit down your neck!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 5
	{
		globalsound WANG_TAUNTBOSS1 
		redefinequote 340 ^15Higa: Hey!! You look like you need ass kicked!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8 
	{
		globalsound LISA_TAUNTBOSS3 
		redefinequote 340 ^7Lisa: JESUS!! Did you get hit with the ugly stick, or WHAT?!?!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15 
	{
		globalsound MAKEN_TAUNTBOSS3 
		redefinequote 340 ^10Maken: Man, you're all still big, fat, and UGGGLLLLY!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state boss3code
	// Custom
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifaction ABOSS3LOCKED ifvare mainmenu 0 ai AIBOSS3SEEKENEMY
	ifaction ABOSS3LOCKEDF ifvare mainmenu 0 { action ABOSS3LOBBING move BOSS3STOPPED faceplayer }
	// End of Custom
	
	ifaction ABOSS3FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ai AIBOSS3SEEKENEMY
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
						spawn WATERDRIP
						resetactioncount
				}
			}
		}
	 
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
					strength 0
					state freezeblast_frozen-actor
					break
			}
	  
			state boss3awards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
			lotsofglass 30
	  
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			state frozenactor-breakcode
			killit
		}
		ifp pfacing ifpdistl FROZENQUICKKICKDIST
			pkick
		break
	}
	
	ifai 0
	{
		ifvarn CHARACTERSELECTED? 1 stopsound RIPHEADNECK
		soundonce BOS3_RECOG
	 
		// Character Sighting Taunts
		ifspritepal 9 state boss3-chartaunts
		else ifspritepal 0 state boss3-chartaunts
		else ifspritepal 3 state boss3-chartaunts
	 
		state setboss3health
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	}
	else ifaction BOSS3FLINTCH
	{
		ifactioncount 3
		ai AIBOSS3SEEKENEMY
	}
	else ifai AIBOSS3SEEKENEMY state boss3seekenemystate
	else ifai AIBOSS3RUNENEMY state boss3runenemystate
	else ifai AIBOSS3LOBENEMY state boss3lobbedstate
	else ifai AIBOSS3PALSHRINK state boss3palshrunkstate
	else ifai AIBOSS3GETITEM state boss3getitemstate
	
	ifai AIBOSS3DYING state boss3dyingstate
	else
	{
		ifhitweapon state checkboss3hitstate
		else 
		{
			ifvarn SHRUNK? 1 state bosscrushdamage
		}
	}

	ifai AIBOSS3RUNENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AIBOSS3SEEKENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else setvar WALKSNDAI 0
ends

useractor enemy BOSS3LOB BOSS3STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss3health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ai AIBOSS3LOBENEMY
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS3
enda

useractor enemystayput BOSS3STAYPUT BOSS3STRENGTH  
	cstat 257
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state setboss3health
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS3
enda

state getboss3speeds
	ifmove PALBOSS3SHRUNKRUNVELS setvar ACTORSPEED 32
	else ifmove PALBOSS3RUNVELS setvar ACTORSPEED 128
	else ifmove ESSBOSS3RUNVELS setvar ACTORSPEED 212
	else ifmove BOSS3WALKVELS setvar ACTORSPEED 208
	else ifmove BOSS3RUNVELS setvar ACTORSPEED 296
	else ifmove BOSS3STOPPED setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 10
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 9
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 3
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 0
		{
			mulvarvar ACTORSPEED 125
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 24
		{
			mulvarvar ACTORSPEED 105
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor BOSS3 BOSS3STRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare mainmenu 0 fall
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state boss3code 
	state boss3seekitem
	
	state getboss3speeds
enda


state checkcommanderpalette
	ifai 0
	{
		ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
		{
			state rankstarbeta
			state checkbosslifemeters state getenemyid setvar SKILLSET? -1
		}
	
		ifvare SKILLSET? 0
		{
			state enemytyperandomizer
			state cstat2048toeliteflag
			state rankstarbeta
			ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
			{
				setvar ACTORHP COMMANDERSTRENGTH
				setvar ACTORMAXHP COMMANDERSTRENGTH
				setvar ACTORMAXAIRTIME COMMANDERAIRTIME
				setvar ACTORAIRTIME COMMANDERAIRTIME
			}
			else
			ifspritepal 14
			{
				sizeat 30 30
				setvar ACTORHP GENERALSTRENGTH
				setvar ACTORMAXAIRTIME GENERALAIRTIME
				setvar ACTORAIRTIME GENERALAIRTIME
				setvar ACTORATTACK GENERALBASEATTACK
				setvar ACTORDEFENSE GENERALBASEDEFENSE
				setvar ACTORMAXAP GENERALSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE GENERALCRITCHANCE
				setvar ACTORSURVIVALVALUE GENERALSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 17 // Fire (1), Explosions
			}
			else
			ifspritepal 25
			{
				sizeat 60 60
				setvar ACTORHP LEADERSTRENGTH
				setvar ACTORMAXAIRTIME LEADERAIRTIME
				setvar ACTORAIRTIME LEADERAIRTIME
				setvar ACTORATTACK LEADERBASEATTACK
				setvar ACTORDEFENSE LEADERBASEDEFENSE
				setvar ACTORMAXAP LEADERSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE LEADERCRITCHANCE
				setvar ACTORSURVIVALVALUE LEADERSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 17 // Fire (1), Explosions
			}
			else
			ifspritepal 24
			{
				sizeat 80 80
				setvar ACTORHP BAALOSTRENGTH
				setvar ACTORMAXAIRTIME BAALOAIRTIME
				setvar ACTORAIRTIME BAALOAIRTIME
				setvar ACTORATTACK BAALOBASEATTACK
				setvar ACTORDEFENSE BAALOBASEDEFENSE
				setvar ACTORMAXAP BAALOSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE BAALOCRITCHANCE
				setvar ACTORSURVIVALVALUE BAALOSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 17 // Fire (1), Explosions
			}
			else
			{
				setvar ACTORHP COMMANDERSTRENGTH
				setvar ACTORMAXAIRTIME COMMANDERAIRTIME
				setvar ACTORAIRTIME COMMANDERAIRTIME
				setvar ACTORATTACK COMMANDERBASEATTACK
				setvar ACTORDEFENSE COMMANDERBASEDEFENSE
				setvar ACTORMAXAP COMMANDERSTRENGTH
				setvar ACTORMAXFALLRESIST 65536
				setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
				setvar ACTORCRITICALHITCHANCE COMMANDERCRITCHANCE
				setvar ACTORSURVIVALVALUE COMMANDERSURVIVALCHANCE
				state newenemystatcalc
				setvar ACTORSTRONGFLAGS 17 // Fire (1), Explosions
			}
			setvarvar ARRAYPOSITION THISACTOR
			state addtomaxkills
			state checkbosslifemeters state getenemyid setvar SKILLSET? -1
		}
	}
ends

action ACOMMBREETH  0  3  5  1  40

action ACOMMFROZEN  0  1  5
action ACOMMSPIN   -5  1  5  1  12
action ACOMMGET   0  3  5  1  30
action ACOMMUSESHELL  15  3  5  1  30
action ACOMMSHOOT  20  1  5   1 35
action ACOMMABOUTTOSHOOT 20 1 5 1 30
action ACOMMDYING  30  8  1  1  12
action ACOMMDEAD   38  1  1  1  1


move COMMGETUPVELS 128 -64
move COMMGETVELS 128 64
move COMMSLOW 64 24
move COMMSTOPPED

ai AICOMMWAIT ACOMMBREETH COMMSTOPPED faceplayerslow
ai AICOMMGET ACOMMGET COMMGETVELS seekplayer
ai AICOMMUSESHELL ACOMMUSESHELL COMMSTOPPED faceplayer
ai AICOMMSHOOT ACOMMSHOOT COMMSTOPPED faceplayerslow
ai AICOMMABOUTTOSHOOT ACOMMABOUTTOSHOOT COMMSTOPPED faceplayerslow
ai AICOMMSPIN ACOMMSPIN COMMGETVELS spin
ai AICOMMDYING ACOMMDYING COMMSTOPPED faceplayer
ai AICOMMSHRUNK ACOMMGET COMMSLOW furthestdir
ai AICOMMGROW ACOMMGET COMMSTOPPED furthestdir

state commanderseekitem
	state accquireenemystats
	state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AICOMMGET break else ai AICOMMGET
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state comm_explosiondeath
	ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
	sound SQUISHED
	state standard_jibs
	killit
ends

state comm_pitchchange_set
	ifspritepal 14 addvar SOUNDPITCH 416
	ifspritepal 25 addvar SOUNDPITCH -416
	setplayer[THISACTOR].sound_pitch SOUNDPITCH
ends

state comm_pitchchange_unset
	ifspritepal 14 addvar SOUNDPITCH -416
	ifspritepal 25 addvar SOUNDPITCH 416
	setplayer[THISACTOR].sound_pitch SOUNDPITCH
ends

state checkcommhitstate
	ifhitweapon
	{
		ifvare SHRUNK? 1 break
	 
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0 guts JIBS6 2
		}
	 
		ifdead
		{
			setvar ACTORHP 0
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ACOMMFROZEN
				strength 0
				break
			}
	  
			ifspritepal 9 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
			state resetenemytimers
			state commanderawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	  
			state comm_pitchchange_set
			sound COMM_DYING
			state comm_pitchchange_unset
			ifwasweapon GROWSPARK
			{
				state expanding
				cstat 0
				sound ACTOR_GROWING
				ai AICOMMGROW
				break
			}
			ifwasweapon RADIUSEXPLOSION state comm_explosiondeath
			ifwasweapon RPG state comm_explosiondeath
			ifwasweapon RPG_NOAIM state comm_explosiondeath
			ifwasweapon OCTANINE_RPG state comm_explosiondeath
			ifwasweapon GENERAL_RPG state comm_explosiondeath
			ifwasweapon COMMANDER_RPG state comm_explosiondeath
			ifwasweapon LEADER_RPG state comm_explosiondeath
			ifwasweapon BAALO_RPG state comm_explosiondeath
			ifwasweapon GATEMISSILE_MAIN state comm_explosiondeath
			ifwasweapon GATEMISSILE_SPLIT state comm_explosiondeath
			ifwasweapon STROKEMISSILE_MAIN state comm_explosiondeath
			ifwasweapon STROKEMISSILE_SPLIT state comm_explosiondeath
	  
			ai AICOMMDYING
		}
		else
		{
			ifwasweapon SHRINKSPARK
			{
				ifvarg ACTORINVULNTIME 0 state deflectshrinker
				else
				{
					ifvare oldskoolmode 0
					{
						ifvarand ACTORFLAGS 512
						{
							ifspritepal 24 state deflectshrinker
							else
							ifspritepal 25
							{
								ifrnd 240 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AICOMMSHRUNK setvar SHRUNK? 1 }
							}
							else
							ifspritepal 14
							{        
								ifrnd 204 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AICOMMSHRUNK setvar SHRUNK? 1 }
							}
							else
							{
								ifrnd 216 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AICOMMSHRUNK setvar SHRUNK? 1 }
							}
						}
						else
						{
							ifspritepal 24 state deflectshrinker
							else
							ifspritepal 25
							{
								ifrnd 192 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AICOMMSHRUNK setvar SHRUNK? 1 }
							}
							else
							ifspritepal 14
							{        
								ifrnd 48 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AICOMMSHRUNK setvar SHRUNK? 1 }
							}
							else
							{
								ifrnd 96 state deflectshrinker
								else { sound ACTOR_SHRINKING ai AICOMMSHRUNK setvar SHRUNK? 1 }
							}
						}
					}
					else
					{
						sound ACTOR_SHRINKING
						ai AICOMMSHRUNK
						setvar SHRUNK? 1
					}
				}
			}
			ifvare ACTORINVULNTIME 0
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					ifwasweapon GROWSPARK sound EXPANDERHIT
					state comm_pitchchange_set
					soundonce COMM_PAIN
					state comm_pitchchange_unset
					ifrnd 24 ai AICOMMABOUTTOSHOOT
				}
				else
				{
					ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE      
				}
			}
			else
			{
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
	}
ends

actor COMMANDERSTAYPUT COMMANDERSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkcommanderpalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	cactor COMMANDER
	stopsound COMM_RECOG
	state comm_pitchchange_set
	sound COMM_RECOG
	state comm_pitchchange_unset
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	ai AICOMMABOUTTOSHOOT
enda

state getcommanderspeeds
	ifmove COMMGETUPVELS setvar ACTORSPEED 128
	else ifmove COMMGETVELS setvar ACTORSPEED 128
	else ifmove COMMSLOW setvar ACTORSPEED 64
	else ifmove COMMSTOPPED setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 14
		{
			mulvarvar ACTORSPEED 120
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 25
		{
			mulvarvar ACTORSPEED 85
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 24
		{
			mulvarvar ACTORSPEED 135
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 100
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	}
ends

actor COMMANDER COMMANDERSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state checkcommanderpalette
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state checksquished
	state commanderseekitem
	
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	ifaction ACOMMFROZEN
	{
		ifvare mainmenu 0 fall
	 
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			state unfreeze
			ai AICOMMWAIT
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
						spawn WATERDRIP
						resetactioncount
				}
			}
		}
	 
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
					strength 0
					state freezeblast_frozen-actor
					break
			}
	  
			state commanderawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	  
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 30
			state frozenactor-breakcode
			killit
		}
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
		break
	}
	
	ifai 0
	{
		stopsound COMM_RECOG
		state comm_pitchchange_set
		sound COMM_RECOG
		state comm_pitchchange_unset
		ifcansee ai AICOMMSHOOT else ai AICOMMGET
	}
	else ifai AICOMMWAIT
	{
		ifcount 20
		{
			ifcansee
			{
				ifcanshoottarget
				{
					ifvarand ACTORSTATUS? 16
					{
						ifpdistl 1536
						{
							ifrnd 96
								ai AICOMMGET
							else
								ai AICOMMABOUTTOSHOOT
						}
						else ai AICOMMGET
					}
					else
					{
						ifrnd 96
							ai AICOMMGET
						else
							ai AICOMMABOUTTOSHOOT
					}
				}
			}
			else
				ai AICOMMGET
		}
	}
	else ifai AICOMMABOUTTOSHOOT
	{
		/*
		// Check for a monster ally to Shell [randomized]
		*/
		ifvarand ACTORSTATUS? 16
		{
			ifpdistl 1536
			{
				ifactioncount 2
				{
					ifcansee
						ai AICOMMSHOOT
					else
					{
						ai AICOMMGET
						break
					}
				}
			}
			else
			{
				ifactioncount 2
				{
					ai AICOMMGET
					break
				}
			}
		}
		else
		{
			ifactioncount 2
			{
				ifcansee
					ai AICOMMSHOOT
				else
				{
					ai AICOMMGET
					break
				}
			}
		}
		ifrnd 32
		{
			state comm_pitchchange_set
			soundonce COMM_ATTACK
			state comm_pitchchange_unset
		}
	}
	/*
	else ifai AICOMMUSESHELL
	{
	}
	*/
	else ifai AICOMMSHOOT
	{
		ifvarand ACTORSTATUS? 16
		{
			ifpdistl 1536
			{
				ifcanshoottarget
				{
						ifcount 24
								ifrnd 16
										ai AICOMMWAIT
						ifactioncount 2
						{
								ifvarand ACTORSTATUS? 128 nullop
								else
								{
									findnearsprite APLAYER 32768 TEMP 
									ifvarn TEMP -1 
									{
										getactor[TEMP].x mx
										getactor[TEMP].y my
										getactor[THISACTOR].x x 
										getactor[THISACTOR].y y
										subvarvar mx x
										subvarvar my y
										getangle angvar mx my
										setactor[THISACTOR].ang angvar
									} 
								}
							
								state echeckquadtime
								state echeckvampiretime
								ifvare oldskoolmode 0
								{
									getactor[THISACTOR].ang ACTORANGLE 
									ifspritepal 14 eshoot GENERAL_RPG
									else ifspritepal 25 eshoot LEADER_RPG
									else ifspritepal 24 eshoot BAALO_RPG
									else eshoot COMMANDER_RPG
									setactor[RETURN].ang ACTORANGLE 
								} 
								else eshoot RPG 
	
								resetactioncount
						}
				}
				else ai AICOMMGET
			}
			else ai AICOMMGET
		}
		else
		{
			ifcanshoottarget
			{
				ifcount 24
					ifrnd 16
						ai AICOMMWAIT
				ifactioncount 2
				{
					ifvarand ACTORSTATUS? 128 nullop
					else
					{
						findnearsprite APLAYER 32768 TEMP 
						ifvarn TEMP -1 
						{
							getactor[TEMP].x mx
							getactor[TEMP].y my
							getactor[THISACTOR].x x 
							getactor[THISACTOR].y y
							subvarvar mx x
							subvarvar my y
							getangle angvar mx my
							setactor[THISACTOR].ang angvar
						} 
					}
					
					state echeckquadtime
					state echeckvampiretime
					ifvare oldskoolmode 0
					{
						getactor[THISACTOR].ang ACTORANGLE 
						ifspritepal 14 eshoot GENERAL_RPG
						else ifspritepal 25 eshoot LEADER_RPG
						else ifspritepal 24 eshoot BAALO_RPG
						else eshoot COMMANDER_RPG
						setactor[RETURN].ang ACTORANGLE 
					}
					else eshoot RPG
	    
					resetactioncount
				}
			}
			else ai AICOMMGET
		}
	}
	else ifai AICOMMSHRUNK
	{
		ifcount SHRUNKDONECOUNT
		{
			ai AICOMMGET
			setvar SHRUNK? 0
		}
		else
		ifcount SHRUNKCOUNT
		{
			ifspritepal 24 sizeto 80 80
			else ifspritepal 25 sizeto 60 60
			else ifspritepal 14 sizeto 30 30
			else sizeto 40 40
		}
		else
			state genericshrunkcode
	}
	else ifai AICOMMGROW
		state genericgrowcode
	else ifai AICOMMGET
	{
		ifnotmoving
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 4
				{
					ifrnd 25 operate
				}
			}
			else
			{
				ifrnd 4
						operate
			}
		}
	 
		ifvare ITEMTARGET -1
		{
			ifpdistl 1024 ifp palive
			{
				state comm_pitchchange_set
				sound COMM_SPIN
				state comm_pitchchange_unset
				ai AICOMMSPIN
				break
			}
		}
	 
		ifvarn ITEMTARGET -1
		{
			getactor[THISACTOR].z tempb
			getactor[ITEMTARGET].z tempc
	 
			ifvarvarg tempc tempb // higher than target item
			{
				move COMMGETVELS getv geth faceplayer
			}
			else // lower than target item
			{
				move COMMGETUPVELS getv geth faceplayer
			}
		}
		else
		{
			ifcansee
			{
				ifp phigher
						move COMMGETUPVELS getv geth faceplayer
				else
						move COMMGETVELS getv geth faceplayer
			}
		}
	 
		ifvare ITEMTARGET -1
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 1536
				{
					ifactioncount 8
						ifrnd 2
							ai AICOMMABOUTTOSHOOT
				}
			}
			else
			{
				ifactioncount 8
					ifrnd 2
						ai AICOMMABOUTTOSHOOT
			}
		}
	}
	else ifai AICOMMSPIN
	{
		// code to make him move towards player while spinning
	 
		ifcansee
		{
			ifvarg SKILLLEVEL 4
			{
				getactor[THISACTOR].x x
				getactor[THISACTOR].y y
				getactor[THISACTOR].z z
				getplayer[THISACTOR].posx mx
				getplayer[THISACTOR].posy my
				ifspritepal 14
				{
					ifvarvarg x mx subvar x 32 else addvar x 32
					ifvarvarg y my subvar y 32 else addvar y 32
				}
				else
				ifspritepal 25
				{
					ifvarvarg x mx subvar x 96 else addvar x 96
					ifvarvarg y my subvar y 96 else addvar y 96
				}
				else
				ifspritepal 24
				{
					ifvarvarg x mx subvar x 144 else addvar x 144
					ifvarvarg y my subvar y 144 else addvar y 144
				}
				else
				{
					ifvarvarg x mx subvar x 64 else addvar x 64
					ifvarvarg y my subvar y 64 else addvar y 64
				}
				updatesectorz x y z mysector
				ifvarn mysector -1
				{
					setactor[THISACTOR].x x
					setactor[THISACTOR].y y
				}
			}
		}
		ifvarand ACTORSTATUS? 16
		{
			ifpdistg 1536 ai AICOMMWAIT
		}
		else
		{
			ifpdistg 6144 ai AICOMMWAIT
		}
		state comm_pitchchange_set
		soundonce COMM_SPIN
		state comm_pitchchange_unset
		ifcount 16
		{
			ifpdistl 1280
			{
				state echeckquadtime
				state echeckvampiretime
				
				ifspritepal 14 
				{
					setvar MELEEDAMAGE 14
					randvar MELEEDAMAGEVAR 7
				}
				else
				ifspritepal 25
				{
					setvar MELEEDAMAGE 90
					randvar MELEEDAMAGEVAR 45
				}
				else
				ifspritepal 24
				{
					setvar MELEEDAMAGE 360
					randvar MELEEDAMAGEVAR 180
				}
				else
				{
					setvar MELEEDAMAGE 35
					randvar MELEEDAMAGEVAR 17
				}
				state meleerandomdmg
				ifp palive state getmeleedmg2
	   
				ifvarg INVULNTIME 0 state invulnflash 
				else ifvarand CHEATBITFIELD? 32 state invulnflash 
				else ifvarl MELEEDAMAGE 1 state nullflash
				else
				{
					ifp palive
					{
						getactorvar[PLAYERID].VEHICLEID tempvehicleid
						ifvare tempvehicleid -1
						{
								ifvare CHARACTERSELECTED? 8 ifvare HAVEENERGYSHIELD? 1 ifvarl PLAYERDAMAGE 1 nullop
								else
								{
									ifvare CHARACTERSELECTED? 4
									{ 
										ifvarand PLAYERSTATUS? 256
										{
											ifrnd 13 state adddimness
										}
										else
										{
											ifrnd 64 state adddimness
										}
									}
									else
									ifvare CHARACTERSELECTED? 15
									{
										ifrnd 32 state adddimness
									}
									else
									{
										ifrnd 64 state adddimness
									}
								}
						}
					}
				}
				resetcount
			}
			else
				ifpdistg 2300
					ai AICOMMWAIT
		}
		ifactioncount 52
			ai AICOMMWAIT
		ifnotmoving
			ifrnd 32
				operate
	}
	
	ifai AICOMMDYING
	{
		ifvare mainmenu 0 fall
		strength 0
	 
		ifhitweapon
				ifwasweapon RADIUSEXPLOSION
		{
				ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
				sound SQUISHED
				state standard_jibs
				killit
		}
	 
		ifaction ACOMMDYING ifactioncount 8
		{
			iffloordistl 8
				sound THUD
			cstat 0
			action ACOMMDEAD
			ifvare MONSTERSEXPLODE 1
			{
				ifvare oldskoolmode 0 
				{
					sound SQUISHED
					state standard_jibs
					killit
				}
			}    
		}
	}
	else
	{
		ifrnd 2
		{
			state comm_pitchchange_set
			soundonce COMM_ROAM
			state comm_pitchchange_unset
		}
		ifvarn SHRUNK? 1 state checkcommhitstate
	}
	state getcommanderspeeds
enda


// CANNONBALL for Pirates of the Carribean
define CANNONBALLSTRENGTH 400
move CANNONBALL1 512 0
move CANNONBALL2 512 10
move CANNONBALL3 512 20
move CANNONBALL4 512 40
move CANNONBALL5 512 80

useractor notenemy CANNONBALL CANNONBALLSTRENGTH

	ifaction 0
	{
		sizeat 32 32
		cstat 257         // Force actor to block
		action ANULLACTION
	}

	ifactioncount 46
	{
		ifactioncount 47 nullop
		else
			move CANNONBALL5 geth getv
	}
	else
	ifactioncount 44
	{
		ifactioncount 45 nullop
		else
			move CANNONBALL4 geth getv
	}
	else
	ifactioncount 40
	{
		ifactioncount 41 nullop
		else
			move CANNONBALL3 geth getv
	}
	else
	ifactioncount 32
	{
		ifactioncount 33 nullop
		else
			move CANNONBALL2 geth getv
	}
	else
	ifactioncount 16
	{
		ifactioncount 17 nullop
		else move CANNONBALL1 geth getv
	}

	ifnotmoving
	{
		spawn EXPLOSION2
		sound PIPEBOMB_EXPLODE
		hitradius 4096 WEAKEST WEAK MEDIUMSTRENGTH TOUGH
		killit
	}
	
	ifhitweapon
	{
		ifdead
		{
			spawn EXPLOSION2
			hitradius 4096 WEAKEST WEAK MEDIUMSTRENGTH TOUGH
			killit
		}
		else
			debris SCRAP1 3
	}

enda


define CANNONBALLS 1818
define CANNONBALLSSTRENGTH 10
move CANNONBALLSVEL

useractor notenemy CANNONBALLS CANNONBALLSSTRENGTH
	ifaction 0
	{
		cstator 257
		action ANULLACTION
	}
	ifhitweapon
	{
		ifdead
		{
			spawn EXPLOSION2
			hitradius 4096 WEAKEST WEAK MEDIUMSTRENGTH TOUGH
			killit
		}
		else
				debris SCRAP1 3
	}
enda


define CANNON 1810
define CANNONSTRENGTH 400
action ACANNONWAIT 0 1 7 1 1
action ACANNONSHOOTING 0 1 7 1 1
move CANNONSTOP

useractor enemy CANNON CANNONSTRENGTH // fall

	ifaction 0
	{
		// sizeat 64 64
		action ACANNONWAIT
	}
	else
	ifaction ACANNONSHOOTING
	{
		spawn CANNONBALL
		action ACANNONWAIT
	}
	else
	ifaction ACANNONWAIT
	{
		ifactioncount 64
		{
			ifrnd 128
				action ACANNONSHOOTING
			else
				resetactioncount
		}
	}

	ifhitweapon
	{
		ifdead
		{
			randvar EXPPTSTEMP 21
			addvar EXPPTSTEMP 21
			addvarvar EXPPTS EXPPTSTEMP
			setvar EXPPTSTEMP 0
			state addtokillamounts // state check_a_characters_kills
			hitradius 4096 WEAKEST WEAK MEDIUMSTRENGTH TOUGH
			spawn EXPLOSION2
			killit
		}
		else debris SCRAP1 3
	}
	
	ifpdistl 1024 ifhitspace
	{
		ifp pfacing
			ifcanshoottarget
				spawn CANNONBALL
			else break
	}
enda

useractor notenemy HOTMEAT TOUGH
	ifaction 0
	{
		action ANULLACTION
		cstat 257
	}
	ifhitweapon
	{
		ifdead
		{
			sound SQUISHED
			guts JIBS5 8
			guts JIBS6 9
			killit
		}
		else
			guts JIBS6 1
	}
	ifrnd 1
		spawn WATERDRIP
enda

action ASPEAKERBROKE 1
useractor notenemy SPEAKER
	ifaction 0
	{
		ifhitweapon
		{
			stopsound STORE_MUSIC
			soundonce STORE_MUSIC_BROKE
			action ASPEAKERBROKE
		}
		else
		{
			ifpdistl 10240
					soundonce STORE_MUSIC
			cstat 289
		}
	}
enda

action ALAVABUBBLE
action ALAVABUBBLEANIM 0 5 1 1 16

useractor notenemy LAVABUBBLE
	ifaction 0
	{
		cstat 32768
		action ALAVABUBBLE
	}
	else
		ifaction ALAVABUBBLE
	{
		ifcount 72
			ifrnd 2
		{
			cstat 0
			action ALAVABUBBLEANIM
		}
	}
	else
	{
		ifactioncount 5
		{
			cstat 32768
			action ALAVABUBBLE
		}
	}
enda

// RIOT TANK with Pigcop inside

// off-set, numofframes, numofrot, skipframes, delay
action ATANKSPIN   0 1 7 1 4
action ATANKSHOOTING 7 2 7 1 10
action ATANKWAIT 0 1 7 1 1
action ATANKDESTRUCT 0 1 7 1 1
action ATANKDEAD 0 1 7 1 1
// move TANKVEL horiz vert
move TANKFORWARD 100
move TANKSTOP

state settankhealth
	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
			sizeat 60 60
			setvar ACTORHP TANKSTRENGTH
			setvar ACTORMAXAIRTIME TANKAIRTIME
			setvar ACTORAIRTIME TANKAIRTIME
			setvar ACTORMAXHP TANKSTRENGTH
		}
		else
		{
			sizeat 60 60
			setvar ACTORHP TANKSTRENGTH
			setvar ACTORMAXAIRTIME TANKAIRTIME
			setvar ACTORAIRTIME TANKAIRTIME
			setvar ACTORATTACK TANKBASEATTACK
			setvar ACTORDEFENSE TANKBASEDEFENSE
			setvar ACTORMAXAP TANKSTRENGTH
			setvar ACTORMAXFALLRESIST TANKFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE TANKCRITCHANCE
			setvar ACTORSURVIVALVALUE TANKSURVIVALCHANCE
			state newenemystatcalc
			ifspritepal 17 { setvar ACTORSTRONGFLAGS 32 } // Metal
			else ifspritepal 19 { setvar ACTORSTRONGFLAGS 16 } // Explosives
			else { setvar ACTORSTRONGFLAGS 257 } // Fire (1), Ion/Energy (256)
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state tankseekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifmove TANKFORWARD break else move TANKFORWARD
						}
						else 
						{ 
							setvar ITEMTARGET -1 
						}
					}
				}
			}
		}
	}
ends

state gettankspeeds
	ifmove TANKFORWARD setvar ACTORSPEED 100
	else ifmove TANKSTOP setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 10 // 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	}
ends

useractor enemy TANK TANKSTRENGTH 
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare mainmenu 0 fall
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	// state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state tankseekitem
	
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	getactor[THISACTOR].cstat temp
	ifvarand temp 1 nullop
	else
	{
		addvar temp 1
		setactor[THISACTOR].cstat temp
	}
	getactor[THISACTOR].cstat temp
	ifvarand temp 256 nullop
	else
	{
		addvar temp 256
		setactor[THISACTOR].cstat temp
	}
	
	ifaction 0
	{
		state settankhealth
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }    
		sizeat 60 60
		action ATANKWAIT
		cstat 257
		clipdist 100
	}
	else ifaction ATANKSPIN
	{
		state enemy_underwater-space
		soundonce TANK_ROAM

		ifvare ITEMTARGET -1
		{
			ifactioncount 20
			{
				ifrnd 16 ifcansee ifcanshoottarget
				{
					ifvarl SKILLLEVEL 5 move TANKSTOP geth else move TANKFORWARD seekplayer
					action ATANKSHOOTING
					ifvarl SKILLLEVEL 5 stopsound TANK_ROAM
				}
			}
		}

		ifrnd 16
			move TANKFORWARD seekplayer
	}
	else ifaction ATANKSHOOTING
	{    
		state enemy_underwater-space
		ifactioncount 22
		{
			ifpdistg 8192
			{
				state echeckquadtime
				state echeckvampiretime
   
				ifspritepal 24
				{
					sound CAT_FIRE
					state fourfreezers
					state fourfreezers
					state fourfreezers
					state fourfreezers
					state fourfreezers
				}
				else
				ifspritepal 19
				{
					sound CAT_FIRE
					state fourfreezers
					state fourfreezers
					state fourfreezers
				}
				else
				ifspritepal 17
				{
					sound CAT_FIRE
					state fourfreezers
				}
				else
				{
					sound RPG_SHOOT
					shoot MORTER
				}
			}
			resetcount
			move 0 action ATANKWAIT
		}
		else ifactioncount 2
		{
			ifcansee
			{
				ifpdistl 16384
				{
					ifrnd 128
					{
						state echeckquadtime
						state echeckvampiretime
      
						ifspritepal 24
						{
							sound PRED_ATTACK 
							sound PRED_ATTACK 
							sound PRED_ATTACK 
							sound RPG_SHOOT 
							sound RPG_SHOOT 
							sound RPG_SHOOT 
							state firezapper3_angleeffect
							shoot FIRELASER
							shoot FIRELASER
							shoot FIRELASER
							state threerockets
						}
						else
						ifspritepal 19
						{
							sound RPG_SHOOT
							eshoot RPG
						}
						else
						ifspritepal 17
						{
							sound SHOTGUN_FIRE
							state pigshotgun
							state pigshotgun
						}
						else
						{
							sound PISTOL_FIRE
							state fireshotspark1_angleeffect
							state fireshotspark1_angleeffect
						}
					}
				}
				else
				ifrnd 128
				{
					state echeckquadtime
					state echeckvampiretime
					ifspritepal 24
					{
						sound PRED_ATTACK 
						sound PRED_ATTACK 
						sound PRED_ATTACK 
						sound RPG_SHOOT 
						sound RPG_SHOOT 
						sound RPG_SHOOT 
						state firezapper3_angleeffect
						shoot FIRELASER
						shoot FIRELASER
						shoot FIRELASER
						state threerockets
					}
					else
					ifspritepal 19
					{
						sound RPG_SHOOT
						shoot MORTER
					}
					else
					ifspritepal 17
					{
						sound EXPANDERSHOOT
						state fourexpanders
						state fourexpanders
					}
					else
					{
						sound PRED_ATTACK
						shoot FIRELASER
						shoot FIRELASER
					}
				}
			}
			else
			{
				move TANKFORWARD seekplayer
				action ATANKSPIN
			}
		}

		ifvarl SKILLLEVEL 5
		{
			ifrnd 16
			{
				stopsound TANK_ROAM
				move TANKSTOP faceplayerslow
			}
		}
	}
	else ifaction ATANKWAIT
	{
		state enemy_underwater-space
		ifactioncount 32
		{
			move TANKFORWARD seekplayer
			action ATANKSPIN
		}
	}
	else ifaction ATANKDESTRUCT
	{
		state enemy_underwater-space
		ifactioncount 64 { action ATANKDEAD setactor[THISACTOR].htowner PLAYERID }
		else ifactioncount 56 sound LASERTRIP_ARMING
		else ifactioncount 48 sound LASERTRIP_ARMING
		else ifactioncount 32 sound LASERTRIP_ARMING
		else ifactioncount 16 sound LASERTRIP_ARMING
		break
	}
	else ifaction ATANKDEAD
	{
		ifspritepal 9 nullop
		else
		{
			randvar RANKPOINTSTEMP TANKRANKPOINTSRAND 
			addvar RANKPOINTSTEMP TANKRANKPOINTSSOLID 
			randvar EXPPTSTEMP TANKEXPERIENCERAND
			addvar EXPPTSTEMP TANKEXPERIENCE
		}
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
		setvar TEMP 6144
		setvar TEMP2 TOUGH
		setvar TEMP3 TOUGH
		setvar TEMP4 TOUGH
		setvar TEMP5 TOUGH
		hitradiusvar TEMP TEMP2 TEMP3 TEMP4 TEMP5
		sound LASERTRIP_EXPLODE
		debris SCRAP1 15
		spawn EXPLOSION2
	 
		ifrnd 128 
		{ 
			getactor[THISACTOR].pal ACTORPAL
			espawn PIGCOP 
			setactor[RETURN].pal ACTORPAL
			state eliteinheritance
		} 
		else 		
		{
			ifspritepal 9 nullop
			else
			{
				randvar RANKPOINTSTEMP PIGCOPRANKPOINTSRAND 
				addvar RANKPOINTSTEMP PIGCOPRANKPOINTSSOLID 
				randvar EXPPTSTEMP PIGCOPEXPERIENCERAND
				addvar EXPPTSTEMP PIGCOPEXPERIENCE
				setvar TEMPVAR 0
				state expmulti
				state exp_given
				sound SQUISHED state standard_jibs 
			}
		}
		// OFF-LIMITS
		setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
		// END OFF-LIMITS
		killit
	}
	
	ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			action ATANKDEAD
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					state sparkstate
					ifrnd 85 sound HITMETAL
					else ifrnd 128 sound HITMETAL2
					else sound HITMETAL3
					debris SCRAP1 1
					ifaction ATANKSHOOTING break
	 
					ifvare ITEMTARGET -1
					{
						ifrnd 192
						{
							ifvarl SKILLLEVEL 5 move TANKSTOP geth else move TANKFORWARD seekplayer
							action ATANKSHOOTING
							ifvarl SKILLLEVEL 5 stopsound TANK_ROAM
						}
					}
				}
				else
				{
					ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE      
				}
			}
			else
			{
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
	}
	
	ifpdistl 1280
	{
		ifhitspace
		{
			ifp pfacing
			{
				ifangdiffl 512
				{
					ifvarl ACTORINVULNTIME 1 action ATANKDESTRUCT  // You cannot make the tank self-destruct if it is invulnerable
				}
			}
		}
	}
	
	state gettankspeeds
enda



action ABOSS4LOCKED       0  4  5  1  30
action ABOSS4WALK         0  4  5  1  30
action ABOSS4FROZEN       0  1  5
action ABOSS4RUN          0  4  5  1  20
action ABOSS4DYING        40 9  1  1  20
action ABOSS4ABOUTTOSHOOT 20 1  5  1  40
action ABOSS4SHOOT        25 2  5  1  10
action ABOSS4LAYIT        50 3  5  1  120
action BOSS4FLINTCH       40 1  1  1  1
action ABOSS4DEAD         49

move BOSS4WALKVELS 128
move BOSS4RUNVELS 192
move BOSS4STOPPED

ai AIBOSS4LAYEGGS ABOSS4WALK BOSS4WALKVELS seekplayer
// ai AIBOSS4LAYEGGS ABOSS4WALK BOSS4WALKVELS randomangle geth
ai AIBOSS4SEEK ABOSS4RUN BOSS4RUNVELS seekplayer
ai AIBOSS4SHOOT ABOSS4ABOUTTOSHOOT BOSS4STOPPED faceplayer
ai AIBOSS4DYING ABOSS4DYING BOSS4STOPPED faceplayer

ai AIBOSS4GETITEM ABOSS4WALK BOSS4RUNVELS faceplayer

state setboss4health
	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		ifspritepal 9 { clipdist 164 sizeat 80 80 ai AIBOSS4LAYEGGS }
		else ifspritepal 0 { clipdist 164 sizeat 80 80 ai AIBOSS4LAYEGGS }
		else ifspritepal 3 { clipdist 164 sizeat 80 80 ai AIBOSS4LAYEGGS }
		else ifspritepal 24 { clipdist 98 sizeat 48 48 ai AIBOSS4LAYEGGS }
		else { clipdist 82 sizeat 40 40 ai AIBOSS4LAYEGGS }
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 10 will be 'Old School' (No abnormal stat calculations)
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS4LAYEGGS
			setvar ACTORHP BOSS4STRENGTH
			setvar ACTORMAXAIRTIME BOSS4AIRTIME
			setvar ACTORAIRTIME BOSS4AIRTIME
			setvar ACTORMAXHP BOSS4STRENGTH
		}
		else
		ifspritepal 0
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS4LAYEGGS
			setvar ACTORHP BOSS4STRENGTH
			setvar ACTORMAXAIRTIME BOSS4AIRTIME
			setvar ACTORAIRTIME BOSS4AIRTIME
			setvar ACTORATTACK BOSS4BASEATTACK
			setvar ACTORDEFENSE BOSS4BASEDEFENSE
			setvar ACTORMAXAP BOSS4STRENGTH
			setvar ACTORMAXFALLRESIST BOSS4FALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS4CRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS4SURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		}
		else
		ifspritepal 3 // Non Game-Ending Version
		{
			clipdist 60
			sizeat 80 80
			ai AIBOSS4LAYEGGS
			setvar ACTORHP BOSS4STRENGTH
			setvar ACTORMAXAIRTIME BOSS4AIRTIME
			setvar ACTORAIRTIME BOSS4AIRTIME
			setvar ACTORATTACK BOSS4BASEATTACK
			setvar ACTORDEFENSE BOSS4BASEDEFENSE
			setvar ACTORMAXAP BOSS4STRENGTH
			setvar ACTORMAXFALLRESIST BOSS4FALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS4CRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS4SURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		}
		else
		ifspritepal 24
		{
			clipdist 45
			sizeat 60 60
			ai AIBOSS4LAYEGGS
			setvar ACTORHP BOSS4FAKESTRENGTH
			setvar ACTORMAXAIRTIME BOSS4FAKEAIRTIME
			setvar ACTORAIRTIME BOSS4FAKEAIRTIME
			setvar ACTORATTACK BOSS4FAKEBASEATTACK
			setvar ACTORDEFENSE BOSS4FAKEBASEDEFENSE
			setvar ACTORMAXAP BOSS4FAKESTRENGTH
			setvar ACTORMAXFALLRESIST BOSS4FAKEFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS4FAKECRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS4FAKESURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		}
		else
		{
			clipdist 30
			sizeat 40 40
			ai AIBOSS4LAYEGGS
			setvar ACTORHP BOSS4PALSTRENGTH
			setvar ACTORMAXAIRTIME BOSS4PALAIRTIME
			setvar ACTORAIRTIME BOSS4PALAIRTIME
			setvar ACTORATTACK BOSS4PALBASEATTACK
			setvar ACTORDEFENSE BOSS4PALBASEDEFENSE
			setvar ACTORMAXAP BOSS4PALSTRENGTH
			setvar ACTORMAXFALLRESIST BOSS4PALFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE BOSS4PALCRITCHANCE
			setvar ACTORSURVIVALVALUE BOSS4PALSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		} 
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state boss4zapattack
	addvar BOSS4HEALTIMER 1
	ifvarg BOSS4HEALTIMER 9
	{
		state queenselfheal
		subvar BOSS4HEALTIMER 10
		ifvarl BOSS4HEALTIMER 0 setvar BOSS4HEALTIMER 0
	}
	ifcount 48
	{
		ifrnd 4
			ai AIBOSS4LAYEGGS
	}
	ifcount 26
	{
		ifrnd 32
		{
			ifrnd 128 { setvar MELEEDAMAGE 20 randvar MELEEDAMAGEVAR 10 }
			else { setvar MELEEDAMAGE 10 randvar MELEEDAMAGEVAR 5 }
			state queenshootzappers
		}
	}
ends

state boss4seekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifai AIBOSS4GETITEM nullop else ai AIBOSS4GETITEM
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state boss4shootstate
	state enemy_underwater-space
	
	ifvarand ACTORSTATUS? 16
	{
		ifvare sector[THISACTOR].lotag 2
		{
			ifaction ABOSS4ABOUTTOSHOOT ifactioncount 3 action ABOSS4SHOOT
		}
		else
		ifvare sector[THISACTOR].lotag 1
		{
			ifvare sector[PLAYERSECTOR].lotag 1
			{
				ifaction ABOSS4ABOUTTOSHOOT ifactioncount 3 action ABOSS4SHOOT
			}
			else ai AIBOSS4LAYEGGS
		}
		else
		{
			ifpdistl 2560
			{
				ifaction ABOSS4ABOUTTOSHOOT ifactioncount 3 action ABOSS4SHOOT
			}
			else ai AIBOSS4LAYEGGS
		}
	}
	else
	{
		ifaction ABOSS4ABOUTTOSHOOT ifactioncount 3 action ABOSS4SHOOT
	}
	
	ifaction ABOSS4SHOOT
	{
		ifvarand ACTORSTATUS? 16
		{
			ifvare sector[THISACTOR].lotag 2
			{
				state boss4zapattack
			}
			else ifvare sector[THISACTOR].lotag 1
			{
				ifvare sector[PLAYERSECTOR].lotag 1
				{
					state boss4zapattack
				}
				else ai AIBOSS4LAYEGGS
			}
			else
			{
				ifpdistl 2560
				{
					state boss4zapattack
				}
				else ai AIBOSS4LAYEGGS
			}
		}
		else
		{
			state boss4zapattack
		}
	}
ends

state boss4layeggs
	state enemy_underwater-space
	
	ifrnd 2 sound BOS4_ROAM
	
	ifaction ABOSS4LAYIT
	{
			ifactioncount 3 ifcount 32
			{
				ai AIBOSS4LAYEGGS
				ifrnd 16
					move BOSS4WALKVELS furthestdir geth
				ifspritepal 24 
				{
					ifrnd 85 espawn BOSS3
					else ifrnd 128 espawn BOSS2
					else espawn BOSS1
					setactor[RETURN].pal 24
					state eliteinheritance
				}
				else
				ifspritepal 0
				{
					espawn NEWBEASTHANG
					state eliteinheritance
				}
				else
				ifspritepal 3
				{
					espawn NEWBEASTHANG
					state eliteinheritance
				}
				else
				ifspritepal 9
				{
					espawn NEWBEASTHANG
					state eliteinheritance
				}
				else
				{
					espawn OCTABRAIN
					state eliteinheritance
				}
			}
	}
	else ifcount 64 ifrnd 4
	{
		move 0
		ifspritepal 24
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 25
				{
					action ABOSS4LAYIT
					sound BOS4_LAY
				}
				else ifp palive ifcansee
				{
					ifvare sector[THISACTOR].lotag 2
					{
						ai AIBOSS4SHOOT
						sound BOS4_ATTACK
					}
					else
					ifvare sector[THISACTOR].lotag 1
					{
						ifvare sector[PLAYERSECTOR].lotag 1
						{
							ai AIBOSS4SHOOT
							sound BOS4_ATTACK
						}
						else ai AIBOSS4LAYEGGS
					}
					else
					{
						ifpdistl 2048
						{
							ai AIBOSS4SHOOT
							sound BOS4_ATTACK
						}
						else ai AIBOSS4LAYEGGS
					}
				}
			}
			else
			{
				ifrnd 25
				{
					action ABOSS4LAYIT
					sound BOS4_LAY
				}
				else ifp palive ifcansee
				{
					ai AIBOSS4SHOOT
					sound BOS4_ATTACK
				}
			}
		}
		else
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 88
				{
					action ABOSS4LAYIT
					sound BOS4_LAY
				}
				else ifp palive ifcansee
				{
					ifvare sector[THISACTOR].lotag 2
					{
						ai AIBOSS4SHOOT
						sound BOS4_ATTACK
					}
					else
					ifvare sector[THISACTOR].lotag 1
					{
						ifvare sector[PLAYERSECTOR].lotag 1
						{
							ai AIBOSS4SHOOT
							sound BOS4_ATTACK
						}
						else ai AIBOSS4LAYEGGS
					}
					else
					{
						ifpdistl 2048
						{
							ai AIBOSS4SHOOT
							sound BOS4_ATTACK
						}
						else ai AIBOSS4LAYEGGS
					}
				}
			}
			else
			{
				ifrnd 88
				{
					action ABOSS4LAYIT
					sound BOS4_LAY
				}
				else ifp palive ifcansee
				{
					ai AIBOSS4SHOOT
					sound BOS4_ATTACK
				}
			}
		}
	}
	/*
	ifvare mainmenu 0
	{
	}
	else
	{
		move BOSS4STOPPED
		action ABOSS4LOCKED
	}
	*/
ends

state boss4death-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound BOSS4_DEADSPEECH
		redefinequote 340 ^17Duke: It's time to abort your whole friggin' species!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8
	{
		globalsound LISA_KILLBOSS4 
		redefinequote 340 ^7Lisa: If you can't fight with the best, then you DIE with the rest!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15
	{
		globalsound MAKEN_KILLBOSS4 
		redefinequote 340 ^10Maken: You were all just a waste of Naferia's time... AND mine!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state checkboss4hitstate
	ifvarl ACTORINVULNTIME 1 ifvarg ACTORLASTDAMAGE 0 ifrnd 2 { espawn NEWBLOODPOOL setactor[RETURN].pal 2 setactor[RETURN].cstat 34 }
	
	ifdead
	{
		setvar ACTORHP 0
		ifspritepal 0 state boss4death-chartaunts
		else ifspritepal 3 state boss4death-chartaunts
		else ifspritepal 9 state boss4death-chartaunts
		else ifspritepal 24 state boss4death-chartaunts
		else
		{
			ifrnd 64 state boss4death-chartaunts
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ABOSS4FROZEN
				strength 0
				break
			}
		}
	 
		state boss4awards
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
		ifspritepal 9 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
		state resetenemytimers
	 
		ifwasweapon INVULNICON
		{
			ifspritepal 0
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 3
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 9
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 24
			{
				sound BOS4_DYING
				state boss_jibs
				state boss_jibs
				state normalenemyexplode
			}
			else
			{
				sound BOS4_DYING
				state boss_jibs
				state normalenemyexplode
			}
		}
		else
		ifwasweapon GATEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 3
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 9
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 208
				{
					sound BOS4_DYING
					ai AIBOSS4DYING
				}
				else
				{
					sound BOS4_DYING
					state boss_jibs
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 52
				{
					sound BOS4_DYING
					ai AIBOSS4DYING
				}
				else
				{
					sound BOS4_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		ifwasweapon STROKEMISSILE_MAIN
		{
			ifspritepal 0
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 3
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 9
			{
				sound BOS4_DYING
				ai AIBOSS4DYING
			}
			else
			ifspritepal 24
			{
				ifrnd 52
				{
					sound BOS4_DYING
					ai AIBOSS4DYING
				}
				else
				{
					sound BOS4_DYING
					state boss_jibs
					state boss_jibs
					state normalenemyexplode
				}
			}
			else
			{
				ifrnd 13
				{
					sound BOS4_DYING
					ai AIBOSS4DYING
				}
				else
				{
					sound BOS4_DYING
					state boss_jibs
					state normalenemyexplode
				}
			}
		}
		else
		{
			sound BOS4_DYING
			ai AIBOSS4DYING
		}
	}
	else
	{
		
		ifvare ACTORINVULNTIME 0
		{
			ifvarg ACTORLASTDAMAGE 0
			{
				ifspritepal 24
				{
					ifrnd 112
					{
						soundonce BOS4_PAIN
						guts JIBS6 1
	
						ifaction ABOSS4LAYIT break
						ifrnd 16
						{
							action BOSS4FLINTCH
							move 0
						}
					}
				}
				else
				{
					soundonce BOS4_PAIN
					guts JIBS6 1
	
					ifaction ABOSS4LAYIT break
					ifrnd 16
					{
						action BOSS4FLINTCH
						move 0
					}
				}
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	}
ends

state boss4dyingstate
	ifaction ABOSS4DEAD
	{
		state bossendgamestuff
		ifspritepal 0
				break
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 
			{
				ifspritepal 0 nullop
				else
				ifspritepal 24
				{ 
					state boss_jibs
					state boss_jibs
					state normalenemyexplode
				} 
				else
				{
					state boss_jibs
					state normalenemyexplode
				}
			}
		}    
		ifrespawn ifcount RESPAWNACTORTIME
		{
			spawn TRANSPORTERSTAR
			cstat 257
			strength 1
			setvar SKILLSET? 0
			state setboss4health
			ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
			state boss4layeggs // state checkboss4seekstate
		}
		else
		{
			strength 0
			ifhitweapon
			{
				ifwasweapon RADIUSEXPLOSION
				{
					state boss_jibs
					state normalenemyexplode
				}
				ifwasweapon INVULNICON
				{
					state boss_jibs
					state normalenemyexplode
				}
			}
			break
		}
	}
	ifactioncount 8
	{
		iffloordistl 8
			sound THUD
		action ABOSS4DEAD
	}
ends

state boss4getitemstate
	ifvare ITEMTARGET -1 ai AIBOSS4LAYEGGS
ends

state boss4-chartaunts
	ifvare CHARACTERSELECTED? 1
	{
		globalsound DUKETALKTOBOSS4
		redefinequote 340 ^17Duke: I'm gonna kick your ass, BITCH!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 5
	{
		globalsound WANG_TAUNTBOSS1 
		redefinequote 340 ^15Higa: Hey!! You look like you need ass kicked!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 8 
	{
		globalsound LISA_TAUNTBOSS4 
		redefinequote 340 ^7Lisa: Ha... my stepaunt twice-removed is scarier than you are!!
		ifvare oldskoolmode 0 userquote 340
	}
	ifvare CHARACTERSELECTED? 15 
	{
		globalsound MAKEN_TAUNTBOSS4 
		redefinequote 340 ^10Maken: Queen, Smeen!! Big, clumsy and slow is all you are!!
		ifvare oldskoolmode 0 userquote 340
	}
ends

state boss4code
	state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	ifaction ABOSS4LOCKED ifvare mainmenu 0 ai AIBOSS4LAYEGGS
	
	ifaction ABOSS4FROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ai AIBOSS4LAYEGGS
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 39 // ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	 
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	  
			state boss4awards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
			lotsofglass 30
	  
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			state frozenactor-breakcode
			killit
		}
		ifp pfacing
			ifpdistl FROZENQUICKKICKDIST
				pkick
		break
	}
	ifai 0
	{ 
		ifvarn CHARACTERSELECTED? 1 stopsound BOSS4_FIRSTSEE
		soundonce BOS4_RECOG
	
		ifspritepal 9 state boss4-chartaunts
		else ifspritepal 0 state boss4-chartaunts
		else ifspritepal 3 state boss4-chartaunts
	
		state setboss4health 
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	}
	else
	ifaction BOSS4FLINTCH
	{      
		state enemy_underwater-space
		ifactioncount 3 ai AIBOSS4LAYEGGS
	}
	else ifai AIBOSS4LAYEGGS state boss4layeggs
	else ifai AIBOSS4SHOOT state boss4shootstate
	else ifai AIBOSS4GETITEM state boss4getitemstate
	
	ifai AIBOSS4DYING state boss4dyingstate
	else
	{
		ifhitweapon state checkboss4hitstate
		else state bosscrushdamage
	}

 ifaction ABOSS4WALK { setvar WALKSNDAI 1 state stepsoundstuff_actor }
 else ifaction ABOSS4RUN { setvar WALKSNDAI 2 state stepsoundstuff_actor }
 else ifaction ABOSS4LAYIT { setvar WALKSNDAI 0 }
 else setvar WALKSNDAI 0

 ifaction ABOSS4SHOOT nullop else setvar BOSS4HEALTIMER 0
ends

actor BOSS4STAYPUT BOSS4STRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifvare mainmenu 0 fall
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor BOSS4
	state boss4code
enda

state getboss4speeds
	ifmove BOSS4WALKVELS setvar ACTORSPEED 128
	else ifmove BOSS4RUNVELS setvar ACTORSPEED 192
	else ifmove BOSS4STOPPED setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		// Enemy Rank Alterations
		ifspritepal 0
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 3
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 9
		{
			mulvarvar ACTORSPEED 115
			divvar ACTORSPEED 100
		}
		else
		ifspritepal 24
		{
			mulvarvar ACTORSPEED 130
			divvar ACTORSPEED 100
		}
		else
		{
			mulvarvar ACTORSPEED 100
			divvar ACTORSPEED 100
		}
	
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

actor BOSS4 BOSS4STRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state boss4seekitem
	
	ifvare mainmenu 0 fall
	state boss4code
	
	state getboss4speeds
enda

action ANEWBEASTSTAND        0
action ANEWBEASTWALKING     10  4  5  1  12
action ANEWBEASTRUNNING     10  4  5  1  8
action ANEWBEASTTHINK        0  2  5  1  40
action ANEWBEASTSCRATCHING  30  3  5  1  20
action ANEWBEASTDYING       72  8  1  1  15
action ANEWBEASTFLINTCH     71  1  1  1  1
action ANEWBEASTLYINGDEAD   79  1  1
action ANEWBEASTSCREAM      50  2  5  1  40
action ANEWBEASTJUMP        80  2  5  1  50
action ANEWBEASTFALL        90  1  5
action ANEWBEASTFROZEN      10  1  5
action ANEWBEASTHANG        0  1  5

state setnewbeasthealth
	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
			sizeat 40 40
			setvar ACTORHP NEWBEASTSTRENGTH
			setvar ACTORMAXAIRTIME NEWBEASTAIRTIME
			setvar ACTORAIRTIME NEWBEASTAIRTIME
			setvar ACTORMAXHP NEWBEASTSTRENGTH
		}
		else
		ifspritepal 17
		{
			sizeat 50 50
			setvar ACTORHP NEWBEAST2LSTRENGTH
			setvar ACTORMAXAIRTIME NEWBEAST2LAIRTIME
			setvar ACTORAIRTIME NEWBEAST2LAIRTIME
			setvar ACTORATTACK NEWBEAST2LBASEATTACK
			setvar ACTORDEFENSE NEWBEAST2LBASEDEFENSE
			setvar ACTORMAXAP NEWBEAST2LSTRENGTH
			setvar ACTORMAXFALLRESIST NEWBEAST2LFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE NEWBEAST2LCRITCHANCE
			setvar ACTORSURVIVALVALUE NEWBEAST2LSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		}
		else
		ifspritepal 20
		{
			sizeat 60 60
			setvar ACTORHP NEWBEAST2GSTRENGTH
			setvar ACTORMAXAIRTIME NEWBEAST2GAIRTIME
			setvar ACTORAIRTIME NEWBEAST2GAIRTIME
			setvar ACTORATTACK NEWBEAST2GBASEATTACK
			setvar ACTORDEFENSE NEWBEAST2GBASEDEFENSE
			setvar ACTORMAXAP NEWBEAST2GSTRENGTH
			setvar ACTORMAXFALLRESIST NEWBEAST2GFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE NEWBEAST2GCRITCHANCE
			setvar ACTORSURVIVALVALUE NEWBEAST2GSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		}
		else
		{
			sizeat 40 40
			setvar ACTORHP NEWBEASTSTRENGTH
			setvar ACTORMAXAIRTIME NEWBEASTAIRTIME
			setvar ACTORAIRTIME NEWBEASTAIRTIME
			setvar ACTORATTACK NEWBEASTBASEATTACK
			setvar ACTORDEFENSE NEWBEASTBASEDEFENSE
			setvar ACTORMAXAP NEWBEASTSTRENGTH
			setvar ACTORMAXFALLRESIST NEWBEASTFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE NEWBEASTCRITCHANCE
			setvar ACTORSURVIVALVALUE NEWBEASTSURVIVALCHANCE
			state newenemystatcalc
			setvar ACTORABSORBFLAGS 8 // Electric
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state newbeast_17heal
	state enemyhealzsetup2
	getactorvar[HEALSEEK].ACTORMAXHP TEMP2
	setvarvar TEMP3 TEMP2 // Get the Max Healing Limit [133.3%]
	mulvar TEMP3 1333
	divvar TEMP3 1000
	setvarvar TEMP4 TEMP2 // Get the healing % ratio [33.3%]
	mulvar TEMP4 333
	divvar TEMP4 1000
	
	getactorvar[HEALSEEK].ACTORHP TEMP
	addvarvar TEMP TEMP4
	ifvarvarg TEMP TEMP3 setvarvar TEMP TEMP3
	setactorvar[HEALSEEK].ACTORHP TEMP // Heal Actor's HP
	sound HEALLIFELESSER
	
	setvarvar ITEMSEEK HEALSEEK
	setvarvar ITEMSEEKC TEMP4
	state showhealing_actorhp
	
	setactorvar[HEALSEEK].ACTORHPDAMAGED? -1
	redefinequote 185 ^10AN ENEMY WAS HEALED FOR 33% HP!! :O
	setvarvar fta fta_normal setvar ftq 185
	setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
	state getworldtile
ends

state newbeast_20heal
	state enemyhealzsetup2
	getactorvar[HEALSEEK].ACTORMAXHP TEMP2
	setvarvar TEMP3 TEMP2 // Get the Max Healing Limit [166.7%]
	mulvar TEMP3 1667
	divvar TEMP3 1000
	setvarvar TEMP4 TEMP2 // Get the healing % ratio [66.6%]
	mulvar TEMP4 666
	divvar TEMP4 1000
	
	getactorvar[HEALSEEK].ACTORHP TEMP
	addvarvar TEMP TEMP4
	ifvarvarg TEMP TEMP3 setvarvar TEMP TEMP3
	setactorvar[HEALSEEK].ACTORHP TEMP // Heal Actor's HP
	sound HEALLIFEGREATER
	
	setvarvar ITEMSEEK HEALSEEK
	setvarvar ITEMSEEKC TEMP4
	state showhealing_actorhp
	
	setactorvar[HEALSEEK].ACTORHPDAMAGED? -1
	redefinequote 185 ^10AN ENEMY WAS HEALED FOR 66% HP!! :O
	setvarvar fta fta_normal setvar ftq 185
	setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
	state getworldtile
ends

useractor enemy NEWBEASTHANG NEWBEASTSTRENGTH
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	ifaction 0
	{
		state setnewbeasthealth
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
		action ANEWBEASTHANG
		cstator 257
	}
	else ifhitweapon
	{
		ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
		cactor NEWBEAST
		action ANEWBEASTSTAND
		sound NEWBEAST_PAIN
	}
	else ifspawnedby BOSS4 ifcount 200 ifrnd 1
	{
		ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
		cactor NEWBEAST
		action ANEWBEASTSTAND
		sound NEWBEAST_PAIN
	}
enda

action ANEWBEASTHANGDEAD      -1  1  5
useractor enemy NEWBEASTHANGDEAD TOUGH
	ifspritepal 20 { sizeat 60 60 }
	else ifspritepal 17 { sizeat 50 50 }
	else { sizeat 40 40 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	
	ifaction 0
	{
		strength TOUGH
		action ANEWBEASTHANGDEAD
		cstator 257
	}
	else ifhitweapon
	{
		ifdead
		{
			setvar ACTORHP 0
			state standard_jibs
			ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34 }
			sound SQUISHED
			killit
		}
		else
		{
			guts JIBS6 1
			sound SQUISHED
		}
	}
enda

move NEWBEASTWALKVEL 182
move NEWBEASTRUNVEL 256
move NEWBEASTJUMPVEL 264
move NEWBEAST2WALKVEL 242 // 182 * 1.33
move NEWBEAST2RUNVEL 340 // 256 * 1.33
move NEWBEAST2JUMPVEL 351 // 264 * 1.33
move NEWBEAST3WALKVEL 302 // 182 * 1.66
move NEWBEAST3RUNVEL 425 // 256 * 1.66
move NEWBEAST3JUMPVEL 438 // 264 * 1.66
move NEWBEASTSTOP

ai AINEWBEASTGETENEMY ANEWBEASTWALKING NEWBEASTWALKVEL seekplayer
ai AINEWBEAST2GETENEMY ANEWBEASTWALKING NEWBEAST2WALKVEL seekplayer
ai AINEWBEAST3GETENEMY ANEWBEASTWALKING NEWBEAST3WALKVEL seekplayer
ai AINEWBEASTDODGE ANEWBEASTRUNNING NEWBEASTRUNVEL dodgebullet
ai AINEWBEAST2DODGE ANEWBEASTRUNNING NEWBEAST2RUNVEL dodgebullet
ai AINEWBEAST3DODGE ANEWBEASTRUNNING NEWBEAST3RUNVEL dodgebullet
ai AINEWBEASTCHARGEENEMY ANEWBEASTRUNNING NEWBEASTRUNVEL seekplayer
ai AINEWBEAST2CHARGEENEMY ANEWBEASTRUNNING NEWBEAST2RUNVEL seekplayer
ai AINEWBEAST3CHARGEENEMY ANEWBEASTRUNNING NEWBEAST3RUNVEL seekplayer
ai AINEWBEASTFLEENEMY ANEWBEASTWALKING NEWBEASTWALKVEL fleeenemy
ai AINEWBEAST2FLEENEMY ANEWBEASTWALKING NEWBEAST2WALKVEL fleeenemy
ai AINEWBEAST3FLEENEMY ANEWBEASTWALKING NEWBEAST3WALKVEL fleeenemy
ai AINEWBEASTJUMPENEMY ANEWBEASTJUMP NEWBEASTJUMPVEL jumptoplayer
ai AINEWBEAST2JUMPENEMY ANEWBEASTJUMP NEWBEAST2JUMPVEL jumptoplayer
ai AINEWBEAST3JUMPENEMY ANEWBEASTJUMP NEWBEAST3JUMPVEL jumptoplayer
ai AINEWBEASTLANDENEMY ANEWBEASTFALL NEWBEASTJUMPVEL seekplayer
ai AINEWBEAST2LANDENEMY ANEWBEASTFALL NEWBEAST2JUMPVEL seekplayer
ai AINEWBEAST3LANDENEMY ANEWBEASTFALL NEWBEAST3JUMPVEL seekplayer
// ai AINEWBEASTSHRUNK ANEWBEASTWALKING SHRUNKVELS fleeenemy
ai AINEWBEASTTHINK ANEWBEASTTHINK NEWBEASTSTOP
ai AINEWBEASTSCRATCHENEMY ANEWBEASTSCRATCHING NEWBEASTSTOP faceplayerslow
ai AINEWBEASTGROW ANEWBEASTSTAND  NEWBEASTSTOP faceplayerslow
ai AINEWBEASTDYING ANEWBEASTDYING NEWBEASTSTOP faceplayer
ai AINEWBEASTSHOOT ANEWBEASTSCREAM NEWBEASTSTOP faceplayerslow
ai AINEWBEASTFLINTCH ANEWBEASTFLINTCH NEWBEASTSTOP faceplayerslow

state newbeastseekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	state enemy_underwater-space
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else ifvare FROZEN? 1 nullop
			else ifvare SHRUNK? 1 nullop
			else ifvare EXPANDING? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1 
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1
						{
							state enemyitemzsetup2
							ifspritepal 20 { ifai AINEWBEAST3CHARGEENEMY break else ai AINEWBEAST3CHARGEENEMY }
							else ifspritepal 17 {  ifai AINEWBEAST2CHARGEENEMY break else ai AINEWBEAST2CHARGEENEMY }
							else { ifai AINEWBEASTCHARGEENEMY break else ai AINEWBEASTCHARGEENEMY }
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state newbeastseekstate
	ifactornotstayput
	{
		ifvare ITEMTARGET -1 
		{
			ifp palive ifcansee ifpdistl 1596
			{
				ai AINEWBEASTSCRATCHENEMY
				break
			}
		}
	 
		ifspritepal 20
		{
			ifai AINEWBEAST3CHARGEENEMY
			{
				ifvare ITEMTARGET -1 
				{
					ifp palive ifpdistl 1596 ifcansee
					{
						ai AINEWBEASTSCRATCHENEMY
						break
					}
	 
					ifrnd 5
					{
						ifp palive
						{
							ifcansee
							{
								ifvarand ACTORSTATUS? 16
								{
									ifpdistg 16384
									{
										ai AINEWBEASTSHOOT
										break
									}
								}
								else
								{
									ifpdistg 4096
									{
										ai AINEWBEASTSHOOT
										break
									}
								}
							}
						}
					}
				}
			}
			else ifpdistg 4096
			{
				ai AINEWBEAST3CHARGEENEMY
				break
			}
	 
			iffloordistl 16
			{
				ifcount 32 ifrnd 16
				{
					ifceilingdistl 96 break
					ai AINEWBEAST3JUMPENEMY
				}
				break
			}
		}
		else
		ifspritepal 17
		{
			ifai AINEWBEAST2CHARGEENEMY
			{
				ifvare ITEMTARGET -1 
				{
					ifp palive ifpdistl 1596 ifcansee
					{
							ai AINEWBEASTSCRATCHENEMY
							break
					}
  
					ifrnd 3
					{
						ifp palive
						{
							ifcansee
							{
								ifvarand ACTORSTATUS? 16
								{
									ifpdistg 16384
									{
										ai AINEWBEASTSHOOT
										break
									}
								}
								else
								{
									ifpdistg 4096
									{
										ai AINEWBEASTSHOOT
										break
									}
								}
							}
						}
					}
				}
			}
			else
			ifpdistg 4096
			{
				ai AINEWBEAST2CHARGEENEMY
				break
			}
	 
			iffloordistl 16
			{
				ifcount 32 ifrnd 16
				{
						ifceilingdistl 96 break
						ai AINEWBEAST2JUMPENEMY
				}
				break
			}
		}
		else
		{
			ifai AINEWBEASTCHARGEENEMY
			{
				ifvare ITEMTARGET -1 
				{
					ifp palive ifpdistl 1596 ifcansee
					{
							ai AINEWBEASTSCRATCHENEMY
							break
					}
	 
					ifrnd 1
					{
						ifp palive
						{
							ifcansee
							{
								ifvarand ACTORSTATUS? 16
								{
									ifpdistg 16384
									{
										ai AINEWBEASTSHOOT
										break
									}
								}
								else
								{
									ifpdistg 4096
									{
										ai AINEWBEASTSHOOT
										break
									}
								}
							}
						}
					}
				}
			}
			else
			ifpdistg 4096
			{
				ai AINEWBEASTCHARGEENEMY
				break
			}
	 
			iffloordistl 16
			{
				ifcount 32 ifrnd 16
				{
						ifceilingdistl 96 break
						ai AINEWBEASTJUMPENEMY
				}
				break
			}
		}
	 
		ifspritepal 20
		{
			ifrnd 4
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25 { ifnotmoving operate }
				}
				else
				{
					ifnotmoving operate
				}
			}
			else ifrnd 52 ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25
					{
						ifgapzl 128 ai AINEWBEAST3DODGE
						else ifactornotstayput
						{
							ifrnd 128
							{
								ifceilingdistl 96 break
								ai AINEWBEAST3JUMPENEMY
							}
							else ai AINEWBEAST3DODGE
						}
					}
				}
				else
				{
					ifgapzl 128 ai AINEWBEAST3DODGE
					else ifactornotstayput
					{
						ifrnd 128
						{
							ifceilingdistl 96 break
							ai AINEWBEAST3JUMPENEMY
						}
						else ai AINEWBEAST3DODGE
					}
				}
			}
		}
		else
		ifspritepal 17
		{
			ifrnd 4
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25 { ifnotmoving operate }
				}
				else
				{
					ifnotmoving operate
				}
			}
			else ifrnd 28 ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25
					{
						ifgapzl 128 ai AINEWBEAST2DODGE
						else ifactornotstayput
						{
							ifrnd 128
							{
								ifceilingdistl 96 break
								ai AINEWBEAST2JUMPENEMY
							}
							else ai AINEWBEAST2DODGE
						}
					}
				}
				else
				{
					ifgapzl 128 ai AINEWBEAST2DODGE
					else ifactornotstayput
					{
						ifrnd 128
						{
							ifceilingdistl 96 break
							ai AINEWBEAST2JUMPENEMY
						}
						else ai AINEWBEAST2DODGE
					}
				}
			}
		}
		else
		{
			ifrnd 4
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25 { ifnotmoving operate }
				}
				else
				{
					ifnotmoving operate
				}
			}
			else ifrnd 16 ifbulletnear
			{
				ifvarand ACTORSTATUS? 16
				{
					ifrnd 25
					{
						ifgapzl 128 ai AINEWBEASTDODGE
						else ifactornotstayput
						{
							ifrnd 128
							{
								ifceilingdistl 96 break
								ai AINEWBEASTJUMPENEMY
							}
							else ai AINEWBEASTDODGE
						}
					}
				}
				else
				{
					ifgapzl 128 ai AINEWBEASTDODGE
					else ifactornotstayput
					{
						ifrnd 128
						{
							ifceilingdistl 96 break
							ai AINEWBEASTJUMPENEMY
						}
						else ai AINEWBEASTDODGE
					}
				}
			}
		}
	}
	else
	{
		ifactioncount 16
		{
			ifvare ITEMTARGET -1 
			{
				ifp palive ifpdistl 1596 ifcansee
				{
					ai AINEWBEASTSCRATCHENEMY
					break
				}
			}
		}
		ifcount 16
		{
			ifrnd 32
			{
				ifspritepal 20 { move NEWBEAST3WALKVEL randomangle geth }
				else ifspritepal 17 { move NEWBEAST2WALKVEL randomangle geth }
				else { move NEWBEASTWALKVEL randomangle geth }
			}
		}
	}
ends

/*
state newbeastshrunkstate
	ifcount SHRUNKDONECOUNT
	{
		ifspritepal 20 ai AINEWBEAST3GETENEMY
		else ifspritepal 17 ai AINEWBEAST2GETENEMY
		else ai AINEWBEASTGETENEMY
		setvar SHRUNK? 0
	}
	else
		ifcount SHRUNKCOUNT sizeto 40 40
	else
		state genericshrunkcode
ends
*/

state newbeastfleestate
	ifcount 8
	{
		ifvarand ACTORSTATUS? 16
		{
			ifrnd 64 ifpdistg 14000
				ifp palive ifcansee
					ai AINEWBEASTSHOOT
		}
		else
		{
			ifrnd 64 ifpdistg 3500
				ifp palive ifcansee
					ai AINEWBEASTSHOOT
		}
	}
	else
	{
		iffloordistl 16
		{
			ifnotmoving
			{
				ifspritepal 20 ai AINEWBEAST3GETENEMY
				else ifspritepal 17 ai AINEWBEAST2GETENEMY
				else ai AINEWBEASTGETENEMY
			}
		}
		else
		{
			ifspritepal 20 ai AINEWBEAST3GETENEMY
			else ifspritepal 17 ai AINEWBEAST2GETENEMY
			else ai AINEWBEASTGETENEMY
		}
		break
	}
ends

state newbeastthinkstate
	ifrnd 8
		soundonce NEWBEAST_ROAM
	
	ifactioncount 3
	{
		ifrnd 128
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistg 14000 ifp palive ifcansee
		  	ai AINEWBEASTSHOOT
			}
			else
			{
				ifpdistg 3500 ifp palive ifcansee
		  	ai AINEWBEASTSHOOT
			}
		}
		else
		{
			ifspritepal 20 ai AINEWBEAST3GETENEMY
			else ifspritepal 17 ai AINEWBEAST2GETENEMY
			else ai AINEWBEASTGETENEMY
		}
	}
	
	ifspritepal 20
	{
		ifrnd 48 ifbulletnear
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 25
				{
					ifgapzl 96 ai AINEWBEAST3DODGE
					else
					{
						ifrnd 128
						{
							ifceilingdistl 144 break
							ai AINEWBEAST3JUMPENEMY
						}
						else ai AINEWBEAST3DODGE
					}
				}
			}
			else
			{
				ifgapzl 96 ai AINEWBEAST3DODGE
				else
				{
					ifrnd 128
					{
						ifceilingdistl 144 break
						ai AINEWBEAST3JUMPENEMY
					}
					else ai AINEWBEAST3DODGE
				}
			}
		}
	}
	else
	ifspritepal 17
	{
		ifrnd 32 ifbulletnear
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 25
				{
					ifgapzl 96 ai AINEWBEAST2DODGE
					else
					{
						ifrnd 128
						{
							ifceilingdistl 144 break
							ai AINEWBEAST2JUMPENEMY
						}
						else ai AINEWBEAST2DODGE
					}
				}
			}
			else
			{
				ifgapzl 96 ai AINEWBEAST2DODGE
				else
				{
					ifrnd 128
					{
						ifceilingdistl 144 break
						ai AINEWBEAST2JUMPENEMY
					}
					else ai AINEWBEAST2DODGE
				}
			}
		}
	}
	else
	{
		ifrnd 16 ifbulletnear
		{
			ifvarand ACTORSTATUS? 16
			{
				ifrnd 25
				{
					ifgapzl 96 ai AINEWBEASTDODGE
					else
					{
						ifrnd 128
						{
							ifceilingdistl 144 break
							ai AINEWBEASTJUMPENEMY       
						}
						else ai AINEWBEASTDODGE
					}
				}
			}
			else
			{
				ifgapzl 96 ai AINEWBEASTDODGE
				else
				{
					ifrnd 128
					{
						ifceilingdistl 144 break
						ai AINEWBEASTJUMPENEMY       
					}
					else ai AINEWBEASTDODGE
				}
			}
		}
	}
ends

state newbeastscratchstate
	ifcount 20 ifrnd 8
	{
		ifcansee ifpdistl 2048
		{
			ifrnd 128
			{
				ifspritepal 20 ai AINEWBEAST3FLEENEMY
				else ifspritepal 17 ai AINEWBEAST2FLEENEMY
				else ai AINEWBEASTFLEENEMY
			}
			break
		}
		
		ifrnd 80 ai AINEWBEASTTHINK
		else
		{
			ifspritepal 20 ai AINEWBEAST3GETENEMY
			else ifspritepal 17 ai AINEWBEAST2GETENEMY
			else ai AINEWBEASTGETENEMY
		}
	}

	ifactioncount 3
	{
		ifpdistg 1596 { soundonce NEWBEAST_ATTACKMISS ai AINEWBEASTTHINK }
		else ifp palive ifcansee
		{
			state echeckquadtime
			state echeckvampiretime
		
			state miscmeleeangle_check
			ifvarvarg tempc temp ifvarvarl tempc tempb // prevents damage from occuring if Octabrain/Octanine is confused and facing AWAY from the player upclose
			{
				soundonce NEWBEAST_ATTACK
				ifspritepal 20
				{
					setvar MELEEDAMAGE 165
					randvar MELEEDAMAGEVAR 82
				}
				else
				ifspritepal 17
				{
					setvar MELEEDAMAGE 55
					randvar MELEEDAMAGEVAR 27
				}
				else
				{
					setvar MELEEDAMAGE 22
					randvar MELEEDAMAGEVAR 11
				}
				state meleerandomdmg
				ifp palive state getmeleedmg2
		
				ifvarg INVULNTIME 0 state invulnflash 
				else ifvarand CHEATBITFIELD? 32 state invulnflash 
				else ifvarl MELEEDAMAGE 1 state nullflash
				else
				{
					ifp palive
					{
						getactorvar[PLAYERID].VEHICLEID tempvehicleid
						ifvare tempvehicleid -1
						{
							ifvare CHARACTERSELECTED? 8 ifvare HAVEENERGYSHIELD? 1 ifvarl PLAYERDAMAGE 1 nullop
							else
							{
								ifvare CHARACTERSELECTED? 4
								{ 
									ifvarand PLAYERSTATUS? 256
									{
										ifrnd 13 state adddimness
									}
									else
									{
										ifrnd 64 state adddimness
									}
								}
								else
								ifvare CHARACTERSELECTED? 15
								{
									ifrnd 32 state adddimness
								}
								else
								{
									ifrnd 64 state adddimness
								}
							}
						}
					}
				}
			}
			else
			{
				soundonce NEWBEAST_ATTACKMISS
			}
			resetactioncount
			resetcount
		}
	}
	// else ifcount 15 nullop
	// else ifcount 14 nullop
ends

state checknewbeasthit
	ifvare ACTORINVULNTIME 0 ifvarg ACTORLASTDAMAGE 0 spawn BLOOD
	ifdead
	{
		ifvare ACTORDEAD? 0
		{
			setvar ACTORHP 0
			ifwasweapon FREEZEBLAST
			{
				state freezeup
				state frosty
				spritepal 1
				move 0
				action ANEWBEASTFROZEN
				strength 0
				break
			}
	
			ifvare EXPANDING? 0
			{
				ifspritepal 9 nullop else { state drop_health state drop_artifacts ifvarand ACTORFLAGS 512 { ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } ifrnd 192 { state drop_health state drop_artifacts } } }
				state resetenemytimers
				state newbeastawards
				setvar TEMPVAR 0
				state expmulti
				state exp_given
				state addtokillamounts state check_a_characters_kills
			}
	
			sound NEWBEAST_DYING
			ifwasweapon GROWSPARK
			{
				getactor[THISACTOR].cstat TEMP
				ifvare EXPANDING? 0
				{
					state expanding
					cstat 0
					sound ACTOR_GROWING
					ai AINEWBEASTGROW
				}
				ifvarn EXPANDING? 0 cstat 0
				getactor[THISACTOR].cstat TEMP2
				break
			}
			ifwasweapon RPG state lizmanexplode
			else ifwasweapon RPG state lizmanexplode
			else ifwasweapon OCTANINE_RPG state lizmanexplode
			else ifwasweapon GENERAL_RPG state lizmanexplode
			else ifwasweapon COMMANDER_RPG state lizmanexplode
			else ifwasweapon LEADER_RPG state lizmanexplode
			else ifwasweapon BAALO_RPG state lizmanexplode
			else ifwasweapon GATEMISSILE_MAIN state lizmanexplode
			else ifwasweapon GATEMISSILE_SPLIT state lizmanexplode
			else ifwasweapon STROKEMISSILE_MAIN state lizmanexplode
			else ifwasweapon STROKEMISSILE_SPLIT state lizmanexplode
			else ifwasweapon RADIUSEXPLOSION state lizmanexplode
			else
			{
				state rf
				ai AINEWBEASTDYING
				// ifrnd 64 { espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34 }
			}
			setvar ACTORDEAD? 1
		}
	}
	else
	{
		/*
		//The alien is immune to the shrinker
		ifwasweapon SHRINKSPARK
		{
				setvar SHRUNK? 1
				sound ACTOR_SHRINKING
				ai AINEWBEASTSHRUNK
				break
		}
		*/
		ifvarl ACTORINVULNTIME 1
		{
			ifvarg ACTORLASTDAMAGE 0
			{    
				sound NEWBEAST_PAIN
				ifwasweapon GROWSPARK sound EXPANDERHIT
	
				state random_wall_jibs
				ifrnd 32 ai AINEWBEASTFLINTCH
				else
				{
					ifspritepal 20
					{
						ifrnd 112
						{
								ifvarand ACTORSTATUS? 16
								{
									ifpdistg 14000
									{
										ifp palive
										{
											ifcansee ai AINEWBEASTSHOOT
										}
									}
								}
								else
								{
									ifpdistg 3500
									{
										ifp palive
										{
											ifcansee ai AINEWBEASTSHOOT
										}
									}
								}
						}
					}
					else
					ifspritepal 17
					{
						ifrnd 60
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistg 14000 ifp palive ifcansee ai AINEWBEASTSHOOT
							}
							else
							{
								ifpdistg 3500 ifp palive ifcansee ai AINEWBEASTSHOOT
							}
						}
					}
					else
					{
						ifrnd 32
						{
							ifvarand ACTORSTATUS? 16
							{
								ifpdistg 14000 ifp palive ifcansee ai AINEWBEASTSHOOT
							}
							else
							{
								ifpdistg 3500 ifp palive ifcansee ai AINEWBEASTSHOOT
							}
						}
					}
				}
			}
			else
			{
				ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
		else
		{
			ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
			ifwasweapon SHOTGUN spawn SMALLSMOKE
			ifwasweapon CHAINGUN spawn SMALLSMOKE      
		}
	}
ends

state newbeastexplode
	sound SQUISHED
	// OFF-LIMITS
	setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
	// END OFF-LIMITS
	guts LIZMANHEAD1 1
	ifrnd 128 guts LIZMANLEG1 1
	ifrnd 128 guts LIZMANLEG1 1
	ifrnd 128 guts LIZMANARM1 1
	ifrnd 128 guts LIZMANARM1 1
	guts JIBS2 1
	guts JIBS3 2
	guts JIBS4 3
	guts JIBS5 2
	guts JIBS6 3
	ifrnd 128 { guts JIBS1 1 { espawn NEWBLOODPOOL setactor[RETURN].pal 22 setactor[RETURN].cstat 34 } } // a badly drawn spine
	state jib_sounds
	killit
ends

state newbeastjumpstate
	ifaction ANEWBEASTFALL
	{
		iffloordistl 16
		{
			ifspritepal 20 ai AINEWBEAST3GETENEMY
			else ifspritepal 17 ai AINEWBEAST2GETENEMY
			else ai AINEWBEASTGETENEMY
		}
	}
	else
	{
		ifcount 32 action ANEWBEASTFALL
	}
ends

state newbeastdyingstate
	ifaction ANEWBEASTLYINGDEAD
	{
		ifvare MONSTERSEXPLODE 1
		{
			ifvare oldskoolmode 0 state newbeastexplode
		}    
		getactor[THISACTOR].cstat TEMP 
		ifvarn TEMP 0 setactor[THISACTOR].cstat 0
		strength 0
		ifhitweapon
		{
			ifwasweapon RADIUSEXPLOSION state newbeastexplode
		}
		
		ifcount RESPAWNACTORTIME
		{
			ifrespawn
			{
				spawn TRANSPORTERSTAR
				cstat 257
				strength 1
				setvar ACTORDEAD? 0
				setvar SKILLSET? 0
				state setnewbeasthealth
				ifvarn SKILLSET? -1 { state checkbosslifemeters setvar SKILLSET? -1 }
				ai AINEWBEASTGETENEMY
			}
		}
	}
	else
	ifai AINEWBEASTDYING ifactioncount 7
	{
		iffloordistl 8
			sound THUD
		move NEWBEASTSTOP
		action ANEWBEASTLYINGDEAD
	}
ends

state newbeastdodgestate
	ifcount 13
	{
		ifspritepal 20 ai AINEWBEAST3GETENEMY
		else ifspritepal 17 ai AINEWBEAST2GETENEMY
		else ai AINEWBEASTGETENEMY
	}
ends

useractor enemystayput NEWBEASTSTAYPUT NEWBEASTSTRENGTH 
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	state setnewbeasthealth 
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	ai AINEWBEASTGETENEMY 
	ifspritepal 20 ai AINEWBEAST3GETENEMY
	else ifspritepal 17 ai AINEWBEAST2GETENEMY
	else ai AINEWBEASTGETENEMY
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor NEWBEAST
enda

useractor enemy NEWBEASTJUMP NEWBEASTSTRENGTH 
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state setnewbeasthealth 
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control } 
	ifspritepal 20 ai AINEWBEAST3JUMPENEMY 
	else ifspritepal 17 ai AINEWBEAST2JUMPENEMY 
	else ai AINEWBEASTJUMPENEMY 
	cstator 257
	ifvarl ACTORHP 1 { setvar ACTORHP 0 setactor[THISACTOR].extra 0 getactorvar[THISACTOR].GENERALDAMAGE temp ifvarg temp 32000 setactor[THISACTOR].htextra 10 else setactor[THISACTOR].htextra GENERALDAMAGE }
	cactor NEWBEAST 
enda

state newbeastcode
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	ifinwater ifrnd 1 { spawn WATERBUBBLE state bubblesounds }
	
	getactor[THISACTOR].cstat temp
	ifvarand temp 1 nullop
	else
	{
		addvar temp 1
		setactor[THISACTOR].cstat temp
	}
	getactor[THISACTOR].cstat temp
	ifvarand temp 256 nullop
	else
	{
		addvar temp 256
		setactor[THISACTOR].cstat temp
	}
	
	state enemy_underwater-space
	state checksquished
	ifai 0
	{
		state setnewbeasthealth
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
		cstator 257
		ifspritepal 20 ai AINEWBEAST3GETENEMY
		else ifspritepal 17 ai AINEWBEAST2GETENEMY
		else ai AINEWBEASTGETENEMY
	}
	else
	ifaction ANEWBEASTLYINGDEAD
	{
		ifvare mainmenu 0 fall
		state newbeastdyingstate
		break
	}
	else
	ifaction ANEWBEASTFROZEN
	{
		state actorcheck_frozentimer
		ifvarl FROZENTIMER 1 // ifcount THAWTIME
		{
			ai AINEWBEASTGETENEMY
			state unfreeze
		}
		else
		{
			ifvarl FROZENTIMER 1 //  ifcount FROZENDRIPTIME
			{
				ifactioncount 26
				{
					spawn WATERDRIP
					resetactioncount
				}
			}
		}
	 
		ifhitweapon
		{
			ifwasweapon FREEZEBLAST
			{
				strength 0
				state freezeblast_frozen-actor
				break
			}
	 
			state newbeastawards
			setvar TEMPVAR 0
			state expmulti
			state exp_given
			state addtokillamounts state check_a_characters_kills
	 
			ifrnd 84 { espawn NEWBLOODPOOL setactor[RETURN].cstat 34 setactor[RETURN].pal 1 }
			lotsofglass 30
			state frozenactor-breakcode
			killit
		}
		ifp pfacing ifpdistl FROZENQUICKKICKDIST pkick
		break
	}
	else
	ifai AINEWBEASTJUMPENEMY
		state newbeastjumpstate
	else
	ifai AINEWBEAST2JUMPENEMY
		state newbeastjumpstate
	else
	ifai AINEWBEAST3JUMPENEMY
		state newbeastjumpstate
	else
	{
		ifvare mainmenu 0 fall
		ifai AINEWBEASTGETENEMY
			state newbeastseekstate
		else
		ifai AINEWBEAST2GETENEMY
			state newbeastseekstate
		else
		ifai AINEWBEAST3GETENEMY
			state newbeastseekstate
		else
		ifai AINEWBEASTCHARGEENEMY
			state newbeastseekstate
		else
		ifai AINEWBEAST2CHARGEENEMY
			state newbeastseekstate
		else
		ifai AINEWBEAST3CHARGEENEMY
			state newbeastseekstate
		else
		ifai AINEWBEASTFLINTCH
		{
		 ifcount 8
				ai AINEWBEASTGETENEMY
		}
		else
		ifai AINEWBEASTDODGE
			state newbeastdodgestate
		else
		ifai AINEWBEAST2DODGE
			state newbeastdodgestate
		else
		ifai AINEWBEAST3DODGE
			state newbeastdodgestate
		else
		ifai AINEWBEASTSCRATCHENEMY
			state newbeastscratchstate
		else
		ifai AINEWBEASTFLEENEMY
			state newbeastfleestate
		else
		ifai AINEWBEAST2FLEENEMY
			state newbeastfleestate
		else
		ifai AINEWBEAST3FLEENEMY
			state newbeastfleestate
		else
		ifai AINEWBEASTTHINK
			state newbeastthinkstate
		/*
		else
		ifai AINEWBEASTSHRUNK
			state newbeastshrunkstate
		*/
		else
		ifai AINEWBEASTGROW
			state genericgrowcode
		else
		ifai AINEWBEASTDYING
			state newbeastdyingstate
		else
		ifai AINEWBEASTSHOOT
		{
			ifvarand ACTORSTATUS? 16
			{
				ifpdistl 2048
				{ 
					ifp pshrunk ai AINEWBEASTGETENEMY
					else ifcount 26 ai AINEWBEASTGETENEMY
					else ifcount 25
					{ 
						ifspritepal 20 
						{
							setvar HEALTYPE 2 // "Heal Life [Greater]"
							findnearactorz BOSS4 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz BOSS2 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz BOSS3 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz BOSS1 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz SCORPIONTANK 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz TANK 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz COMMANDER 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz NEWBEAST 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz OCTABRAIN 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz DRONE 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz LIZMAN 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz PIGCOP 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz LIZTROOP 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz ROTATEGUN 14336 14336 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz SHARK 14336 14336 HEALSEEK state healdetectifdead
	 
							ifvarn HEALSEEK -1
							{
								ifvarg HEALSEEKRATIO -1 ifvarl HEALSEEKRATIO 334
								{
									ifrnd 224 state newbeast_20heal else state firezapper3_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 333 ifvarl HEALSEEKRATIO 667
								{
									ifrnd 192 state newbeast_20heal else state firezapper3_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 666 ifvarl HEALSEEKRATIO 1000
								{
									ifrnd 160 state newbeast_20heal else state firezapper3_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 999 ifvarl HEALSEEKRATIO 1333
								{
									ifrnd 112 state newbeast_20heal else state firezapper3_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 1332 ifvarl HEALSEEKRATIO 1668
								{
									ifrnd 64 state newbeast_20heal else state firezapper3_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 1667 state firezapper3_angleeffect 
							}
							else { state firezapper3_angleeffect }
							setvar HEALTYPE -1 // Clear the 'Healing Type'
						}
						else
						ifspritepal 17
						{
							setvar HEALTYPE 1 // "Heal Life [Lesser]"
							findnearactorz BOSS4 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz BOSS2 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz BOSS3 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz BOSS1 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz SCORPIONTANK 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz TANK 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz COMMANDER 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz NEWBEAST 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz OCTABRAIN 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz DRONE 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz LIZMAN 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz PIGCOP 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz LIZTROOP 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz ROTATEGUN 10752 10752 HEALSEEK state healdetectifdead
							ifvare HEALSEEK -1 findnearactorz SHARK 10752 10752 HEALSEEK state healdetectifdead
	 
							ifvarn HEALSEEK -1
							{
								ifvarg HEALSEEKRATIO -1 ifvarl HEALSEEKRATIO 251
								{
									ifrnd 224 state newbeast_17heal else state firezapper1_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 250 ifvarl HEALSEEKRATIO 501
								{
									ifrnd 192 state newbeast_17heal else state firezapper1_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 500 ifvarl HEALSEEKRATIO 751
								{
									ifrnd 160 state newbeast_17heal else state firezapper1_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 750 ifvarl HEALSEEKRATIO 1001
								{
									ifrnd 112 state newbeast_17heal else state firezapper1_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 1001 ifvarl HEALSEEKRATIO 1333
								{
									ifrnd 64 state newbeast_17heal else state firezapper1_angleeffect
								}
								else
								ifvarg HEALSEEKRATIO 1332 state firezapper1_angleeffect 
							}
							else { state firezapper1_angleeffect }
							setvar HEALTYPE -1 // Clear the 'Healing Type'
						}
						else ifspritepal 9 { sound SHRINKER_FIRE shoot SHRINKER }
						else { state firezapper2_angleeffect }
					}
					else ifcount 24
					{
						ifvarand ACTORSTATUS? 16 nullop
						else
						{
							ifvarand ACTORSTATUS? 128 nullop
							else
							{
								findnearsprite APLAYER 32768 TEMP 
								ifvarn TEMP -1 
								{
									getactor[TEMP].x mx
									getactor[TEMP].y my
									getactor[THISACTOR].x x 
									getactor[THISACTOR].y y
									subvarvar mx x
									subvarvar my y
									getangle angvar mx my
									setactor[THISACTOR].ang angvar
								} 
							}
						}
					} 
					else
					{
						ifcount 5 nullop
						else ifcount 4 sound NEWBEAST_SPIT
					}
				}
				else ai AINEWBEASTGETENEMY
			}
			else
			{
				ifp pshrunk ai AINEWBEASTGETENEMY
				else ifcount 26 ai AINEWBEASTGETENEMY
				else ifcount 25
				{ 
					ifspritepal 20 
					{
						setvar HEALTYPE 2 // "Heal Life [Greater]"
						findnearactorz BOSS4 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz BOSS2 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz BOSS3 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz BOSS1 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz SCORPIONTANK 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz TANK 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz COMMANDER 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz NEWBEAST 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz OCTABRAIN 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz DRONE 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz LIZMAN 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz PIGCOP 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz LIZTROOP 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz ROTATEGUN 14336 14336 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz SHARK 14336 14336 HEALSEEK state healdetectifdead
	 
						ifvarn HEALSEEK -1
						{
							ifvarg HEALSEEKRATIO -1 ifvarl HEALSEEKRATIO 334
							{
								ifrnd 224 state newbeast_20heal else state firezapper3_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 333 ifvarl HEALSEEKRATIO 667
							{
								ifrnd 192 state newbeast_20heal else state firezapper3_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 666 ifvarl HEALSEEKRATIO 1000
							{
								ifrnd 160 state newbeast_20heal else state firezapper3_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 999 ifvarl HEALSEEKRATIO 1333
							{
								ifrnd 112 state newbeast_20heal else state firezapper3_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 1332 ifvarl HEALSEEKRATIO 1668
							{
								ifrnd 64 state newbeast_20heal else state firezapper3_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 1667 state firezapper3_angleeffect 
						}
						else { state firezapper3_angleeffect }
						setvar HEALTYPE -1 // Clear the 'Healing Type'
					}
					else
					ifspritepal 17
					{
						setvar HEALTYPE 1 // "Heal Life [Lesser]"
						findnearactorz BOSS4 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz BOSS2 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz BOSS3 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz BOSS1 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz SCORPIONTANK 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz TANK 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz COMMANDER 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz NEWBEAST 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz OCTABRAIN 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz DRONE 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz LIZMAN 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz PIGCOP 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz LIZTROOP 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz ROTATEGUN 10752 10752 HEALSEEK state healdetectifdead
						ifvare HEALSEEK -1 findnearactorz SHARK 10752 10752 HEALSEEK state healdetectifdead
	 
						ifvarn HEALSEEK -1
						{
							ifvarg HEALSEEKRATIO -1 ifvarl HEALSEEKRATIO 251
							{
								ifrnd 224 state newbeast_17heal else state firezapper1_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 250 ifvarl HEALSEEKRATIO 501
							{
								ifrnd 192 state newbeast_17heal else state firezapper1_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 500 ifvarl HEALSEEKRATIO 751
							{
								ifrnd 160 state newbeast_17heal else state firezapper1_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 750 ifvarl HEALSEEKRATIO 1001
							{
								ifrnd 112 state newbeast_17heal else state firezapper1_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 1001 ifvarl HEALSEEKRATIO 1333
							{
								ifrnd 64 state newbeast_17heal else state firezapper1_angleeffect
							}
							else
							ifvarg HEALSEEKRATIO 1332 state firezapper1_angleeffect 
						}
						else { state firezapper1_angleeffect }
						setvar HEALTYPE -1 // Clear the 'Healing Type'
					}
					else ifspritepal 9 { sound SHRINKER_FIRE shoot SHRINKER }
					else { state firezapper2_angleeffect }
				}
				else ifcount 24
				{
					ifvarand ACTORSTATUS? 16 nullop
					else
					{
						ifvarand ACTORSTATUS? 128 nullop
						else
						{
							findnearsprite APLAYER 32768 TEMP 
							ifvarn TEMP -1 
							{
								getactor[TEMP].x mx
								getactor[TEMP].y my
								getactor[THISACTOR].x x 
								getactor[THISACTOR].y y
								subvarvar mx x
								subvarvar my y
								getangle angvar mx my
								setactor[THISACTOR].ang angvar
							} 
						}
					}
				} 
				else
				{
					ifcount 5 nullop
					else ifcount 4 sound NEWBEAST_SPIT
				}
			}
		}
	}
	
	ifai AINEWBEASTGETENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AINEWBEAST2GETENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AINEWBEAST3GETENEMY { setvar WALKSNDAI 1 state stepsoundstuff_actor }
	else ifai AINEWBEASTCHARGEENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AINEWBEAST2CHARGEENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AINEWBEAST2CHARGEENEMY { setvar WALKSNDAI 2 state stepsoundstuff_actor }
	else ifai AINEWBEASTFLEENEMY { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AINEWBEAST2FLEENEMY { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AINEWBEAST3FLEENEMY { setvar WALKSNDAI 3 state stepsoundstuff_actor }
	else ifai AINEWBEASTDODGE { setvar WALKSNDAI 4 state stepsoundstuff_actor }
	else ifai AINEWBEAST2DODGE { setvar WALKSNDAI 4 state stepsoundstuff_actor }
	else ifai AINEWBEAST3DODGE { setvar WALKSNDAI 4 state stepsoundstuff_actor }
	else setvar WALKSNDAI 0
	
	ifhitweapon
		state checknewbeasthit
ends

state getnewbeastspeeds
	ifmove NEWBEASTWALKVEL setvar ACTORSPEED 182
	else ifmove NEWBEASTRUNVEL setvar ACTORSPEED 256
	else ifmove NEWBEASTJUMPVEL setvar ACTORSPEED 264
	else ifmove NEWBEAST2WALKVEL setvar ACTORSPEED 242
	else ifmove NEWBEAST2RUNVEL setvar ACTORSPEED 340
	else ifmove NEWBEAST2JUMPVEL setvar ACTORSPEED 351
	else ifmove NEWBEAST3WALKVEL setvar ACTORSPEED 302
	else ifmove NEWBEAST3RUNVEL setvar ACTORSPEED 425
	else ifmove NEWBEAST3JUMPVEL setvar ACTORSPEED 438
	else ifmove NEWBEASTSTOP setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	
		state slipperycode_actor getactor[THISACTOR].xvel actor_oposxv getactor[THISACTOR].yvel actor_oposyv
	}
ends

useractor enemy NEWBEAST NEWBEASTSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	state freezecode_actor
	state healingsector_actor
	state setnewbeasthealth
	ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state newbeastseekitem
	ifvare mainmenu 0 fall
	ifaction 0
	{
		state setnewbeasthealth
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
		cstator 257
		ifspritepal 20 ai AINEWBEAST3DODGE
		else ifspritepal 17 ai AINEWBEAST2DODGE
		else ai AINEWBEASTDODGE
	}
	ifaction ANEWBEASTFROZEN
		state newbeastcode
	else
	{
		state newbeastcode
		ifaction ANEWBEASTFROZEN
			break
	}
	
	state getnewbeastspeeds
enda

// THE RETURN OF OUR DEAREST FRIEND, THE SCORPION TANK :P

action SCORPIONTANK_ANIMATIONS  0     7  1  1  4
action SCORPIONTANKSPIN         0     1  7  1  4
action SCORPIONTANKSHOOTING     0     1  7  1  4
action SCORPIONTANKSHOOT        3484  2  7  1  4
action SCORPIONTANKWAIT         0     1  7  1  1
action SCORPIONTANKDESTRUCT     0     1  7  1  1
action SCORPIONTANKDEAD         0     1  7  1  1

move SCORPIONTANKFORWARD 100
move SCORPIONTANKFORWARDGETITEM 225
move SCORPIONTANKFORWARDCHARGE 350
move SCORPIONTANKSTOP

state setscorpiontankhealth
	ifvarn SKILLSET? 0 ifvarn SKILLSET? -1
	{
		state rankstarbeta
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
	
	ifvare SKILLSET? 0
	{
		state enemytyperandomizer
		state cstat2048toeliteflag
		state rankstarbeta
		ifspritepal 9 // Palette 9 is 'Old School' (No abnormal stat calculations)
		{
			sizeat 60 60
			setvar ACTORHP SCORPIONTANKSTRENGTH
			setvar ACTORMAXAIRTIME SCORPIONTANKAIRTIME
			setvar ACTORAIRTIME SCORPIONTANKAIRTIME
			setvar ACTORMAXHP SCORPIONTANKSTRENGTH
		}
		else
		{
			sizeat 60 60
			setvar ACTORHP SCORPIONTANKSTRENGTH
			setvar ACTORMAXAIRTIME SCORPIONTANKAIRTIME
			setvar ACTORAIRTIME SCORPIONTANKAIRTIME
			setvar ACTORATTACK SCORPIONTANKBASEATTACK
			setvar ACTORDEFENSE SCORPIONTANKBASEDEFENSE
			setvar ACTORMAXAP SCORPIONTANKSTRENGTH
			setvar ACTORMAXFALLRESIST SCORPIONTANKFALLRESIST
			setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
			setvar ACTORCRITICALHITCHANCE SCORPIONTANKCRITCHANCE
			setvar ACTORSURVIVALVALUE SCORPIONTANKSURVIVALCHANCE
			state newenemystatcalc
		}
		setvarvar ARRAYPOSITION THISACTOR
		state addtomaxkills
		state checkbosslifemeters state getenemyid setvar SKILLSET? -1
	}
ends

state scorpiontankseekitem
	state accquireenemystats
	state checkfallcounter_nonplayer state enemyfloorhurt
	
	ifvare mainmenu 0
	{
		ifspritepal 9 nullop
		else
		{
			ifvare CLOAKED? 1 nullop
			else
			{
				ifvarg ACTORHP 0
				{
					state actorseekingitem
					ifvarn ITEMTARGET -1
					{
						state enemyitemzsetup1
						ifvare CANSEEITEM? 1 
						{
							state enemyitemzsetup2
							ifmove SCORPIONTANKFORWARD nullop else move SCORPIONTANKFORWARD
						}
						else setvar ITEMTARGET -1 
					}
				}
			}
		}
	}
ends

state getscorpiontankspeeds
	ifmove SCORPIONTANKFORWARD setvar ACTORSPEED 100
	else ifmove SCORPIONTANKFORWARDGETITEM setvar ACTORSPEED 225
	else ifmove SCORPIONTANKFORWARDCHARGE setvar ACTORSPEED 350
	else ifmove SCORPIONTANKSTOP setvar ACTORSPEED 0
	
	ifvarn ACTORSPEED 0
	{
		setvarvar TEMPVAR4 ACTORLEVEL
		divvar TEMPVAR4 10 // 2
		addvar TEMPVAR4 100
		mulvarvar ACTORSPEED TEMPVAR4
		divvar ACTORSPEED 100
	
		state miscspeedchecks-actors
		setactor[THISACTOR].xvel ACTORSPEED
	}
ends

useractor enemy SCORPIONTANK SCORPIONTANKSTRENGTH
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	ifvare mainmenu 0 fall
	state actorproperangle
	state enemymaxhpcountdown
	state enemy_general_stuff
	// state freezecode_actor
	state healingsector_actor
	getactor[THISACTOR].htowner temp ifvarvarn temp THISACTOR { getactor[THISACTOR].htextra temp ifvarg temp -1 state status_attack_damage_control }
	state scorpiontankseekitem
	
	ifvare SKILLSET? -1 state rankstarbeta // tries to regenerate any attached-objects not spawned or that vanish prematurely
	
	getactor[THISACTOR].cstat temp
	ifvarand temp 1 nullop
	else
	{
		addvar temp 1
		setactor[THISACTOR].cstat temp
	}
	getactor[THISACTOR].cstat temp
	ifvarand temp 256 nullop
	else
	{
		addvar temp 256
		setactor[THISACTOR].cstat temp
	}
	
	ifaction 0
	{
		state setscorpiontankhealth
		ifvarn SKILLSET? -1 { state checkbosslifemeters state getenemyid setvar SKILLSET? -1 }
		sizeat 60 60
		action SCORPIONTANKWAIT
		cstat 257
		clipdist 100
	}
	else
	ifaction SCORPIONTANKSPIN
	{
		state enemy_underwater-space
		soundonce TANK_ROAM
	 
		ifvare ITEMTARGET -1
		{
			ifactioncount 20
			{
				ifrnd 16 ifcansee ifcanshoottarget
				{
					ifvarl SKILLLEVEL 5 move SCORPIONTANKSTOP geth else move SCORPIONTANKFORWARD seekplayer
					action SCORPIONTANKSHOOTING
					ifvarl SKILLLEVEL 5 stopsound TANK_ROAM
				}
			}
		}
	
		ifrnd 16
			move SCORPIONTANKFORWARD seekplayer
	}
	else 
	ifaction SCORPIONTANKSHOOTING
	{
		state enemy_underwater-space
		ifactioncount 22
		{
			ifpdistg 6192
			{
				state echeckquadtime
				state echeckvampiretime
				sound BOS1_ATTACK2
				eshoot RPG
			}
			resetcount
			move 0 action SCORPIONTANKWAIT
		}
		else
		ifactioncount 11
		{
			ifcansee
			{
				ifpdistl 16384
				{
					ifpdistl 8192
					{
						ifrnd 128
						{
							move SCORPIONTANKSTOP faceplayer
							state echeckquadtime
							state echeckvampiretime
							ifspritepal 24 
							{ 
								sound PRED_ATTACK 
								sound PRED_ATTACK 
								sound PRED_ATTACK 
								sound PRED_ATTACK 
								sound RPG_SHOOT 
								sound RPG_SHOOT 
								sound RPG_SHOOT 
								state firezapper3_angleeffect 
								shoot FIRELASER 
								shoot FIRELASER 
								shoot FIRELASER 
								state threerockets
							}
							else
							{
								sound PRED_ATTACK
								shoot FIRELASER
							}
						}
					}
					else
					{
						ifrnd 128
						{
							move SCORPIONTANKSTOP faceplayer
							state echeckquadtime
							state echeckvampiretime
							ifspritepal 24 
							{ 
								sound PRED_ATTACK
								sound PRED_ATTACK
								sound PRED_ATTACK
								sound PRED_ATTACK
								sound RPG_SHOOT
								sound RPG_SHOOT
								sound RPG_SHOOT
								state firezapper3_angleeffect
								state firezapper1_angleeffect
								state firezapper1_angleeffect
								state firezapper1_angleeffect
								state threerockets
							}
							else
							{
								sound PRED_ATTACK
								state firezapper1_angleeffect
							}
						}
					}
				}
			}
			else
			{
				move SCORPIONTANKFORWARD seekplayer
				action SCORPIONTANKSPIN
			}
		}
		
		ifvarl SKILLLEVEL 5
		{
			ifrnd 16
			{
				stopsound TANK_ROAM
				move SCORPIONTANKSTOP faceplayerslow
			}
		}
	}
	else
	ifaction SCORPIONTANKWAIT
	{    
		state enemy_underwater-space
		ifactioncount 32
		{
			move SCORPIONTANKFORWARD seekplayer
			action SCORPIONTANKSPIN
		}
	}
	else
	ifaction SCORPIONTANKDEAD
	{
		ifspritepal 9 nullop
		else
		{
			randvar RANKPOINTSTEMP SCORPIONTANKRANKPOINTSRAND 
			addvar RANKPOINTSTEMP SCORPIONTANKRANKPOINTSSOLID 
			randvar EXPPTSTEMP SCORPIONTANKEXPERIENCERAND
			addvar EXPPTSTEMP SCORPIONTANKEXPERIENCE
		}
		setvar TEMPVAR 0
		state expmulti
		state exp_given
		state addtokillamounts state check_a_characters_kills
		setvar TEMP 6144
		setvar TEMP2 TOUGH
		setvar TEMP3 TOUGH
		setvar TEMP4 TOUGH
		setvar TEMP5 TOUGH
		hitradiusvar TEMP TEMP2 TEMP3 TEMP4 TEMP5
		sound LASERTRIP_EXPLODE
		debris SCRAP1 15
		spawn EXPLOSION2
		
		ifrnd 128 
		{ 
			getactor[THISACTOR].pal ACTORPAL
			espawn PIGCOP 
			setactor[RETURN].pal ACTORPAL
			state eliteinheritance
		} 
		else 
		{
			ifspritepal 9 nullop
			else
			{
				randvar RANKPOINTSTEMP PIGCOPRANKPOINTSRAND 
				addvar RANKPOINTSTEMP PIGCOPRANKPOINTSSOLID 
				randvar EXPPTSTEMP PIGCOPEXPERIENCERAND
				addvar EXPPTSTEMP PIGCOPEXPERIENCE
				setvar TEMPVAR 0
				state expmulti
				state exp_given
				sound SQUISHED state standard_jibs
			}
		}
		killit
	}
	ifhitweapon
	{
		ifdead
		{
				setvar ACTORHP 0
				action SCORPIONTANKDEAD
		}
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					state sparkstate
					ifrnd 85 sound HITMETAL
					else ifrnd 128 sound HITMETAL2
					else sound HITMETAL3
					debris SCRAP1 1
			
					ifvare ITEMTARGET -1
					{
						ifrnd 192
						{
							ifvarl SKILLLEVEL 5 move SCORPIONTANKSTOP geth else move SCORPIONTANKFORWARD seekplayer
							action SCORPIONTANKSHOOTING
							ifvarl SKILLLEVEL 5 stopsound TANK_ROAM
						}
					}
				}
				else
				{
					ifwasweapon SHRINKSPARK nullop else ifwasweapon SHRINKER nullop else sound NODAMAGE
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE      
				}
			}
			else
			{
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE      
			}
		}
	}
	state getscorpiontankspeeds
enda

//*******************************
//*END OF THE MAIN MONSTERS CODE*
//*******************************

// RANDOM MONEY

useractor notenemy RANDOMCOIN 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 5
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 7 setvar RANDOMVARIABLE 7 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 9 setvar RANDOMVARIABLE 9 } }
	ifvare RANDOMVARIABLE 1 { espawn PENNY state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn NICKEL state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn DIME state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn QUARTER state checkmoneyowner }
	else ifvare RANDOMVARIABLE 5 { espawn HALFDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 6 { espawn SACDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 7 { espawn ONEDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 8 { espawn TWODOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 9 { espawn FIVEDOLLARS state checkmoneyowner }
	state checklisamoney
enda

useractor notenemy RANDOMCOIN_LESSER 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 1
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 3 setvar RANDOMVARIABLE 3 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }
	ifvare RANDOMVARIABLE 1 { espawn PENNY state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn NICKEL state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn DIME state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn QUARTER state checkmoneyowner }
	else ifvare RANDOMVARIABLE 5 { espawn HALFDOLLAR state checkmoneyowner }
	state checklisamoney
enda

useractor notenemy RANDOMCOIN_GREATER 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 1
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 3 setvar RANDOMVARIABLE 3 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }
	ifvare RANDOMVARIABLE 1 { espawn DIME state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn QUARTER state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn HALFDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn SACDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 5 { espawn ONEDOLLAR state checkmoneyowner }
	state checklisamoney
enda

useractor notenemy RANDOMCOIN_GREATEST 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 1
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 3 setvar RANDOMVARIABLE 3 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }
	ifvare RANDOMVARIABLE 1 { espawn HALFDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn SACDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn ONEDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn TWODOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 5 { espawn FIVEDOLLARS state checkmoneyowner }
	state checklisamoney
enda

useractor notenemy RANDOMDOLLAR 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 46
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 } }
	ifvarg RANDOMVARIABLE 46 { ifrnd 32 setvar RANDOMVARIABLE 47 else setvar RANDOMVARIABLE 46 }
	
	ifvare RANDOMVARIABLE 1 { espawn ONEDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn TWODOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn TWODOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn FIVEDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 5 { espawn FIVEDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 6 { espawn NINEDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 7 { espawn TENDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 8 { espawn TWENTYDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 9 { espawn FIFTYDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 10 { espawn EIGHTYDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 11 { espawn ONEHUNDREDDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 12 { espawn FIVEHUNDREDDOLLARS state checkmoneyowner }
	else ifvarg RANDOMVARIABLE 12 ifvarl RANDOMVARIABLE 21 { espawn ONETHOUSANDDOLLARS state checkmoneyowner } // 13-20 (8)
	else ifvarg RANDOMVARIABLE 20 ifvarl RANDOMVARIABLE 29 { espawn FIVETHOUSANDDOLLARS state checkmoneyowner } // 21-28 (8)
	else ifvarg RANDOMVARIABLE 28 ifvarl RANDOMVARIABLE 37 { espawn TENTHOUSANDDOLLARS state checkmoneyowner } // 29-36 (8)
	else ifvarg RANDOMVARIABLE 36 ifvarl RANDOMVARIABLE 45 { espawn ONEHUNDREDTHOUSANDDOLLARS state checkmoneyowner } // 37-44 (8)
	else ifvarg RANDOMVARIABLE 44 ifvarl RANDOMVARIABLE 47 { espawn ONEMILLIONDOLLARS state checkmoneyowner } // 45-46 (2)
	else ifvare RANDOMVARIABLE 47 { espawn ONEBILLIONDOLLARS state checkmoneyowner } // 47 (1)
	state checklisamoney
enda

useractor notenemy RANDOMDOLLAR_LESSER 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 8
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 10 setvar RANDOMVARIABLE 10 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 12 setvar RANDOMVARIABLE 12 } }
	ifvare RANDOMVARIABLE 1 { espawn ONEDOLLAR state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn TWODOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn TWODOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn FIVEDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 5 { espawn FIVEDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 6 { espawn NINEDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 7 { espawn TENDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 8 { espawn TENDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 9 { espawn TWENTYDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 10 { espawn FIFTYDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 11 { espawn EIGHTYDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 12 { espawn ONEHUNDREDDOLLARS state checkmoneyowner }
	state checklisamoney
enda

useractor notenemy RANDOMDOLLAR_GREATER 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 3
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 ifvarg RANDOMVARIABLE 5 setvar RANDOMVARIABLE 5 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 ifvarg RANDOMVARIABLE 7 setvar RANDOMVARIABLE 7 } }
	ifvare RANDOMVARIABLE 1 { espawn FIFTYDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 2 { espawn EIGHTYDOLLARBUNDLE state checkmoneyowner }
	else ifvare RANDOMVARIABLE 3 { espawn ONEHUNDREDDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 4 { espawn FIVEHUNDREDDOLLARS state checkmoneyowner }
	else ifvarg RANDOMVARIABLE 4 ifvarl RANDOMVARIABLE 7 { espawn ONETHOUSANDDOLLARS state checkmoneyowner }
	else ifvare RANDOMVARIABLE 7 { espawn FIVETHOUSANDDOLLARS state checkmoneyowner }
	state checklisamoney
enda

useractor notenemy RANDOMDOLLAR_GREATEST 0
	setactor[THISACTOR].cstat 32768
	
	randvar RANDOMVARIABLE 34
	addvar RANDOMVARIABLE 1
	ifvare CHARACTERSELECTED? 8 { ifvarg LISAMONEYTURNS2 2 { addvar RANDOMVARIABLE 1 } }
	ifvare CHARACTERSELECTED? 8 { ifvare LISAMONEYMAXLEVEL 1 { addvar RANDOMVARIABLE 2 } }
	ifvarg RANDOMVARIABLE 34 { ifrnd 32 setvar RANDOMVARIABLE 35 else setvar RANDOMVARIABLE 34 }
	
	ifvarg RANDOMVARIABLE 0 ifvarl RANDOMVARIABLE 9 { espawn ONETHOUSANDDOLLARS state checkmoneyowner } // 1-8 (8)
	else ifvarg RANDOMVARIABLE 8 ifvarl RANDOMVARIABLE 17 { espawn FIVETHOUSANDDOLLARS state checkmoneyowner } // 9-16 (8)
	else ifvarg RANDOMVARIABLE 16 ifvarl RANDOMVARIABLE 25 { espawn TENTHOUSANDDOLLARS state checkmoneyowner } // 17-24 (8)
	else ifvarg RANDOMVARIABLE 24 ifvarl RANDOMVARIABLE 33 { espawn ONEHUNDREDTHOUSANDDOLLARS state checkmoneyowner } // 25-32 (8)
	else ifvarg RANDOMVARIABLE 32 ifvarl RANDOMVARIABLE 35 { espawn ONEMILLIONDOLLARS state checkmoneyowner } // 33-34 (2)
	else ifvare RANDOMVARIABLE 35 { espawn ONEBILLIONDOLLARS state checkmoneyowner } // 35 (1)
	state checklisamoney
enda

useractor notenemy RANDOMMONEY 0
	setactor[THISACTOR].cstat 32768
	
	ifvare CHARACTERSELECTED? 8
	{
		ifvare LISAMONEYMAXLEVEL 1
		{
			ifrnd 64 { espawn RANDOMCOIN state checkmoneyowner } else { espawn RANDOMDOLLAR state checkmoneyowner }
		}
		else
		{
			ifrnd 128 { espawn RANDOMCOIN state checkmoneyowner } else { espawn RANDOMDOLLAR state checkmoneyowner }
		}
	}
	else
	{
		ifrnd 128 { espawn RANDOMCOIN state checkmoneyowner } else { espawn RANDOMDOLLAR state checkmoneyowner }
	}
	state checklisamoney
enda

useractor notenemy RANDOMMONEY_LESSER 0
	setactor[THISACTOR].cstat 32768
	
	ifvare CHARACTERSELECTED? 8
	{
		ifvare LISAMONEYMAXLEVEL 1
		{
			ifrnd 64 { espawn RANDOMCOIN_LESSER state checkmoneyowner } else { espawn RANDOMDOLLAR_LESSER state checkmoneyowner }
		}
		else
		{
			ifrnd 128 { espawn RANDOMCOIN_LESSER state checkmoneyowner } else { espawn RANDOMDOLLAR_LESSER state checkmoneyowner }
		}
	}
	else
	{
		ifrnd 128 { espawn RANDOMCOIN_LESSER state checkmoneyowner } else { espawn RANDOMDOLLAR_LESSER state checkmoneyowner }
	}
	state checklisamoney
enda

useractor notenemy RANDOMMONEY_GREATER 0
	setactor[THISACTOR].cstat 32768
	
	ifvare CHARACTERSELECTED? 8
	{
		ifvare LISAMONEYMAXLEVEL 1
		{
			ifrnd 64 { espawn RANDOMCOIN_GREATER state checkmoneyowner } else { espawn RANDOMDOLLAR_GREATER state checkmoneyowner }
		}
		else
		{
			ifrnd 128 { espawn RANDOMCOIN_GREATER state checkmoneyowner } else { espawn RANDOMDOLLAR_GREATER state checkmoneyowner }
		}
	}
	else
	{
		ifrnd 128 { espawn RANDOMCOIN_GREATER state checkmoneyowner } else { espawn RANDOMDOLLAR_GREATER state checkmoneyowner }
	}
	state checklisamoney
enda

useractor notenemy RANDOMMONEY_GREATEST 0
	setactor[THISACTOR].cstat 32768
	
	ifvare CHARACTERSELECTED? 8
	{
		ifvare LISAMONEYMAXLEVEL 1
		{
			ifrnd 64 { espawn RANDOMCOIN_GREATEST state checkmoneyowner } else { espawn RANDOMDOLLAR_GREATEST state checkmoneyowner }
		}
		else
		{
			ifrnd 128 { espawn RANDOMCOIN_GREATEST state checkmoneyowner } else { espawn RANDOMDOLLAR_GREATEST state checkmoneyowner }
		}
	}
	else
	{
		ifrnd 128 { espawn RANDOMCOIN_GREATEST state checkmoneyowner } else { espawn RANDOMDOLLAR_GREATEST state checkmoneyowner }
	}
	state checklisamoney
enda

// Pickup Multiplier Indicators

action 2XPICKUP 0
action 4XPICKUP 1
action 8XPICKUP 2

useractor notenemy PICKUPMULTIICON 0
	sleeptime 0
	spriteflags 80 // 84, 80, 16
	state checkattachedobjectstatus
	state itemfullbright
	
	ifvare MULTIICONPARENT -1 { state killattachedobject break }
	ifvarn MULTIICONPARENT -1 { getactor[MULTIICONPARENT].statnum TEMP ifvarand TEMP 1024 { state killattachedobject break } }
	// getactorvar[MULTIICONPARENT].MULTIPLIERITEMCANSEE? TEMP ifvare TEMP 0 { state killattachedobject break }
	ifvarn MULTIICONPARENT -1 getactorvar[MULTIICONPARENT].temph TEMP
	ifvarg TEMP 1
	{
		ifvare TEMP 2 { action 2XPICKUP spritepal 0 }
		else ifvare TEMP 4 { action 4XPICKUP spritepal 22 }
		else ifvare TEMP 8 { action 8XPICKUP spritepal 20 }
		else state killattachedobject
	
		getactor[MULTIICONPARENT].x TESTX 
		getactor[MULTIICONPARENT].y TESTY
		getactor[MULTIICONPARENT].z TESTZ
		getactor[MULTIICONPARENT].xrepeat TESTXREPEAT1 
		getactor[MULTIICONPARENT].yrepeat TESTYREPEAT1 
		getactorvar[MULTIICONPARENT].ACTORSHEIGHT LIFEMETERZ
		mulvarvar LIFEMETERZ TESTYREPEAT1
		mulvar LIFEMETERZ 4
		setvarvar EXTRAZ TESTYREPEAT1
		mulvar EXTRAZ 4
	
		getactor[MULTIICONPARENT].cstat TEMP2
		ifvarand TEMP2 1 subvar TEMP2 1
		ifvarand TEMP2 2 nullop else addvar TEMP2 2
		ifvarand TEMP2 4 subvar TEMP2 4
		ifvarand TEMP2 8 subvar TEMP2 8
		ifvarand TEMP2 16 subvar TEMP2 16
		ifvarand TEMP2 32 subvar TEMP2 32
		ifvarand TEMP2 64 subvar TEMP2 64
		ifvarand TEMP2 128 subvar TEMP2 128
		ifvarand TEMP2 256 subvar TEMP2 256
		ifvarand TEMP2 512 subvar TEMP2 512
		ifvarand TEMP2 1024 subvar TEMP2 1024
		setactor[THISACTOR].cstat TEMP2
		ifvarand TEMP2 8
		{
			mulvar EXTRAZ 8 // 28
			mulvar EXTRAZ -1
			mulvar LIFEMETERZ -1 
		}
		else mulvar EXTRAZ 4 // 24 
	
		subvarvar TESTZ LIFEMETERZ // Subtract from the original Z var
		subvarvar TESTZ EXTRAZ // Subtract from the original Z var
		state itemfullbright
	
		getactor[MULTIICONPARENT].picnum TEMP
		mulvar TESTXREPEAT1 5
		ifvare TEMP PENNY mulvar TESTXREPEAT1 12
		else ifvare TEMP NICKEL mulvar TESTXREPEAT1 12
		else ifvare TEMP DIME mulvar TESTXREPEAT1 12
		else ifvare TEMP QUARTER mulvar TESTXREPEAT1 12
		else ifvare TEMP HALFDOLLAR mulvar TESTXREPEAT1 12
		else ifvare TEMP SACDOLLAR mulvar TESTXREPEAT1 12
		else ifvare TEMP ONEDOLLAR mulvar TESTXREPEAT1 12
		else ifvare TEMP TWODOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP TWODOLLARBUNDLE mulvar TESTXREPEAT1 12
		else ifvare TEMP FIVEDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP FIVEDOLLARBUNDLE mulvar TESTXREPEAT1 12
		else ifvare TEMP NINEDOLLARBUNDLE mulvar TESTXREPEAT1 12
		else ifvare TEMP TENDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP TENDOLLARBUNDLE mulvar TESTXREPEAT1 12
		else ifvare TEMP TWENTYDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP FIFTYDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP EIGHTYDOLLARBUNDLE mulvar TESTXREPEAT1 12
		else ifvare TEMP ONEHUNDREDDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP FIVEHUNDREDDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP ONETHOUSANDDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP FIVETHOUSANDDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP TENTHOUSANDDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP ONEHUNDREDTHOUSANDDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP ONEMILLIONDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP ONEBILLIONDOLLARS mulvar TESTXREPEAT1 12
		else ifvare TEMP ENERGYSHELL mulvar TESTXREPEAT1 4
		else ifvare TEMP ENERGYSHELL_UPGRADED mulvar TESTXREPEAT1 4
		else ifvare TEMP QUADDAMAGE mulvar TESTXREPEAT1 3
		else ifvare TEMP REGENITEM mulvar TESTXREPEAT1 5
		else ifvare TEMP MANTLEBONUS mulvar TESTXREPEAT1 4
		else ifvare TEMP ENERGYCELL_SMALL mulvar TESTXREPEAT1 8
		else ifvare TEMP ENERGYCELL_MEDIUM mulvar TESTXREPEAT1 8
		else ifvare TEMP ENERGYCELL_LARGE mulvar TESTXREPEAT1 8
		else ifvare TEMP CHARMANKH { mulvar TESTXREPEAT1 3 divvar TESTXREPEAT1 4 }
		else ifvare TEMP MIRRORSHIELD { mulvar TESTXREPEAT1 5 divvar TESTXREPEAT1 8 }
		else ifvare TEMP RIOTSHIELD { mulvar TESTXREPEAT1 5 divvar TESTXREPEAT1 4 }
		else ifvare TEMP NYXGLOVEPAIR mulvar TESTXREPEAT1 5
		else ifvare TEMP RABBITSFOOT mulvar TESTXREPEAT1 3
		else ifvare TEMP HAPPYSHOEPAIR mulvar TESTXREPEAT1 5
		else ifvare TEMP STYLESHOEPAIR mulvar TESTXREPEAT1 5
		else ifvare TEMP CHARMSHOEPAIR mulvar TESTXREPEAT1 5
		else ifvare TEMP POWERWRIST { mulvar TESTXREPEAT1 29 divvar TESTXREPEAT1 5 }
		else ifvare TEMP SMALLENERGYDRINK mulvar TESTXREPEAT1 4
		else ifvare TEMP LARGEENERGYDRINK mulvar TESTXREPEAT1 4
		else ifvare TEMP HYPERENERGYDRINK mulvar TESTXREPEAT1 4
		else ifvare TEMP SILKCARNATION mulvar TESTXREPEAT1 3
		else ifvare TEMP RAREPIRATEDOUBLOON mulvar TESTXREPEAT1 3
		else ifvare TEMP FIXEDDICEPAIR mulvar TESTXREPEAT1 3
		else ifvare TEMP MALAKIANGEM mulvar TESTXREPEAT1 3
		else ifvare TEMP SAFELOCKBOX mulvar TESTXREPEAT1 3
		else ifvare TEMP SECRETRECIPE mulvar TESTXREPEAT1 3
		else ifvare TEMP STOCKOWNERSHIP mulvar TESTXREPEAT1 3
		else ifvare TEMP SLURPEEMACHINE mulvar TESTXREPEAT1 2
		else ifvare TEMP TRANSDIMENSIONALSAFE mulvar TESTXREPEAT1 2
		else ifvare TEMP GEMRINGSILVER mulvar TESTXREPEAT1 8
		else ifvare TEMP GEMRINGGOLD mulvar TESTXREPEAT1 8
		else ifvare TEMP HOCKEYMASK mulvar TESTXREPEAT1 6
		else ifvare TEMP GEMSTONECROWN mulvar TESTXREPEAT1 12
		else ifvare TEMP TWILIGHTCAPE mulvar TESTXREPEAT1 3
		else ifvare TEMP SNAKEARMBAND mulvar TESTXREPEAT1 16
		else ifvare TEMP MEDICBAG mulvar TESTXREPEAT1 10
		else ifvare TEMP SERPENTHELMET mulvar TESTXREPEAT1 8
		else ifvare TEMP YINYANGORB mulvar TESTXREPEAT1 4
		else ifvare TEMP MANDALABRACELET mulvar TESTXREPEAT1 8
		else ifvare TEMP AQUALUNG mulvar TESTXREPEAT1 4
		else ifvare TEMP WINTERCLOTHES mulvar TESTXREPEAT1 8
		else ifvare TEMP GREENTANKCAPSULE mulvar TESTXREPEAT1 4
		else ifvare TEMP BLUETANKCAPSULE mulvar TESTXREPEAT1 4
		else ifvare TEMP REDTANKCAPSULE mulvar TESTXREPEAT1 4
		divvar TESTXREPEAT1 4
		setactor[THISACTOR].xrepeat TESTXREPEAT1
		mulvar TESTYREPEAT1 5
		ifvare TEMP PENNY mulvar TESTYREPEAT1 12
		else ifvare TEMP NICKEL mulvar TESTYREPEAT1 12
		else ifvare TEMP DIME mulvar TESTYREPEAT1 12
		else ifvare TEMP QUARTER mulvar TESTYREPEAT1 12
		else ifvare TEMP HALFDOLLAR mulvar TESTYREPEAT1 12
		else ifvare TEMP SACDOLLAR mulvar TESTYREPEAT1 12
		else ifvare TEMP ONEDOLLAR mulvar TESTYREPEAT1 12
		else ifvare TEMP TWODOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP TWODOLLARBUNDLE mulvar TESTYREPEAT1 12
		else ifvare TEMP FIVEDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP FIVEDOLLARBUNDLE mulvar TESTYREPEAT1 12
		else ifvare TEMP NINEDOLLARBUNDLE mulvar TESTYREPEAT1 12
		else ifvare TEMP TENDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP TENDOLLARBUNDLE mulvar TESTYREPEAT1 12
		else ifvare TEMP TWENTYDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP FIFTYDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP EIGHTYDOLLARBUNDLE mulvar TESTYREPEAT1 12
		else ifvare TEMP ONEHUNDREDDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP FIVEHUNDREDDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP ONETHOUSANDDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP FIVETHOUSANDDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP TENTHOUSANDDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP ONEHUNDREDTHOUSANDDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP ONEMILLIONDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP ONEBILLIONDOLLARS mulvar TESTYREPEAT1 12
		else ifvare TEMP ENERGYSHELL mulvar TESTYREPEAT1 4
		else ifvare TEMP ENERGYSHELL_UPGRADED mulvar TESTYREPEAT1 4
		else ifvare TEMP QUADDAMAGE mulvar TESTYREPEAT1 3
		else ifvare TEMP REGENITEM mulvar TESTYREPEAT1 5
		else ifvare TEMP MANTLEBONUS mulvar TESTYREPEAT1 4
		else ifvare TEMP ENERGYCELL_SMALL mulvar TESTYREPEAT1 8
		else ifvare TEMP ENERGYCELL_MEDIUM mulvar TESTYREPEAT1 8
		else ifvare TEMP ENERGYCELL_LARGE mulvar TESTYREPEAT1 8
		else ifvare TEMP CHARMANKH { mulvar TESTYREPEAT1 3 divvar TESTYREPEAT1 4 }
		else ifvare TEMP MIRRORSHIELD { mulvar TESTYREPEAT1 5 divvar TESTYREPEAT1 8 }
		else ifvare TEMP RIOTSHIELD { mulvar TESTYREPEAT1 5 divvar TESTYREPEAT1 4 }
		else ifvare TEMP NYXGLOVEPAIR mulvar TESTYREPEAT1 5
		else ifvare TEMP RABBITSFOOT mulvar TESTYREPEAT1 3
		else ifvare TEMP HAPPYSHOEPAIR mulvar TESTYREPEAT1 5
		else ifvare TEMP STYLESHOEPAIR mulvar TESTYREPEAT1 5
		else ifvare TEMP CHARMSHOEPAIR mulvar TESTYREPEAT1 5
		else ifvare TEMP POWERWRIST { mulvar TESTYREPEAT1 29 divvar TESTYREPEAT1 5 }
		else ifvare TEMP SMALLENERGYDRINK mulvar TESTYREPEAT1 4
		else ifvare TEMP LARGEENERGYDRINK mulvar TESTYREPEAT1 4
		else ifvare TEMP HYPERENERGYDRINK mulvar TESTYREPEAT1 4
		else ifvare TEMP SILKCARNATION mulvar TESTYREPEAT1 3
		else ifvare TEMP RAREPIRATEDOUBLOON mulvar TESTYREPEAT1 3
		else ifvare TEMP FIXEDDICEPAIR mulvar TESTYREPEAT1 3
		else ifvare TEMP MALAKIANGEM mulvar TESTYREPEAT1 3
		else ifvare TEMP SAFELOCKBOX mulvar TESTYREPEAT1 3
		else ifvare TEMP SECRETRECIPE mulvar TESTYREPEAT1 3
		else ifvare TEMP STOCKOWNERSHIP mulvar TESTYREPEAT1 3
		else ifvare TEMP SLURPEEMACHINE mulvar TESTYREPEAT1 2
		else ifvare TEMP TRANSDIMENSIONALSAFE mulvar TESTYREPEAT1 2
		else ifvare TEMP GEMRINGSILVER mulvar TESTYREPEAT1 8
		else ifvare TEMP GEMRINGGOLD mulvar TESTYREPEAT1 8
		else ifvare TEMP HOCKEYMASK mulvar TESTYREPEAT1 6
		else ifvare TEMP GEMSTONECROWN mulvar TESTYREPEAT1 12
		else ifvare TEMP TWILIGHTCAPE mulvar TESTYREPEAT1 3
		else ifvare TEMP SNAKEARMBAND mulvar TESTYREPEAT1 16
		else ifvare TEMP MEDICBAG mulvar TESTYREPEAT1 10
		else ifvare TEMP SERPENTHELMET mulvar TESTYREPEAT1 8
		else ifvare TEMP YINYANGORB mulvar TESTYREPEAT1 4
		else ifvare TEMP MANDALABRACELET mulvar TESTYREPEAT1 8
		else ifvare TEMP AQUALUNG mulvar TESTYREPEAT1 4
		else ifvare TEMP WINTERCLOTHES mulvar TESTYREPEAT1 8
		else ifvare TEMP GREENTANKCAPSULE mulvar TESTYREPEAT1 4
		else ifvare TEMP BLUETANKCAPSULE mulvar TESTYREPEAT1 4
		else ifvare TEMP REDTANKCAPSULE mulvar TESTYREPEAT1 4
		divvar TESTYREPEAT1 4
		setactor[THISACTOR].yrepeat TESTYREPEAT1
	
		updatesectorz TESTX TESTY TESTZ sectnum_sect
		ifvarn sectnum_sect -1
		{
			setactor[THISACTOR].x TESTX
			setactor[THISACTOR].y TESTY 
			setactor[THISACTOR].z TESTZ
			changespritesect THISACTOR sectnum_sect
		}
		else { state killattachedobject break }
	
		getactor[MULTIICONPARENT].shade TEMP2
		setactor[THISACTOR].shade TEMP2
	}
	else state killattachedobject
enda
// End Pickup Multiplier Indicators


action NORMALRANKSTAR 6
action ELITERANKSTAR 7
action NORMALRANKSTAR2 8
action ELITERANKSTAR2 9

useractor notenemy LEVELRANKSTAR 0 
	sleeptime 0
	spriteflags 80
	state checkattachedobjectstatus
	
	ifvarn PARENTID -1 { getactorvar[PARENTID].ACTORFLAGS TEMP }
	
	ifvarand TEMP 512
	{
		ifvarn PARENTID -1 getactor[PARENTID].picnum TEMP2
		ifvare TEMP2 APLAYER
		{
			setvar TEMP 0
			ifvare PLAYEREQUIPSLOTITEM1 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM2 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM3 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM4 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM5 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM6 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM7 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM8 28 addvar TEMP 1
		}
		else
		{
			ifvarn PARENTID -1 getactorvar[PARENTID].ENEMYHASSHIKON? TEMP
		}
		ifvarn TEMP 0 action ELITERANKSTAR2
		else action ELITERANKSTAR // If the monster is supposed to be an elite
	}
	else
	{
		ifvarn PARENTID -1 getactor[PARENTID].picnum TEMP2
		ifvare TEMP2 APLAYER
		{
			setvar TEMP 0
			ifvare PLAYEREQUIPSLOTITEM1 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM2 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM3 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM4 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM5 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM6 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM7 28 addvar TEMP 1
			ifvare PLAYEREQUIPSLOTITEM8 28 addvar TEMP 1
		}
		else
		{
			ifvarn PARENTID -1 getactorvar[PARENTID].ENEMYHASSHIKON? TEMP
		}
		ifvarn TEMP 0 action NORMALRANKSTAR2
		else action NORMALRANKSTAR
	}
	
	ifvare SKILLSET? 0
	{
		getactorvar[THISACTOR].STARPARENT PARENTID
		getactor[PARENTID].picnum ATTACHEDPICNUM
	}
	
	ifvare ATTACHEDPICNUM APLAYER getactorvar[PARENTID].PLAYERLEVEL TEMP else getactorvar[PARENTID].ACTORLEVEL TEMP

	ifvarg TEMP 0
	{
		ifvare SKILLSET? 0 { sizeat 10 10 setvar SKILLSET? 1 }
		// OFF-LIMITS
		getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
		// END OFF-LIMITS
	
		ifvarl TEMP 0 
		{ 
			getactorvar[PARENTID].FROZEN? temp
			ifvare temp 1
			{
				getactor[PARENTID].picnum TEMP
				ifvarn TEMP APLAYER
				{
					// OFF-LIMITS
					getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
					// END OFF-LIMITS
					ifvarl TEMP 0 state killattachedobject
				}
			} 
			else
			{
				getactor[PARENTID].picnum TEMP
				ifvarn TEMP APLAYER state killattachedobject
			}
		}
		else // ifvarg TEMP 0
		{
			ifvare oldskoolmode 0 
			{ 
				ifvare lifebartogglemode 1
				{
					getactor[PARENTID].pal TEMP
					ifvarg TEMP 8 ifvarl TEMP 12 setactor[THISACTOR].cstat 32768
					else
					{
						getactorvar[PARENTID].CLOAKED? TEMP
						ifvare TEMP 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 0 
					} 
				}
				else setactor[THISACTOR].cstat 32768
			}
			else setactor[THISACTOR].cstat 32768
	
			// Get's the Star's Color based on level range
			getactor[PARENTID].picnum temp
			ifvare temp APLAYER
			{
				getactorvar[PLAYERID].VEHICLEID TEMPVAR3
				ifvare TEMPVAR3 -1 getactorvar[PARENTID].PLAYERLEVEL RANKSTARLEVEL else getactorvar[TEMPVAR3].ACTORLEVEL RANKSTARLEVEL
			}
			else getactorvar[PARENTID].ACTORLEVEL RANKSTARLEVEL
	
			ifvarl RANKSTARLEVEL 1 setactor[THISACTOR].cstat 32768
			ifvarg RANKSTARLEVEL 0 ifvarl RANKSTARLEVEL 11 setactor[THISACTOR].pal 0
			ifvarg RANKSTARLEVEL 10 ifvarl RANKSTARLEVEL 21 setactor[THISACTOR].pal 16
			ifvarg RANKSTARLEVEL 20 ifvarl RANKSTARLEVEL 31 setactor[THISACTOR].pal 22
			ifvarg RANKSTARLEVEL 30 ifvarl RANKSTARLEVEL 41 setactor[THISACTOR].pal 14
			ifvarg RANKSTARLEVEL 40 ifvarl RANKSTARLEVEL 51 setactor[THISACTOR].pal 12
			ifvarg RANKSTARLEVEL 50 ifvarl RANKSTARLEVEL 61 setactor[THISACTOR].pal 13
			ifvarg RANKSTARLEVEL 60 ifvarl RANKSTARLEVEL 71 setactor[THISACTOR].pal 23
			ifvarg RANKSTARLEVEL 70 ifvarl RANKSTARLEVEL 81 setactor[THISACTOR].pal 7
			ifvarg RANKSTARLEVEL 80 ifvarl RANKSTARLEVEL 91 setactor[THISACTOR].pal 21
			ifvarg RANKSTARLEVEL 90 ifvarl RANKSTARLEVEL 100 setactor[THISACTOR].pal 10
			ifvare RANKSTARLEVEL 100
			{
				setvar MISCARRAYID 89 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // shade-pulse-timer
				switch MISCARRAYID_AMOUNTTEMP
				case 0 case 1 setactor[THISACTOR].pal 13 break
				case 2 case 3 case 22 case 23 setactor[THISACTOR].pal 12 break
				case 4 case 5 case 20 case 21 setactor[THISACTOR].pal 17 break
				case 6 case 7 case 18 case 19 setactor[THISACTOR].pal 21 break
				case 8 case 9 case 16 case 17 setactor[THISACTOR].pal 15 break
				case 10 case 11 case 14 case 15 setactor[THISACTOR].pal 14 break
				case 12 case 13 setactor[THISACTOR].pal 16 break
				endswitch
			}
	
			ifvarg RANKSTARLEVEL 0
			{
				ifvare oldskoolmode 0
				{
					ifvare lifebartogglemode 1
					{
						getactorvar[PARENTID].CLOAKED? TEMP
						ifvare TEMP 0
						{
							getactor[PARENTID].cstat TEMP
							ifvarand TEMP 32768 setactor[THISACTOR].cstat 514
							else ifvarand TEMP 514 setactor[THISACTOR].cstat 2
							else setactor[THISACTOR].cstat 0
						}
					}
				}
			}
	
			// Code to applying the star to the proper position relevant to the actor owning it.
			getactor[PARENTID].x TESTX 
			getactor[PARENTID].y TESTY
			getactor[PARENTID].z TESTZ
			getactor[PARENTID].xrepeat TESTXREPEAT1 
			getactor[PARENTID].yrepeat TESTYREPEAT1 
			getactorvar[PARENTID].ACTORSHEIGHT LIFEMETERZ
			mulvarvar LIFEMETERZ TESTYREPEAT1
			mulvar LIFEMETERZ 4
			setvarvar EXTRAZ TESTYREPEAT1
			mulvar EXTRAZ 4
			getactor[PARENTID].picnum TEMP
			ifvare TEMP APLAYER 
			{
				getactor[PARENTID].cstat temp
				ifvarand temp 8 
				{ 
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					ifvare TEMPVAR3 -1
					{
						ifvare CHARACTERSELECTED? 6 mulvar EXTRAZ 60   
						else ifvare CHARACTERSELECTED? 9 mulvar EXTRAZ 64
						else mulvar EXTRAZ 16
					}
					else mulvar EXTRAZ 32
	
					mulvar EXTRAZ -1 
					mulvar LIFEMETERZ -1
				} 
				else
				{
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					ifvare TEMPVAR3 -1
					{
						ifvare CHARACTERSELECTED? 6 mulvar EXTRAZ 68    
						else ifvare CHARACTERSELECTED? 9 mulvar EXTRAZ 72
						else mulvar EXTRAZ 24
					}
					else mulvar EXTRAZ 40
				}
			}
			else
			ifvare TEMP NAKED1 // NAKED1 is already "Upside Down"
			{
				getactor[PARENTID].cstat TEMP
				ifvarand TEMP 8 mulvar EXTRAZ 16 
				else
				{
					mulvar EXTRAZ 8
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
			} 
			else
			{
				getactor[PARENTID].cstat temp
				ifvarand temp 8 
				{ 
					mulvar EXTRAZ 8
					mulvar EXTRAZ -1 
					mulvar LIFEMETERZ -1 
				} 
				else mulvar EXTRAZ 16
			}
			subvarvar TESTZ LIFEMETERZ // Subtract from the original Z var
			subvarvar TESTZ EXTRAZ // Subtract from the original Z var
			setvarvar TESTXREPEAT2 TESTXREPEAT1
			divvar TESTXREPEAT2 2
			addvarvar TESTXREPEAT2 TESTXREPEAT1
			state itemfullbright
			getactorvar[PARENTID].ACTORFLAGS TEMP
			divvar TESTXREPEAT1 4
			divvar TESTYREPEAT1 4
			ifvarvare PARENTID PLAYERID addvarvar TESTZ VIEWCAMERAZDIFF
			setactor[THISACTOR].xrepeat TESTXREPEAT1
			setactor[THISACTOR].yrepeat TESTYREPEAT1
	
			getactor[PARENTID].sectnum TEMP3
			ifvarn TEMP3 -1
			{
				setactor[THISACTOR].x TESTX
				setactor[THISACTOR].y TESTY 
				setactor[THISACTOR].z TESTZ
				changespritesect THISACTOR TEMP3
			}
			else { state killattachedobject break }
		}
	}
	else state killattachedobject
enda

action HPMETER0 -51 // 7797-7746 = 52
action HPMETER4 -50 // 7797-7746 = 52
action HPMETER8 -49 // 7797-7746 = 52
action HPMETER12 -48 // 7797-7746 = 52
action HPMETER16 -47 // 7797-7746 = 52
action HPMETER20 -46 // 7797-7746 = 52
action HPMETER24 -45 // 7797-7746 = 52
action HPMETER28 -44 // 7797-7746 = 52
action HPMETER32 -43 // 7797-7746 = 52
action HPMETER36 -42 // 7797-7746 = 52
action HPMETER40 -41 // 7797-7746 = 52
action HPMETER44 -40 // 7797-7746 = 52
action HPMETER48 -39 // 7797-7746 = 52
action HPMETER52 -38 // 7797-7746 = 52
action HPMETER56 -37 // 7797-7746 = 52
action HPMETER60 -36 // 7797-7746 = 52
action HPMETER64 -35 // 7797-7746 = 52
action HPMETER68 -34 // 7797-7746 = 52
action HPMETER72 -33 // 7797-7746 = 52
action HPMETER76 -32 // 7797-7746 = 52
action HPMETER80 -31 // 7797-7746 = 52
action HPMETER84 -30 // 7797-7746 = 52
action HPMETER88 -29 // 7797-7746 = 52
action HPMETER92 -28 // 7797-7746 = 52
action HPMETER96 -27 // 7797-7746 = 52
action HPMETER100 -26 // 7797-7746 = 52
action HPMETER104 -25 // 7797-7746 = 52
action HPMETER108 -24 // 7797-7746 = 52
action HPMETER112 -23 // 7797-7746 = 52
action HPMETER116 -22 // 7797-7746 = 52
action HPMETER120 -21 // 7797-7746 = 52
action HPMETER124 -20 // 7797-7746 = 52
action HPMETER128 -19 // 7797-7746 = 52
action HPMETER132 -18 // 7797-7746 = 52
action HPMETER136 -17 // 7797-7746 = 52
action HPMETER140 -16 // 7797-7746 = 52
action HPMETER144 -15 // 7797-7746 = 52
action HPMETER148 -14 // 7797-7746 = 52
action HPMETER152 -13 // 7797-7746 = 52
action HPMETER156 -12 // 7797-7746 = 52
action HPMETER160 -11 // 7797-7746 = 52
action HPMETER164 -10 // 7797-7746 = 52
action HPMETER168 -9 // 7797-7746 = 52
action HPMETER172 -8 // 7797-7746 = 52
action HPMETER176 -7 // 7797-7746 = 52
action HPMETER180 -6 // 7797-7746 = 52
action HPMETER184 -5 // 7797-7746 = 52
action HPMETER188 -4 // 7797-7746 = 52
action HPMETER192 -3 // 7797-7746 = 52
action HPMETER196 -2 // 7797-7746 = 52
action HPMETER200 -1 // 7797-7776 = 2

useractor notenemy HPLIFEMETER 0
	sleeptime 0
	spriteflags 80 // 84, 80, 16
	state checkattachedobjectstatus
	
	ifvare SKILLSET? 0
	{
		getactorvar[THISACTOR].HPBARPARENT PARENTID
		getactor[PARENTID].picnum ATTACHEDPICNUM
	}
	
	ifvare ATTACHEDPICNUM APLAYER getactorvar[PARENTID].MAXHITPOINTS TEMP else getactorvar[PARENTID].ACTORMAXHP TEMP

	ifvarg TEMP 0
	{
		ifvarl HPBARFLASHTIMER 0 addvar HPBARFLASHTIMER 1 else ifvarg HPBARFLASHTIMER 0 subvar HPBARFLASHTIMER 1
	
		ifvarg HPBARFLASHTIMER -29 ifvarl HPBARFLASHTIMER -24 setvar TEMPVAR5 0
		else ifvarg HPBARFLASHTIMER -25 ifvarl HPBARFLASHTIMER -20 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER -21 ifvarl HPBARFLASHTIMER -16 setvar TEMPVAR5 0
		else ifvarg HPBARFLASHTIMER -17 ifvarl HPBARFLASHTIMER -12 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER -13 ifvarl HPBARFLASHTIMER -8 setvar TEMPVAR5 0
		else ifvarg HPBARFLASHTIMER -9 ifvarl HPBARFLASHTIMER -4 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER -5 ifvarl HPBARFLASHTIMER 0 setvar TEMPVAR5 0
		else ifvare HPBARFLASHTIMER 0 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER 0 ifvarl HPBARFLASHTIMER 5 setvar TEMPVAR5 18
		else ifvarg HPBARFLASHTIMER 4 ifvarl HPBARFLASHTIMER 9 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER 8 ifvarl HPBARFLASHTIMER 13 setvar TEMPVAR5 18
		else ifvarg HPBARFLASHTIMER 12 ifvarl HPBARFLASHTIMER 17 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER 16 ifvarl HPBARFLASHTIMER 21 setvar TEMPVAR5 18
		else ifvarg HPBARFLASHTIMER 20 ifvarl HPBARFLASHTIMER 25 setvar TEMPVAR5 21
		else ifvarg HPBARFLASHTIMER 24 ifvarl HPBARFLASHTIMER 29 setvar TEMPVAR5 18
		setactor[THISACTOR].pal TEMPVAR5
	
		ifvare SKILLSET? 0 { sizeat 10 10 setvar SKILLSET? 1 }
		// OFF-LIMITS
		getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
		// END OFF-LIMITS
	
		ifvarl TEMP 0 
		{ 
			getactorvar[PARENTID].FROZEN? temp
			ifvare temp 1
			{
				getactor[PARENTID].picnum TEMP
				ifvarn TEMP APLAYER
				{
					// OFF-LIMITS
					getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
					// END OFF-LIMITS
					ifvarl TEMP 0 state killattachedobject
				}
			} 
			else
			{
				getactor[PARENTID].picnum TEMP
				ifvarn TEMP APLAYER state killattachedobject
			}
		}
		else
		{
			ifvare oldskoolmode 0 
			{ 
				ifvare lifebartogglemode 1
				{
					getactor[PARENTID].pal TEMP
					ifvarg TEMP 8 ifvarl TEMP 12 setactor[THISACTOR].cstat 32768
					else
					{
						getactorvar[PARENTID].CLOAKED? TEMP
						ifvare TEMP 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 0
					} 
				} 
				else setactor[THISACTOR].cstat 32768
			}
			else setactor[THISACTOR].cstat 32768
		
			getactor[PARENTID].picnum temp
			ifvare temp APLAYER
			{
				getactorvar[PLAYERID].VEHICLEID TEMPVAR3
				ifvare TEMPVAR3 -1
				{
					getactorvar[PARENTID].CURRENTHITPOINTS TEMPVAR5
					getactorvar[PARENTID].MAXHITPOINTS TEMPVAR6
				}
				else
				{
					getactorvar[TEMPVAR3].ACTORHP TEMPVAR5
					getactorvar[TEMPVAR3].ACTORMAXHP TEMPVAR6
				}
			}
			else
			{
				getactorvar[PARENTID].ACTORHP TEMPVAR5
				getactorvar[PARENTID].ACTORMAXHP TEMPVAR6
			} 
			ifvarg TEMPVAR6 0
			{
				setvarvar TEMPVAR8 TEMPVAR5
				mulvar TEMPVAR8 100
				divvarvar TEMPVAR8 TEMPVAR6
		
				// Show the different notches on the lifebar
				ifvarl TEMPVAR8 3 action HPMETER0
				else ifvarg TEMPVAR8 2 ifvarl TEMPVAR8 7 action HPMETER4
				else ifvarg TEMPVAR8 6 ifvarl TEMPVAR8 11 action HPMETER8
				else ifvarg TEMPVAR8 10 ifvarl TEMPVAR8 15 action HPMETER12
				else ifvarg TEMPVAR8 14 ifvarl TEMPVAR8 19 action HPMETER16
				else ifvarg TEMPVAR8 18 ifvarl TEMPVAR8 23 action HPMETER20
				else ifvarg TEMPVAR8 22 ifvarl TEMPVAR8 27 action HPMETER24
				else ifvarg TEMPVAR8 26 ifvarl TEMPVAR8 31 action HPMETER28
				else ifvarg TEMPVAR8 30 ifvarl TEMPVAR8 35 action HPMETER32
				else ifvarg TEMPVAR8 34 ifvarl TEMPVAR8 39 action HPMETER36
				else ifvarg TEMPVAR8 38 ifvarl TEMPVAR8 43 action HPMETER40
				else ifvarg TEMPVAR8 42 ifvarl TEMPVAR8 47 action HPMETER44
				else ifvarg TEMPVAR8 46 ifvarl TEMPVAR8 51 action HPMETER48
				else ifvarg TEMPVAR8 50 ifvarl TEMPVAR8 55 action HPMETER52
				else ifvarg TEMPVAR8 54 ifvarl TEMPVAR8 59 action HPMETER56
				else ifvarg TEMPVAR8 58 ifvarl TEMPVAR8 63 action HPMETER60
				else ifvarg TEMPVAR8 62 ifvarl TEMPVAR8 67 action HPMETER64
				else ifvarg TEMPVAR8 66 ifvarl TEMPVAR8 71 action HPMETER68
				else ifvarg TEMPVAR8 70 ifvarl TEMPVAR8 75 action HPMETER72
				else ifvarg TEMPVAR8 74 ifvarl TEMPVAR8 79 action HPMETER76
				else ifvarg TEMPVAR8 78 ifvarl TEMPVAR8 83 action HPMETER80
				else ifvarg TEMPVAR8 82 ifvarl TEMPVAR8 87 action HPMETER84
				else ifvarg TEMPVAR8 86 ifvarl TEMPVAR8 91 action HPMETER88
				else ifvarg TEMPVAR8 90 ifvarl TEMPVAR8 95 action HPMETER92
				else ifvarg TEMPVAR8 94 ifvarl TEMPVAR8 99 action HPMETER96
				else ifvarg TEMPVAR8 98 ifvarl TEMPVAR8 103 action HPMETER100
				else ifvarg TEMPVAR8 102 ifvarl TEMPVAR8 107 action HPMETER104
				else ifvarg TEMPVAR8 106 ifvarl TEMPVAR8 111 action HPMETER108
				else ifvarg TEMPVAR8 110 ifvarl TEMPVAR8 115 action HPMETER112
				else ifvarg TEMPVAR8 114 ifvarl TEMPVAR8 119 action HPMETER116
				else ifvarg TEMPVAR8 118 ifvarl TEMPVAR8 123 action HPMETER120
				else ifvarg TEMPVAR8 122 ifvarl TEMPVAR8 127 action HPMETER124
				else ifvarg TEMPVAR8 126 ifvarl TEMPVAR8 131 action HPMETER128
				else ifvarg TEMPVAR8 130 ifvarl TEMPVAR8 135 action HPMETER132
				else ifvarg TEMPVAR8 134 ifvarl TEMPVAR8 139 action HPMETER136
				else ifvarg TEMPVAR8 138 ifvarl TEMPVAR8 143 action HPMETER140
				else ifvarg TEMPVAR8 142 ifvarl TEMPVAR8 147 action HPMETER144
				else ifvarg TEMPVAR8 146 ifvarl TEMPVAR8 151 action HPMETER148
				else ifvarg TEMPVAR8 150 ifvarl TEMPVAR8 155 action HPMETER152
				else ifvarg TEMPVAR8 154 ifvarl TEMPVAR8 159 action HPMETER156
				else ifvarg TEMPVAR8 158 ifvarl TEMPVAR8 163 action HPMETER160
				else ifvarg TEMPVAR8 162 ifvarl TEMPVAR8 167 action HPMETER164
				else ifvarg TEMPVAR8 166 ifvarl TEMPVAR8 171 action HPMETER168
				else ifvarg TEMPVAR8 170 ifvarl TEMPVAR8 175 action HPMETER172
				else ifvarg TEMPVAR8 174 ifvarl TEMPVAR8 179 action HPMETER176
				else ifvarg TEMPVAR8 178 ifvarl TEMPVAR8 183 action HPMETER180
				else ifvarg TEMPVAR8 182 ifvarl TEMPVAR8 187 action HPMETER184
				else ifvarg TEMPVAR8 186 ifvarl TEMPVAR8 191 action HPMETER188
				else ifvarg TEMPVAR8 190 ifvarl TEMPVAR8 195 action HPMETER192
				else ifvarg TEMPVAR8 194 ifvarl TEMPVAR8 199 action HPMETER196
				else ifvarg TEMPVAR8 198 action HPMETER200
		
				ifvarl TEMPVAR8 26 { state shadepulse addvar shade 8 setactor[THISACTOR].shade shade } else state itemfullbright
			}
		
			ifvare oldskoolmode 0
			{
				ifvare lifebartogglemode 1
				{
					getactorvar[PARENTID].CLOAKED? TEMP
					ifvare TEMP 0
					{
						getactor[PARENTID].cstat TEMP
						ifvarand TEMP 32768 setactor[THISACTOR].cstat 514
						else ifvarand TEMP 514 setactor[THISACTOR].cstat 2
						else setactor[THISACTOR].cstat 0
					}
				}
			}
		
			getactor[PARENTID].x TESTX 
			getactor[PARENTID].y TESTY
			getactor[PARENTID].z TESTZ
			getactor[PARENTID].xrepeat TESTXREPEAT1 
			getactor[PARENTID].yrepeat TESTYREPEAT1 
			getactorvar[PARENTID].ACTORSHEIGHT LIFEMETERZ
			mulvarvar LIFEMETERZ TESTYREPEAT1
			mulvar LIFEMETERZ 4
			setvarvar EXTRAZ TESTYREPEAT1
			mulvar EXTRAZ 4
			getactor[PARENTID].picnum TEMP
			ifvare TEMP APLAYER 
			{
				getactor[PARENTID].cstat temp
				ifvarand temp 8 
				{ 
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					ifvare TEMPVAR3 -1
					{
						ifvare CHARACTERSELECTED? 6 mulvar EXTRAZ 60 
						else ifvare CHARACTERSELECTED? 9 mulvar EXTRAZ 64
						else mulvar EXTRAZ 16
					}
					else mulvar EXTRAZ 32
		
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
				else
				{
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					ifvare TEMPVAR3 -1
					{
						ifvare CHARACTERSELECTED? 6 mulvar EXTRAZ 68
						else ifvare CHARACTERSELECTED? 9 mulvar EXTRAZ 72
						else mulvar EXTRAZ 24
					}
					else mulvar EXTRAZ 40
				}
			} 
			else
			ifvare TEMP NAKED1 // NAKED1 is already "Upside Down"
			{
				getactor[PARENTID].cstat TEMP
				ifvarand TEMP 8 mulvar EXTRAZ 16 
				else
				{
					mulvar EXTRAZ 8
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
			} 
			else 
			{ 
				getactor[PARENTID].cstat temp
				ifvarand temp 8 
				{ 
					mulvar EXTRAZ 8
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
				else mulvar EXTRAZ 16 
			}
			getactor[PARENTID].cstat TEMP
			subvarvar TESTZ LIFEMETERZ // Subtract from the original Z var
			subvarvar TESTZ EXTRAZ // Subtract from the original Z var
			setvarvar TESTXREPEAT2 TESTXREPEAT1
			divvar TESTXREPEAT2 2
			addvarvar TESTXREPEAT2 TESTXREPEAT1
			ifvarvare PARENTID PLAYERID addvarvar TESTZ VIEWCAMERAZDIFF
			setactor[THISACTOR].xrepeat TESTXREPEAT2
			setactor[THISACTOR].yrepeat TESTYREPEAT1
			
			getactor[PARENTID].sectnum TEMP3
			ifvarn TEMP3 -1
			{
				setactor[THISACTOR].x TESTX
				setactor[THISACTOR].y TESTY 
				setactor[THISACTOR].z TESTZ
				changespritesect THISACTOR TEMP3
			}
			else { state killattachedobject break }
	
		}
	}
	else state killattachedobject
enda

action APMETER0 -52 // 7797-7746 = 52
action APMETER4 -51 // 7797-7746 = 52
action APMETER8 -50 // 7797-7746 = 52
action APMETER12 -49 // 7797-7746 = 52
action APMETER16 -48 // 7797-7746 = 52
action APMETER20 -47 // 7797-7746 = 52
action APMETER24 -46 // 7797-7746 = 52
action APMETER28 -45 // 7797-7746 = 52
action APMETER32 -44 // 7797-7746 = 52
action APMETER36 -43 // 7797-7746 = 52
action APMETER40 -42 // 7797-7746 = 52
action APMETER44 -41 // 7797-7746 = 52
action APMETER48 -40 // 7797-7746 = 52
action APMETER52 -39 // 7797-7746 = 52
action APMETER56 -38 // 7797-7746 = 52
action APMETER60 -37 // 7797-7746 = 52
action APMETER64 -36 // 7797-7746 = 52
action APMETER68 -35 // 7797-7746 = 52
action APMETER72 -34 // 7797-7746 = 52
action APMETER76 -33 // 7797-7746 = 52
action APMETER80 -32 // 7797-7746 = 52
action APMETER84 -31 // 7797-7746 = 52
action APMETER88 -30 // 7797-7746 = 52
action APMETER92 -29 // 7797-7746 = 52
action APMETER96 -28 // 7797-7746 = 52
action APMETER100 -27 // 7797-7746 = 52
action APMETER104 -26 // 7797-7746 = 52
action APMETER108 -25 // 7797-7746 = 52
action APMETER112 -24 // 7797-7746 = 52
action APMETER116 -23 // 7797-7746 = 52
action APMETER120 -22 // 7797-7746 = 52
action APMETER124 -21 // 7797-7746 = 52
action APMETER128 -20 // 7797-7746 = 52
action APMETER132 -19 // 7797-7746 = 52
action APMETER136 -18 // 7797-7746 = 52
action APMETER140 -17 // 7797-7746 = 52
action APMETER144 -16 // 7797-7746 = 52
action APMETER148 -15 // 7797-7746 = 52
action APMETER152 -14 // 7797-7746 = 52
action APMETER156 -13 // 7797-7746 = 52
action APMETER160 -12 // 7797-7746 = 52
action APMETER164 -11 // 7797-7746 = 52
action APMETER168 -10 // 7797-7746 = 52
action APMETER172 -9 // 7797-7746 = 52
action APMETER176 -8 // 7797-7746 = 52
action APMETER180 -7 // 7797-7746 = 52
action APMETER184 -6 // 7797-7746 = 52
action APMETER188 -5 // 7797-7746 = 52
action APMETER192 -4 // 7797-7746 = 52
action APMETER196 -3 // 7797-7746 = 52
action APMETER200 -2 // 7797-7776 = 2

useractor notenemy APLIFEMETER 0
	sleeptime 0
	spriteflags 80 // 84, 80, 16
	state checkattachedobjectstatus
	
	ifvare SKILLSET? 0
	{
		getactorvar[THISACTOR].APBARPARENT PARENTID
		getactor[PARENTID].picnum ATTACHEDPICNUM
	}
	
	ifvare ATTACHEDPICNUM APLAYER getactorvar[PARENTID].MAXARMORPOINTS TEMP else getactorvar[PARENTID].ACTORMAXAP TEMP
	ifvarg TEMP 0
	{
		ifvarl APBARFLASHTIMER 0 addvar APBARFLASHTIMER 1 else ifvarg APBARFLASHTIMER 0 subvar APBARFLASHTIMER 1
	
		ifvarg APBARFLASHTIMER -29 ifvarl APBARFLASHTIMER -24 setvar TEMPVAR5 0
		else ifvarg APBARFLASHTIMER -25 ifvarl APBARFLASHTIMER -20 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER -21 ifvarl APBARFLASHTIMER -16 setvar TEMPVAR5 0
		else ifvarg APBARFLASHTIMER -17 ifvarl APBARFLASHTIMER -12 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER -13 ifvarl APBARFLASHTIMER -8 setvar TEMPVAR5 0
		else ifvarg APBARFLASHTIMER -9 ifvarl APBARFLASHTIMER -4 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER -5 ifvarl APBARFLASHTIMER 0 setvar TEMPVAR5 0
		else ifvare APBARFLASHTIMER 0 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER 0 ifvarl APBARFLASHTIMER 5 setvar TEMPVAR5 18
		else ifvarg APBARFLASHTIMER 4 ifvarl APBARFLASHTIMER 9 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER 8 ifvarl APBARFLASHTIMER 13 setvar TEMPVAR5 18
		else ifvarg APBARFLASHTIMER 12 ifvarl APBARFLASHTIMER 17 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER 16 ifvarl APBARFLASHTIMER 21 setvar TEMPVAR5 18
		else ifvarg APBARFLASHTIMER 20 ifvarl APBARFLASHTIMER 25 setvar TEMPVAR5 22
		else ifvarg APBARFLASHTIMER 24 ifvarl APBARFLASHTIMER 29 setvar TEMPVAR5 18
		setactor[THISACTOR].pal TEMPVAR5
	
		ifvare SKILLSET? 0 { sizeat 10 10 setvar SKILLSET? 1 }
		// OFF-LIMITS
		getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
		// END OFF-LIMITS
	
		ifvarl TEMP 0 
		{ 
			getactorvar[PARENTID].FROZEN? temp
			ifvare temp 1
			{
				getactor[PARENTID].picnum TEMP
				ifvarn TEMP APLAYER
				{
					// OFF-LIMITS
					getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
					// END OFF-LIMITS
					ifvarl TEMP 0 state killattachedobject
				}
			} 
			else
			{
				getactor[PARENTID].picnum TEMP
				ifvarn TEMP APLAYER state killattachedobject
			}
		}
		else
		{
			ifvare oldskoolmode 0 
			{ 
				ifvare lifebartogglemode 1
				{
					getactor[PARENTID].pal TEMP
					ifvarg TEMP 8 ifvarl TEMP 12 setactor[THISACTOR].cstat 32768
					else
					{
						getactorvar[PARENTID].CLOAKED? TEMP
						ifvare TEMP 1 setactor[THISACTOR].cstat 32768 else setactor[THISACTOR].cstat 0 
					} 
				}
				else setactor[THISACTOR].cstat 32768
			}
			else setactor[THISACTOR].cstat 32768
		
			getactor[PARENTID].picnum temp
			ifvare temp APLAYER
			{
				getactorvar[PLAYERID].VEHICLEID TEMPVAR3
				ifvare TEMPVAR3 -1
				{
					getactorvar[PARENTID].CURRENTARMORPOINTS TEMPVAR5
					getactorvar[PARENTID].MAXARMORPOINTS TEMPVAR6
				}
				else
				{
					getactorvar[TEMPVAR3].ACTORAP TEMPVAR5
					getactorvar[TEMPVAR3].ACTORMAXAP TEMPVAR6
				}
			}
			else
			{
				getactorvar[PARENTID].ACTORAP TEMPVAR5
				getactorvar[PARENTID].ACTORMAXAP TEMPVAR6
			} 
			ifvarg TEMPVAR6 0
			{
				setvarvar TEMPVAR8 TEMPVAR5
				mulvar TEMPVAR8 100
				divvarvar TEMPVAR8 TEMPVAR6
		
  		// Show the different notches on the lifebar
				ifvarl TEMPVAR8 3 action APMETER0
				else ifvarg TEMPVAR8 2 ifvarl TEMPVAR8 7 action APMETER4
				else ifvarg TEMPVAR8 6 ifvarl TEMPVAR8 11 action APMETER8
				else ifvarg TEMPVAR8 10 ifvarl TEMPVAR8 15 action APMETER12
				else ifvarg TEMPVAR8 14 ifvarl TEMPVAR8 19 action APMETER16
				else ifvarg TEMPVAR8 18 ifvarl TEMPVAR8 23 action APMETER20
				else ifvarg TEMPVAR8 22 ifvarl TEMPVAR8 27 action APMETER24
				else ifvarg TEMPVAR8 26 ifvarl TEMPVAR8 31 action APMETER28
				else ifvarg TEMPVAR8 30 ifvarl TEMPVAR8 35 action APMETER32
				else ifvarg TEMPVAR8 34 ifvarl TEMPVAR8 39 action APMETER36
				else ifvarg TEMPVAR8 38 ifvarl TEMPVAR8 43 action APMETER40
				else ifvarg TEMPVAR8 42 ifvarl TEMPVAR8 47 action APMETER44
				else ifvarg TEMPVAR8 46 ifvarl TEMPVAR8 51 action APMETER48
				else ifvarg TEMPVAR8 50 ifvarl TEMPVAR8 55 action APMETER52
				else ifvarg TEMPVAR8 54 ifvarl TEMPVAR8 59 action APMETER56
				else ifvarg TEMPVAR8 58 ifvarl TEMPVAR8 63 action APMETER60
				else ifvarg TEMPVAR8 62 ifvarl TEMPVAR8 67 action APMETER64
				else ifvarg TEMPVAR8 66 ifvarl TEMPVAR8 71 action APMETER68
				else ifvarg TEMPVAR8 70 ifvarl TEMPVAR8 75 action APMETER72
				else ifvarg TEMPVAR8 74 ifvarl TEMPVAR8 79 action APMETER76
				else ifvarg TEMPVAR8 78 ifvarl TEMPVAR8 83 action APMETER80
				else ifvarg TEMPVAR8 82 ifvarl TEMPVAR8 87 action APMETER84
				else ifvarg TEMPVAR8 86 ifvarl TEMPVAR8 91 action APMETER88
				else ifvarg TEMPVAR8 90 ifvarl TEMPVAR8 95 action APMETER92
				else ifvarg TEMPVAR8 94 ifvarl TEMPVAR8 99 action APMETER96
				else ifvarg TEMPVAR8 98 ifvarl TEMPVAR8 103 action APMETER100
				else ifvarg TEMPVAR8 102 ifvarl TEMPVAR8 107 action APMETER104
				else ifvarg TEMPVAR8 106 ifvarl TEMPVAR8 111 action APMETER108
				else ifvarg TEMPVAR8 110 ifvarl TEMPVAR8 115 action APMETER112
				else ifvarg TEMPVAR8 114 ifvarl TEMPVAR8 119 action APMETER116
				else ifvarg TEMPVAR8 118 ifvarl TEMPVAR8 123 action APMETER120
				else ifvarg TEMPVAR8 122 ifvarl TEMPVAR8 127 action APMETER124
				else ifvarg TEMPVAR8 126 ifvarl TEMPVAR8 131 action APMETER128
				else ifvarg TEMPVAR8 130 ifvarl TEMPVAR8 135 action APMETER132
				else ifvarg TEMPVAR8 134 ifvarl TEMPVAR8 139 action APMETER136
				else ifvarg TEMPVAR8 138 ifvarl TEMPVAR8 143 action APMETER140
				else ifvarg TEMPVAR8 142 ifvarl TEMPVAR8 147 action APMETER144
				else ifvarg TEMPVAR8 146 ifvarl TEMPVAR8 151 action APMETER148
				else ifvarg TEMPVAR8 150 ifvarl TEMPVAR8 155 action APMETER152
				else ifvarg TEMPVAR8 154 ifvarl TEMPVAR8 159 action APMETER156
				else ifvarg TEMPVAR8 158 ifvarl TEMPVAR8 163 action APMETER160
				else ifvarg TEMPVAR8 162 ifvarl TEMPVAR8 167 action APMETER164
				else ifvarg TEMPVAR8 166 ifvarl TEMPVAR8 171 action APMETER168
				else ifvarg TEMPVAR8 170 ifvarl TEMPVAR8 175 action APMETER172
				else ifvarg TEMPVAR8 174 ifvarl TEMPVAR8 179 action APMETER176
				else ifvarg TEMPVAR8 178 ifvarl TEMPVAR8 183 action APMETER180
				else ifvarg TEMPVAR8 182 ifvarl TEMPVAR8 187 action APMETER184
				else ifvarg TEMPVAR8 186 ifvarl TEMPVAR8 191 action APMETER188
				else ifvarg TEMPVAR8 190 ifvarl TEMPVAR8 195 action APMETER192
				else ifvarg TEMPVAR8 194 ifvarl TEMPVAR8 199 action APMETER196
				else ifvarg TEMPVAR8 198 action APMETER200
				ifvarl TEMPVAR8 26 { state shadepulse addvar shade 8 setactor[THISACTOR].shade shade } else { state itemfullbright }
			}
		
			ifvare oldskoolmode 0
			{
				ifvare lifebartogglemode 1
				{
					getactorvar[PARENTID].CLOAKED? TEMP
					ifvare TEMP 0
					{
						getactor[PARENTID].cstat TEMP
						ifvarand TEMP 32768 setactor[THISACTOR].cstat 514
						else ifvarand TEMP 514 setactor[THISACTOR].cstat 2
						else setactor[THISACTOR].cstat 0
					}
				}
			}
		
			getactor[PARENTID].x TESTX 
			getactor[PARENTID].y TESTY
			getactor[PARENTID].z TESTZ
			getactor[PARENTID].xrepeat TESTXREPEAT1 
			getactor[PARENTID].yrepeat TESTYREPEAT1 
			getactorvar[PARENTID].ACTORSHEIGHT LIFEMETERZ
			mulvarvar LIFEMETERZ TESTYREPEAT1
			mulvar LIFEMETERZ 4
			setvarvar EXTRAZ TESTYREPEAT1
			mulvar EXTRAZ 4
			getactor[PARENTID].picnum TEMP
			ifvare TEMP APLAYER 
			{
				getactor[PARENTID].cstat temp
				ifvarand temp 8 
				{ 
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					ifvare TEMPVAR3 -1
					{
						ifvare CHARACTERSELECTED? 6 mulvar EXTRAZ 68    
						else ifvare CHARACTERSELECTED? 9 mulvar EXTRAZ 72
						else mulvar EXTRAZ 24
					}
					else mulvar EXTRAZ 40
		
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
				else
				{
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					getactorvar[PLAYERID].VEHICLEID TEMPVAR3
					ifvare TEMPVAR3 -1
					{
						ifvare CHARACTERSELECTED? 6 mulvar EXTRAZ 60    
						else ifvare CHARACTERSELECTED? 9 mulvar EXTRAZ 64
						else mulvar EXTRAZ 16
					}
					else mulvar EXTRAZ 32
				}
			} 
			else
			ifvare TEMP NAKED1 // NAKED1 is already "Upside Down"
			{
				getactor[PARENTID].cstat TEMP
				ifvarand TEMP 8 mulvar EXTRAZ 8 
				else
				{
					mulvar EXTRAZ 16
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
			} 
			else 
			{ 
				getactor[PARENTID].cstat temp
				ifvarand temp 8 
				{ 
					mulvar EXTRAZ 16
					mulvar EXTRAZ -1
					mulvar LIFEMETERZ -1
				}
				else mulvar EXTRAZ 8 
			}
			subvarvar TESTZ LIFEMETERZ // Subtract from the original Z var
			subvarvar TESTZ EXTRAZ // Subtract from the original Z var
			setvarvar TESTXREPEAT2 TESTXREPEAT1
			divvar TESTXREPEAT2 2
			addvarvar TESTXREPEAT2 TESTXREPEAT1
			ifvarvare PARENTID PLAYERID addvarvar TESTZ VIEWCAMERAZDIFF
			setactor[THISACTOR].xrepeat TESTXREPEAT2
			setactor[THISACTOR].yrepeat TESTYREPEAT1
			
			getactor[PARENTID].sectnum TEMP3
			ifvarn TEMP3 -1
			{
				setactor[THISACTOR].x TESTX
				setactor[THISACTOR].y TESTY 
				setactor[THISACTOR].z TESTZ
				changespritesect THISACTOR TEMP3
			}
			else { state killattachedobject break }
		}
	}
	else state killattachedobject
enda

useractor notenemy RANDOMPOWERUP 0
	ifrnd 53 spawn QUADDAMAGE 
	else ifrnd 64 spawn APREGENITEM 
	else ifrnd 85 spawn REGENITEM 
	else ifrnd 128 spawn ICONOFTHEDEFENDER 
	else spawn VAMPIREITEM
	killit
enda

useractor notenemy DRAGONICRIP 0
	getactor[THISACTOR].owner TEMPVAR
	getactorvar[TEMPVAR].ACTORATTACK TEMPVAR2
	setactorvar[THISACTOR].ACTORATTACK TEMPVAR2
	
	randvar TEMP 2048
	setactor[THISACTOR].ang TEMP
	ifvarg SKILLLEVEL 6
	{
		ifrnd 4 shoot OCTANINE_RPG
		ifrnd 16 shoot OCTANINE_RPG
	}
	ifvarg SKILLLEVEL 3
	{
		ifrnd 8 shoot OCTANINE_RPG
		ifrnd 32 shoot OCTANINE_RPG
	}
	ifrnd 2 shoot OCTANINE_RPG
	ifrnd 64 shoot OCTANINE_RPG
	
	ifcount 18
			killit
	else
	ifcount 1
	{
		sound TELEPORTER
		spawn TRANSPORTERSTAR
	}
	else
	ifcount 9
	{
		sizeto 0 0
		//sizeto 0 0
		//sizeto 0 0
		//sizeto 0 0
	}
	else
	{
		sizeto 28 28
		// sizeto 28 28
		// sizeto 28 28
		// sizeto 28 28
	}
enda

// Memorbilia Items / Collectibles [RANK]

 // Duke3D 1.3
useractor notenemy 766 0 state grabposter enda // E3L1 "Exotica" Poster
useractor notenemy 826 0 state grabposter enda // "Lunar Apocalypse" Poster [Wide]
useractor notenemy FEMPIC5 0 state grabposter enda // E1L2 "Tonight HOT HOT HOT" Poster
useractor notenemy FEMPIC6 0 state grabposter enda // E1L1 "COMING SOON: SISTER ACT III" Poster
useractor notenemy FEMPIC7 0 state grabposter enda // E1L1 "NOW PLAYING: Attack of the Bleached Blonde Biker Bimbos"
useractor notenemy 970 0 state grabposter enda // "Byte-Nite" Poster
useractor notenemy 3391 0 state grabposter enda // "Lunar Apocalypse" Poster [Smaller]

 // DukeDC Stuff
useractor notenemy 3737 0 state grabposter enda // "Ciberrella" Poster
useractor notenemy 3738 0 state grabposter enda // "Sleeping with the Enemy" Poster
useractor notenemy 3739 0 state grabposter enda // "Ducats" Poster
useractor notenemy 3740 0 state grabposter enda // "I Married a Crossdressing Alien" Poster
useractor notenemy 3871 0 state grabposter enda // "Viva Las Vegas" Poster

 // Duke3D Atomic
useractor notenemy 4449 0 state grabmagazine enda // The Ring Magazine
useractor notenemy 4498 0 state grabposter enda // E4L1 Bikini Girl Pic
useractor notenemy 4506 0 state grabmagazine enda // BIG GUN Magazine
useractor notenemy 4507 0 state grabmagazine enda // AMMO Monthly
useractor notenemy 4945 0 state grabposter enda // E4L6 "SISTER ACT IV" Poster

 // Custom
useractor notenemy 5171 0 state grabspecialposter enda // "Duke Nukem 3D: Plutonium Pack" Poster w/ Battlelord
useractor notenemy 5173 0 state grabspecialposter enda // "Duke Nukem Forever: $500000 Reward" Wanted Poster

useractor notenemy 5369 0 state grabspecialposter4 enda // "The Misfits: Series 1" Poster
useractor notenemy 5370 0 state grabspecialposter4 enda // "The Misfits: Series 1" Poster w/ URL

useractor notenemy 5449 0 state grabspecialmagazine2 enda // "Vauge" July 1997 Issue w/ Maken Shinkara on the cover [smaller, unworn]
useractor notenemy 5450 0 state grabspecialmagazine2 enda // "Vauge" July 1997 Issue w/ Maken Shinkara on the cover [smaller, worn]
useractor notenemy 5451 0 state grabspecialmagazine2 enda // "Vauge" July 1997 Issue w/ Maken Shinkara on the cover [medium, unworn]
useractor notenemy 5452 0 state grabspecialmagazine2 enda // "Vauge" July 1997 Issue w/ Maken Shinkara on the cover [medium, worn]
useractor notenemy 5453 0 state grabspecialmagazine2 enda // "Vauge" July 1997 Issue w/ Maken Shinkara on the cover [full-size, mint]

useractor notenemy 5454 0 state grabspecialmagazine2 enda // "Vauge" August 1997 Issue w/ Hinotori Genkai on the cover [smaller, unworn]
useractor notenemy 5455 0 state grabspecialmagazine2 enda // "Vauge" August 1997 Issue w/ Hinotori Genkai on the cover [smaller, worn]
useractor notenemy 5456 0 state grabspecialmagazine2 enda // "Vauge" August 1997 Issue w/ Hinotori Genkai on the cover [medium, unworn]
useractor notenemy 5457 0 state grabspecialmagazine2 enda // "Vauge" August 1997 Issue w/ Hinotori Genkai on the cover [medium, worn]
useractor notenemy 5458 0 state grabspecialmagazine2 enda // "Vauge" August 1997 Issue w/ Hinotori Genkai on the cover [full-size, mint]

useractor notenemy 5459 0 state grabspecialmagazine2 enda // "Vauge" May 1997 Issue w/ Christina Mitchell on the cover [smaller, unworn]
useractor notenemy 5460 0 state grabspecialmagazine2 enda // "Vauge" May 1997 Issue w/ Christina Mitchell on the cover [smaller, worn]
useractor notenemy 5461 0 state grabspecialmagazine2 enda // "Vauge" May 1997 Issue w/ Christina Mitchell on the cover [medium, unworn]
useractor notenemy 5462 0 state grabspecialmagazine2 enda // "Vauge" May 1997 Issue w/ Christina Mitchell on the cover [medium, worn]
useractor notenemy 5463 0 state grabspecialmagazine2 enda // "Vauge" May 1997 Issue w/ Christina Mitchell on the cover [full-size, mint]

useractor notenemy 5464 0 state grabspecialmagazine2 enda // "Guns & Weapons" June 1997 Issue w/ Duke Nukem on the cover [smaller, unworn]
useractor notenemy 5465 0 state grabspecialmagazine2 enda // "Guns & Weapons" June 1997 Issue w/ Duke Nukem on the cover [smaller, worn]
useractor notenemy 5466 0 state grabspecialmagazine2 enda // "Guns & Weapons" June 1997 Issue w/ Duke Nukem on the cover [medium, unworn]
useractor notenemy 5467 0 state grabspecialmagazine2 enda // "Guns & Weapons" June 1997 Issue w/ Duke Nukem on the cover [medium, worn]
useractor notenemy 5468 0 state grabspecialmagazine2 enda // "Guns & Weapons" June 1997 Issue w/ Duke Nukem on the cover [full-size, mint]

useractor notenemy 5469 0 state grabspecialmagazine2 enda // "Vauge" September 1997 Issue w/ Lori Stephens on the cover [smaller, unworn]
useractor notenemy 5470 0 state grabspecialmagazine2 enda // "Vauge" September 1997 Issue w/ Lori Stephens on the cover [smaller, worn]
useractor notenemy 5471 0 state grabspecialmagazine2 enda // "Vauge" September 1997 Issue w/ Lori Stephens on the cover [medium, unworn]
useractor notenemy 5472 0 state grabspecialmagazine2 enda // "Vauge" September 1997 Issue w/ Lori Stephens on the cover [medium, worn]
useractor notenemy 5473 0 state grabspecialmagazine2 enda // "Vauge" September 1997 Issue w/ Lori Stephens on the cover [full-size, mint]

useractor notenemy 5561 0 state grabspecialmagazine2 enda // "Animage" Magazine w/ Canal Vorfeed on the cover [smaller, unworn]
useractor notenemy 5562 0 state grabspecialmagazine2 enda // "Animage" Magazine w/ Canal Vorfeed on the cover [medium, unworn]
useractor notenemy 5563 0 state grabspecialmagazine2 enda // "Animage" Magazine w/ Canal Vorfeed on the cover [large, unworn]

useractor notenemy 5916 0 state grabspecialmagazine2 enda // "Vauge" June 1997 Issue w/ Lisa Bates on the cover [smaller, unworn]
useractor notenemy 5917 0 state grabspecialmagazine2 enda // "Vauge" June 1997 Issue w/ Lisa Bates on the cover [smaller, worn]
useractor notenemy 5919 0 state grabspecialmagazine2 enda // "Vauge" June 1997 Issue w/ Lisa Bates on the cover [medium, unworn]
useractor notenemy 5920 0 state grabspecialmagazine2 enda // "Vauge" June 1997 Issue w/ Lisa Bates on the cover [medium, worn]
useractor notenemy 5925 0 state grabspecialmagazine2 enda // "Vauge" June 1997 Issue w/ Lisa Bates on the cover [full-size, mint]

useractor notenemy 5980 0 state grabspecialmagazine2 enda // "Universia" Magazine - July 1997: Fiona Mayfield [smaller, unworn]
useractor notenemy 5981 0 state grabspecialmagazine2 enda // "Universia" Magazine - July 1997: Fiona Mayfield [smaller, worn]
useractor notenemy 5982 0 state grabspecialmagazine2 enda // "Universia" Magazine - July 1997: Fiona Mayfield [medium, unworn]
useractor notenemy 5983 0 state grabspecialmagazine2 enda // "Universia" Magazine - July 1997: Fiona Mayfield [medium, worn]
useractor notenemy 5984 0 state grabspecialmagazine2 enda // "Universia" Magazine - July 1997: Fiona Mayfield [full size, mint]

useractor notenemy 5985 0 state grabspecialmagazine2 enda // "Universia" Magazine - August 1997: Riesbyfe Stridberg [smaller, unworn]
useractor notenemy 5986 0 state grabspecialmagazine2 enda // "Universia" Magazine - August 1997: Riesbyfe Stridberg [smaller, worn]
useractor notenemy 5987 0 state grabspecialmagazine2 enda // "Universia" Magazine - August 1997: Riesbyfe Stridberg [medium, unworn]
useractor notenemy 5988 0 state grabspecialmagazine2 enda // "Universia" Magazine - August 1997: Riesbyfe Stridberg [medium, worn]
useractor notenemy 5989 0 state grabspecialmagazine2 enda // "Universia" Magazine - August 1997: Riesbyfe Stridberg [full size, mint]

useractor notenemy 5990 0 state grabspecialmagazine2 enda // "Universia" Magazine - March 2307: Flora Briscoletti [smaller, unworn]
useractor notenemy 5991 0 state grabspecialmagazine2 enda // "Universia" Magazine - March 2307: Flora Briscoletti [smaller, worn]
useractor notenemy 5992 0 state grabspecialmagazine2 enda // "Universia" Magazine - March 2307: Flora Briscoletti [medium, unworn]
useractor notenemy 5993 0 state grabspecialmagazine2 enda // "Universia" Magazine - March 2307: Flora Briscoletti [medium, worn]
useractor notenemy 5994 0 state grabspecialmagazine2 enda // "Universia" Magazine - March 2307: Flora Briscoletti [full size, mint]

useractor notenemy 6314 0 state grabspecialposter enda // "The Duke Brothers" Poster
useractor notenemy 6315 0 state grabspecialposter enda // "Faster PiggyCop! KILL! KILL!" Poster
useractor notenemy 6316 0 state grabspecialposter enda // "Notorious P.I.G" Poster
useractor notenemy 6317 0 state grabspecialposter enda // "Reservoir Pigs" Poster
useractor notenemy 6318 0 state grabspecialposter enda // "Pig Fiction" Poster

useractor notenemy 6400 0 state grabspecialposter2 enda // "Visible Frylock" Poster
useractor notenemy 6401 0 state grabspecialposter2 enda // "TMNT & Battletoads" Poster
useractor notenemy 6402 0 state grabspecialposter2 enda // "Buurby" Poster
useractor notenemy 6403 0 state grabspecialposter2 enda // "Battletoads" Poster
useractor notenemy 6404 0 state grabspecialposter2 enda // "Dragon Quest" Girls Poster
useractor notenemy 6405 0 state grabspecialposter enda // "Duke Nukem kills Battlelord" Poster
useractor notenemy 6406 0 state grabspecialposter3 enda // "Awesome" Motivation Poster
useractor notenemy 6407 0 state grabspecialposter2 enda // "Darkwing Duck" Poster
useractor notenemy 6408 0 state grabspecialposter2 enda // "Little Nemo vs. Nightmare King" Poster
useractor notenemy 6409 0 state grabspecialposter2 enda // "Zitz vs. Leonardo" Poster
useractor notenemy 6410 0 state grabspecialposter2 enda // "Stargate" Movie Poster
useractor notenemy 6411 0 state grabspecialposter2 enda // "Issac" Poster
useractor notenemy 6412 0 state grabspecialposter2 enda // "Kel'Thuzad and Naxxaramas" Poster
useractor notenemy 6413 0 state grabspecialposter2 enda // "Breath of Fire 2 Group" Poster
useractor notenemy 6414 0 state grabspecialposter2 enda // "Girl Pointing Down" Poster
useractor notenemy 6415 0 state grabspecialposter2 enda // "Fiona Mayfield" Poster
useractor notenemy 6416 0 state grabspecialposter2 enda // "Digital Girl" Poster
useractor notenemy 6417 0 state grabspecialposter2 enda // "Dragonball" Poster
useractor notenemy 6418 0 state grabspecialposter2 enda // "DB Manga Cover w/ Goku and Chichi"
useractor notenemy 6419 0 state grabspecialposter3 enda // "Most Valued Patron" Poster
useractor notenemy 6420 0 state grabspecialposter2 enda // "Tales of the Lensmen" Cover
useractor notenemy 6421 0 state grabspecialposter2 enda // "Read or Die" Poster
useractor notenemy 6422 0 state grabspecialposter2 enda // "Shadow Warrior: For Dead Eyes Only" Poster
useractor notenemy 6423 0 state grabspecialposter2 enda // "Shadow Warrior: You Only Die Twice" Poster
useractor notenemy 6424 0 state grabspecialposter2 enda // "Doom" Movie Poster
useractor notenemy 6425 0 state grabspecialmagazine enda // EGM #60 Cover
useractor notenemy 6426 0 state grabspecialposter3 enda // "Nocturne" Cover
useractor notenemy 6427 0 state grabspecialmagazine enda // "Invader Zim" Cover
useractor notenemy 6428 0 state grabspecialposter2 enda // "Home Alone 2" Movie Poster
useractor notenemy 6429 0 state grabspecialposter2 enda // "EarthBound" 'Movie' Poster
useractor notenemy 6430 0 state grabspecialposter2 enda // "Home Alone" Movie Poster
useractor notenemy 6431 0 state grabspecialposter2 enda // "Volcano" Movie Poster
useractor notenemy 6432 0 state grabspecialposter2 enda // "The Ultimate Doom" Poster
useractor notenemy 6433 0 state grabspecialposter2 enda // "Bob and George: The Comic Strip" Poster
useractor notenemy 6434 0 state grabspecialposter2 enda // "Hocus Pocus" Movie Poster
useractor notenemy 6435 0 state grabspecialposter2 enda // "Independance Day" Movie Poster 
useractor notenemy 6436 0 state grabspecialposter3 enda // "Fetch Quest" Poster
useractor notenemy 6437 0 state grabspecialposter3 enda // "Balls of Steel" Movie Poster
useractor notenemy 6438 0 state grabspecialposter3 enda // "Arcana Heart" Movie Poster
useractor notenemy 6439 0 state grabspecialposter3 enda // "Dragonball Multiverse" Poster
useractor notenemy 6440 0 state grabspecialposter4 enda // "Eye of Horned Solitude" Poster #1
useractor notenemy 6441 0 state grabspecialposter3 enda // "Pagan" Movie Poster
useractor notenemy 6442 0 state grabspecialposter3 enda // "Arcana Heart 2" Movie Poster
useractor notenemy 6443 0 state grabspecialposter4 enda // "The Man Eaters" Movie Poster
useractor notenemy 6444 0 state grabspecialposter3 enda // "Shredder: I Want You" Poster
useractor notenemy 6445 0 state grabspecialposter3 enda // "Sanderson Sisters!" Poster
useractor notenemy 6446 0 state grabspecialposter3 enda // "Raiden: I Want You" Poster
useractor notenemy 6447 0 state grabspecialposter3 enda // "Sub Zero Bros. 2" Poster
useractor notenemy 6448 0 state grabspecialposter3 enda // "GATO" Poster
useractor notenemy 6449 0 state grabspecialposter3 enda // "ChocoVania" Poster
useractor notenemy 6450 0 state grabspecialposter3 enda // "DooM TimE" Poster
useractor notenemy 6451 0 state grabspecialposter3 enda // "Scott Pilgrim" Poster #1
useractor notenemy 6452 0 state grabspecialposter3 enda // "Scott Pilgrim" Poster #2
useractor notenemy 6453 0 state grabspecialposter3 enda // "Stronger and Cooler" Poster
useractor notenemy 6454 0 state grabspecialposter3 enda // "Chain and Linear" Poster
useractor notenemy 6455 0 state grabspecialposter3 enda // "Keeping Score" Poster
useractor notenemy 6456 0 state grabspecialposter3 enda // "Pretty Feather" Poster
useractor notenemy 6457 0 state graboneofakindimage enda // "The Lost Painting" Image

useractor notenemy 6528 0 state grabspecialposter4 enda // Anime Pinup #1
useractor notenemy 6529 0 state grabspecialposter4 enda // Anime Pinup #2
useractor notenemy 6530 0 state grabspecialposter4 enda // Anime Pinup #3
useractor notenemy 6531 0 state grabspecialposter4 enda // Anime Pinup #4
useractor notenemy 6532 0 state grabspecialposter4 enda // Anime Pinup #5
useractor notenemy 6533 0 state grabspecialposter5 enda // Autographed "Christina Mitchell" Poster/Pinup #1
useractor notenemy 6534 0 state grabspecialposter5 enda // Autographed "Christina Mitchell" Poster/Pinup #2
useractor notenemy 6535 0 state grabspecialposter4 enda // Anime Pinup #6
useractor notenemy 6536 0 state grabspecialposter4 enda // Anime Pinup #7
useractor notenemy 6537 0 state grabspecialposter4 enda // Anime Pinup #8
useractor notenemy 6538 0 state grabspecialposter4 enda // Anime Pinup #9
useractor notenemy 6539 0 state grabspecialposter4 enda // Anime Pinup #10
useractor notenemy 6540 0 state grabspecialposter4 enda // Anime Pinup #11
useractor notenemy 6541 0 state grabspecialposter4 enda // Anime Pinup #12
useractor notenemy 6542 0 state grabspecialposter4 enda // Anime Pinup #13
useractor notenemy 6543 0 state grabspecialposter4 enda // Anime Pinup #14
useractor notenemy 6544 0 state grabspecialposter4 enda // Anime Pinup #15
useractor notenemy 6545 0 state grabspecialposter5 enda // Anime Pinup #16
useractor notenemy 6546 0 state grabspecialposter4 enda // Anime Pinup #17
useractor notenemy 6547 0 state grabspecialposter4 enda // Anime Pinup #18
useractor notenemy 6548 0 state grabspecialposter4 enda // Anime Pinup #19
useractor notenemy 6549 0 state grabspecialposter4 enda // Anime Pinup #20
useractor notenemy 6550 0 state grabspecialposter4 enda // Anime Pinup #21
useractor notenemy 6551 0 state grabspecialposter4 enda // Anime Pinup #22
useractor notenemy 6552 0 state grabspecialposter4 enda // Anime Pinup #23
useractor notenemy 6553 0 state grabspecialposter4 enda // Anime Pinup #24
useractor notenemy 6554 0 state grabspecialposter4 enda // Anime Pinup #25
useractor notenemy 6555 0 state grabspecialposter4 enda // Anime Pinup #26
useractor notenemy 6556 0 state grabspecialposter4 enda // Anime Pinup #27
useractor notenemy 6557 0 state grabspecialposter4 enda // Anime Pinup #28
useractor notenemy 6558 0 state grabspecialposter4 enda // Anime Pinup #29
useractor notenemy 6559 0 state grabspecialposter4 enda // Anime Pinup #30
useractor notenemy 6560 0 state grabspecialposter4 enda // Anime Pinup #31
useractor notenemy 6561 0 state grabspecialposter4 enda // Anime Pinup #32
useractor notenemy 6562 0 state grabspecialposter4 enda // Anime Pinup #33
useractor notenemy 6563 0 state grabspecialposter4 enda // Anime Pinup #34
useractor notenemy 6564 0 state grabspecialposter4 enda // Anime Pinup #35
useractor notenemy 6565 0 state grabspecialposter4 enda // Anime Pinup #36
useractor notenemy 6566 0 state grabspecialposter4 enda // Anime Pinup #37
useractor notenemy 6567 0 state grabspecialposter4 enda // Anime Pinup #38
useractor notenemy 6568 0 state grabspecialposter4 enda // Anime Pinup #39
useractor notenemy 6569 0 state grabspecialposter4 enda // Anime Pinup #40
useractor notenemy 6570 0 state grabspecialposter4 enda // Anime Pinup #41

useractor notenemy 6652 0 state grabspecialmagazine2 enda
useractor notenemy 6653 0 state grabspecialmagazine2 enda
useractor notenemy 6654 0 state grabspecialmagazine2 enda
useractor notenemy 6655 0 state grabspecialmagazine2 enda

// Need to HRP
useractor notenemy 6922 0 state grabspecialposter2 enda // "Doki Doki Vampire" Poster
useractor notenemy 6923 0 state grabspecialposter3 enda // "Crime Crackers" Poster #1
useractor notenemy 6925 0 state grabspecialposter3 enda // "Crime Crackers" CD Cover #1
useractor notenemy 6926 0 state grabspecialposter3 enda // "Crime Crackers" CD Cover #1 [Flat]
useractor notenemy 6927 0 state grabspecialposter3 enda // "The Adventures of Leaza" Poster
useractor notenemy 6928 0 state grabspecialposter3 enda // "Kani Kani Club 7" Poster
useractor notenemy 6929 0 state grabspecialposter3 enda // "'
useractor notenemy 6930 0 state grabspecialposter3 enda // Small "Crime Crackers" Poster #1
useractor notenemy 6933 0 state grabspecialposter3 enda // "Shampoo Club" Poster
useractor notenemy 6934 0 state grabspecialposter3 enda // ""
useractor notenemy 6937 0 state grabspecialposter3 enda // ""
useractor notenemy 6947 0 state grabspecialposter3 enda // "Crime Crackers" Cover 2
useractor notenemy 6952 0 state grabposter enda // "SiN: Blade vs. Elexis & Thrall" Poster
useractor notenemy 6953 0 state grabposter enda // Shadow Warrior Anime Poster #1
useractor notenemy 6954 0 state grabposter enda // Shadow Warrior Anime Poster #2
useractor notenemy 6955 0 state grabposter enda // Shadow Warrior Anime Poster #3
useractor notenemy 6956 0 state grabposter enda // Shadow Warrior Anime Poster #4
useractor notenemy 6957 0 state grabposter enda // Shadow Warrior Anime Poster #5
useractor notenemy 6958 0 state grabspecialposter enda // "Shadow Warrior" Movie Poster
useractor notenemy 6959 0 state grabspecialposter2 enda // Ami Mizuno Framed Picture
useractor notenemy 6962 0 state grabspecialmagazine2 enda // "Tokuma Book: Crime Crackers 2" Cover
useractor notenemy 6963 0 state grabspecialposter3 enda // "Crime Crackers 2" Poster #2
useractor notenemy 6968 0 state grabspecialposter3 enda // "Kani Kani 8 Club" Poster
useractor notenemy 6970 0 state grabspecialposter3 enda // "Crime Crackers 2: Lady First" CD Front Cover
useractor notenemy 6971 0 state grabspecialposter3 enda // "Crime Crackers 2: Lady First" CD Back Cover
useractor notenemy 6977 0 state grabspecialmagazine2 enda // "Crime Crackers" Official Art Book
useractor notenemy 6978 0 state grabspecialposter3 enda // "Wendy at Beach" Poster
useractor notenemy 6979 0 state grabspecialposter3 enda // "Wendy in Winter" Poster
useractor notenemy 6980 0 state grabspecialposter3 enda // "Kani Kani Channel Vol. 2" Poster
useractor notenemy 7010 0 state grabspecialposter3 enda // "Crime Crackers Club" Poster
useractor notenemy 7011 0 state grabspecialposter2 enda // "Wendy" Cover #1
useractor notenemy 7012 0 state grabspecialposter2 enda // "Wendy" Cover #2
useractor notenemy 7013 0 state grabspecialposter2 enda // "Wendy" Cover #3
useractor notenemy 7014 0 state grabspecialposter3 enda // "Kani Kani Channel Vol. 2" Poster
useractor notenemy 7018 0 state grabspecialposter3 enda // "Pink Dolphin Team" Poster

useractor notenemy 7170 0 state grabspecialmagazine2 enda // EGM "Bubsy" Cover
useractor notenemy 7172 0 state grabspecialposter2 enda // "Bubsy" Promo Cover
useractor notenemy 7179 0 state grabspecialmagazine2 enda // "Ami Mizuno" Magazine Cover #1
useractor notenemy 7180 0 state grabspecialmagazine2 enda // "Ami Mizuno" Magazine Cover #2
useractor notenemy 7182 0 state grabspecialposter2 enda // "Minako Aino" Poster #1
useractor notenemy 7183 0 state grabspecialposter2 enda // "Minako Aino" Poster #2
useractor notenemy 7184 0 state grabspecialposter2 enda // "History's Strongest Disciple Kenichi" Poster
useractor notenemy 7185 0 state grabspecialposter2 enda // "Codename LoVe: Redemption" Movie Poster
useractor notenemy 7186 0 state grabspecialposter2 enda // "Duke Nukem [1]" 'Movie' Poster
useractor notenemy 7187 0 state grabspecialposter2 enda // "Ami Mizuno, Rei Hino, Makoto Kino, Minako Aino" Dragonforce Promo Poster
useractor notenemy 7188 0 state grabspecialposter2 enda // "Duke Nukem [2]" 'Movie' Poster
useractor notenemy 7189 0 state grabspecialmagazine2 enda // "Teenage Mutant Ninja Turtles 3" Gamepro Magazine Cover
useractor notenemy 7190 0 state grabspecialmagazine2 enda // "Mortal Kombat II" Gamepro Magazine Cover

useractor notenemy 7227 0 state grabspecialfigurine enda // "Sailor Moon" Figurine #1
useractor notenemy 7228 0 state grabspecialfigurine enda // "Sailor Mercury" Figurine #!
useractor notenemy 7232 0 state grabspecialfigurine enda // "Sailor Mercury" Figurine #2
useractor notenemy 7233 0 state grabspecialfigurine enda // "Sailor Moon" Figurine #2
useractor notenemy 7234 0 state grabspecialfigurine enda // "Sailor Mercury" Figurine #3
useractor notenemy 7235 0 state grabspecialfigurine enda // "Sailor Mars" Figurine #1
useractor notenemy 7236 0 state grabspecialfigurine enda // "Sailor Jupiter" Figurine #1
useractor notenemy 7237 0 state grabspecialfigurine enda // "Sailor Venus" Figurine #1
useractor notenemy 7238 0 state grabspecialfigurine enda // "Seria Hasselbag" Figurine
useractor notenemy 7239 0 state grabspecialfigurine enda // "Wendy Wilkinson" Figurine
useractor notenemy 7240 0 state grabspecialfigurine enda // "Shiza Kangansuk" Figurine
useractor notenemy 7242 0 state grabspecialfigurine enda // "Liza Kitsana" Figurine w/ stand
useractor notenemy 7243 0 state grabspecialfigurine enda // "Liza Kitsana" Figurine w/o stand
useractor notenemy 7244 0 state grabspecialfigurine enda // "Wendy Wilkinson" Figurine #2
useractor notenemy 7245 0 state grabspecialfigurine enda // "Heart Aino" Figurine w/o stand
// END of 'Need to HRP'

// End of Memorbilia Items / Collectables! :P

move HOLOMOVE
action HOLOSTANDING  0  1  5  1  1

useractor notenemy ESSENCEHOLO 0 
	ifmove 0
	{
		move HOLOMOVE geth
		action HOLOSTANDING
	}
enda

useractor notenemy CYBANISHOLO 0 
	ifmove 0
	{
		move HOLOMOVE geth
		action HOLOSTANDING
	}
enda

eventloadactor SECTOREFFECTOR
	// HUB Stuff
	getactor[THISACTOR].lotag hublotag
	getactor[THISACTOR].hitag hubhitag
	getactor[THISACTOR].sectnum hubmysector
	getactor[THISACTOR].extra hubact1
	
	// Other
	getactor[THISACTOR].lotag TEMP
	ifvare TEMP 7 // Teleporter
	{
		getactor[THISACTOR].sectnum TEMP2
		getsector[TEMP2].lotag TEMP3
		ifvare TEMP3 1 setactorvar[TEMP2].SUBMERGABLESECTOR? 1
		else ifvare TEMP3 2 setactorvar[TEMP2].SUBMERGABLESECTOR? 1
		else setactorvar[TEMP2].SUBMERGABLESECTOR? 0
	}
	ifvare TEMP 36 // Projectile Shooter
	{
		getactor[THISACTOR].extra TEMP2
		setactorvar[THISACTOR].ACTORATTACK TEMP2
	}

	/*
	// Skybox Stuff
	getactor[THISACTOR].lotag LOTAGSAVED
	getactor[THISACTOR].sectnum mysector
	
	ifvare LOTAGSAVED 80
	{
		setvar skybox 1
		setvar TEMP7 0
		whilevarvarn TEMP7 numsectors
		{
			// CHECK FLOORS
			getsector[TEMP7].floorpicnum TEMP2
			ifvare TEMP2 SKYBOX_TILE 
			{
				setsector[TEMP7].floorpicnum NULL_TILE 
			}
			// CHECK CEILINGS
			getsector[TEMP7].ceilingpicnum TEMP2
			ifvare TEMP2 SKYBOX_TILE 
			{
				setsector[TEMP7].ceilingpicnum NULL_TILE 
			}
			addvar TEMP7 1
		}
		setvar TEMP8 0
		whilevarvarn TEMP8 NUMWALLS
		{
			// CHECK WALLS
			getwall[TEMP8].picnum TEMP2
			ifvare TEMP2 SKYBOX_TILE 
			{
				setwall[TEMP8].picnum NULL_TILE 
			}
			addvar TEMP8 1
		}
	}
	*/
enda

eventloadactor EGG
	setactor[THISACTOR].htowner -1
enda
eventloadactor ROTATEGUN
	state getenemylevel2
enda
eventloadactor SHARK 
	state getenemylevel2
enda
eventloadactor LIZTROOP
	state getenemylevel2
enda
eventloadactor LIZTROOPSTAYPUT
	state getenemylevel2
enda
eventloadactor LIZTROOPSHOOT
	state getenemylevel2
enda
eventloadactor LIZTROOPJETPACK
	state getenemylevel2
enda
eventloadactor LIZTROOPONTOILET
	state getenemylevel2
enda
eventloadactor LIZTROOPJUSTSIT
	state getenemylevel2
enda
eventloadactor LIZTROOPDUCKING
	state getenemylevel2
enda
eventloadactor LIZTROOPRUNNING
	state getenemylevel2
enda
eventloadactor LIZMAN
	state getenemylevel2
enda
eventloadactor LIZMANSTAYPUT
	state getenemylevel2
enda
eventloadactor LIZMANSPITTING
	state getenemylevel2
enda
eventloadactor LIZMANJUMP
	state getenemylevel2
enda
eventloadactor LIZMANSHOOTING
	state getenemylevel2
enda
eventloadactor DRONE 
	state getenemylevel2
enda
eventloadactor OCTABRAIN
	state getenemylevel2
enda
eventloadactor OCTABRAINSTAYPUT 
	state getenemylevel2
enda
eventloadactor PIGCOP
	state getenemylevel2
enda
eventloadactor PIGCOPSTAYPUT 
	state getenemylevel2
enda
eventloadactor PIGCOPDIVE 
	state getenemylevel2
enda
eventloadactor BOSS1 
	state getenemylevel2
enda
eventloadactor BOSS1STAYPUT 
	state getenemylevel2
enda
eventloadactor BOSS1LOB 
	state getenemylevel2
enda
eventloadactor BOSS2 
	state getenemylevel2
enda
eventloadactor BOSS2STAYPUT 
	state getenemylevel2
enda
eventloadactor BOSS2SHOOT 
	state getenemylevel2
enda
eventloadactor BOSS2BREATH 
	state getenemylevel2
enda
eventloadactor BOSS3 
	state getenemylevel2
enda
eventloadactor BOSS3LOB 
	state getenemylevel2
enda
eventloadactor COMMANDER 
	state getenemylevel2
enda
eventloadactor COMMANDERSTAYPUT 
	state getenemylevel2
enda
eventloadactor TANK 
	sizeat 40 40
	state getenemylevel2
enda
eventloadactor BOSS4 
	ifspritepal 0 sizeat 80 80 
	else ifspritepal 3 sizeat 80 80 
	else ifspritepal 9 sizeat 80 80 
	else ifspritepal 24 sizeat 48 48
	else sizeat 40 40
	state getenemylevel2
enda
eventloadactor BOSS4STAYPUT 
	ifspritepal 0 sizeat 80 80 
	else ifspritepal 3 sizeat 80 80 
	else ifspritepal 9 sizeat 80 80 
	else ifspritepal 24 sizeat 48 48
	else sizeat 40 40
	state getenemylevel2
enda
eventloadactor NEWBEAST
	ifspritepal 17 sizeat 50 50 
	else ifspritepal 20 sizeat 60 60 
	else sizeat 40 40
	state getenemylevel2
enda
eventloadactor NEWBEASTSTAYPUT 
	ifspritepal 17 sizeat 50 50 
	else ifspritepal 20 sizeat 60 60 
	else sizeat 40 40
	state getenemylevel2
enda
eventloadactor NEWBEASTHANG 
	ifspritepal 17 sizeat 50 50 
	else ifspritepal 20 sizeat 60 60 
	else sizeat 40 40
	state getenemylevel2
enda
eventloadactor NEWBEASTJUMP 
	ifspritepal 17 sizeat 50 50 
	else ifspritepal 20 sizeat 60 60 
	else sizeat 40 40
	state getenemylevel2
enda
eventloadactor SCORPIONTANK
	sizeat 40 40
	state getenemylevel2
enda

// The hitag of the keypad actor is the passcode, the lotag should match that of the forcefield/activator/respawn/activator-locked, and the zvel should be the damage caused. Positive damage is exact, negative damage is percent-based. Extra is the type of damage [Normal, Electrical, Freeze, Fire, Poison, etc]
eventloadactor KEYPAD
{
	getactor[THISACTOR].hitag hitagsav // makes the passcode
	getactor[THISACTOR].lotag lotagsav // lotag to activate/deactivate
	getactor[THISACTOR].extra extrasav // damage type [-1 = Normal, 0 = Electrical, 1 = Freeze, 2 = Fire, 3 = Poison, 4 = etc] 
	getactor[THISACTOR].xvel xvelsav // security damage (when incorrect code is entered) [positive values = exact damage (in HP), negative values = %-based (in HP) (out of 100.0%)] 
	getactor[THISACTOR].yvel yvelsav // sound that plays when keypad fails [0 defaults to Tripbomb Beep]
	getactor[THISACTOR].zvel zvelsav // sound that plays when keypad succeeds [0 defaults to security camera beep]
	ifvare yvelsav 0 setvar yvelsav 782
	ifvare zvelsav 0 setvar zvelsav 781
	setactor[THISACTOR].hitag 0
	setactor[THISACTOR].lotag 0 
	setactor[THISACTOR].extra 0 
	setactor[THISACTOR].xvel 0 
	setactor[THISACTOR].yvel 0 
	setactor[THISACTOR].zvel 0 
}
enda 

useractor notenemy KEYPAD WEAKEST
	state useswitchcheckwall
	setvar OBJECTWIDTH 295
	setvar OBJECTHEIGHT 213
	state getspritecenterz
	setvarvar KEYSCANNERZUP OBJECTCENTERZ
	subvarvar KEYSCANNERZUP OBJECTDIFF2
	setvarvar KEYSCANNERZDOWN OBJECTCENTERZ
	addvarvar KEYSCANNERZDOWN OBJECTDIFF2
	
	ifpdistl 1536
	{
		ifvare TEMP2 1
		{
			ifp pfacing
			{
				ifhitspace
				{
					ifcansee 
					{
						getactor[PLAYERID].z temp
						subvar temp 6144
						ifvarvarg temp KEYSCANNERZUP
						ifvarvarl temp KEYSCANNERZDOWN
						state stopsearchsounds
						ifvare com_pause 0
						{ 
							ifvare pad_id -1 // enter passcode entering mode 
							{
								setvarvar pad_id THISACTOR
								redefinequote 344 ^20ENTER THE PASSCODE...
								setvarvar fta fta_normal setvar ftq 344
							}
							else
							ifvarvare pad_id THISACTOR
							{
								ifvarvare pnum hitagsav // passcode accepted 
								{
									getplayer[THISACTOR].i temp
									operateactivators lotagsav 0 // temp 
									operatemasterswitches lotagsav
									operaterespawns lotagsav
									state checkforforcefields
									setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
									state getworldtile
									soundoncevar zvelsav
									setvar MISCARRAYID 52 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 6 // pad-button12timer
									redefinequote 334 ^23PASSCODE ACCEPTED!!
									setvarvar fta fta_normal setvar ftq 334
									state clearpad 
								}
								else // passcode rejected
								{
									setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
									state getworldtile
									soundoncevar yvelsav
									state keypadhandscannerdamage
									setvar MISCARRAYID 52 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 6 // pad-button12timer
									redefinequote 334 ^10PASSCODE DENIED!!
									setvarvar fta fta_normal setvar ftq 334
									state clearpad
								}
							} 
							setvar com_pause 10 // This sets a delay between presses of space so that everything doesn't happen at once.
						}
					}
				}
			}
		}
	}
	ifvarvare pad_id THISACTOR // this block disengages the player from the keypad when they move or look away from it. 
	{
		ifpdistg 1536 state clearpad 
		ifp pfacing nullop else state clearpad
		ifcansee nullop else state clearpad 
	
		getactor[PLAYERID].z temp
		subvar temp 6144
		ifvarvarl temp KEYSCANNERZUP state clearpad 
	
		getactor[PLAYERID].z temp
		subvar temp 6144
		ifvarvarg temp KEYSCANNERZDOWN state clearpad 
	} 
enda

// The hitag of the Handscanner actor is the character-bitfield, and the lotag should match that of the activator or activator-locked. 
eventloadactor COMPACTHANDSCANNER
	state loadhandscanner
enda 

// The hitag of the Handscanner actor is the character-bitfield, and the lotag should match that of the activator or activator-locked. 
eventloadactor COMPACTHANDSCANNER2
	state loadhandscanner
enda 

// The hitag of the Handscanner actor is the character-bitfield, and the lotag should match that of the activator or activator-locked. 
eventloadactor HANDSCANNER
	state loadhandscanner
enda 

// The hitag of the Handscanner actor is the character-bitfield, and the lotag should match that of the activator or activator-locked. 
eventloadactor HANDSCANNER2
	state loadhandscanner
enda 

useractor notenemy COMPACTHANDSCANNER WEAKEST
	state handscannercode
enda

useractor notenemy COMPACTHANDSCANNER2 WEAKEST
	state handscannercode
enda

useractor notenemy HANDSCANNER WEAKEST
	state handscannercode
enda

useractor notenemy HANDSCANNER2 WEAKEST
	state handscannercode
enda

eventloadactor ACCESSCARD2 state setpickupflags enda
useractor notenemy ACCESSCARD2
	sizeat 40 40
	ifvare mainmenu 0 fall
	ifmove RESPAWN_ACTOR_FLAG
		state respawnit
	else
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		ifvarg CURRENTHITPOINTS 0 ifpdistl RETRIEVEDISTANCE ifcount 6 ifcanseetarget
		{
			ifspritepal 0 
			{
				ifvarand ACCESSCARDS? 1 break 
				else
				{
					addvar ACCESSCARDS? 1 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^16BLUE^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 21
			{
				ifvarand ACCESSCARDS? 2 break 
				else
				{
					addvar ACCESSCARDS? 2 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^21RED^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 23
			{
				ifvarand ACCESSCARDS? 4 break 
				else
				{
					addvar ACCESSCARDS? 4 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^23YELLOW^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 22
			{
				ifvarand ACCESSCARDS? 8 break 
				else
				{
					addvar ACCESSCARDS? 8 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^22GREEN^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 11
			{
				ifvarand ACCESSCARDS? 8 break 
				else
				{
					addvar ACCESSCARDS? 8 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^22GREEN^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 12
			{
				ifvarand ACCESSCARDS? 16 break 
				else
				{
					addvar ACCESSCARDS? 16 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^12SILVER^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 15
			{
				ifvarand ACCESSCARDS? 32 break 
				else
				{
					addvar ACCESSCARDS? 32 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^15BROWN^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			ifspritepal 24
			{
				ifvarand ACCESSCARDS? 64 break 
				else
				{
					addvar ACCESSCARDS? 64 setplayer[THISACTOR].got_access ACCESSCARDS?
					redefinequote 43 ^24BLOODY^0 ACCESS CARD
					setvarvar fta fta_normal setvar ftq 43
					state activationflag state getcode
				} 
			}
			else
			{ 
				redefinequote 43 ACCESS CARD
				setvarvar fta fta_normal setvar ftq 43
				state activationflag state getcode
			}
		}
	}
enda

define DUKEKEYBEACON 6264
define VISTAKEYBEACON 6265
define SWKEYBEACON 6266

spritenoshade DUKEKEYBEACON 
spritenoshade VISTAKEYBEACON
spritenoshade SWKEYBEACON

useractor notenemy DUKEKEYBEACON state MAPBEACON enda
useractor notenemy VISTAKEYBEACON state MAPBEACON enda
useractor notenemy SWKEYBEACON state MAPBEACON enda

state convertaccessswitches
	getactor[THISACTOR].hitag hitagsav
	setactorvar[RETURN].hitagsav hitagsav
	getactor[THISACTOR].lotag lotagsav
	setactorvar[RETURN].lotagsav lotagsav
	setactor[RETURN].hitag 0
	setactor[RETURN].lotag 0
	getactor[THISACTOR].shade TEMP
	setactor[RETURN].shade TEMP
	getactor[THISACTOR].pal TEMP
	setactor[RETURN].pal TEMP
	getactor[THISACTOR].cstat TEMP
	setactor[RETURN].cstat TEMP
	getactor[THISACTOR].xrepeat TEMP
	setactor[RETURN].xrepeat TEMP
	getactor[THISACTOR].yrepeat TEMP
	setactor[RETURN].yrepeat TEMP
	getactor[THISACTOR].x TEMP
	setactor[RETURN].x TEMP
	getactor[THISACTOR].y TEMP
	setactor[RETURN].y TEMP
	getactor[THISACTOR].z TEMP
	setactor[RETURN].z TEMP
	getactor[THISACTOR].ang TEMP
	setactor[RETURN].ang TEMP
	getactor[THISACTOR].sectnum TEMP
	ifvarn TEMP -1 changespritesect RETURN TEMP
	
	getactor[THISACTOR].clipdist TEMP
	setactor[RETURN].clipdist TEMP
	setactor[RETURN].owner RETURN
ends

// The hitag of the Handscanner actor is the character-bitfield, and the lotag should match that of the activator or activator-locked. 
eventloadactor ACCESSSWITCH
	espawn DUKEKEYBEACON
	getactor[THISACTOR].pal TEMP
	setactor[RETURN].pal TEMP
enda 

eventloadactor ACCESSSWITCH2
	espawn DUKEKEYBEACON
	getactor[THISACTOR].pal TEMP
	setactor[RETURN].pal TEMP
enda 

eventloadactor ACCESSSWITCH3
	getactor[THISACTOR].hitag hitagsav
	getactor[THISACTOR].lotag lotagsav
	setactor[THISACTOR].hitag 0
	setactor[THISACTOR].lotag 0 
	espawn DUKEKEYBEACON
	getactor[THISACTOR].pal TEMP
	setactor[RETURN].pal TEMP
enda 

eventloadactor ACCESSSWITCH4
	getactor[THISACTOR].hitag hitagsav
	getactor[THISACTOR].lotag lotagsav
	setactor[THISACTOR].hitag 0
	setactor[THISACTOR].lotag 0 
	espawn DUKEKEYBEACON
	getactor[THISACTOR].pal TEMP
	setactor[RETURN].pal TEMP
enda 

useractor notenemy ACCESSSWITCH3 WEAKEST
	state keyscannercode
enda

useractor notenemy ACCESSSWITCH4 WEAKEST
	state keyscannercode
enda

eventloadactor WATERBUBBLEMAKER
	espawn AIRBUBBLEGENERATOR
	getactor[THISACTOR].x temp
	setactor[RETURN].x temp
	getactor[THISACTOR].y temp
	setactor[RETURN].y temp
	getactor[THISACTOR].z temp
	addvar temp -1024
	setactor[RETURN].z temp
	getactor[THISACTOR].cstat temp
	setactor[RETURN].cstat temp
	getactor[THISACTOR].xrepeat temp
	setactor[RETURN].xrepeat temp
	getactor[THISACTOR].yrepeat temp
	setactor[RETURN].yrepeat temp
	killit
enda 

eventloadactor AIRBUBBLE
enda 

useractor notenemy AIRBUBBLE 0
	ifvare mainmenu 1 sleeptime 1
	ifvare tempe 0 { sizeat 11 7 addvar tempe 1 }
	else ifvare tempe 1 { sizeat 10 8 addvar tempe 1 }
	else ifvare tempe 2 { sizeat 9 9 addvar tempe 1 }
	else ifvare tempe 3 { sizeat 8 10 addvar tempe 1 }
	else ifvare tempe 4 { sizeat 7 11 addvar tempe 1 }
	else ifvare tempe 5 { sizeat 8 10 addvar tempe 1 }
	else ifvare tempe 6 { sizeat 9 9 addvar tempe 1 }
	else ifvare tempe 7 { sizeat 10 8 addvar tempe 1 }
	else ifvare tempe 8 setvar tempe 0
	
	action BUBBLE
	move BUBMOVE getv geth randomangle

	// Player
	ifvare mainmenu 0
	{
		ifvarg CURRENTHITPOINTS 0 // ifp palive
		{
			ifvare VEHICLEID -1
			{
				ifpdistl 633
				{
					ifvarvarl AIRTIME MAXAIRTIME 
					{
						setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
						state getworldtile
						globalsound DUKE_GET
						randvarvar tempd tempb
						ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
						randvarvar tempd tempc
						ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
						addvarvar AIRTIME temp
						ifvarvarg AIRTIME MAXAIRTIME { setvarvar AIRTIME MAXAIRTIME setvar AIRTIMEEXTRA 1000 }
						killit
					}
					else
					{
						ifvarg SCUBATIME 0 ifvarl SCUBATIME SCUBA_AMOUNT
						{
							setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
							state getworldtile
							globalsound DUKE_GET
							randvarvar tempd tempb
							ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
							randvarvar tempd tempc
							ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
							addvarvar SCUBATIME temp
							ifvarg SCUBATIME SCUBA_AMOUNT setvar SCUBATIME SCUBA_AMOUNT
							killit
						}
					}
				}
			}
		}
	
		// Actor
		state itemseekingactor
		ifvarn ITEMSEEK -1
		{
			ifvarg actorvar[ITEMSEEK].ACTORHP 0 // -1
			{
				getactorvar[ITEMSEEK].ACTORAIRTIME ITEMSEEKB
				getactorvar[ITEMSEEK].ACTORMAXAIRTIME TEMP
				ifvarvarl ITEMSEEKB TEMP
				{
					setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
					state getworldtile
					sound DUKE_GET
					randvarvar tempd tempb
					ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
					randvarvar tempd tempc
					ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
					addvarvar ITEMSEEKB temp
					ifvarvarg ITEMSEEKB TEMP setvarvar ITEMSEEKB TEMP 
					setactorvar[ITEMSEEK].ACTORAIRTIME ITEMSEEKB
					state resetitemtarget
					killit
				}
				else
				{
					getactorvar[ITEMSEEK].ACTORAIRTANKAMOUNT ITEMSEEKC
					ifvarg ITEMSEEKC 0
						ifvarl ITEMSEEKC SCUBA_AMOUNT
						{
							setvar MISCARRAYID 24 setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT 0 // WORLDTILE-SHUFFLES
							state getworldtile
							sound DUKE_GET
							randvarvar tempd tempb
							ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
							randvarvar tempd tempc
							ifrnd 128 addvarvar temp tempd else subvarvar temp tempd
							addvarvar ITEMSEEKC temp
							ifvarg ITEMSEEKC SCUBA_AMOUNT setvar ITEMSEEKC SCUBA_AMOUNT
							setactorvar[ITEMSEEK].ACTORAIRTANKAMOUNT ITEMSEEKC
							state resetitemtarget
							killit
						}
				}
			}
		}
	}
	
	ifvare sector[THISACTOR].lotag 2
	{
		ifceilingdistl 1 killit
		ifceilingdistl 2 ifrnd 128 killit
		ifceilingdistl 4 ifrnd 85 killit
		ifceilingdistl 8 ifrnd 64 killit
		iffloordistl 1 killit
		iffloordistl 2 ifrnd 128 killit
		iffloordistl 4 ifrnd 85 killit
		iffloordistl 8 ifrnd 64 killit
	}
	else killit
enda

eventloadactor AIRBUBBLEGENERATOR
	getactor[THISACTOR].z temp
	addvar temp -1024
	setactor[THISACTOR].z temp
	getactor[THISACTOR].hitag hitagsav // Set this to determine the #/256 chance of a spawn occuring [defaults to 128[50%] if not set]
	ifvare hitagsav 0 setvar hitagsav 128
	ifvarg hitagsav 256 setvar hitagsav 256
	getactor[THISACTOR].lotag lotagsav // Set this to the # of tics to wait between each bubble spawn [defaults to 6 if not set]
	ifvare lotagsav 0 setvar lotagsav 6
	getactor[THISACTOR].xvel temp // Set this to the central value of airtime in each bubble [defaults to 12 if not set]
	ifvarl temp 1 setvar temp 12
	getactor[THISACTOR].yvel tempb // Set this to the error of the first airtime tic count in each bubble spawned [+/- from the central value] [+/- amounts are the same]
	getactor[THISACTOR].zvel tempc // Set this to the error of the second airtime tic count in each bubble spawned [+/- from the central value] [+/- amounts are the same]
	// OFF-LIMITS
	getactor[THISACTOR].extra TEMP // -1 Means the error times will default to 3, anything else means values of 0 will be accepted
	// END OFF-LIMITS
	
	ifvare TEMP -1 
	{ 
		ifvare tempb 0 setvar tempb 3
		ifvare tempb 0 setvar tempc 3
	}
	setactor[THISACTOR].hitag 0
	setactor[THISACTOR].lotag 0 
	setactor[THISACTOR].xvel 0
	setactor[THISACTOR].yvel 0
	setactor[THISACTOR].zvel 0
	// OFF-LIMITS
	setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
	// END OFF-LIMITS
	setvar SKILLSET? 1
	sizeat 40 40
enda 

useractor notenemy AIRBUBBLEGENERATOR 0
	ifvare mainmenu 1 sleeptime 1
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].z temp
		addvar temp -1024
		setactor[THISACTOR].z temp
		getactor[THISACTOR].hitag hitagsav // Set this to determine the #/256 chance of a spawn occuring [defaults to 128[50%] if not set]
		ifvare hitagsav 0 setvar hitagsav 128
		ifvarg hitagsav 256 setvar hitagsav 256
		getactor[THISACTOR].lotag lotagsav // Set this to the # of tics to wait between each bubble spawn [defaults to 6 if not set]
		ifvare lotagsav 0 setvar lotagsav 6
		getactor[THISACTOR].xvel temp // Set this to the central value of airtime in each bubble [defaults to 12 if not set]
		ifvarl temp 1 setvar temp 12
		getactor[THISACTOR].yvel tempb // Set this to the error of the first airtime tic count in each bubble spawned [+/- from the central value] [+/- amounts are the same]
		getactor[THISACTOR].zvel tempc // Set this to the error of the second airtime tic count in each bubble spawned [+/- from the central value] [+/- amounts are the same]
		getactor[THISACTOR].extra TEMP // -1 Means the error times will default to 3, anything else means values of 0 will be accepted
		ifvare TEMP -1 
		{ 
			ifvare tempb 0 setvar tempb 3
			ifvare tempb 0 setvar tempc 3
		}
		setactor[THISACTOR].hitag 0
		setactor[THISACTOR].lotag 0 
		setactor[THISACTOR].xvel 0
		setactor[THISACTOR].yvel 0
		setactor[THISACTOR].zvel 0
		// OFF-LIMITS
		setactor[THISACTOR].extra -1 // TODO: LEAVE-THIS
		// END OFF-LIMITS
		setvar SKILLSET? 1
		sizeat 40 40
	}
	
	setactor[THISACTOR].cstat 32768
	ifvare mainmenu 0
	{
		ifcansee
		{
			ifcount 1
			{
				addvar tempd 1
				ifvarvare tempd lotagsav
				{
					randvar tempe 256
					ifvarvarl tempe hitagsav state spawnairbubble
					else ifvarvare tempe hitagsav state spawnairbubble
					setvar tempd 0
				}
				else
				ifvarvarg tempd lotagsav
				{
					randvar tempe 256
					ifvarvarl tempe hitagsav state spawnairbubble
					else ifvarvare tempe hitagsav state spawnairbubble
					setvar tempd 0
				}
			}
		}
	}
enda


// CHARACTERSTARTUP Sprite will set various things properly, like forcing a specfic group of characters at the start of a level.
define CHARACTERSTARTUP 7955

eventloadactor CHARACTERSTARTUP
	getactor[THISACTOR].lotag lotagsav
	setactor[THISACTOR].lotag 0  
	getactor[THISACTOR].hitag hitagsav
	setactor[THISACTOR].hitag 0
	getactor[THISACTOR].xvel temp
	setactor[THISACTOR].xvel 0
	getactor[THISACTOR].yvel temp
	setactor[THISACTOR].yvel 0
	getactor[THISACTOR].zvel temp
	setactor[THISACTOR].zvel 0
enda

useractor notenemy CHARACTERSTARTUP 1
	ifvarn lotagsav 0
	{
		addvar SKILLSET? 1
		ifvare SKILLSET? 2
		{
			ifvarand lotagsav 1 setvar DUKE? 1 else setvar DUKE? 0
			ifvarand lotagsav 2 setvar JACK? 1 else setvar JACK? 0
			ifvarand lotagsav 4 setvar BUBSY? 1 else setvar BUBSY? 0
			ifvarand lotagsav 8 setvar AMI? 1 else setvar AMI? 0
			ifvarand lotagsav 16 setvar LOWANG? 1 else setvar LOWANG? 0
			ifvarand lotagsav 32 setvar ESSENCE? 1 else setvar ESSENCE? 0
			ifvarand lotagsav 64 setvar TED? 1 else setvar TED? 0
			ifvarand lotagsav 128 setvar LISA? 1 else setvar LISA? 0
			ifvarand lotagsav 256 setvar CYBANIS? 1 else setvar CYBANIS? 0
			ifvarand lotagsav 512 setvar NETHRA? 1 else setvar NETHRA? 0
			ifvarand lotagsav 1024 setvar PAULA? 1 else setvar PAULA? 0
			ifvarand lotagsav 2048 setvar LORI? 1 else setvar LORI? 0
			ifvarand lotagsav 4096 setvar MINAKO? 1 else setvar MINAKO? 0
			ifvarand lotagsav 8192 setvar MYSTERY1? 1 else setvar MYSTERY1? 0
			ifvarand lotagsav 16384 setvar MAKEN? 1 else setvar MAKEN? 0
			ifvarl hitagsav 1 { randvar hitagsav 14 addvar hitagsav 1 }
			ifvarg hitagsav 15 { randvar hitagsav 14 addvar hitagsav 1 }
			setvarvar CHARACTERSELECTED? hitagsav
			ifvarvarn CURRENTHITPOINTS MAXHITPOINTS setvarvar CURRENTHITPOINTS MAXHITPOINTS
			ifvarvarn CURRENTENERGYPOINTS MAXENERGYPOINTS setvarvar CURRENTENERGYPOINTS MAXENERGYPOINTS
			getplayer[THISACTOR].player_par TEMPVAR4 // addlogvar TEMPVAR4
			killit
		}
	}
enda

useractor notenemy POINTERARROW 0
	sleeptime 0
	spriteflags 80 // 84, 80, 16
	state checkattachedobjectstatus
	
	ifvare SKILLSET? 0
	{
		getactorvar[THISACTOR].POINTERICONPARENT PARENTID
		getactor[PARENTID].picnum ATTACHEDPICNUM
	}
	
	ifvare ATTACHEDPICNUM APLAYER state killattachedobject
	else
	{
		setvar MISCARRAYID 78 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // HAVE-MERCURY-COMPUTER?
		ifvare MISCARRAYID_AMOUNTTEMP 0
		{
			ifvare debugtoggle 0 state killattachedobject
		}
		getactorvar[PARENTID].ACTORMAXHP tempb
		ifvarg tempb 0
		{
			// OFF-LIMITS
			getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
			// END OFF-LIMITS
			ifvarg TEMP 0
			{
				getactorvar[PARENTID].CLOAKED? temp
				ifvare temp 1 setactor[THISACTOR].cstat 32768 else state radararrow
			}
			else
			ifvare TEMP 0
			{
				getactorvar[PARENTID].FROZEN? temp
				ifvare temp 1 state radararrow
				else
				{
					getactorvar[PARENTID].CHOKING? temp
					ifvare temp 1 state radararrow else state killattachedobject
				}
			}
			else
			ifvarl TEMP 0 state killattachedobject
		}
		else state killattachedobject
	}
enda

useractor notenemy POWERUPICONSTRIP 0
	sleeptime 0
	spriteflags 80 // 84, 80, 16
	state checkattachedobjectstatus
	
	ifvare SKILLSET? 0
	{
		getactorvar[THISACTOR].POWERUPSTRIPPARENT PARENTID
		getactor[PARENTID].picnum ATTACHEDPICNUM
	}
	
	ifvare ATTACHEDPICNUM APLAYER getactorvar[PARENTID].MAXHITPOINTS tempb else getactorvar[PARENTID].ACTORMAXHP tempb
	
	ifvarg tempb 0
	{
		// OFF-LIMITS
		getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
		// END OFF-LIMITS
		ifvarg TEMP 0
		{
			getactorvar[PARENTID].CLOAKED? temp
			ifvare temp 1 setactor[THISACTOR].cstat 32768 else state iconstripconditions
		}
		else
		ifvare TEMP 0
		{
			getactorvar[PARENTID].FROZEN? temp
			ifvare temp 1 state iconstripconditions
			else
			{
				getactorvar[PARENTID].CHOKING? temp
				ifvare temp 1 state iconstripconditions
				else
				{
					getactor[PARENTID].picnum tempd
					ifvarn tempd APLAYER state killattachedobject
				}
			}
		}
		else
		ifvarl TEMP 0
		{
			getactor[PARENTID].picnum tempd
			ifvarn tempd APLAYER state killattachedobject
		}
	}
	else
	{
		getactor[PARENTID].picnum tempd
		ifvarn tempd APLAYER state killattachedobject
	}
enda

useractor notenemy INVULNICON 0
	sleeptime 0
	spriteflags 80 // 84, 80, 16
	state checkattachedobjectstatus
	
	ifvare SKILLSET? 0
	{
		getactorvar[THISACTOR].INVULNICONPARENT PARENTID
		getactor[PARENTID].picnum ATTACHEDPICNUM
	}
	
	ifvare ATTACHEDPICNUM APLAYER
	{
		setvar PARENTID -1
		setactor[THISACTOR].cstat 32768
		killit  
	}
	else
	{
		getactorvar[PARENTID].ACTORMAXHP tempb
	}
	
	ifvarg tempb 0
	{
		// OFF-LIMITS
		getactor[PARENTID].extra TEMP // TODO: LEAVE-THIS
		// ENDS OFF-LIMITS
		ifvarg TEMP 0
		{
			getactorvar[PARENTID].CLOAKED? temp
			ifvare temp 1 setactor[THISACTOR].cstat 32768 else state invulnicon
		}
		else
		ifvare TEMP 0
		{
			getactorvar[PARENTID].FROZEN? temp
			ifvare temp 1 state invulnicon
			else
			{
				getactorvar[PARENTID].CHOKING? temp
				ifvare temp 1 state invulnicon
				else
				{
					getactor[PARENTID].picnum tempe
					ifvarn tempe APLAYER
					{
						setvar PARENTID -1
						setactor[THISACTOR].cstat 32768
						killit
					}
				}
			}
		}
		else
		ifvarl TEMP 0
		{
			getactor[PARENTID].picnum tempe
			ifvarn tempe APLAYER
			{
				setvar PARENTID -1
				setactor[THISACTOR].cstat 32768
				killit
			}
		}
	}
	else
	{
		getactor[PARENTID].picnum tempe
		ifvarn tempe APLAYER
		{
			setvar PARENTID -1
			setactor[THISACTOR].cstat 32768
			killit
		}
	}
enda

// "World Tiles" System
spritenoshade WORLDTILE1
spritenoshade WORLDTILE2
spritenoshade WORLDTILE3
spritenoshade WORLDTILE4
spritenoshade WORLDTILE5
spritenoshade WORLDTILE6
spritenoshade WORLDTILE7
spritenoshade WORLDTILE8
spritenoshade WORLDTILE9
spritenoshade WORLDTILE10
spritenoshade WORLDTILE11
spritenoshade WORLDTILE12
spritenoshade WORLDTILE13
spritenoshade WORLDTILE14
spritenoshade WORLDTILE15
spritenoshade WORLDTILE16
spritenoshade WORLDTILE17
spritenoshade WORLDTILE18
spritenoshade WORLDTILE19
spritenoshade WORLDTILE20
spritenoshade WORLDTILE21
spritenoshade WORLDTILE22
spritenoshade WORLDTILE23
spritenoshade WORLDTILE24
spritenoshade WORLDTILE25
spritenoshade WORLDTILE26
spritenoshade WORLDTILE27
spritenoshade WORLDTILE28
spritenoshade WORLDTILE29
spritenoshade WORLDTILE30
spritenoshade WORLDTILE31
spritenoshade WORLDTILE32
spritenoshade WORLDTILE33
spritenoshade WORLDTILE34
spritenoshade WORLDTILE35
spritenoshade WORLDTILE36
spritenoshade WORLDTILE37
spritenoshade WORLDTILE38
spritenoshade WORLDTILE39
spritenoshade WORLDTILE40
spritenoshade WORLDTILE41
spritenoshade WORLDTILE42
spritenoshade WORLDTILE43
spritenoshade WORLDTILE44
spritenoshade WORLDTILE45
spritenoshade WORLDTILE46
spritenoshade WORLDTILE47
spritenoshade WORLDTILE48
spritenoshade WORLDTILE49
spritenoshade WORLDTILE50
spritenoshade WORLDTILE51
spritenoshade WORLDTILE52
spritenoshade WORLDTILE53
spritenoshade WORLDTILE54
spritenoshade WORLDTILE55
spritenoshade WORLDTILE56
spritenoshade WORLDTILE57
spritenoshade WORLDTILE58
spritenoshade WORLDTILE59
spritenoshade WORLDTILE60
spritenoshade WORLDTILE61
spritenoshade WORLDTILE62
spritenoshade WORLDTILE63
spritenoshade WORLDTILE64
spritenoshade WORLDTILE65
spritenoshade WORLDTILE66
spritenoshade WORLDTILE67
spritenoshade WORLDTILE68
spritenoshade WORLDTILE69
spritenoshade WORLDTILE70
spritenoshade WORLDTILE71
spritenoshade WORLDTILE72
spritenoshade WORLDTILE73
spritenoshade WORLDTILE74
spritenoshade WORLDTILE75
spritenoshade WORLDTILE76
spritenoshade WORLDTILE77
spritenoshade WORLDTILE78
spritenoshade WORLDTILE79
spritenoshade WORLDTILE80
spritenoshade WORLDTILE81
spritenoshade WORLDTILE82
spritenoshade WORLDTILE83
spritenoshade WORLDTILE84
spritenoshade WORLDTILE85
spritenoshade WORLDTILE86
spritenoshade WORLDTILE87
spritenoshade WORLDTILE88
spritenoshade WORLDTILE89
spritenoshade WORLDTILE90
spritenoshade WORLDTILE91
spritenoshade WORLDTILE92
spritenoshade WORLDTILE93
spritenoshade WORLDTILE94
spritenoshade WORLDTILE95
spritenoshade WORLDTILE96
spritenoshade WORLDTILE97
spritenoshade WORLDTILE98
spritenoshade WORLDTILE99
spritenoshade WORLDTILE100
spritenoshade WORLDTILE101
spritenoshade WORLDTILE102
spritenoshade WORLDTILE103
spritenoshade WORLDTILE104
spritenoshade WORLDTILE105
spritenoshade WORLDTILE106
spritenoshade WORLDTILE107
spritenoshade WORLDTILE108
spritenoshade WORLDTILE109
spritenoshade WORLDTILE110
spritenoshade WORLDTILE111
spritenoshade WORLDTILE112
spritenoshade WORLDTILE113
spritenoshade WORLDTILE114
spritenoshade WORLDTILE115
spritenoshade WORLDTILE116
spritenoshade WORLDTILE117
spritenoshade WORLDTILE118
spritenoshade WORLDTILE119
spritenoshade WORLDTILE120
spritenoshade WORLDTILE121
spritenoshade WORLDTILE122
spritenoshade WORLDTILE123
spritenoshade WORLDTILE124
spritenoshade WORLDTILE125
spritenoshade WORLDTILE126
spritenoshade WORLDTILE127
spritenoshade WORLDTILE128
spritenoshade WORLDTILE129
spritenoshade WORLDTILE130
spritenoshade WORLDTILE131
spritenoshade WORLDTILE132
spritenoshade WORLDTILE133
spritenoshade WORLDTILE134
spritenoshade WORLDTILE135
spritenoshade WORLDTILE136
spritenoshade WORLDTILE137
spritenoshade WORLDTILE138
spritenoshade WORLDTILE139
spritenoshade WORLDTILE140
spritenoshade WORLDTILE141
spritenoshade WORLDTILE142
spritenoshade WORLDTILE143
spritenoshade WORLDTILE144
spritenoshade WORLDTILE145
spritenoshade WORLDTILE146
spritenoshade WORLDTILE147
spritenoshade WORLDTILE148
spritenoshade WORLDTILE149
spritenoshade WORLDTILE150
spritenoshade WORLDTILE151
spritenoshade WORLDTILE152
spritenoshade WORLDTILE153
spritenoshade WORLDTILE154
spritenoshade WORLDTILE155
spritenoshade WORLDTILE156
spritenoshade WORLDTILE157
spritenoshade WORLDTILE158
spritenoshade WORLDTILE159
spritenoshade WORLDTILE160
spritenoshade WORLDTILE161
spritenoshade WORLDTILE162
spritenoshade WORLDTILE163
spritenoshade WORLDTILE164
spritenoshade WORLDTILE165
spritenoshade WORLDTILE166
spritenoshade WORLDTILE167
spritenoshade WORLDTILE168
spritenoshade WORLDTILE169
spritenoshade WORLDTILE170
spritenoshade WORLDTILE171
spritenoshade WORLDTILE172
spritenoshade WORLDTILE173
spritenoshade WORLDTILE174
spritenoshade WORLDTILE175
spritenoshade WORLDTILE176
spritenoshade WORLDTILE177
spritenoshade WORLDTILE178
spritenoshade WORLDTILE179
spritenoshade WORLDTILE180
spritenoshade WORLDTILE181
spritenoshade WORLDTILE182
spritenoshade WORLDTILE183
spritenoshade WORLDTILE184
spritenoshade WORLDTILE185
spritenoshade WORLDTILE186
spritenoshade WORLDTILE187
spritenoshade WORLDTILE188
spritenoshade WORLDTILE189
spritenoshade WORLDTILE190
spritenoshade WORLDTILE191
spritenoshade WORLDTILE192
spritenoshade WORLDTILE193
spritenoshade WORLDTILE194
spritenoshade WORLDTILE195
spritenoshade WORLDTILE196
spritenoshade WORLDTILE197
spritenoshade WORLDTILE198
spritenoshade WORLDTILE199
spritenoshade WORLDTILE200
spritenoshade WORLDTILE201
spritenoshade WORLDTILE202
spritenoshade WORLDTILE203
spritenoshade WORLDTILE204
spritenoshade WORLDTILE205
spritenoshade WORLDTILE206
spritenoshade WORLDTILE207
spritenoshade WORLDTILE208
spritenoshade WORLDTILE209
spritenoshade WORLDTILE210
spritenoshade WORLDTILE211
spritenoshade WORLDTILE212
spritenoshade WORLDTILE213
spritenoshade WORLDTILE214
spritenoshade WORLDTILE215
spritenoshade WORLDTILE216
spritenoshade WORLDTILE217
spritenoshade WORLDTILE218
spritenoshade WORLDTILE219
spritenoshade WORLDTILE220
spritenoshade WORLDTILE221
spritenoshade WORLDTILE222
spritenoshade WORLDTILE223
spritenoshade WORLDTILE224
spritenoshade WORLDTILE225
spritenoshade WORLDTILE226
spritenoshade WORLDTILE227
spritenoshade WORLDTILE228
spritenoshade WORLDTILE229
spritenoshade WORLDTILE230
spritenoshade WORLDTILE231
spritenoshade WORLDTILE232
spritenoshade WORLDTILE233
spritenoshade WORLDTILE234
spritenoshade WORLDTILE235
spritenoshade WORLDTILE236
spritenoshade WORLDTILE237
spritenoshade WORLDTILE238
spritenoshade WORLDTILE239
spritenoshade WORLDTILE240
spritenoshade WORLDTILE241
spritenoshade WORLDTILE242
spritenoshade WORLDTILE243
spritenoshade WORLDTILE244
spritenoshade WORLDTILE245
spritenoshade WORLDTILE246
spritenoshade WORLDTILE247
spritenoshade WORLDTILE248
spritenoshade WORLDTILE249
spritenoshade WORLDTILE250
spritenoshade WORLDTILE251
spritenoshade WORLDTILE252
spritenoshade WORLDTILE253
spritenoshade WORLDTILE254
spritenoshade WORLDTILE255
spritenoshade WORLDTILE256

eventloadactor WORLDTILE1
	ifvarand WORLDTILEBITFIELD1 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE1 0 // World Tile #1: ""
	ifvarand WORLDTILEBITFIELD1 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 1
							redefinequote 410 ^20WORLD TILE #1 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE2
	ifvarand WORLDTILEBITFIELD1 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE2 0 // World Tile #2: ""
	ifvarand WORLDTILEBITFIELD1 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 2
							redefinequote 410 ^20WORLD TILE #2 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE3
	ifvarand WORLDTILEBITFIELD1 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE3 0 // World Tile #3: ""
	ifvarand WORLDTILEBITFIELD1 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 4
							redefinequote 410 ^20WORLD TILE #3 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE4
	ifvarand WORLDTILEBITFIELD1 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE4 0 // World Tile #4: ""
	ifvarand WORLDTILEBITFIELD1 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 8
							redefinequote 410 ^20WORLD TILE #4 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE5
	ifvarand WORLDTILEBITFIELD1 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE5 0 // World Tile #5: ""
	ifvarand WORLDTILEBITFIELD1 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 16
							redefinequote 410 ^20WORLD TILE #5 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE6
	ifvarand WORLDTILEBITFIELD1 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE6 0 // World Tile #6: ""
	ifvarand WORLDTILEBITFIELD1 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 32
							redefinequote 410 ^20WORLD TILE #6 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE7
	ifvarand WORLDTILEBITFIELD1 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE7 0 // World Tile #7: ""
	ifvarand WORLDTILEBITFIELD1 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 64
							redefinequote 410 ^20WORLD TILE #7 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE8
	ifvarand WORLDTILEBITFIELD1 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE8 0 // World Tile #8: ""
	ifvarand WORLDTILEBITFIELD1 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 128
							redefinequote 410 ^20WORLD TILE #8 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE9
	ifvarand WORLDTILEBITFIELD1 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE9 0 // World Tile #9: ""
	ifvarand WORLDTILEBITFIELD1 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 256
							redefinequote 410 ^20WORLD TILE #9 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE10
	ifvarand WORLDTILEBITFIELD1 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE10 0 // World Tile #10: ""
	ifvarand WORLDTILEBITFIELD1 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 512
							redefinequote 410 ^20WORLD TILE #10 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE11
	ifvarand WORLDTILEBITFIELD1 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE11 0 // World Tile #11: ""
	ifvarand WORLDTILEBITFIELD1 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 1024
							redefinequote 410 ^20WORLD TILE #11 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE12
	ifvarand WORLDTILEBITFIELD1 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE12 0 // World Tile #12: ""
	ifvarand WORLDTILEBITFIELD1 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 2048
							redefinequote 410 ^20WORLD TILE #12 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE13
	ifvarand WORLDTILEBITFIELD1 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE13 0 // World Tile #13: ""
	ifvarand WORLDTILEBITFIELD1 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 4096
							redefinequote 410 ^20WORLD TILE #13 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE14
	ifvarand WORLDTILEBITFIELD1 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE14 0 // World Tile #14: ""
	ifvarand WORLDTILEBITFIELD1 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 8192
							redefinequote 410 ^20WORLD TILE #14 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE15
	ifvarand WORLDTILEBITFIELD1 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE15 0 // World Tile #15: ""
	ifvarand WORLDTILEBITFIELD1 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 16384
							redefinequote 410 ^20WORLD TILE #15 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE16
	ifvarand WORLDTILEBITFIELD1 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE16 0 // World Tile #16: ""
	ifvarand WORLDTILEBITFIELD1 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 32768
							redefinequote 410 ^20WORLD TILE #16 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE17
	ifvarand WORLDTILEBITFIELD1 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE17 0 // World Tile #17: ""
	ifvarand WORLDTILEBITFIELD1 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 65536
							redefinequote 410 ^20WORLD TILE #17 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE18
	ifvarand WORLDTILEBITFIELD1 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE18 0 // World Tile #18: ""
	ifvarand WORLDTILEBITFIELD1 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 131072
							redefinequote 410 ^20WORLD TILE #18 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE19
	ifvarand WORLDTILEBITFIELD1 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE19 0 // World Tile #19: ""
	ifvarand WORLDTILEBITFIELD1 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 262144
							redefinequote 410 ^20WORLD TILE #19 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE20
	ifvarand WORLDTILEBITFIELD1 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE20 0 // World Tile #20: ""
	ifvarand WORLDTILEBITFIELD1 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 524288
							redefinequote 410 ^20WORLD TILE #20 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE21
	ifvarand WORLDTILEBITFIELD1 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE21 0 // World Tile #21: ""
	ifvarand WORLDTILEBITFIELD1 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 1048576
							redefinequote 410 ^20WORLD TILE #21 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE22
	ifvarand WORLDTILEBITFIELD1 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE22 0 // World Tile #22: ""
	ifvarand WORLDTILEBITFIELD1 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 2097152
							redefinequote 410 ^20WORLD TILE #22 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE23
	ifvarand WORLDTILEBITFIELD1 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE23 0 // World Tile #23: ""
	ifvarand WORLDTILEBITFIELD1 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 4194304
							redefinequote 410 ^20WORLD TILE #23 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE24
	ifvarand WORLDTILEBITFIELD1 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE24 0 // World Tile #24: ""
	ifvarand WORLDTILEBITFIELD1 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 8388608
							redefinequote 410 ^20WORLD TILE #24 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE25
	ifvarand WORLDTILEBITFIELD1 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE25 0 // World Tile #25: ""
	ifvarand WORLDTILEBITFIELD1 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 16777216
							redefinequote 410 ^20WORLD TILE #25 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE26
	ifvarand WORLDTILEBITFIELD1 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE26 0 // World Tile #26: ""
	ifvarand WORLDTILEBITFIELD1 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 33554432
							redefinequote 410 ^20WORLD TILE #26 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE27
	ifvarand WORLDTILEBITFIELD1 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE27 0 // World Tile #27: ""
	ifvarand WORLDTILEBITFIELD1 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 67108864
							redefinequote 410 ^20WORLD TILE #27 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE28
	ifvarand WORLDTILEBITFIELD1 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE28 0 // World Tile #28: ""
	ifvarand WORLDTILEBITFIELD1 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 134217728
							redefinequote 410 ^20WORLD TILE #28 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE29
	ifvarand WORLDTILEBITFIELD1 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE29 0 // World Tile #29: ""
	ifvarand WORLDTILEBITFIELD1 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 268435456
							redefinequote 410 ^20WORLD TILE #29 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE30
	ifvarand WORLDTILEBITFIELD1 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE30 0 // World Tile #30: ""
	ifvarand WORLDTILEBITFIELD1 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 536870912
							redefinequote 410 ^20WORLD TILE #30 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE31
	ifvarand WORLDTILEBITFIELD1 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE31 0 // World Tile #31: ""
	ifvarand WORLDTILEBITFIELD1 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 1073741824
							redefinequote 410 ^20WORLD TILE #31 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE32
	ifvarand WORLDTILEBITFIELD1 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE32 0 // World Tile #32: ""
	ifvarand WORLDTILEBITFIELD1 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD1 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD1 2147483648
							redefinequote 410 ^20WORLD TILE #32 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #2
eventloadactor WORLDTILE33
	ifvarand WORLDTILEBITFIELD2 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE33 0 // World Tile #33: ""
	ifvarand WORLDTILEBITFIELD2 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 1
							redefinequote 410 ^20WORLD TILE #33 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE34
	ifvarand WORLDTILEBITFIELD2 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE34 0 // World Tile #34: ""
	ifvarand WORLDTILEBITFIELD2 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 2
							redefinequote 410 ^20WORLD TILE #34 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE35
	ifvarand WORLDTILEBITFIELD2 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE35 0 // World Tile #35: ""
	ifvarand WORLDTILEBITFIELD2 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 4
							redefinequote 410 ^20WORLD TILE #35 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE36
	ifvarand WORLDTILEBITFIELD2 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE36 0 // World Tile #36: ""
	ifvarand WORLDTILEBITFIELD2 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 8
							redefinequote 410 ^20WORLD TILE #36 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE37
	ifvarand WORLDTILEBITFIELD2 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE37 0 // World Tile #37: ""
	ifvarand WORLDTILEBITFIELD2 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 16
							redefinequote 410 ^20WORLD TILE #37 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE38
	ifvarand WORLDTILEBITFIELD2 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE38 0 // World Tile #38: ""
	ifvarand WORLDTILEBITFIELD2 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 32
							redefinequote 410 ^20WORLD TILE #38 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE39
	ifvarand WORLDTILEBITFIELD2 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE39 0 // World Tile #39: ""
	ifvarand WORLDTILEBITFIELD2 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 64
							redefinequote 410 ^20WORLD TILE #39 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE40
	ifvarand WORLDTILEBITFIELD2 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE40 0 // World Tile #40: ""
	ifvarand WORLDTILEBITFIELD2 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 128
							redefinequote 410 ^20WORLD TILE #40 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE41
	ifvarand WORLDTILEBITFIELD2 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE41 0 // World Tile #41: ""
	ifvarand WORLDTILEBITFIELD2 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 256
							redefinequote 410 ^20WORLD TILE #41 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE42
	ifvarand WORLDTILEBITFIELD2 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE42 0 // World Tile #42: ""
	ifvarand WORLDTILEBITFIELD2 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 512
							redefinequote 410 ^20WORLD TILE #42 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE43
	ifvarand WORLDTILEBITFIELD2 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE43 0 // World Tile #43: ""
	ifvarand WORLDTILEBITFIELD2 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 1024
							redefinequote 410 ^20WORLD TILE #43 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE44
	ifvarand WORLDTILEBITFIELD2 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE44 0 // World Tile #44: ""
	ifvarand WORLDTILEBITFIELD2 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 2048
							redefinequote 410 ^20WORLD TILE #44 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE45
	ifvarand WORLDTILEBITFIELD2 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE45 0 // World Tile #45: ""
	ifvarand WORLDTILEBITFIELD2 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 4096
							redefinequote 410 ^20WORLD TILE #45 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE46
	ifvarand WORLDTILEBITFIELD2 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE46 0 // World Tile #46: ""
	ifvarand WORLDTILEBITFIELD2 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 8192
							redefinequote 410 ^20WORLD TILE #46 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE47
	ifvarand WORLDTILEBITFIELD2 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE47 0 // World Tile #47: ""
	ifvarand WORLDTILEBITFIELD2 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 16384
							redefinequote 410 ^20WORLD TILE #47 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE48
	ifvarand WORLDTILEBITFIELD2 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE48 0 // World Tile #48: ""
	ifvarand WORLDTILEBITFIELD2 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 32768
							redefinequote 410 ^20WORLD TILE #48 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE49
	ifvarand WORLDTILEBITFIELD2 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE49 0 // World Tile #49: ""
	ifvarand WORLDTILEBITFIELD2 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 65536
							redefinequote 410 ^20WORLD TILE #49 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE50
	ifvarand WORLDTILEBITFIELD2 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE50 0 // World Tile #50: ""
	ifvarand WORLDTILEBITFIELD2 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 131072
							redefinequote 410 ^20WORLD TILE #50 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE51
	ifvarand WORLDTILEBITFIELD2 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE51 0 // World Tile #51: ""
	ifvarand WORLDTILEBITFIELD2 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 262144
							redefinequote 410 ^20WORLD TILE #41 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE52
	ifvarand WORLDTILEBITFIELD2 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE52 0 // World Tile #52: ""
	ifvarand WORLDTILEBITFIELD2 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 524288
							redefinequote 410 ^20WORLD TILE #52 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE53
	ifvarand WORLDTILEBITFIELD2 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE53 0 // World Tile #53: ""
	ifvarand WORLDTILEBITFIELD2 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 1048576
							redefinequote 410 ^20WORLD TILE #53 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE54
	ifvarand WORLDTILEBITFIELD2 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE54 0 // World Tile #54: ""
	ifvarand WORLDTILEBITFIELD2 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 2097152
							redefinequote 410 ^20WORLD TILE #54 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE55
	ifvarand WORLDTILEBITFIELD2 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE55 0 // World Tile #55: ""
	ifvarand WORLDTILEBITFIELD2 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 4194304
							redefinequote 410 ^20WORLD TILE #55 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE56
	ifvarand WORLDTILEBITFIELD2 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE56 0 // World Tile #56: ""
	ifvarand WORLDTILEBITFIELD2 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 8388608
							redefinequote 410 ^20WORLD TILE #56 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE57
	ifvarand WORLDTILEBITFIELD2 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE57 0 // World Tile #57: ""
	ifvarand WORLDTILEBITFIELD2 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 16777216
							redefinequote 410 ^20WORLD TILE #57 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE58
	ifvarand WORLDTILEBITFIELD2 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE58 0 // World Tile #58: ""
	ifvarand WORLDTILEBITFIELD2 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 33554432
							redefinequote 410 ^20WORLD TILE #58 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE59
	ifvarand WORLDTILEBITFIELD2 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE59 0 // World Tile #59: ""
	ifvarand WORLDTILEBITFIELD2 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 67108864
							redefinequote 410 ^20WORLD TILE #59 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE60
	ifvarand WORLDTILEBITFIELD2 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE60 0 // World Tile #60: ""
	ifvarand WORLDTILEBITFIELD2 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 134217728
							redefinequote 410 ^20WORLD TILE #60 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE61
	ifvarand WORLDTILEBITFIELD2 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE61 0 // World Tile #61: ""
	ifvarand WORLDTILEBITFIELD2 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 268435456
							redefinequote 410 ^20WORLD TILE #61 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE62
	ifvarand WORLDTILEBITFIELD2 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE62 0 // World Tile #62: ""
	ifvarand WORLDTILEBITFIELD2 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 536870912
							redefinequote 410 ^20WORLD TILE #62 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE63
	ifvarand WORLDTILEBITFIELD2 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE63 0 // World Tile #63: ""
	ifvarand WORLDTILEBITFIELD2 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 1073741824
							redefinequote 410 ^20WORLD TILE #63 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE64
	ifvarand WORLDTILEBITFIELD2 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE64 0 // World Tile #64: ""
	ifvarand WORLDTILEBITFIELD2 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD2 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD2 2147483648
							redefinequote 410 ^20WORLD TILE #64 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #3
eventloadactor WORLDTILE65
	ifvarand WORLDTILEBITFIELD3 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE65 0 // World Tile #65: ""
	ifvarand WORLDTILEBITFIELD3 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 1
							redefinequote 410 ^20WORLD TILE #65 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE66
	ifvarand WORLDTILEBITFIELD3 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE66 0 // World Tile #66: ""
	ifvarand WORLDTILEBITFIELD3 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 2
							redefinequote 410 ^20WORLD TILE #66 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE67
	ifvarand WORLDTILEBITFIELD3 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE67 0 // World Tile #67: ""
	ifvarand WORLDTILEBITFIELD3 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 4
							redefinequote 410 ^20WORLD TILE #67 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE68
	ifvarand WORLDTILEBITFIELD3 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE68 0 // World Tile #68: ""
	ifvarand WORLDTILEBITFIELD3 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 8
							redefinequote 410 ^20WORLD TILE #68 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE69
	ifvarand WORLDTILEBITFIELD3 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE69 0 // World Tile #69: ""
	ifvarand WORLDTILEBITFIELD3 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 16
							redefinequote 410 ^20WORLD TILE #69 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE70
	ifvarand WORLDTILEBITFIELD3 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE70 0 // World Tile #70: ""
	ifvarand WORLDTILEBITFIELD3 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 32
							redefinequote 410 ^20WORLD TILE #70 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE71
	ifvarand WORLDTILEBITFIELD3 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE71 0 // World Tile #71: ""
	ifvarand WORLDTILEBITFIELD3 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 64
							redefinequote 410 ^20WORLD TILE #71 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE72
	ifvarand WORLDTILEBITFIELD3 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE72 0 // World Tile #72: ""
	ifvarand WORLDTILEBITFIELD3 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 128
							redefinequote 410 ^20WORLD TILE #72 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE73
	ifvarand WORLDTILEBITFIELD3 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE73 0 // World Tile #73: ""
	ifvarand WORLDTILEBITFIELD3 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 256
							redefinequote 410 ^20WORLD TILE #73 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE74
	ifvarand WORLDTILEBITFIELD3 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE74 0 // World Tile #74: ""
	ifvarand WORLDTILEBITFIELD3 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 512
							redefinequote 410 ^20WORLD TILE #74 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE75
	ifvarand WORLDTILEBITFIELD3 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE75 0 // World Tile #75: ""
	ifvarand WORLDTILEBITFIELD3 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 1024
							redefinequote 410 ^20WORLD TILE #75 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE76
	ifvarand WORLDTILEBITFIELD3 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE76 0 // World Tile #76: ""
	ifvarand WORLDTILEBITFIELD3 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 2048
							redefinequote 410 ^20WORLD TILE #76 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE77
	ifvarand WORLDTILEBITFIELD3 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE77 0 // World Tile #77: ""
	ifvarand WORLDTILEBITFIELD3 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 4096
							redefinequote 410 ^20WORLD TILE #77 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE78
	ifvarand WORLDTILEBITFIELD3 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE78 0 // World Tile #78: ""
	ifvarand WORLDTILEBITFIELD3 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 8192
							redefinequote 410 ^20WORLD TILE #78 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE79
	ifvarand WORLDTILEBITFIELD3 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE79 0 // World Tile #79: ""
	ifvarand WORLDTILEBITFIELD3 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 16384
							redefinequote 410 ^20WORLD TILE #79 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE80
	ifvarand WORLDTILEBITFIELD3 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE80 0 // World Tile #80: ""
	ifvarand WORLDTILEBITFIELD3 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 32768
							redefinequote 410 ^20WORLD TILE #80 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE81
	ifvarand WORLDTILEBITFIELD3 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE81 0 // World Tile #81: ""
	ifvarand WORLDTILEBITFIELD3 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 65536
							redefinequote 410 ^20WORLD TILE #81 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE82
	ifvarand WORLDTILEBITFIELD3 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE82 0 // World Tile #82: ""
	ifvarand WORLDTILEBITFIELD3 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 131072
							redefinequote 410 ^20WORLD TILE #82 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE83
	ifvarand WORLDTILEBITFIELD3 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE83 0 // World Tile #83: ""
	ifvarand WORLDTILEBITFIELD3 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 262144
							redefinequote 410 ^20WORLD TILE #83 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE84
	ifvarand WORLDTILEBITFIELD3 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE84 0 // World Tile #84: ""
	ifvarand WORLDTILEBITFIELD3 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 524288
							redefinequote 410 ^20WORLD TILE #84 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE85
	ifvarand WORLDTILEBITFIELD3 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE85 0 // World Tile #85: ""
	ifvarand WORLDTILEBITFIELD3 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 1048576
							redefinequote 410 ^20WORLD TILE #85 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE86
	ifvarand WORLDTILEBITFIELD3 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE86 0 // World Tile #86: ""
	ifvarand WORLDTILEBITFIELD3 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 2097152
							redefinequote 410 ^20WORLD TILE #86 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE87
	ifvarand WORLDTILEBITFIELD3 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE87 0 // World Tile #87: ""
	ifvarand WORLDTILEBITFIELD3 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 4194304
							redefinequote 410 ^20WORLD TILE #87 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE88
	ifvarand WORLDTILEBITFIELD3 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE88 0 // World Tile #88: ""
	ifvarand WORLDTILEBITFIELD3 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 8388608
							redefinequote 410 ^20WORLD TILE #88 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE89
	ifvarand WORLDTILEBITFIELD3 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE89 0 // World Tile #89: ""
	ifvarand WORLDTILEBITFIELD3 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 16777216
							redefinequote 410 ^20WORLD TILE #89 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE90
	ifvarand WORLDTILEBITFIELD3 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE90 0 // World Tile #90: ""
	ifvarand WORLDTILEBITFIELD3 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 33554432
							redefinequote 410 ^20WORLD TILE #90 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE91
	ifvarand WORLDTILEBITFIELD3 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE91 0 // World Tile #91: ""
	ifvarand WORLDTILEBITFIELD3 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 67108864
							redefinequote 410 ^20WORLD TILE #91 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE92
	ifvarand WORLDTILEBITFIELD3 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE92 0 // World Tile #92: ""
	ifvarand WORLDTILEBITFIELD3 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 134217728
							redefinequote 410 ^20WORLD TILE #92 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE93
	ifvarand WORLDTILEBITFIELD3 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE93 0 // World Tile #93: ""
	ifvarand WORLDTILEBITFIELD3 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 268435456
							redefinequote 410 ^20WORLD TILE #93 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE94
	ifvarand WORLDTILEBITFIELD3 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE94 0 // World Tile #94: ""
	ifvarand WORLDTILEBITFIELD3 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 536870912
							redefinequote 410 ^20WORLD TILE #94 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE95
	ifvarand WORLDTILEBITFIELD3 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE95 0 // World Tile #95: ""
	ifvarand WORLDTILEBITFIELD3 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 1073741824
							redefinequote 410 ^20WORLD TILE #95 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE96
	ifvarand WORLDTILEBITFIELD3 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE96 0 // World Tile #96: ""
	ifvarand WORLDTILEBITFIELD3 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD3 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD3 2147483648
							redefinequote 410 ^20WORLD TILE #96 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #4
eventloadactor WORLDTILE97
	ifvarand WORLDTILEBITFIELD4 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE97 0 // World Tile #97: ""
	ifvarand WORLDTILEBITFIELD4 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 1
							redefinequote 410 ^20WORLD TILE #97 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE98
	ifvarand WORLDTILEBITFIELD4 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE98 0 // World Tile #98: ""
	ifvarand WORLDTILEBITFIELD4 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 2
							redefinequote 410 ^20WORLD TILE #98 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE99
	ifvarand WORLDTILEBITFIELD4 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE99 0 // World Tile #99: ""
	ifvarand WORLDTILEBITFIELD4 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 4
							redefinequote 410 ^20WORLD TILE #99 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE100
	ifvarand WORLDTILEBITFIELD4 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE100 0 // World Tile #100: ""
	ifvarand WORLDTILEBITFIELD4 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 8
							redefinequote 410 ^20WORLD TILE #100 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE101
	ifvarand WORLDTILEBITFIELD4 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE101 0 // World Tile #101: ""
	ifvarand WORLDTILEBITFIELD4 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 16
							redefinequote 410 ^20WORLD TILE #101 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE102
	ifvarand WORLDTILEBITFIELD4 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE102 0 // World Tile #102: ""
	ifvarand WORLDTILEBITFIELD4 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 32
							redefinequote 410 ^20WORLD TILE #102 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE103
	ifvarand WORLDTILEBITFIELD4 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE103 0 // World Tile #103: ""
	ifvarand WORLDTILEBITFIELD4 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 64
							redefinequote 410 ^20WORLD TILE #103 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE104
	ifvarand WORLDTILEBITFIELD4 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE104 0 // World Tile #104: ""
	ifvarand WORLDTILEBITFIELD4 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 128
							redefinequote 410 ^20WORLD TILE #104 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE105
	ifvarand WORLDTILEBITFIELD4 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE105 0 // World Tile #105: ""
	ifvarand WORLDTILEBITFIELD4 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 256
							redefinequote 410 ^20WORLD TILE #105 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE106
	ifvarand WORLDTILEBITFIELD4 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE106 0 // World Tile #106: ""
	ifvarand WORLDTILEBITFIELD4 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 512
							redefinequote 410 ^20WORLD TILE #106 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE107
	ifvarand WORLDTILEBITFIELD4 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE107 0 // World Tile #107: ""
	ifvarand WORLDTILEBITFIELD4 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 1024
							redefinequote 410 ^20WORLD TILE #107 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE108
	ifvarand WORLDTILEBITFIELD4 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE108 0 // World Tile #108: ""
	ifvarand WORLDTILEBITFIELD4 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 2048
							redefinequote 410 ^20WORLD TILE #108 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE109
	ifvarand WORLDTILEBITFIELD4 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE109 0 // World Tile #109: ""
	ifvarand WORLDTILEBITFIELD4 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 4096
							redefinequote 410 ^20WORLD TILE #109 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE110
	ifvarand WORLDTILEBITFIELD4 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE110 0 // World Tile #110: ""
	ifvarand WORLDTILEBITFIELD4 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 8192
							redefinequote 410 ^20WORLD TILE #110 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE111
	ifvarand WORLDTILEBITFIELD4 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE111 0 // World Tile #111: ""
	ifvarand WORLDTILEBITFIELD4 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 16384
							redefinequote 410 ^20WORLD TILE #111 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE112
	ifvarand WORLDTILEBITFIELD4 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE112 0 // World Tile #112: ""
	ifvarand WORLDTILEBITFIELD4 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 32768
							redefinequote 410 ^20WORLD TILE #112 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE113
	ifvarand WORLDTILEBITFIELD4 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE113 0 // World Tile #113: ""
	ifvarand WORLDTILEBITFIELD4 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 65536
							redefinequote 410 ^20WORLD TILE #113 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE114
	ifvarand WORLDTILEBITFIELD4 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE114 0 // World Tile #114: ""
	ifvarand WORLDTILEBITFIELD4 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 131072
							redefinequote 410 ^20WORLD TILE #114 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE115
	ifvarand WORLDTILEBITFIELD4 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE115 0 // World Tile #115: ""
	ifvarand WORLDTILEBITFIELD4 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 262144
							redefinequote 410 ^20WORLD TILE #115 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE116
	ifvarand WORLDTILEBITFIELD4 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE116 0 // World Tile #116: ""
	ifvarand WORLDTILEBITFIELD4 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 524288
							redefinequote 410 ^20WORLD TILE #116 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE117
	ifvarand WORLDTILEBITFIELD4 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE117 0 // World Tile #117: ""
	ifvarand WORLDTILEBITFIELD4 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 1048576
							redefinequote 410 ^20WORLD TILE #117 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE118
	ifvarand WORLDTILEBITFIELD4 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE118 0 // World Tile #118: ""
	ifvarand WORLDTILEBITFIELD4 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 2097152
							redefinequote 410 ^20WORLD TILE #118 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE119
	ifvarand WORLDTILEBITFIELD4 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE119 0 // World Tile #119: ""
	ifvarand WORLDTILEBITFIELD4 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 4194304
							redefinequote 410 ^20WORLD TILE #119 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE120
	ifvarand WORLDTILEBITFIELD4 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE120 0 // World Tile #120: ""
	ifvarand WORLDTILEBITFIELD4 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 8388608
							redefinequote 410 ^20WORLD TILE #120 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE121
	ifvarand WORLDTILEBITFIELD4 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE121 0 // World Tile #121: ""
	ifvarand WORLDTILEBITFIELD4 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 16777216
							redefinequote 410 ^20WORLD TILE #121 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE122
	ifvarand WORLDTILEBITFIELD4 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE122 0 // World Tile #122: ""
	ifvarand WORLDTILEBITFIELD4 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 33554432
							redefinequote 410 ^20WORLD TILE #122 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE123
	ifvarand WORLDTILEBITFIELD4 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE123 0 // World Tile #123: ""
	ifvarand WORLDTILEBITFIELD4 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 67108864
							redefinequote 410 ^20WORLD TILE #123 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE124
	ifvarand WORLDTILEBITFIELD4 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE124 0 // World Tile #124: ""
	ifvarand WORLDTILEBITFIELD4 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 134217728
							redefinequote 410 ^20WORLD TILE #124 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE125
	ifvarand WORLDTILEBITFIELD4 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE125 0 // World Tile #125: ""
	ifvarand WORLDTILEBITFIELD4 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 268435456
							redefinequote 410 ^20WORLD TILE #125 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE126
	ifvarand WORLDTILEBITFIELD4 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE126 0 // World Tile #126: ""
	ifvarand WORLDTILEBITFIELD4 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 536870912
							redefinequote 410 ^20WORLD TILE #126 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE127
	ifvarand WORLDTILEBITFIELD4 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE127 0 // World Tile #127: ""
	ifvarand WORLDTILEBITFIELD4 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 1073741824
							redefinequote 410 ^20WORLD TILE #127 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE128
	ifvarand WORLDTILEBITFIELD4 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE128 0 // World Tile #128: ""
	ifvarand WORLDTILEBITFIELD4 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD4 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD4 2147483648
							redefinequote 410 ^20WORLD TILE #128 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #5
eventloadactor WORLDTILE129
	ifvarand WORLDTILEBITFIELD5 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE129 0 // World Tile #129: ""
	ifvarand WORLDTILEBITFIELD5 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 1
							redefinequote 410 ^20WORLD TILE #129 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE130
	ifvarand WORLDTILEBITFIELD5 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE130 0 // World Tile #130: ""
	ifvarand WORLDTILEBITFIELD5 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 2
							redefinequote 410 ^20WORLD TILE #130 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE131
	ifvarand WORLDTILEBITFIELD5 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE131 0 // World Tile #131: ""
	ifvarand WORLDTILEBITFIELD5 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 4
							redefinequote 410 ^20WORLD TILE #131 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE132
	ifvarand WORLDTILEBITFIELD5 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE132 0 // World Tile #132: ""
	ifvarand WORLDTILEBITFIELD5 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 8
							redefinequote 410 ^20WORLD TILE #132 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE133
	ifvarand WORLDTILEBITFIELD5 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE133 0 // World Tile #133: ""
	ifvarand WORLDTILEBITFIELD5 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 16
							redefinequote 410 ^20WORLD TILE #133 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE134
	ifvarand WORLDTILEBITFIELD5 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE134 0 // World Tile #134: ""
	ifvarand WORLDTILEBITFIELD5 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 32
							redefinequote 410 ^20WORLD TILE #134 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE135
	ifvarand WORLDTILEBITFIELD5 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE135 0 // World Tile #135: ""
	ifvarand WORLDTILEBITFIELD5 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 64
							redefinequote 410 ^20WORLD TILE #135 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE136
	ifvarand WORLDTILEBITFIELD5 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE136 0 // World Tile #136: ""
	ifvarand WORLDTILEBITFIELD5 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 128
							redefinequote 410 ^20WORLD TILE #136 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE137
	ifvarand WORLDTILEBITFIELD5 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE137 0 // World Tile #137: ""
	ifvarand WORLDTILEBITFIELD5 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 256
							redefinequote 410 ^20WORLD TILE #137 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE138
	ifvarand WORLDTILEBITFIELD5 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE138 0 // World Tile #138: ""
	ifvarand WORLDTILEBITFIELD5 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 512
							redefinequote 410 ^20WORLD TILE #138 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE139
	ifvarand WORLDTILEBITFIELD5 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE139 0 // World Tile #139: ""
	ifvarand WORLDTILEBITFIELD5 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 1024
							redefinequote 410 ^20WORLD TILE #139 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE140
	ifvarand WORLDTILEBITFIELD5 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE140 0 // World Tile #140: ""
	ifvarand WORLDTILEBITFIELD5 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 2048
							redefinequote 410 ^20WORLD TILE #140 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE141
	ifvarand WORLDTILEBITFIELD5 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE141 0 // World Tile #141: ""
	ifvarand WORLDTILEBITFIELD5 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 4096
							redefinequote 410 ^20WORLD TILE #141 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE142
	ifvarand WORLDTILEBITFIELD5 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE142 0 // World Tile #142: ""
	ifvarand WORLDTILEBITFIELD5 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 8192
							redefinequote 410 ^20WORLD TILE #142 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE143
	ifvarand WORLDTILEBITFIELD5 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE143 0 // World Tile #143: ""
	ifvarand WORLDTILEBITFIELD5 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 16384
							redefinequote 410 ^20WORLD TILE #143 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE144
	ifvarand WORLDTILEBITFIELD5 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE144 0 // World Tile #144: ""
	ifvarand WORLDTILEBITFIELD5 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 32768
							redefinequote 410 ^20WORLD TILE #144 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE145
	ifvarand WORLDTILEBITFIELD5 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE145 0 // World Tile #145: ""
	ifvarand WORLDTILEBITFIELD5 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 65536
							redefinequote 410 ^20WORLD TILE #145 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE146
	ifvarand WORLDTILEBITFIELD5 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE146 0 // World Tile #146: ""
	ifvarand WORLDTILEBITFIELD5 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 131072
							redefinequote 410 ^20WORLD TILE #146 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE147
	ifvarand WORLDTILEBITFIELD5 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE147 0 // World Tile #147: ""
	ifvarand WORLDTILEBITFIELD5 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 262144
							redefinequote 410 ^20WORLD TILE #147 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE148
	ifvarand WORLDTILEBITFIELD5 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE148 0 // World Tile #148: ""
	ifvarand WORLDTILEBITFIELD5 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 524288
							redefinequote 410 ^20WORLD TILE #148 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE149
	ifvarand WORLDTILEBITFIELD5 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE149 0 // World Tile #149: ""
	ifvarand WORLDTILEBITFIELD5 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 1048576
							redefinequote 410 ^20WORLD TILE #149 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE150
	ifvarand WORLDTILEBITFIELD5 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE150 0 // World Tile #150: ""
	ifvarand WORLDTILEBITFIELD5 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 2097152
							redefinequote 410 ^20WORLD TILE #150 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE151
	ifvarand WORLDTILEBITFIELD5 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE151 0 // World Tile #151: ""
	ifvarand WORLDTILEBITFIELD5 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 4194304
							redefinequote 410 ^20WORLD TILE #151 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE152
	ifvarand WORLDTILEBITFIELD5 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE152 0 // World Tile #152: ""
	ifvarand WORLDTILEBITFIELD5 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 8388608
							redefinequote 410 ^20WORLD TILE #152 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE153
	ifvarand WORLDTILEBITFIELD5 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE153 0 // World Tile #153: ""
	ifvarand WORLDTILEBITFIELD5 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 16777216
							redefinequote 410 ^20WORLD TILE #153 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE154
	ifvarand WORLDTILEBITFIELD5 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE154 0 // World Tile #154: ""
	ifvarand WORLDTILEBITFIELD5 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 33554432
							redefinequote 410 ^20WORLD TILE #154 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE155
	ifvarand WORLDTILEBITFIELD5 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE155 0 // World Tile #155: ""
	ifvarand WORLDTILEBITFIELD5 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 67108864
							redefinequote 410 ^20WORLD TILE #155 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE156
	ifvarand WORLDTILEBITFIELD5 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE156 0 // World Tile #156: ""
	ifvarand WORLDTILEBITFIELD5 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 134217728
							redefinequote 410 ^20WORLD TILE #156 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE157
	ifvarand WORLDTILEBITFIELD5 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE157 0 // World Tile #157: ""
	ifvarand WORLDTILEBITFIELD5 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 268435456
							redefinequote 410 ^20WORLD TILE #157 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE158
	ifvarand WORLDTILEBITFIELD5 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE158 0 // World Tile #158: ""
	ifvarand WORLDTILEBITFIELD5 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 536870912
							redefinequote 410 ^20WORLD TILE #158 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE159
	ifvarand WORLDTILEBITFIELD5 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE159 0 // World Tile #159: ""
	ifvarand WORLDTILEBITFIELD5 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 1073741824
							redefinequote 410 ^20WORLD TILE #159 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE160
	ifvarand WORLDTILEBITFIELD5 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE160 0 // World Tile #160: ""
	ifvarand WORLDTILEBITFIELD5 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD5 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD5 2147483648
							redefinequote 410 ^20WORLD TILE #160 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #6
eventloadactor WORLDTILE161
	ifvarand WORLDTILEBITFIELD6 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE161 0 // World Tile #161: ""
	ifvarand WORLDTILEBITFIELD6 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 1
							redefinequote 410 ^20WORLD TILE #161 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE162
	ifvarand WORLDTILEBITFIELD6 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE162 0 // World Tile #162: ""
	ifvarand WORLDTILEBITFIELD6 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 2
							redefinequote 410 ^20WORLD TILE #162 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE163
	ifvarand WORLDTILEBITFIELD6 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE163 0 // World Tile #163: ""
	ifvarand WORLDTILEBITFIELD6 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 4
							redefinequote 410 ^20WORLD TILE #163 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE164
	ifvarand WORLDTILEBITFIELD6 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE164 0 // World Tile #164: ""
	ifvarand WORLDTILEBITFIELD6 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 8
							redefinequote 410 ^20WORLD TILE #164 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE165
	ifvarand WORLDTILEBITFIELD6 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE165 0 // World Tile #165: ""
	ifvarand WORLDTILEBITFIELD6 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 16
							redefinequote 410 ^20WORLD TILE #165 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE166
	ifvarand WORLDTILEBITFIELD6 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE166 0 // World Tile #166: ""
	ifvarand WORLDTILEBITFIELD6 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 32
							redefinequote 410 ^20WORLD TILE #166 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE167
	ifvarand WORLDTILEBITFIELD6 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE167 0 // World Tile #167: ""
	ifvarand WORLDTILEBITFIELD6 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 64
							redefinequote 410 ^20WORLD TILE #167 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE168
	ifvarand WORLDTILEBITFIELD6 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE168 0 // World Tile #168: ""
	ifvarand WORLDTILEBITFIELD6 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 128
							redefinequote 410 ^20WORLD TILE #168 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE169
	ifvarand WORLDTILEBITFIELD6 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE169 0 // World Tile #169: ""
	ifvarand WORLDTILEBITFIELD6 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 256
							redefinequote 410 ^20WORLD TILE #169 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE170
	ifvarand WORLDTILEBITFIELD6 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE170 0 // World Tile #170: ""
	ifvarand WORLDTILEBITFIELD6 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 512
							redefinequote 410 ^20WORLD TILE #170 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE171
	ifvarand WORLDTILEBITFIELD6 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE171 0 // World Tile #171: ""
	ifvarand WORLDTILEBITFIELD6 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 1024
							redefinequote 410 ^20WORLD TILE #171 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE172
	ifvarand WORLDTILEBITFIELD6 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE172 0 // World Tile #172: ""
	ifvarand WORLDTILEBITFIELD6 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 2048
							redefinequote 410 ^20WORLD TILE #172 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE173
	ifvarand WORLDTILEBITFIELD6 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE173 0 // World Tile #173: ""
	ifvarand WORLDTILEBITFIELD6 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 4096
							redefinequote 410 ^20WORLD TILE #173 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE174
	ifvarand WORLDTILEBITFIELD6 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE174 0 // World Tile #174: ""
	ifvarand WORLDTILEBITFIELD6 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 8192
							redefinequote 410 ^20WORLD TILE #174 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE175
	ifvarand WORLDTILEBITFIELD6 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE175 0 // World Tile #175: ""
	ifvarand WORLDTILEBITFIELD6 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 16384
							redefinequote 410 ^20WORLD TILE #175 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE176
	ifvarand WORLDTILEBITFIELD6 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE176 0 // World Tile #176: ""
	ifvarand WORLDTILEBITFIELD6 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 32768
							redefinequote 410 ^20WORLD TILE #176 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE177
	ifvarand WORLDTILEBITFIELD6 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE177 0 // World Tile #177: ""
	ifvarand WORLDTILEBITFIELD6 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 65536
							redefinequote 410 ^20WORLD TILE #177 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE178
	ifvarand WORLDTILEBITFIELD6 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE178 0 // World Tile #178: ""
	ifvarand WORLDTILEBITFIELD6 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 131072
							redefinequote 410 ^20WORLD TILE #178 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE179
	ifvarand WORLDTILEBITFIELD6 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE179 0 // World Tile #179: ""
	ifvarand WORLDTILEBITFIELD6 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 262144
							redefinequote 410 ^20WORLD TILE #179 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE180
	ifvarand WORLDTILEBITFIELD6 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE180 0 // World Tile #180: ""
	ifvarand WORLDTILEBITFIELD6 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 524288
							redefinequote 410 ^20WORLD TILE #180 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE181
	ifvarand WORLDTILEBITFIELD6 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE181 0 // World Tile #181: ""
	ifvarand WORLDTILEBITFIELD6 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 1048576
							redefinequote 410 ^20WORLD TILE #181 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE182
	ifvarand WORLDTILEBITFIELD6 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE182 0 // World Tile #182: ""
	ifvarand WORLDTILEBITFIELD6 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 2097152
							redefinequote 410 ^20WORLD TILE #182 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE183
	ifvarand WORLDTILEBITFIELD6 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE183 0 // World Tile #183: ""
	ifvarand WORLDTILEBITFIELD6 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 4194304
							redefinequote 410 ^20WORLD TILE #183 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE184
	ifvarand WORLDTILEBITFIELD6 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE184 0 // World Tile #184: ""
	ifvarand WORLDTILEBITFIELD6 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 8388608
							redefinequote 410 ^20WORLD TILE #184 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE185
	ifvarand WORLDTILEBITFIELD6 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE185 0 // World Tile #185: ""
	ifvarand WORLDTILEBITFIELD6 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 16777216
							redefinequote 410 ^20WORLD TILE #185 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE186
	ifvarand WORLDTILEBITFIELD6 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE186 0 // World Tile #186: ""
	ifvarand WORLDTILEBITFIELD6 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 33554432
							redefinequote 410 ^20WORLD TILE #186 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE187
	ifvarand WORLDTILEBITFIELD6 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE187 0 // World Tile #187: ""
	ifvarand WORLDTILEBITFIELD6 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 67108864
							redefinequote 410 ^20WORLD TILE #187 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE188
	ifvarand WORLDTILEBITFIELD6 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE188 0 // World Tile #188: ""
	ifvarand WORLDTILEBITFIELD6 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 134217728
							redefinequote 410 ^20WORLD TILE #188 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE189
	ifvarand WORLDTILEBITFIELD6 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE189 0 // World Tile #189: ""
	ifvarand WORLDTILEBITFIELD6 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 268435456
							redefinequote 410 ^20WORLD TILE #189 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE190
	ifvarand WORLDTILEBITFIELD6 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE190 0 // World Tile #190: ""
	ifvarand WORLDTILEBITFIELD6 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 536870912
							redefinequote 410 ^20WORLD TILE #190 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE191
	ifvarand WORLDTILEBITFIELD6 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE191 0 // World Tile #191: ""
	ifvarand WORLDTILEBITFIELD6 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 1073741824
							redefinequote 410 ^20WORLD TILE #191 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE192
	ifvarand WORLDTILEBITFIELD6 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE192 0 // World Tile #192: ""
	ifvarand WORLDTILEBITFIELD6 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD6 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD6 2147483648
							redefinequote 410 ^20WORLD TILE #192 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #7
eventloadactor WORLDTILE193
	ifvarand WORLDTILEBITFIELD7 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE193 0 // World Tile #193: ""
	ifvarand WORLDTILEBITFIELD7 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 1
							redefinequote 410 ^20WORLD TILE #193 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE194
	ifvarand WORLDTILEBITFIELD7 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE194 0 // World Tile #194: ""
	ifvarand WORLDTILEBITFIELD7 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 2
							redefinequote 410 ^20WORLD TILE #194 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE195
	ifvarand WORLDTILEBITFIELD7 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE195 0 // World Tile #195: ""
	ifvarand WORLDTILEBITFIELD7 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 4
							redefinequote 410 ^20WORLD TILE #195 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE196
	ifvarand WORLDTILEBITFIELD7 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE196 0 // World Tile #196: ""
	ifvarand WORLDTILEBITFIELD7 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 8
							redefinequote 410 ^20WORLD TILE #196 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE197
	ifvarand WORLDTILEBITFIELD7 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE197 0 // World Tile #197: ""
	ifvarand WORLDTILEBITFIELD7 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 16
							redefinequote 410 ^20WORLD TILE #197 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE198
	ifvarand WORLDTILEBITFIELD7 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE198 0 // World Tile #198: ""
	ifvarand WORLDTILEBITFIELD7 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 32
							redefinequote 410 ^20WORLD TILE #198 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE199
	ifvarand WORLDTILEBITFIELD7 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE199 0 // World Tile #199: ""
	ifvarand WORLDTILEBITFIELD7 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 64
							redefinequote 410 ^20WORLD TILE #199 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE200
	ifvarand WORLDTILEBITFIELD7 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE200 0 // World Tile #200: ""
	ifvarand WORLDTILEBITFIELD7 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 128
							redefinequote 410 ^20WORLD TILE #200 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE201
	ifvarand WORLDTILEBITFIELD7 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE201 0 // World Tile #201: ""
	ifvarand WORLDTILEBITFIELD7 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 256
							redefinequote 410 ^20WORLD TILE #201 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE202
	ifvarand WORLDTILEBITFIELD7 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE202 0 // World Tile #202: ""
	ifvarand WORLDTILEBITFIELD7 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 512
							redefinequote 410 ^20WORLD TILE #202 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE203
	ifvarand WORLDTILEBITFIELD7 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE203 0 // World Tile #203: ""
	ifvarand WORLDTILEBITFIELD7 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 1024
							redefinequote 410 ^20WORLD TILE #203 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE204
	ifvarand WORLDTILEBITFIELD7 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE204 0 // World Tile #204: ""
	ifvarand WORLDTILEBITFIELD7 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 2048
							redefinequote 410 ^20WORLD TILE #204 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE205
	ifvarand WORLDTILEBITFIELD7 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE205 0 // World Tile #205: ""
	ifvarand WORLDTILEBITFIELD7 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 4096
							redefinequote 410 ^20WORLD TILE #205 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE206
	ifvarand WORLDTILEBITFIELD7 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE206 0 // World Tile #206: ""
	ifvarand WORLDTILEBITFIELD7 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 8192
							redefinequote 410 ^20WORLD TILE #206 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE207
	ifvarand WORLDTILEBITFIELD7 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE207 0 // World Tile #207: ""
	ifvarand WORLDTILEBITFIELD7 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 16384
							redefinequote 410 ^20WORLD TILE #207 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE208
	ifvarand WORLDTILEBITFIELD7 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE208 0 // World Tile #208: ""
	ifvarand WORLDTILEBITFIELD7 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 32768
							redefinequote 410 ^20WORLD TILE #208 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE209
	ifvarand WORLDTILEBITFIELD7 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE209 0 // World Tile #209: ""
	ifvarand WORLDTILEBITFIELD7 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 65536
							redefinequote 410 ^20WORLD TILE #209 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE210
	ifvarand WORLDTILEBITFIELD7 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE210 0 // World Tile #210: ""
	ifvarand WORLDTILEBITFIELD7 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 131072
							redefinequote 410 ^20WORLD TILE #210 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE211
	ifvarand WORLDTILEBITFIELD7 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE211 0 // World Tile #211: ""
	ifvarand WORLDTILEBITFIELD7 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 262144
							redefinequote 410 ^20WORLD TILE #211 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE212
	ifvarand WORLDTILEBITFIELD7 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE212 0 // World Tile #212: ""
	ifvarand WORLDTILEBITFIELD7 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 524288
							redefinequote 410 ^20WORLD TILE #212 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE213
	ifvarand WORLDTILEBITFIELD7 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE213 0 // World Tile #213: ""
	ifvarand WORLDTILEBITFIELD7 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 1048576
							redefinequote 410 ^20WORLD TILE #213 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE214
	ifvarand WORLDTILEBITFIELD7 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE214 0 // World Tile #214: ""
	ifvarand WORLDTILEBITFIELD7 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 2097152
							redefinequote 410 ^20WORLD TILE #214 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE215
	ifvarand WORLDTILEBITFIELD7 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE215 0 // World Tile #215: ""
	ifvarand WORLDTILEBITFIELD7 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 4194304
							redefinequote 410 ^20WORLD TILE #215 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE216
	ifvarand WORLDTILEBITFIELD7 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE216 0 // World Tile #216: ""
	ifvarand WORLDTILEBITFIELD7 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 8388608
							redefinequote 410 ^20WORLD TILE #216 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE217
	ifvarand WORLDTILEBITFIELD7 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE217 0 // World Tile #217: ""
	ifvarand WORLDTILEBITFIELD7 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 16777216
							redefinequote 410 ^20WORLD TILE #217 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE218
	ifvarand WORLDTILEBITFIELD7 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE218 0 // World Tile #218: ""
	ifvarand WORLDTILEBITFIELD7 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 33554432
							redefinequote 410 ^20WORLD TILE #218 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE219
	ifvarand WORLDTILEBITFIELD7 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE219 0 // World Tile #219: ""
	ifvarand WORLDTILEBITFIELD7 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 67108864
							redefinequote 410 ^20WORLD TILE #219 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE220
	ifvarand WORLDTILEBITFIELD7 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE220 0 // World Tile #220: ""
	ifvarand WORLDTILEBITFIELD7 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 134217728
							redefinequote 410 ^20WORLD TILE #220 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE221
	ifvarand WORLDTILEBITFIELD7 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE221 0 // World Tile #221: ""
	ifvarand WORLDTILEBITFIELD7 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 268435456
							redefinequote 410 ^20WORLD TILE #221 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE222
	ifvarand WORLDTILEBITFIELD7 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE222 0 // World Tile #222: ""
	ifvarand WORLDTILEBITFIELD7 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 536870912
							redefinequote 410 ^20WORLD TILE #222 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE223
	ifvarand WORLDTILEBITFIELD7 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE223 0 // World Tile #223: ""
	ifvarand WORLDTILEBITFIELD7 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 1073741824
							redefinequote 410 ^20WORLD TILE #223 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE224
	ifvarand WORLDTILEBITFIELD7 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE224 0 // World Tile #224: ""
	ifvarand WORLDTILEBITFIELD7 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD7 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD7 2147483648
							redefinequote 410 ^20WORLD TILE #224 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

// Set #8
eventloadactor WORLDTILE225
	ifvarand WORLDTILEBITFIELD8 1 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE225 0 // World Tile #225: ""
	ifvarand WORLDTILEBITFIELD8 1 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 1 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 1
							redefinequote 410 ^20WORLD TILE #225 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE226
	ifvarand WORLDTILEBITFIELD8 2 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE226 0 // World Tile #226: ""
	ifvarand WORLDTILEBITFIELD8 2 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 2 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 2
							redefinequote 410 ^20WORLD TILE #226 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE227
	ifvarand WORLDTILEBITFIELD8 4 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE227 0 // World Tile #227: ""
	ifvarand WORLDTILEBITFIELD8 4 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 4 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 4
							redefinequote 410 ^20WORLD TILE #227 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE228
	ifvarand WORLDTILEBITFIELD8 8 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE228 0 // World Tile #228: ""
	ifvarand WORLDTILEBITFIELD8 8 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 8 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 8
							redefinequote 410 ^20WORLD TILE #228 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE229
	ifvarand WORLDTILEBITFIELD8 16 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE229 0 // World Tile #229: ""
	ifvarand WORLDTILEBITFIELD8 16 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 16 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 16
							redefinequote 410 ^20WORLD TILE #229 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE230
	ifvarand WORLDTILEBITFIELD8 32 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE230 0 // World Tile #230: ""
	ifvarand WORLDTILEBITFIELD8 32 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 32 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 32
							redefinequote 410 ^20WORLD TILE #230 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE231
	ifvarand WORLDTILEBITFIELD8 64 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE231 0 // World Tile #231: ""
	ifvarand WORLDTILEBITFIELD8 64 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 64 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 64
							redefinequote 410 ^20WORLD TILE #231 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE232
	ifvarand WORLDTILEBITFIELD8 128 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE232 0 // World Tile #232: ""
	ifvarand WORLDTILEBITFIELD8 128 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 128 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 128
							redefinequote 410 ^20WORLD TILE #232 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE233
	ifvarand WORLDTILEBITFIELD8 256 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE233 0 // World Tile #233: ""
	ifvarand WORLDTILEBITFIELD8 256 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 256 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 256
							redefinequote 410 ^20WORLD TILE #233 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE234
	ifvarand WORLDTILEBITFIELD8 512 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE234 0 // World Tile #234: ""
	ifvarand WORLDTILEBITFIELD8 512 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 512 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 512
							redefinequote 410 ^20WORLD TILE #234 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE235
	ifvarand WORLDTILEBITFIELD8 1024 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE235 0 // World Tile #235: ""
	ifvarand WORLDTILEBITFIELD8 1024 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 1024 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 1024
							redefinequote 410 ^20WORLD TILE #235 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE236
	ifvarand WORLDTILEBITFIELD8 2048 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE236 0 // World Tile #236: ""
	ifvarand WORLDTILEBITFIELD8 2048 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 2048 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 2048
							redefinequote 410 ^20WORLD TILE #236 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE237
	ifvarand WORLDTILEBITFIELD8 4096 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE237 0 // World Tile #237: ""
	ifvarand WORLDTILEBITFIELD8 4096 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 4096 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 4096
							redefinequote 410 ^20WORLD TILE #237 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE238
	ifvarand WORLDTILEBITFIELD8 8192 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE238 0 // World Tile #238: ""
	ifvarand WORLDTILEBITFIELD8 8192 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 8192 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 8192
							redefinequote 410 ^20WORLD TILE #238 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE239
	ifvarand WORLDTILEBITFIELD8 16384 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE239 0 // World Tile #239: ""
	ifvarand WORLDTILEBITFIELD8 16384 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 16384 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 16384
							redefinequote 410 ^20WORLD TILE #239 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE240
	ifvarand WORLDTILEBITFIELD8 32768 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE240 0 // World Tile #240: ""
	ifvarand WORLDTILEBITFIELD8 32768 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 32768 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 32768
							redefinequote 410 ^20WORLD TILE #240 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE241
	ifvarand WORLDTILEBITFIELD8 65536 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE241 0 // World Tile #241: ""
	ifvarand WORLDTILEBITFIELD8 65536 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 65536 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 65536
							redefinequote 410 ^20WORLD TILE #241 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE242
	ifvarand WORLDTILEBITFIELD8 131072 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE242 0 // World Tile #242: ""
	ifvarand WORLDTILEBITFIELD8 131072 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 131072 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 131072
							redefinequote 410 ^20WORLD TILE #242 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE243
	ifvarand WORLDTILEBITFIELD8 262144 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE243 0 // World Tile #243: ""
	ifvarand WORLDTILEBITFIELD8 262144 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 262144 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 262144
							redefinequote 410 ^20WORLD TILE #243 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE244
	ifvarand WORLDTILEBITFIELD8 524288 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE244 0 // World Tile #244: ""
	ifvarand WORLDTILEBITFIELD8 524288 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 524288 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 524288
							redefinequote 410 ^20WORLD TILE #244 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE245
	ifvarand WORLDTILEBITFIELD8 1048576 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE245 0 // World Tile #245: ""
	ifvarand WORLDTILEBITFIELD8 1048576 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 1048576 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 1048576
							redefinequote 410 ^20WORLD TILE #245 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE246
	ifvarand WORLDTILEBITFIELD8 2097152 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE246 0 // World Tile #246: ""
	ifvarand WORLDTILEBITFIELD8 2097152 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 2097152 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 2097152
							redefinequote 410 ^20WORLD TILE #246 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE247
	ifvarand WORLDTILEBITFIELD8 4194304 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE247 0 // World Tile #247: ""
	ifvarand WORLDTILEBITFIELD8 4194304 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 4194304 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 4194304
							redefinequote 410 ^20WORLD TILE #247 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE248
	ifvarand WORLDTILEBITFIELD8 8388608 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE248 0 // World Tile #248: ""
	ifvarand WORLDTILEBITFIELD8 8388608 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 8388608 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 8388608
							redefinequote 410 ^20WORLD TILE #248 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE249
	ifvarand WORLDTILEBITFIELD8 16777216 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE249 0 // World Tile #249: ""
	ifvarand WORLDTILEBITFIELD8 16777216 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 16777216 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 16777216
							redefinequote 410 ^20WORLD TILE #249 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE250
	ifvarand WORLDTILEBITFIELD8 33554432 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE250 0 // World Tile #250: ""
	ifvarand WORLDTILEBITFIELD8 33554432 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 33554432 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 33554432
							redefinequote 410 ^20WORLD TILE #250 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE251
	ifvarand WORLDTILEBITFIELD8 67108864 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE251 0 // World Tile #251: ""
	ifvarand WORLDTILEBITFIELD8 67108864 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 67108864 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 67108864
							redefinequote 410 ^20WORLD TILE #251 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE252
	ifvarand WORLDTILEBITFIELD8 134217728 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE252 0 // World Tile #252: ""
	ifvarand WORLDTILEBITFIELD8 134217728 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 134217728 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 134217728
							redefinequote 410 ^20WORLD TILE #252 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE253
	ifvarand WORLDTILEBITFIELD8 268435456 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE253 0 // World Tile #253: ""
	ifvarand WORLDTILEBITFIELD8 268435456 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 268435456 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 268435456
							redefinequote 410 ^20WORLD TILE #253 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE254
	ifvarand WORLDTILEBITFIELD8 536870912 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE254 0 // World Tile #254: ""
	ifvarand WORLDTILEBITFIELD8 536870912 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 536870912 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 536870912
							redefinequote 410 ^20WORLD TILE #254 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE255
	ifvarand WORLDTILEBITFIELD8 1073741824 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE255 0 // World Tile #255: ""
	ifvarand WORLDTILEBITFIELD8 1073741824 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 1073741824 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 1073741824
							redefinequote 410 ^20WORLD TILE #255 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor WORLDTILE256
	ifvarand WORLDTILEBITFIELD8 2147483648 killit
	state initialize_worldtile
enda

useractor notenemy WORLDTILE256 0 // World Tile #256: ""
	ifvarand WORLDTILEBITFIELD8 2147483648 killit
	state initialize_worldtile
	state spin_worldtile
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifvarg CURRENTHITPOINTS 0 // ifp palive
			{
				ifcount 6
				{
					ifpdistl RETRIEVEDISTANCE
					{
						ifvarand WORLDTILEBITFIELD8 2147483648 nullop
						else
						{
							addvar WORLDTILEBITFIELD8 2147483648
							redefinequote 410 ^20WORLD TILE #256 OF 256 OBTAINED!!
							state grab_worldtile
						}
					}
				}
			}
		}
	}
enda

eventloadactor DEATHPITFALL
	getactor[THISACTOR].extra ACTORFLAGS
	setactor[THISACTOR].extra -1
	setactor[THISACTOR].cstat 32768
	getactor[THISACTOR].sectnum temp
	getactor[THISACTOR].z tempb
enda

useractor notenemy DEATHPITFALL 0
	getactor[PLAYERID].sectnum tempc
	ifvarvare tempc temp
	{
		getactor[PLAYERID].z tempd
		ifvarl ACTORFLAGS 0 nullop // do nothing...
		else ifvare ACTORFLAGS 0 // Fall Below Sprite's Z point to die
		{
			ifvarvarg tempd tempb
			{
				setvarvar tempe tempb
				addvarvar tempe 6144
				setplayer[THISACTOR].posz tempe setactor[PLAYERID].z tempe setvar INSTANTDEATH 1
			}
		}
		else
		ifvare ACTORFLAGS 1 // Rise Above Sprite's Z point to die
		{
			ifvarvarl tempd tempb
			{
				setvarvar tempe tempb
				subvarvar tempe 12288
				setplayer[THISACTOR].posz tempe setactor[PLAYERID].z tempe setvar INSTANTDEATH 1
			}
		}
		else ifvare ACTORFLAGS 2 setvar INSTANTDEATH 1
	}
enda

eventloadactor PLUG
	espawn NEWPLUG
	getactor[THISACTOR].x temp
	setactor[RETURN].x temp
	getactor[THISACTOR].y temp
	setactor[RETURN].y temp
	getactor[THISACTOR].z temp
	setactor[RETURN].z temp
	getactor[THISACTOR].extra temp
	setactor[RETURN].extra temp
	getactor[THISACTOR].xrepeat temp
	setactor[RETURN].xrepeat temp
	getactor[THISACTOR].yrepeat temp
	setactor[RETURN].yrepeat temp
	getactor[THISACTOR].cstat temp
	setactor[RETURN].cstat temp
	killit
enda

useractor notenemy NEWPLUG 0
	setvar OBJECTWIDTH 20
	setvar OBJECTHEIGHT 32
	state getspritecenterz
	setvarvar KEYSCANNERZUP OBJECTCENTERZ
	subvarvar KEYSCANNERZUP OBJECTDIFF2
	setvarvar KEYSCANNERZDOWN OBJECTCENTERZ
	addvarvar KEYSCANNERZDOWN OBJECTDIFF2
	
	setvar TEMP6 5175
	
	ifpdistl 1536
	{
		state plug_dealdamage
	} 
enda

useractor notenemy NEWBLOODPOOL
	getactor[THISACTOR].x x
	getactor[THISACTOR].y y
	updatesector x y TEMP
	getflorzofslope TEMP x y TEMP2
	setactor[THISACTOR].z TEMP2 // TEMP
	getactor[THISACTOR].cstat TEMP
	ifvarand TEMP 32 nullop
	else
	{
		addvar TEMP 32
		setactor[THISACTOR].cstat TEMP
	}
	
	// 'temp' = current X size
	// 'tempb' = current Y size
	// 'temph' = max X size
	// 'tempi' = max Y size
	// Makes pool spread out when spawned
	ifvarl SKILLSET? 34
	{
		getactor[THISACTOR].xrepeat temp
		getactor[THISACTOR].yrepeat tempb
		ifvarl SKILLSET? 1
		{
			getactor[THISACTOR].owner TEMP
			getactor[TEMP].picnum TEMP2
			ifvare TEMP2 TIRE
			{
				randvar temph 3
				addvar temph 64
				randvar tempi 3
				addvar tempi 64
			}
			else
			{
				randvar temph 3
				addvar temph 32
				randvar tempi 3
				addvar tempi 32
			}
		}
	
		ifvarvarl temp temph
		{
			addvar temp 2
			ifvarvarg temp temph setvarvar temp temph
			setactor[THISACTOR].xrepeat temp
		}
		ifvarvarl tempb tempi
		{
			addvar tempb 2
			ifvarvarg tempb tempi setvarvar tempb tempi
			setactor[THISACTOR].yrepeat tempb
		}
		addvar SKILLSET? 1
	}

	// Check to do damage
	ifpdistl 844
	{
		getactor[THISACTOR].xrepeat temp
		getactor[THISACTOR].yrepeat tempb
		ifp ponground
		{
			ifvarg temp 6 
			{
				ifvarg tempb 6
				{
					getactor[THISACTOR].cstat TEMP
					ifvarand TEMP 32 // Flat?
					{
						getactor[THISACTOR].pal TEMP
						ifvare TEMP 22
						{
							ifvare mainmenu 0
							{
								setvar MISCARRAYID 26 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // DEATHSWITCH-DELAY
								ifvare MISCARRAYID_AMOUNTTEMP 0
								{
									ifvarand CHEATBITFIELD? 32 nullop else
									{
										getactorvar[PLAYERID].VEHICLEID tempvehicleid
										ifvare tempvehicleid -1 setvarvar temp INVULNTIME else getactorvar[tempvehicleid].ACTORINVULNTIME temp
										ifvarl temp 1
										{
											setvar SPRITEDAMAGETYPE? 1
											getactorvar[PLAYERID].VEHICLEID tempvehicleid
											ifvare tempvehicleid -1
											{
												ifvare CHARACTERSELECTED? 6 setvar TEMPVAR5 1
												else ifvare CHARACTERSELECTED? 9 setvar TEMPVAR5 1
												else setvar TEMPVAR5 0
												ifvare TEMPVAR5 0 setvar RNDMIZERLIMIT 240 // ifrnd 16 = (256 - 16 = 240)
												else ifvare TEMPVAR5 1 setvar RNDMIZERLIMIT 254 // ifrnd 2 = (256 - 2 = 254)
												state rndmizer256
	
												ifvarvarg RNDMIZER RNDMIZERLIMIT
												{
													ifvarg BOOTSTIME 0
													{
														subvar BOOTSTIME 1
														setplayer[THISACTOR].boot_amount BOOTSTIME
														setvarvar fta fta_normal setvar ftq 75
													}
													else
													{
														randvar tempe 3
														addvar tempe 1
														setvarvar TEMPVAR2 MAXHITPOINTS
														ifvare DMGFLRTYPE 0
														{
															ifvare SKILLLEVEL 0 setvar tempd 0
															ifvare SKILLLEVEL 1 setvar tempd 0
															ifvare SKILLLEVEL 2 setvar tempd 0
															ifvare SKILLLEVEL 3 setvar tempd 0
															ifvare SKILLLEVEL 4 setvar tempd 0
															ifvare SKILLLEVEL 5 { randvar tempd 1 addvar tempd 0 }
															ifvare SKILLLEVEL 6 { randvar tempd 1 addvar tempd 0 }
															ifvare SKILLLEVEL 7 { randvar tempd 1 addvar tempd 0 }
															ifvare SKILLLEVEL 8 { randvar tempd 1 addvar tempd 1 }
															ifvare SKILLLEVEL 9 { randvar tempd 1 addvar tempd 1 }
														}
														else setvar tempd 1
														mulvarvar TEMPVAR2 tempd
														ifvare TEMPVAR5 1 divvar TEMPVAR2 2250
														else divvar TEMPVAR2 1000
														ifvarl TEMPVAR2 1 setvar TEMPVAR2 1
														addvarvar tempe TEMPVAR2
	
														ifvare VEHICLEID -1
														{
															ifvare CHARACTERSELECTED? 2 subvar tempe 2
															else ifvare CHARACTERSELECTED? 3
															{
																setvar MISCARRAYID 103 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // BUBSY-FORM?
																ifvare MISCARRAYID_AMOUNTTEMP 1 divvar tempe 4
															}
															else
															ifvare CHARACTERSELECTED? 4
															{
																ifvare sector[PLAYERSECTOR].lotag 2 ifvare WATER? 2 divvar tempe 6
																ifvare sector[PLAYERSECTOR].lotag 1 ifvare WATER? 1 { mulvar tempe 2 divvar tempe 7 }
	
																setvar MISCARRAYID 104 getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP // AMI-FORM?
																ifvare MISCARRAYID_AMOUNTTEMP 0 { mulvar tempe 4 divvar tempe 3 } // 133% Damage
																else ifvare MISCARRAYID_AMOUNTTEMP 1 divvar tempe 2 // 50% Damage
																else ifvare MISCARRAYID_AMOUNTTEMP 2 divvar tempe 3 // 33% Damage
																ifvarand PLAYERSTATUS? 256
																{
																	ifp pducking divvar tempe 25 else divvar tempe 5
																}
															}
															else ifvare CHARACTERSELECTED? 12 subvar tempe 1
															else ifvare CHARACTERSELECTED? 14 divvar tempe 10
														}
														ifvarl tempe 1 { ifrnd 128 setvar tempe 1 else setvar tempe 0 }
	
														//********
														//*Others*
														//********
														ifvare SHRUNK? 1
														{
															ifrnd 128 mulvar tempe 5 else mulvar tempe 4
														}
	
														//*********************
														//*Check Malakian Gems*
														//*********************
														setvarvar TEMP7 tempe
														state malakiangemcheck 
														setvarvar tempe TEMP7
	
														//****************
														//*Support System*
														//****************
														ifvarg tempe 0
														{
															setvar DAMAGEMODIFIER 1000
	
															//**Atomic Support / Duke**
															state support-atomicresist
	
															//**Poison Support / Jack**
															state support-poisonresist
	
															state damagemod-tempvar          
														}
	
														//*********************************
														//*Support System [ESSence Support*
														//*********************************
														ifvarg tempe 0
														{
															setvar DAMAGEMODIFIER 1000
															//**Overall Support / ESSence**
															state support-overallresist
															state damagemod-tempvar          
														}
	
														//******************
														//*Equipment System*
														//******************
														ifvarg tempe 0
														{
															setvar DAMAGEMODIFIER 1000
															// Equipment Slot #1
															//
															// Equipment Slot #2
															//
															// Equipment Slot #3
															//
															// Equipment Slot #4
															//
															state damagemod-tempvar          
														}
	
														ifvarand CHEATBITFIELD? 16 { ifvarg tempe 1 { divvar tempe 1000 ifvarl tempe 1 setvar tempe 1 state cheatersound } }
	
														setvarvar TEMPDAMAGEVAR tempe
														state lisashield_misc
														setvarvar tempe TEMPDAMAGEVAR
		
														setvarvar tempb CURRENTHITPOINTS
														subvarvar tempb tempe
														ifvarl tempe 0 setvar PLAYERHPDAMAGED? -1
														else ifvarg tempe 0 setvar PLAYERHPDAMAGED? 1
														ifvarl tempb 0 setvar tempb 0
														ifvarvarg tempb MAXHITPOINTSATOMIC setvarvar tempb MAXHITPOINTSATOMIC
														setactor[PLAYERID].htpicnum -1
														setvarvar CURRENTHITPOINTS tempb
														state checkbuddhamode
		
														ifvarn player[THISACTOR].over_shoulder_on 0
														{
															ifvarg CELLDAMAGETEMP 0
															{
																setvarvar SHOWDAMAGE CELLDAMAGETEMP
																setvar SHOWDAMAGETYPE 2
																setvarvar SHOWDAMAGEACTORID PLAYERID
																state showdamage
															}
														}
														ifvarg FULLSHIELDDAMAGE 0
														{
															setvar ATTACKINGACTORPICNUM 5190
															getactor[THISACTOR].pal TEMP
															setvarvar ATTACKINGACTORPAL TEMP
															setvar ACTORCRITICAL? 0
															setvar ATTACKERDISPLAYTIMER 0 setvar BIOSHIELDNULLDAMAGE 0
															ifvarg FULLSHIELDDAMAGE 0 setvar CELLDAMAGETIMER 0
														}
	
														ifvarn player[THISACTOR].over_shoulder_on 0
														{
															ifvarg tempe 0
															{
																setvarvar SHOWDAMAGE tempe
																setvar SHOWDAMAGETYPE 0
																setvarvar SHOWDAMAGEACTORID PLAYERID
																state showdamage
															}
														}
														ifvarg tempe 0
														{
															setvarvar PAINSOUNDFACTOR tempe
															state checkpainfactor
															state characterpainsounds
	
															setvarvar DAMAGEHUEFACTOR tempe
															state playerdamagehues-acidtype
	
															setvar ATTACKINGACTORPICNUM 5190
															getactor[THISACTOR].pal TEMP
															setvarvar ATTACKINGACTORPAL TEMP
															setvar ACTORCRITICAL? 0
															setvarvar PLAYERDAMAGETEMP tempe
															setactor[THISACTOR].htpicnum -1
															setvarvar TEMPHITCHARACTERVAR CHARACTERSELECTED?
															setvar ATTACKERDISPLAYTIMER 0 setvar NULLDAMAGE 0
															ifvarg tempe 0 setvar HEALTHDAMAGETIMER 0
														}
													}
												}
											}
											else
											{
												ifrnd 4
												{
													getactorvar[PLAYERID].VEHICLEID TEMPVAR2
													getactorvar[TEMPVAR2].ACTORBOOTSAMOUNT TEMPVAR3
													ifvarg TEMPVAR3 0
													{
														subvar TEMPVAR3 1
														setactorvar[TEMPVAR2].ACTORBOOTSAMOUNT TEMPVAR3
														setvarvar fta fta_normal setvar ftq 75
													}
													else
													{
														randvar tempe 2
														mulvar tempe 1
														addvar tempe 1
	
														ifvarl tempe 1 { ifrnd 128 setvar tempe 1 else setvar tempe 0 }
	
														getactorvar[PLAYERID].VEHICLEID TEMPVAR2
														getactorvar[TEMPVAR2].ACTORHP tempb
														subvarvar tempb tempe
														ifvarl tempe 0 setvar VEHICLEHPDAMAGED? -1
														else ifvarg tempe 0 setvar VEHICLEHPDAMAGED? 1
														ifvarl tempb 0 setvar tempb 0
														getactorvar[TEMPVAR2].ACTORMAXHP TEMPVAR4
														mulvar TEMPVAR4 2
														ifvarvarg tempb TEMPVAR4 setvarvar tempb TEMPVAR4
														setactor[PLAYERID].htpicnum -1
														setactorvar[TEMPVAR2].ACTORHP tempb
		
														ifvarn player[THISACTOR].over_shoulder_on 0
														{
															ifvarg CELLDAMAGETEMP 0
															{
																setvarvar SHOWDAMAGE CELLDAMAGETEMP
																setvar SHOWDAMAGETYPE 2
																setvarvar SHOWDAMAGEACTORID PLAYERID
																state showdamage
															}
														}
														ifvarg FULLSHIELDDAMAGE 0
														{
															setvar ATTACKINGACTORPICNUM 5190
															getactor[THISACTOR].pal TEMP
															setvarvar ATTACKINGACTORPAL TEMP
															setvar ACTORCRITICAL? 0
															setvar ATTACKERDISPLAYTIMER 0 setvar BIOSHIELDNULLDAMAGE 0
															ifvarg FULLSHIELDDAMAGE 0 setvar CELLDAMAGETIMER 0
														}
	
														ifvarg tempe 0
														{
															setvarvar SHOWDAMAGE tempe
															setvar SHOWDAMAGETYPE 0
															setvarvar SHOWDAMAGEACTORID PLAYERID
															state showdamage
														}
														ifvarg tempe 0
														{
															palfrom 16 16 0 0
	
															setvar ATTACKINGACTORPICNUM 5190
															getactor[THISACTOR].pal TEMP
															setvarvar ATTACKINGACTORPAL TEMP
															setvar ACTORCRITICAL? 0
															setvarvar PLAYERDAMAGETEMP tempe
															setactor[THISACTOR].htpicnum -1
															getactorvar[PLAYERID].VEHICLEID TEMPVAR2
															ifvare TEMPVAR2 -1 setvarvar TEMPHITCHARACTERVAR CHARACTERSELECTED?
															setvar ATTACKERDISPLAYTIMER 0 setvar NULLDAMAGE 0
															ifvarg tempe 0 setvar HEALTHDAMAGETIMER 0
														}
													}
												}
											}
										}
										else
										{
											getactorvar[PLAYERID].VEHICLEID TEMPVAR2
											ifvare TEMPVAR2 -1
											{
												ifrnd 16
												{
													sound INVULNITEM3
													palfrom 0 0 0 0
												}
											}
											else
											{
												ifrnd 4
												{
													sound INVULNITEM3
													palfrom 0 0 0 0
												}
											}
										}
									}
								}
							}
						}
					}  
				}
			}
	
			// Makes the Bloodpool Shrink and allows to player to track footprints like the original BLOODPOOL
			ifvarg SKILLSET? 33
			{
				ifvare STEPINBLOODPOOL? 0
				{
					getactorvar[PLAYERID].VEHICLEID tempvehicleid
					ifvare tempvehicleid -1
					{
						getactor[THISACTOR].owner TEMP
						ifvare TEMP TIRE setplayer[THISACTOR].footprintcount 10 else setplayer[THISACTOR].footprintcount 3
						getactor[THISACTOR].pal TEMP
						setplayer[THISACTOR].footprintpal TEMP
						getactor[THISACTOR].shade TEMP
						setplayer[THISACTOR].footprintshade TEMP
					}
					else
					{
						setplayer[THISACTOR].footprintcount 0
					}
					getactor[THISACTOR].xrepeat temp
					getactor[THISACTOR].yrepeat tempb
	
					setvar tempe 12
					randvar tempd 4
					addvar tempd 4
					subvarvar tempe tempd
	
					subvarvar temp tempe
					ifvarl temp 1 killit else setactor[THISACTOR].xrepeat temp
					subvarvar tempb tempd
					ifvarl tempb 1 killit else setactor[THISACTOR].yrepeat tempb
					setvar STEPINBLOODPOOL? 1
				}
			}
		}
		else setvar STEPINBLOODPOOL? 0
	}
	else setvar STEPINBLOODPOOL? 0

	getactor[THISACTOR].pal TEMP
	ifvare TEMP 22
	{
		// Enemy Damage Support Here :P
		findnearactor3d FEM1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM2 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM3 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM4 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM5 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM6 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM7 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM8 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM9 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d FEM10 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d WOMAN 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ROBOTDOG 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ROBOTDOG2 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d TOUGHGAL 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d NAKED1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d PODFEM1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE2 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE3 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE5 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE6 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE7 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DANCE9 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d STAND1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DEALER 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d STAND3 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d STAND4 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d WOLFDUDE 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d PUNKDUDE 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d COP1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d COP2 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d SITTINGDUDE 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ANIMEGIRL1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ANIMEGIRL2 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ANIMEGIRL3 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ANIMEGIRL4 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d PRESIDENTCLINTON 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d SHARK 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d ROTATEGUN 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOP 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPSTAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPSHOOT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPDUCKING 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPJETPACK 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPRUNNING 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPJUSTSIT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZTROOPONTOILET 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZMAN 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZMANSTAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZMANJUMP 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d LIZMANSPITTING 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d DRONE 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d OCTABRAIN 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d OCTABRAINSTAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d PIGCOP 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d PIGCOPSTAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d PIGCOPDIVE 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d NEWBEAST 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d NEWBEASTSTAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d NEWBEASTJUMP 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d NEWBEASTHANG 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d COMMANDER 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d COMMANDERSTAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d TANK 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d EMPTYTANK 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d SCORPIONTANK 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS1 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS1STAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS1SHOOT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS1LOB 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS3 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS3STAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS3LOB 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS2 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS2STAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS2SHOOT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS2BREATH 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS4 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOSS4STAYPUT 844 PYTHAGORASTARGET state hazarddetectifdead
		ifvare PYTHAGORASTARGET -1 findnearactor3d BOOTS 844 PYTHAGORASTARGET state hazarddetectifdead
		setvar FINDNEAR_INTERVAL 0
	
		ifvarn PYTHAGORASTARGET -1
		{
			getactor[THISACTOR].z temp
			getactor[PYTHAGORASTARGET].z tempb
			setvarvar tempc temp
			addvar tempc 0
			setvarvar tempd temp
			subvar tempd 512
			ifvarvarl tempb tempc
			ifvarvarg tempb tempd
			{
				getactor[PYTHAGORASTARGET].picnum tempc
				ifvare tempc BOOTS
				{
					ifrnd 16
					{
						getactorvar[PYTHAGORASTARGET].POWERUPBENEFIT TEMP
						subvar TEMP 1
						setactorvar[PYTHAGORASTARGET].POWERUPBENEFIT TEMP
					}
				}
				else
				ifvare tempc OCTABRAIN
				{
					getactor[PYTHAGORASTARGET].pal tempc
					ifvare tempc 14
					{
						setvar PYTHAGORASTARGET -1
						break // Prevents the Octanine from being damaged by the acid pool
					}
					else state bloodpooldamagemonster
				}
				else state bloodpooldamagemonster
			}
		}
	}
enda

// Extra Objects

// Duke-DC Chandeliar
useractor notenemy 3667 0 state itemfullbright enda

// Hexen Torch
useractor notenemy 3998 0 state itemfullbright enda
useractor notenemy 3999 0 state itemfullbright enda

// Hexen Chandeliar
useractor notenemy 4038 0 state itemfullbright enda
useractor notenemy 4039 0 state itemfullbright enda
useractor notenemy 4040 0 state itemfullbright enda

// Doom Candlebera
useractor notenemy 5809 0 state itemfullbright enda

// Stuff
useractor notenemy 5930 0 state itemfullbright enda
useractor notenemy 5931 0 state itemfullbright enda
useractor notenemy 5932 0 state itemfullbright enda
useractor notenemy 5933 0 state itemfullbright enda
useractor notenemy 5934 0 state itemfullbright enda

// ENDWORLD Stuff
useractor notenemy 6148 0 state itemfullbright enda
useractor notenemy 6150 0 state itemfullbright enda
useractor notenemy 6152 0 state itemfullbright enda
useractor notenemy 6154 0 state itemfullbright enda
useractor notenemy 6155 0 state itemfullbright enda
useractor notenemy 6156 0 state itemfullbright enda

state checksomethingcanhit
	ifhitweapon
	{ 
		ifwasweapon SHRINKER nullop
		else ifwasweapon SHRINKSPARK nullop
		else
		{
			ifdead
			{
				state randomshrapnel
				state randomshrapnel
				ifrnd 224 state randomshrapnel
				ifrnd 192 state randomshrapnel
				ifrnd 192 state randomshrapnel
				ifrnd 160 state randomshrapnel
				ifrnd 128 state randomshrapnel
				ifrnd 128 state randomshrapnel
				ifrnd 96 state randomshrapnel
				ifrnd 64 state randomshrapnel
				ifrnd 64 state randomshrapnel
				ifrnd 32 state randomshrapnel
				ifrnd 16 state gemring_drops
				ifrnd 8 state gemring_drops
				ifrnd 4 state gemring_drops
				ifrnd 2 state gemring_drops
				sound VENT_BUST
				ifvarg TEMP -1 ifvarl TEMP 13 nullop
				else
				{
					espawnvar TEMP
					setactor[RETURN].pal TEMP2
					getactorvar[THISACTOR].ACTORFLAGS TEMP3
					setactorvar[RETURN].ACTORFLAGS TEMP3
					getactorvar[THISACTOR].lotagsav TEMP4
					setactorvar[RETURN].lotagsav TEMP4
				}
				killit
			}
		}
	}
ends

state assigncanspriteflags
	getactor[THISACTOR].lotag TEMP
	setactor[THISACTOR].lotag 0
	getactor[THISACTOR].pal TEMP2
	setactor[THISACTOR].pal 0
	getactor[THISACTOR].zvel TEMP3
	setactor[THISACTOR].zvel 0
	setactorvar[THISACTOR].ACTORFLAGS TEMP3
	getactor[THISACTOR].yvel TEMP4
	setactor[THISACTOR].yvel 0
	setactorvar[THISACTOR].lotagsav TEMP4
ends

eventloadactor CANWITHSOMETHING5
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda

useractor notenemy CANWITHSOMETHING5 WEAKER 
	fall
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state checksomethingcanhit
enda

eventloadactor TRASHCAN1
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHCAN1 WEAKER
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashcancode 
enda

eventloadactor TRASHCAN2
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHCAN2 WEAKER
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashcancode 
enda

eventloadactor TRASHCAN3
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHCAN3 WEAKER
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashcancode 
enda

eventloadactor TRASHBAG1
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHBAG1 WEAK
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashbagcode 
enda

eventloadactor TRASHBAG2
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHBAG2 WEAK
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashbagcode 
enda

eventloadactor TRASHBAG3
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHBAG3 WEAK
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashbagcode 
enda

eventloadactor TRASHBAG4
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
enda
useractor notenemy TRASHBAG4 WEAK
	ifvare SKILLSET? 0
	{
		state assigncanspriteflags
		setvar SKILLSET? 1
	}
	state trashbagcode 
enda

// "Drivable" Riot Tank [represents the placeholder on the map when a riot tank is empty]
action AEMPTYTANKWAIT 0 1 7 1 1
action AEMPTYTANKDESTRUCT 0 1 7 1 1
action AEMPTYTANKDEAD 0 1 7 1 1
action AEMPTYTANKATTACHED 0 1 7 1 1

move EMPTYTANKFORWARD 100
move EMPTYTANKSTOP

state calc_emptytank_stats
	ifvare SKILLSET? 1
	{
		setvar ACTORHP TANKSTRENGTH
		setvar ACTORMAXAIRTIME TANKAIRTIME
		setvar ACTORAIRTIME TANKAIRTIME
		setvar ACTORATTACK TANKBASEATTACK
		setvar ACTORDEFENSE TANKBASEDEFENSE
		setvar ACTORMAXAP TANKSTRENGTH
		setvar ACTORMAXFALLRESIST TANKFALLRESIST
		setvarvar ACTORFALLRESIST ACTORMAXFALLRESIST
		state newenemystatcalc
		ifvarand ACTORFLAGS 2048
		{
			setvarvar ACTORHP ACTORMAXHP
			mulvar ACTORHP 2
			setvarvar ACTORFIRSTAID ACTORMAXHP
			mulvar ACTORFIRSTAID 2
			setvarvar ACTORAP ACTORMAXAP
			mulvar ACTORAP 2
			setvarvar ACTORARMORPERCENT 1000
			setvar ACTORBOOTSAMOUNT BOOT_AMOUNT
			setvar ACTORAIRTANKAMOUNT SCUBA_AMOUNT
			subvar ACTORFLAGS 2048
		}
		setvar SKILLSET? 2
	}
ends

useractor notenemy EMPTYTANK TANKSTRENGTH AEMPTYTANKWAIT
	getactor[THISACTOR].mdflags TEMP
	orvar TEMP 16
	setactor[THISACTOR].mdflags TEMP 
	
	setvar ACTORSHEIGHT 74 setvar ACTORSWIDTH 88
	ifvare oldskoolmode 1 killit
	ifvare SKILLSET? 0
	{
		sizeat 60 60
		cstat 257
		action AEMPTYTANKWAIT
		setactor[THISACTOR].extra TANKSTRENGTH
		setvar ACTORMAXHP TANKSTRENGTH
		setvar ACTORHP TANKSTRENGTH
		setvar ACTORMAXAP TANKSTRENGTH
		setvar ACTORAP TANKSTRENGTH
		randvar ACTORARMORPERCENT 900
		addvar ACTORARMORPERCENT 100
		setvar ACTORMAXAIRTIME TANKAIRTIME
		setvar ACTORAIRTIME TANKAIRTIME
		setvar ACTORATTACK TANKBASEATTACK
		setvar ACTORDEFENSE TANKBASEDEFENSE
		ifspritepal 17 setvar ACTORSTRONGFLAGS 32 // Metal
		else ifspritepal 19 setvar ACTORSTRONGFLAGS 16 // Explosives
		else setvar ACTORSTRONGFLAGS 257 // Fire, Ion/Energy (256)
		setvar SKILLSET? 1
	}
	ifvare SKILLSET? 1
	{
		ifvare DRIVERID -1 state enemy_underwater-space
		ifvare DRIVERID -1 state checkfallcounter_nonplayer
		ifvare DRIVERID -1 state enemyfloorhurt
		ifvare DRIVERID -1 state status_attack_damage_control
	}
	ifvarg SKILLSET? 1 
	{
		state enemymaxhpcountdown
		state enemy_general_stuff 
		// state freezecode_actor
		state healingsector_actor
		state accquireenemystats
		ifvare DRIVERID -1 state enemy_underwater-space
		ifvare DRIVERID -1 state checkfallcounter_nonplayer
		ifvare DRIVERID -1 state enemyfloorhurt
		ifvare DRIVERID -1 state status_attack_damage_control
	}
	
	ifaction AEMPTYTANKWAIT
	{
		state shadepulse4
		addvar shade 4
		setactor[THISACTOR].shade shade
		fall
		cstat 257
		ifvare mainmenu 0
		{
			ifp pshrunk nullop
			else
			{
				ifpdistl 1280
				{
					ifhitspace
					{
						ifp pfacing ifcansee
						{
							ifangdiffl 512 nullop
							else // Go to Board the Tank
							{
								getactorvar[PLAYERID].VEHICLEID TEMP
								ifvare TEMP -1
								{
									ifvare CHARACTERSELECTED? 6 // ESSence is too large to board the tank...
									{
										soundonce MENU_ERROR
										redefinequote 409 ^10ESSENCE IS TOO LARGE TO ENTER!
										setvarvar fta fta_normal setvar ftq 409
									}
									else
									ifvare CHARACTERSELECTED? 9 // Cybanis is too large to board the tank...
									{
										soundonce MENU_ERROR
										redefinequote 409 ^10CYBANIS IS TOO LARGE TO ENTER!
										setvarvar fta fta_normal setvar ftq 409
									}
									else // However: everyone else can board the tank.
									{
										getplayer[THISACTOR].i DRIVERID
										setactorvar[DRIVERID].VEHICLEID THISACTOR
										getactor[THISACTOR].x TEMP
										setplayer[THISACTOR].posx TEMP
										getactor[THISACTOR].y TEMP
										setplayer[THISACTOR].posy TEMP
										getactor[THISACTOR].z TEMP
										setplayer[THISACTOR].posz TEMP
										getactor[THISACTOR].ang TEMP
										setplayer[THISACTOR].ang TEMP
										getactor[THISACTOR].sectnum TEMP
										ifvarn TEMP -1 changespritesect DRIVERID TEMP
	
										ifspritepal 17 setvar VEHICLETYPE 1
										else ifspritepal 19 setvar VEHICLETYPE 2
										else setvar VEHICLETYPE 0
										setplayer[THISACTOR].jetpack_on 0
										state calc_emptytank_stats
										redefinequote 409 ^20YOU JUST BOARDED AN EMPTY RIOT TANK!
										setvarvar fta fta_normal setvar ftq 409
										action AEMPTYTANKATTACHED
										sizeat 1 1
									}
								}
								else soundonce MENU_ERROR
							}
						}
					}
					else
					{
						ifp pfacing ifcansee
						{
							ifangdiffl 512
							{
								ifvarl ACTORINVULNTIME 1 // You cannot make the tank self-destruct if it is invulnerable
								{
									redefinequote 413 ^20PRESS "^0
									getkeyname 414 6 0
									qstrcat 413 414
									redefinequote 415 ^20" TO ACTIVATE THIS VEHICLE'S SELF-DESTRUCT!
									qstrcat 413 415
									setvarvar fta 6 setvar ftq 413
								}
							}
							else // Go to Board the Tank
							{
								getactorvar[PLAYERID].VEHICLEID tempvehicleid
								ifvare tempvehicleid -1
								{
									ifvare CHARACTERSELECTED? 6 // ESSence
									{
										redefinequote 409 ^10ESSENCE IS TOO LARGE TO ENTER THIS VEHICLE!
										setvarvar fta 6 setvar ftq 409
									}
									else
									ifvare CHARACTERSELECTED? 9 // Cybanis
									{
										redefinequote 409 ^10CYBANIS IS TOO LARGE TO ENTER THIS VEHICLE!
										setvarvar fta 6 setvar ftq 409
									}
									else
									{
										redefinequote 413 ^20PRESS "^0
										getkeyname 414 6 0
										qstrcat 413 414
										redefinequote 415 ^20" TO ENTER THIS VEHICLE
										qstrcat 413 415
										setvarvar fta 6 setvar ftq 413
									}
								}
								else
								{
									redefinequote 413 ^10CANNOT ENTER ONE VEHICLE WHILE DRIVING ANOTHER!
									setvarvar fta 6 setvar ftq 413
								}
							}
						}
					}
				}
			}
		}
	}
	else
	ifaction AEMPTYTANKATTACHED
	{
		cstat 32768 // 0 // 33825 // 32768 + 257
		ifvarand bits 268435456 // 134217728
		{
			ifvare mainmenu 0 ifvare atm_id -1 ifvare pad_id -1 ifvare shop_id -1
			{
				getplayer[THISACTOR].posx TEMP
				setactor[THISACTOR].x TEMP
				getplayer[THISACTOR].posy TEMP
				setactor[THISACTOR].y TEMP
				getplayer[THISACTOR].posz TEMP
				addvar TEMP 10240
				setactor[THISACTOR].z TEMP
				getplayer[THISACTOR].ang TEMP
				setactor[THISACTOR].ang TEMP
				getactor[DRIVERID].sectnum TEMP
				ifvarn TEMP -1 changespritesect THISACTOR TEMP
	
				getplayer[THISACTOR].i DRIVERID
				setactorvar[DRIVERID].VEHICLEID -1
				setactorvar[THISACTOR].DRIVERID -1
				setvar VEHICLETYPE -1
				setuserdef[THISACTOR].auto_run 1
				redefinequote 409 ^20YOU DISENGAGED FROM AN OCCUPIED RIOT TANK!
				setvarvar fta fta_normal setvar ftq 409
				action AEMPTYTANKWAIT
				sizeat 60 60
			}
		}
		else
		{
			getactor[DRIVERID].x TEMP   
			setactor[THISACTOR].x TEMP
			getactor[DRIVERID].y TEMP   
			setactor[THISACTOR].y TEMP
			getactor[DRIVERID].z TEMP   
			setactor[THISACTOR].z TEMP
			getactor[DRIVERID].ang TEMP   
			setactor[THISACTOR].ang TEMP
			getactor[DRIVERID].sectnum TEMP   
			ifvarn TEMP -1 changespritesect THISACTOR TEMP
		}
	}
	else
	ifaction AEMPTYTANKDESTRUCT
	{
		ifactioncount 64 action AEMPTYTANKDEAD
		else ifactioncount 56 sound LASERTRIP_ARMING
		else ifactioncount 48 sound LASERTRIP_ARMING
		else ifactioncount 32 sound LASERTRIP_ARMING
		else ifactioncount 16 sound LASERTRIP_ARMING
		break
	}
	else
	ifaction AEMPTYTANKDEAD
	{
		setvar TEMP 6144
		setvar TEMP2 TOUGH
		setvar TEMP3 TOUGH
		setvar TEMP4 TOUGH
		setvar TEMP5 TOUGH
		hitradiusvar TEMP TEMP2 TEMP3 TEMP4 TEMP5
		sound LASERTRIP_EXPLODE
		debris SCRAP1 15
		spawn EXPLOSION2
		ifvarvare DRIVERID PLAYERID
		{
			getplayer[THISACTOR].i DRIVERID
			setactorvar[DRIVERID].VEHICLEID -1
			setactorvar[THISACTOR].DRIVERID -1
			setvar VEHICLETYPE -1
			setuserdef[THISACTOR].auto_run 1
			redefinequote 409 ^20YOUR RIOT TANK WAS DESTROYED! :(
			setvarvar fta fta_normal setvar ftq 409
		}
		killit
	}
	
	ifhitweapon
	{
		ifdead action AEMPTYTANKDEAD
		else
		{
			ifvarl ACTORINVULNTIME 1
			{
				ifvarg ACTORLASTDAMAGE 0
				{
					state sparkstate
					ifrnd 85 sound HITMETAL
					else ifrnd 128 sound HITMETAL2
					else sound HITMETAL3
					debris SCRAP1 1
				}
				else
				{
					ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
					ifwasweapon SHOTGUN spawn SMALLSMOKE
					ifwasweapon CHAINGUN spawn SMALLSMOKE
				}
			}
			else
			{
				ifwasweapon SHOTSPARK1 spawn SMALLSMOKE
				ifwasweapon SHOTGUN spawn SMALLSMOKE
				ifwasweapon CHAINGUN spawn SMALLSMOKE
			}
		}
	}
	
	ifvarl ACTORHP 1
	{
		setvar ACTORHP 0
		action AEMPTYTANKDEAD
	}
	
	ifvare mainmenu 0
	{
		ifp pshrunk nullop
		else
		{
			ifpdistl 1280
			{
				ifhitspace
				{
					ifp pfacing ifcansee
					{
						ifangdiffl 512
						{
							ifvarl ACTORINVULNTIME 1 // You cannot make the tank self-destruct if it is invulnerable
							{
								ifaction AEMPTYTANKWAIT action AEMPTYTANKDESTRUCT
							}
						}
					}
				}
			}
		}
	}
	
	getactor[THISACTOR].cstat TEMP
	ifvarand TEMP 1024 nullop else addvar TEMP 1024
	setactor[THISACTOR].cstat TEMP
enda

//***************************
//*TEST OF PICKUP/PUSH STUFF*
//***************************

state getcratesize // Gets the average size {[(XRepeat+YRepeat)/2]*4} of the actor to allow the object to automatically have a proper clipping-sphere
	getactor[THISACTOR].xrepeat TEMP
	getactor[THISACTOR].yrepeat TEMP2
	setvarvar TEMP3 TEMP
	addvarvar TEMP3 TEMP2
	divvar TEMP3 2
	mulvar TEMP3 4
	setactor[THISACTOR].clipdist TEMP3
ends

action WOODCRATE 1 1 1 1 1

eventloadactor CRATE1
	getactor[THISACTOR].extra ACTORWEIGHT
	setactor[THISACTOR].extra -1
enda

useractor notenemy CRATE1 0
	ifvare SKILLSET? 0
	{
		ifvarl ACTORWEIGHT 1 setvar ACTORWEIGHT 40
		setvar SKILLSET? 1
	}
	
	ifmove 0 { ifvare ACTORTHROWTIMER 0 cstat 257 }
	state getstrengthratio
	state getcratesize
	
	state moveitem
	
	ifvarvare SPRITEID-HOLDING THISACTOR
	{
		cstator 2
		ifvarn PICKUPVELS 0 break
		ifvare SPRITEID-TELEKENESIS_P -1 ifhitspace state throwitem
		break
	}
	else
	{
		ifvarg ACTORTHROWTIMER 0 subvar ACTORTHROWTIMER 1
	}
	
	ifmove PHOLDING move INIT geth
	ifvare ACTORTHROWTIMER 0 cstat 257
	getactor[THISACTOR].zvel ACTORZVEL
	ifvarg ACTORZVEL 0 setvar ACTORFALLING? 1 // falling
	ifvare ACTORFALLING? 1 ifvare ACTORZVEL 0 
	{ 
		ifspritepal 30 nullop else sound METALTHUD
		setvar ACTORFALLING? 0
	}
	
	ifvarand ACTORPHYSICSFLAGS 4 nullop
	else
	{
		ifvare ACTORPUSHTIMER 0
		{
			ifvare ACTORTHROWTIMER 0 cstat 257
			ifmove INIT nullop else move INIT
		}
	}
	
	state fallflagscrates // fall
	state pickupcode
	
	state getpushpullspeeds
	state checkphysicsmoves
	
	getactor[THISACTOR].cstat tempc
	ifvarvare SPRITEID-HOLDING THISACTOR
	{
		ifvarand tempc 1024
		{
			subvar tempc 1024
			setactor[THISACTOR].cstat tempc
		}
	}
	else
	{
		ifvarand tempc 1024 nullop
		else
		{
			addvar tempc 1024
			setactor[THISACTOR].cstat tempc
		}
	}
enda

eventloadactor CRATE2
	getactor[THISACTOR].extra ACTORWEIGHT
	setactor[THISACTOR].extra -1
enda

useractor notenemy CRATE2 0
	ifvare SKILLSET? 0
	{
		ifvarl ACTORWEIGHT 1 setvar ACTORWEIGHT 40
		setvar SKILLSET? 1
	}
	
	ifmove 0 { ifvare ACTORTHROWTIMER 0 cstat 257 }
	state getstrengthratio
	state getcratesize
	
	state moveitem
	
	ifvarvare SPRITEID-HOLDING THISACTOR
	{
		cstator 2
		ifvarn PICKUPVELS 0 break
		ifvare SPRITEID-TELEKENESIS_P -1 ifhitspace state throwitem
		break
	}
	else
	{
		ifvarg ACTORTHROWTIMER 0 subvar ACTORTHROWTIMER 1  
	}
	
	ifmove PHOLDING move INIT geth
	ifvare ACTORTHROWTIMER 0 cstat 257
	getactor[THISACTOR].zvel ACTORZVEL
	ifvarg ACTORZVEL 0 setvar ACTORFALLING? 1 // falling
	ifvare ACTORFALLING? 1 ifvare ACTORZVEL 0 
	{ 
		ifspritepal 30 nullop else sound METALTHUD
		setvar ACTORFALLING? 0
	}
	
	ifvarand ACTORPHYSICSFLAGS 4 nullop
	else
	{
		ifvare ACTORPUSHTIMER 0
		{
			ifvare ACTORTHROWTIMER 0 cstat 257
			ifmove INIT nullop else move INIT
		}
	}
	
	state fallflagscrates // fall
	state pickupcode
	
	state getpushpullspeeds
	state checkphysicsmoves
	
	getactor[THISACTOR].cstat tempc
	ifvarvare SPRITEID-HOLDING THISACTOR
	{
		ifvarand tempc 1024
		{
			subvar tempc 1024
			setactor[THISACTOR].cstat tempc
		}
	}
	else
	{
		ifvarand tempc 1024 nullop
		else
		{
			addvar tempc 1024
			setactor[THISACTOR].cstat tempc
		}
	}
enda

// Clock-Digits for in-game Realtime OS Clocks XD
action CLOCK-0 3 1 1 1 1
action CLOCK-1 4 1 1 1 1
action CLOCK-2 5 1 1 1 1
action CLOCK-3 6 1 1 1 1
action CLOCK-4 7 1 1 1 1
action CLOCK-5 8 1 1 1 1
action CLOCK-6 9 1 1 1 1
action CLOCK-7 10 1 1 1 1
action CLOCK-8 11 1 1 1 1
action CLOCK-9 12 1 1 1 1
action CLOCK-BLANK 13 1 1 1 1
action CLOCK-A 14 1 1 1 1
action CLOCK-P 15 1 1 1 1
action CLOCK-M 16 1 1 1 1

define CLOCKDIGIT 3458

state 12digitclock
	getactor[THISACTOR].cstat TEMP ifvarand TEMP 32768 { subvar TEMP 32768 setactor[THISACTOR].cstat TEMP }
ends

state 24digitclock
	getactor[THISACTOR].cstat TEMP ifvarand TEMP 32768 nullop else { addvar TEMP 32768 setactor[THISACTOR].cstat TEMP }
ends

eventloadactor CLOCKDIGIT
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].extra CLOCKDIGITTYPE
		setactor[THISACTOR].extra -1
		getactor[THISACTOR].zvel CLOCKDIGITFLAGS
		setactor[THISACTOR].zvel 0
		setvar SKILLSET? 1
	}
enda

useractor notenemy CLOCKDIGIT 0
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].extra CLOCKDIGITTYPE
		setactor[THISACTOR].extra -1
		getactor[THISACTOR].zvel CLOCKDIGITFLAGS
		setactor[THISACTOR].zvel 0
		setvar SKILLSET? 1
	}
	
	gettimedate temp tempb tempc tempd tempe TEMP TEMP2 TEMP3
	// temp = seconds 
	// tempb = minutes
	// tempc = hours [24-hour format]
	// tempd = day of the month
	// tempe = current month - 1 [add 1 for the real month]
	addvar tempe 1
	// TEMP = current year
	// TEMP2 = day of the week [i.e 0 = Sunday, 6 = Saturday]
	// TEMP3 = day of the year
	
	ifvare CLOCKDIGITTYPE 1 // Month Digit #1 [Xm-dd-yy]
	{
		setvarvar TEMPVAR tempe
		divvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 2 // Month Digit #2 [mX-dd-yy]
	{
		setvarvar TEMPVAR tempe
		modvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 3 // Day Digit #1 [mm-Xd-yy]
	{
		setvarvar TEMPVAR tempd
		divvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 4 // Day Digit #2 [mm-dX-yy]
	{
		setvarvar TEMPVAR tempd
		modvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 5 // Year Digit #1 [mm-dd-Xy]
	{
		setvarvar TEMPVAR TEMP
		modvar TEMPVAR 100
		divvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 6 // Year Digit #2 [mm-dd-yX]
	{
		setvarvar TEMPVAR TEMP
		modvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 7 // Hours Digit #1 [Xh:mm:ss]
	{
		setvarvar TEMPVAR tempc
		ifvarand CLOCKDIGITFLAGS 1
		{
			ifvarg TEMPVAR 12 subvar TEMPVAR 12
		}
		divvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 8 // Hours Digit #2 [hX:mm:ss]
	{
		setvarvar TEMPVAR tempc
		ifvarand CLOCKDIGITFLAGS 1
		{
			ifvarg TEMPVAR 12 subvar TEMPVAR 12
		}
		modvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 9 // Minutes Digit #1 [hh:Xm:ss]
	{
		setvarvar TEMPVAR tempb
		divvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 10 // Minutes Digit #2 [hh:mX:ss]
	{
		setvarvar TEMPVAR tempb
		modvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 11 // Seconds Digit #1 [hh:mm:Xs]
	{
		setvarvar TEMPVAR temp
		divvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 12 // Seconds Digit #2 [hh:mm:sX]
	{
		setvarvar TEMPVAR temp
		modvar TEMPVAR 10
	}
	else
	ifvare CLOCKDIGITTYPE 13 // "A"/"P" in "AM"/"PM
	{
		ifvarand CLOCKDIGITFLAGS 1
		{
			ifvare tempc 0 setvar TEMPVAR 10
			ifvare tempc 1 setvar TEMPVAR 10
			ifvare tempc 2 setvar TEMPVAR 10
			ifvare tempc 3 setvar TEMPVAR 10
			ifvare tempc 4 setvar TEMPVAR 10
			ifvare tempc 5 setvar TEMPVAR 10
			ifvare tempc 6 setvar TEMPVAR 10
			ifvare tempc 7 setvar TEMPVAR 10
			ifvare tempc 8 setvar TEMPVAR 10
			ifvare tempc 9 setvar TEMPVAR 10
			ifvare tempc 10 setvar TEMPVAR 10
			ifvare tempc 11 setvar TEMPVAR 10
			ifvare tempc 12 setvar TEMPVAR 11
			ifvare tempc 13 setvar TEMPVAR 11
			ifvare tempc 14 setvar TEMPVAR 11
			ifvare tempc 15 setvar TEMPVAR 11
			ifvare tempc 16 setvar TEMPVAR 11
			ifvare tempc 17 setvar TEMPVAR 11
			ifvare tempc 18 setvar TEMPVAR 11
			ifvare tempc 19 setvar TEMPVAR 11
			ifvare tempc 20 setvar TEMPVAR 11
			ifvare tempc 21 setvar TEMPVAR 11
			ifvare tempc 22 setvar TEMPVAR 11
			ifvare tempc 23 setvar TEMPVAR 11
		}
		else setvar TEMPVAR 13
	}
	else
	ifvare CLOCKDIGITTYPE 14 // "M" in "AM"/"PM
	{
		ifvarand CLOCKDIGITFLAGS 1 setvar TEMPVAR 12 else setvar TEMPVAR 13
	}
	
	ifvarand CLOCKDIGITFLAGS 2
	{
		addvar CLOCKDIGITTIMER 1
	
		ifvare CLOCKDIGITTIMER 0 state 12digitclock
		ifvare CLOCKDIGITTIMER 1 state 12digitclock
		ifvare CLOCKDIGITTIMER 2 state 12digitclock
		ifvare CLOCKDIGITTIMER 3 state 12digitclock
		ifvare CLOCKDIGITTIMER 4 state 12digitclock
		ifvare CLOCKDIGITTIMER 5 state 12digitclock
		ifvare CLOCKDIGITTIMER 6 state 12digitclock
		ifvare CLOCKDIGITTIMER 7 state 12digitclock
		ifvare CLOCKDIGITTIMER 8 state 12digitclock
		ifvare CLOCKDIGITTIMER 9 state 12digitclock
		ifvare CLOCKDIGITTIMER 10 state 12digitclock
		ifvare CLOCKDIGITTIMER 11 state 12digitclock
		ifvare CLOCKDIGITTIMER 12 state 12digitclock
	
		ifvare CLOCKDIGITTIMER 13 state 24digitclock
		ifvare CLOCKDIGITTIMER 14 state 24digitclock
		ifvare CLOCKDIGITTIMER 15 state 24digitclock
		ifvare CLOCKDIGITTIMER 16 state 24digitclock
		ifvare CLOCKDIGITTIMER 17 state 24digitclock
		ifvare CLOCKDIGITTIMER 18 state 24digitclock
		ifvare CLOCKDIGITTIMER 19 state 24digitclock
		ifvare CLOCKDIGITTIMER 20 state 24digitclock
		ifvare CLOCKDIGITTIMER 21 state 24digitclock
		ifvare CLOCKDIGITTIMER 22 state 24digitclock
		ifvare CLOCKDIGITTIMER 23 state 24digitclock
		ifvare CLOCKDIGITTIMER 24 state 24digitclock
		ifvare CLOCKDIGITTIMER 25 { state 24digitclock subvar CLOCKDIGITTIMER 26 }
	}
	
	ifvare TEMPVAR 0 action CLOCK-0
	else ifvare TEMPVAR 1 action CLOCK-1
	else ifvare TEMPVAR 2 action CLOCK-2
	else ifvare TEMPVAR 3 action CLOCK-3
	else ifvare TEMPVAR 4 action CLOCK-4
	else ifvare TEMPVAR 5 action CLOCK-5
	else ifvare TEMPVAR 6 action CLOCK-6
	else ifvare TEMPVAR 7 action CLOCK-7
	else ifvare TEMPVAR 8 action CLOCK-8
	else ifvare TEMPVAR 9 action CLOCK-9
	else ifvare TEMPVAR 10 action CLOCK-A
	else ifvare TEMPVAR 11 action CLOCK-P
	else ifvare TEMPVAR 12 action CLOCK-M
	else ifvare TEMPVAR 13 action CLOCK-BLANK
	else action CLOCK-BLANK
enda


// Sparks [for various crap like Lasers, Bio-Shield Hits, Airjumps, Electrical Blasts, Bullet-Hits, etc, etc, freakin etc :P]
spriteflags SPARKFALL 2064
spritenoshade SPARKFALL
move SPARKMOVE 192
move SLOWSPARK 96
move DRIFT 64

useractor notenemy SPARKFALL 0
	ifmove 0
	{
		move DRIFT geth
		ifspawnedby APLAYER
		{
			getactor[THISACTOR].owner temp
			getactorvar[temp].sparkflag tempb
			ifvare tempb 1 // Bio-Shield
			{
				sizeat 4 4
				ifvare SKILLSET? 0 { spritepal 1 setvar SKILLSET? 1 }
			}
			ifvare tempb 2 // Air-Jump
			{
				sizeat 3 3
				ifvare SKILLSET? 0 { spritepal 0 setvar SKILLSET? 1 }
			}
		}
		else
		ifspawnedby FIRELASER
		{
			sizeat 3 3
			ifvare SKILLSET? 0 { spritepal 2 setvar SKILLSET? 1 }
		}
		else
		ifspawnedby SHOTSPARK1 sizeat 2 2 else
		ifspawnedby NATURALLIGHTNING sizeat 5 5 else
		ifspawnedby ZAPPER1 sizeat 5 5 else
		ifspawnedby ZAPPER2 sizeat 4 4 else
		ifspawnedby ZAPPER3 sizeat 6 6 else
		sizeat 3 3
		state itemfullbright // setactor[THISACTOR].shade -127
		randvar mtype 512
		subvar mtype 1024
	}
	
	movesprite THISACTOR 0 0 mtype CLIPMASK0 RETURN
	iffloordistl 8
	{
		ifvare tempe 1 killit
		ifrnd 128 killit else
		{
			setvar tempe 1
			getactor[THISACTOR].z z
			subvar z 1024
			setactor[THISACTOR].z z
			setactor[THISACTOR].zvel -1024
			setvar mtype 0
		}
	}
	addvar mtype 160
	ifvarg mtype 3072 ifrnd 16 killit
	ifvarg mtype 9216 ifrnd 63 killit
	ifvarg mtype 24576 ifrnd 248 killit
	
	ifspawnedby APLAYER
	{
		ifcount 6 sizeat 3 3
		ifcount 13 sizeat 2 2
		ifcount 19 sizeat 1 1
	}
	else
	ifspawnedby SHOTSPARK1
	{
		ifcount 6 sizeat 3 3
		ifcount 13 sizeat 2 2
		ifcount 19 sizeat 1 1
	}
	else
	ifspawnedby NATURALLIGHTNING
	{
		ifcount 6 sizeat 4 4
		ifcount 13 sizeat 3 3
		ifcount 19 sizeat 2 2
		ifcount 26 sizeat 1 1
	}
	else
	ifspawnedby ZAPPER1
	{
		ifcount 6 sizeat 4 4
		ifcount 13 sizeat 3 3
		ifcount 19 sizeat 2 2
		ifcount 26 sizeat 1 1
	}
	else
	ifspawnedby ZAPPER2
	{
		ifcount 6 sizeat 3 3
		ifcount 13 sizeat 2 2
		ifcount 19 sizeat 1 1
	}
	else
	ifspawnedby ZAPPER3
	{
		ifcount 6 sizeat 5 5
		ifcount 13 sizeat 4 4
		ifcount 19 sizeat 3 3
		ifcount 26 sizeat 2 2
		ifcount 32 sizeat 1 1
	}
	else
	ifspawnedby FIRELASER
	{
		ifcount 6 sizeat 3 3
		ifcount 11 sizeat 2 2
		ifcount 16 sizeat 1 1
	}
	else
	{
		ifcount 6 sizeat 2 2
		ifcount 13 sizeat 1 1
	}
	ifnotmoving ifcount 3 { resetcount move SLOWSPARK randomangle ifrnd 64 killit }
	getactor[THISACTOR].sectnum TEMP ifvare TEMP -1 killit
enda


// First Aid Terminal/Station [ala Half-Life 1/2 & Doom 3]

state firstaidpanel_actordetect
	ifvarand ACTORFLAGS 16 setvar TEMP7 -1
	else
	{
		ifvarn TEMP7 -1
		{ 
			getactor[TEMP7].pal ITEMSEEKD
			ifvarg ITEMSEEKD 8 ifvarl ITEMSEEKD 12 { setvar TEMP7 -1 break } // Makes it that if the current "seeker" is "old-skool", set to -1 to search for a non-"old-skool" one
	
			ifvarl actorvar[TEMP7].ACTORHP 1 { setvar TEMP7 -1 break } // Makes it that if the current "seeker" is dead, set to -1 to search for a living one
			ifvare actorvar[TEMP7].CLOAKED? 1 { setvar TEMP7 -1 break } // Makes it that if the current "seeker" is cloaked, set to -1 to search for a non-cloaked one
			ifvare actorvar[TEMP7].SHRUNK? 1 { setvar TEMP7 -1 break } // Makes it that if the current "seeker" is shrunken, set to -1 to search for a non-shrunken one
			ifvare actorvar[TEMP7].FROZEN? 1 { setvar TEMP7 -1 break } // Makes it that if the current "seeker" is frozen, set to -1 to search for a non-frozen one
			ifvare actorvar[TEMP7].EXPANDING? 1 { setvar TEMP7 -1 break } // Makes it that if the current "seeker" is expanding, set to -1 to search for a non-cloaked one

			getactor[THISACTOR].z ITEMSEEKERZ
			subvar ITEMSEEKERZ 8192
			setactor[THISACTOR].z ITEMSEEKERZ
			canseespr THISACTOR TEMP7 ITEMSEEKD
			addvar ITEMSEEKERZ 8192
			setactor[THISACTOR].z ITEMSEEKERZ

			ifvare ITEMSEEKD 0 { setvar TEMP7 -1 break } // Makes it the monster and the item need a line of sight.
		}
	}
ends

action FIRSTAIDON 0
action FIRSTAIDOFF 1

eventloadactor FIRSTAIDPANEL_ON
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].xvel HEALPANEL_CHARGEHEALS
		ifvare HEALPANEL_CHARGEHEALS 0 setvar HEALPANEL_CHARGEHEALS 10
		ifvarg HEALPANEL_CHARGEHEALS 1000 setvar HEALPANEL_CHARGEHEALS 1000
	
		getactor[THISACTOR].yvel HEALPANEL_MAXCHARGES
		ifvare HEALPANEL_MAXCHARGES 0 setvar HEALPANEL_MAXCHARGES 100
		setvarvar HEALPANEL_CHARGES HEALPANEL_MAXCHARGES
	
		getactor[THISACTOR].zvel HEALPANEL_RECHARGETIMER2
		setvar HEALPANEL_RECHARGETIMER 0
	
		getactor[THISACTOR].extra tempc
		ifvare tempc -1 setvar tempc 3
	
		getactor[THISACTOR].owner tempd
		setactor[THISACTOR].owner THISACTOR
	
		setvar SKILLSET? 1
	}
enda
	
useractor notenemy FIRSTAIDPANEL_ON 0
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].xvel HEALPANEL_CHARGEHEALS
		ifvare HEALPANEL_CHARGEHEALS 0 setvar HEALPANEL_CHARGEHEALS 10
		ifvarg HEALPANEL_CHARGEHEALS 1000 setvar HEALPANEL_CHARGEHEALS 1000
	
		getactor[THISACTOR].yvel HEALPANEL_MAXCHARGES
		ifvare HEALPANEL_MAXCHARGES 0 setvar HEALPANEL_MAXCHARGES 100
		setvarvar HEALPANEL_CHARGES HEALPANEL_MAXCHARGES
	
		getactor[THISACTOR].zvel HEALPANEL_RECHARGETIMER2
		setvar HEALPANEL_RECHARGETIMER 0
	
		getactor[THISACTOR].extra tempc
		ifvare tempc -1 setvar tempc 3
	
		getactor[THISACTOR].owner tempd
		setactor[THISACTOR].owner THISACTOR
	
		setvar SKILLSET? 1
	}
	
	ifvarg HEALPANEL_CHARGES 0 action FIRSTAIDON else action FIRSTAIDOFF
	
	ifvarg HEALPANEL_RECHARGETIMER2 0
	{
		ifvarvarl HEALPANEL_CHARGES HEALPANEL_MAXCHARGES
		{
			ifvare mainmenu 0 addvar HEALPANEL_RECHARGETIMER 1
			ifvarvarl HEALPANEL_RECHARGETIMER HEALPANEL_RECHARGETIMER2 nullop
			else
			{
				addvar HEALPANEL_CHARGES 1
				sound MEDPANEL_RECHARGE
				ifvarvarl HEALPANEL_CHARGES HEALPANEL_MAXCHARGES sound MENU_SUBUP else sound MENU_CURSOR
				ifvarvarg HEALPANEL_CHARGES HEALPANEL_MAXCHARGES setvarvar HEALPANEL_CHARGES HEALPANEL_MAXCHARGES
				setvar HEALPANEL_RECHARGETIMER 0
			}
		}
		else setvar HEALPANEL_RECHARGETIMER 0
	}
	else setvar HEALPANEL_RECHARGETIMER 0
	
	// Code for Players using Stations
	ifvarvare hitsprite THISACTOR
	{
		getactor[hitsprite].x x
		getactor[hitsprite].y y
	
		getplayer[THISACTOR].posx posx
		getplayer[THISACTOR].posy posy
	
		setvarvar wallxdist x
		subvarvar wallxdist posx
	
		setvarvar wallydist y
		subvarvar wallydist posy
	
		ifvarg wallxdist FIRSTAIDSTATIONMINDIST ifvarl wallxdist FIRSTAIDSTATIONMAXDIST ifvarg wallydist FIRSTAIDSTATIONMINDIST ifvarl wallydist FIRSTAIDSTATIONMAXDIST ifvarg CURRENTHITPOINTS 0
		{
			ifhitspace
			{ 
				state stopsearchsounds
				ifvarl com_pause 1
				{ 
					ifaction FIRSTAIDON
					{
						setvarvar tempg MAXHITPOINTS
						ifvare CHARACTERSELECTED? 13
						{
							ifvarl HEALPANEL_CHARGEHEALS 0 // Constant
							{
								setvarvar tempf HEALPANEL_CHARGEHEALS
								mulvar tempf -3
								divvar tempf 2
	
								ifvarvarg tempf MAXHITPOINTS
								{
									setvarvar TEMPVAR2 MAXHITPOINTS
									mulvar TEMPVAR2 3
									divvar TEMPVAR2 2
									ifvarvarg tempf TEMPVAR2 setvarvar tempf TEMPVAR2
									setvarvar tempg tempf
								}
							}
							else
							ifvarg HEALPANEL_CHARGEHEALS 0 // %-based
							{
								setvarvar tempf HEALPANEL_CHARGEHEALS
								mulvar tempf 3
								divvar tempf 2
	
								ifvarg tempf 1000
								{
									mulvarvar tempg tempf
									divvar tempg 1000
								}
							}
						}
	
						ifvarvarl CURRENTHITPOINTS tempg
						{
							ifvarl HEALPANEL_CHARGEHEALS 0 // Constant
							{
								setvarvar tempb HEALPANEL_CHARGEHEALS
								ifvare CHARACTERSELECTED? 13 { mulvar tempb 3 divvar tempb 2 }
								mulvar tempb -1
								ifvarl tempb 1 setvar tempb 1
							}
							else
							ifvarg HEALPANEL_CHARGEHEALS 0 // %-based
							{
								setvarvar tempb tempg
								mulvarvar tempb HEALPANEL_CHARGEHEALS
								ifvare CHARACTERSELECTED? 13 { mulvar tempb 3 divvar tempb 2 }
								divvar tempb 1000
								ifvarl tempb 1 setvar tempb 1
							}
							state gotmedsyoureallyneeded
							addvarvar CURRENTHITPOINTS tempb
							ifvarn player[THISACTOR].over_shoulder_on 0
							{
								ifvarg tempb 0
								{
									setvarvar SHOWDAMAGE tempb
									setvar SHOWDAMAGETYPE 3
									setvarvar SHOWDAMAGEACTORID PLAYERID
									state showdamage
								}
							}
							ifvarvarg CURRENTHITPOINTS tempg setvarvar CURRENTHITPOINTS tempg
							subvar HEALPANEL_CHARGES 1
							palfrom 16 0 32
							setvar PLAYERHPDAMAGED? -1
							sound DUKE_HARTBEAT
							sound MEDPANEL_USE
						}
						else
						ifvarg FIRSTAIDCURRENT 0
						{
							ifvare tempd 1
							{
								ifvarvarl FIRSTAIDCURRENT tempg
								{
									ifvarl HEALPANEL_CHARGEHEALS 0 // Constant
									{
										setvarvar tempb HEALPANEL_CHARGEHEALS
										ifvare CHARACTERSELECTED? 13 { mulvar tempb 3 divvar tempb 2 }
										mulvar tempb -1
										ifvarl tempb 1 setvar tempb 1
									}
									else
									ifvarg HEALPANEL_CHARGEHEALS 0 // %-based
									{
										setvarvar tempb tempg
										mulvarvar tempb HEALPANEL_CHARGEHEALS
										ifvare CHARACTERSELECTED? 13 { mulvar tempb 3 divvar tempb 2 }
										divvar tempb 1000
										ifvarl tempb 1 setvar tempb 1
									}
									addvarvar FIRSTAIDCURRENT tempb
									ifvarvarg FIRSTAIDCURRENT tempg setvarvar FIRSTAIDCURRENT tempg
									subvar HEALPANEL_CHARGES 1
									setvar DISPLAYFAFLASHTIMER -28
									sound MEDPANEL_USE_FA
								}
								else sound MEDPANEL_NOENERGY 
							}
							else sound MEDPANEL_NOENERGY          
						}
						else sound MEDPANEL_NOENERGY          
					}
					else sound MEDPANEL_NOENERGY
					setvarvar com_pause tempc
				}
			}
		}
	}
	
	// Code for Monsters using Stations
	setvar TEMP5 422 // 422
	setvar TEMP6 4220 // 844
	ifvarg HEALPANEL_CHARGES 0 ifvarl com_pause 1 ifaction FIRSTAIDON
	{
		findnearactorzvar BOSS4 TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar BOSS3 TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar BOSS2 TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar BOSS1 TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar COMMANDER TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar NEWBEAST TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar OCTABRAIN TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar PIGCOP TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar LIZMAN TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvare TEMP7 -1 findnearactorzvar LIZTROOP TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		// ifvare TEMP7 -1 findnearactorzvar SCORPIONTANK TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		// ifvare TEMP7 -1 findnearactorzvar TANK TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		// ifvare TEMP7 -1 findnearactorzvar DRONE TEMP5 TEMP6 TEMP7 state firstaidpanel_actordetect
		ifvarn TEMP7 -1
		{
			getactorvar[TEMP7].ACTORHP TEMP3
			getactorvar[TEMP7].ACTORMAXHP TEMP4
			ifvarvarl TEMP3 TEMP4
			{
				getactor[THISACTOR].x mx
				getactor[THISACTOR].y my
				getactor[TEMP7].x x
				getactor[TEMP7].y y
				subvarvar mx x
				subvarvar my y
				getangle angvar mx my
				setactor[TEMP7].ang angvar
	
				ifvarl HEALPANEL_CHARGEHEALS 0 // Constant
				{
					setvarvar tempb HEALPANEL_CHARGEHEALS
					mulvar tempb -1
				}
				else
				ifvarg HEALPANEL_CHARGEHEALS 0 // %-based
				{
					setvarvar tempb TEMP4
					mulvarvar tempb HEALPANEL_CHARGEHEALS
					divvar tempb 1000
				}
				ifvarl tempb 1 setvar tempb 1
				addvarvar TEMP3 tempb
	
				setvarvar ITEMSEEK TEMP7
				setvarvar ITEMSEEKC tempb
				state showhealing_actorhp
	
				ifvarvarg TEMP3 TEMP4 setvarvar TEMP3 TEMP4
				setactorvar[TEMP7].ACTORHP TEMP3
				subvar HEALPANEL_CHARGES 1
				setactorvar[TEMP7].ACTORHPDAMAGED? -1
				sound MEDPANEL_USE
	
				setvarvar com_pause tempc
			}
			else
			{
				getactorvar[TEMP7].ACTORFIRSTAID TEMP3
				getactorvar[TEMP7].ACTORMAXHP TEMP4
				ifvarg TEMP3 0 ifvare tempd 1
				{
					ifvarvarl TEMP3 TEMP4
					{
						ifvarl HEALPANEL_CHARGEHEALS 0 // Constant
						{
							setvarvar tempb HEALPANEL_CHARGEHEALS
							mulvar tempb -1
						}
						else
						ifvarg HEALPANEL_CHARGEHEALS 0 // %-based
						{
							setvarvar tempb TEMP4
							mulvarvar tempb HEALPANEL_CHARGEHEALS
							divvar tempb 1000
						}
						ifvarl tempb 1 setvar tempb 1
						addvarvar TEMP3 tempb
	
						ifvarvarg TEMP3 TEMP4 setvarvar TEMP3 TEMP4
						setactorvar[TEMP7].ACTORFIRSTAID TEMP3
						subvar HEALPANEL_CHARGES 1
						sound MEDPANEL_USE_FA
					}
				}    
			}
		}
	}
enda

eventloadactor HEALING_SECTOR
	getactor[THISACTOR].hitag hitagsav
	setactor[THISACTOR].hitag 0
	getactor[THISACTOR].lotag lotagsav // Armor AB% [if Armor is used]
	ifvarl lotagsav 100 setvar lotagsav 100
	ifvarg lotagsav 1000 setvar lotagsav 1000
	setactor[THISACTOR].lotag 0
	getactor[THISACTOR].extra extrasav // Maximum of value to go heal to. [positive = x.x% format, negative = exact]
	ifvare extrasav 0 setvar extrasav 1000
	ifvarg extrasav 2000 setvar extrasav 2000
	setactor[THISACTOR].extra 0
	getactor[THISACTOR].xvel xvelsav // 1 = HP Healing, 2 = AP Healing, 4 = EP Healing [bitfield]
	setactor[THISACTOR].xvel 0
	getactor[THISACTOR].yvel yvelsav // % [x.x% format] or exact HP/AP/EP value to heal.
	setactor[THISACTOR].yvel 0
	getactor[THISACTOR].zvel zvelsav // delay between each heal cycle
	setactor[THISACTOR].zvel 0
enda

useractor notenemy HEALING_SECTOR 0
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].sectnum TEMPVAR
		setactorvar[TEMPVAR].healsectorarmorab lotagsav
		setactorvar[TEMPVAR].healsectormaxheal extrasav
		setactorvar[TEMPVAR].healsectortype xvelsav
		setactorvar[TEMPVAR].healsectoramount yvelsav
		setactorvar[TEMPVAR].healsectordelaymax zvelsav
		setactor[THISACTOR].cstat 32768
		setvar SKILLSET? 1
		killit
	}
enda

eventloadactor FREEZING_EXTENSION
	getactor[THISACTOR].hitag hitagsav
	setactor[THISACTOR].hitag 0
	getactor[THISACTOR].lotag lotagsav
	setactor[THISACTOR].lotag 0
enda

useractor notenemy FREEZING_EXTENSION 0
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].sectnum TEMPVAR
		ifvarg hitagsav 0 mulvar lotagsav -1
		setactorvar[TEMPVAR].freezingmod lotagsav
		setactor[THISACTOR].cstat 32768
		setvar SKILLSET? 1
		killit
	}
enda

useractor notenemy SECRET_EXTENSION 0
	ifvare SKILLSET? 0
	{
		getactor[THISACTOR].sectnum TEMPVAR
		getactorvar[TEMPVAR].SECTORISASECRET? tempb
		ifvarn tempb 32767 
		{
			setvar tempb 32767 
	
			setvar MISCARRAYID 6 // Max Secrets Found [Level]
			getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP
			addvar MISCARRAYID_AMOUNTTEMP 1 
			setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP
	
			setvar MISCARRAYID 7 // Max Secrets Found [Game]
			getactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP
			addvar MISCARRAYID_AMOUNTTEMP 1 
			setactorvar[MISCARRAYID].MISCARRAYID_AMOUNT MISCARRAYID_AMOUNTTEMP
		}
		setactorvar[TEMPVAR].SECTORISASECRET? tempb
		setactor[THISACTOR].cstat 32768
		setvar SKILLSET? 1
		killit
	}
enda

eventloadactor ZCONTROL
	ifvare SKILLSET? 0
	{
		getsector[THISACTOR].floorz TEMP
		getsector[THISACTOR].ceilingz TEMP2
		setvarvar TEMP3 TEMP
		addvarvar TEMP3 TEMP2
		setactor[THISACTOR].cstat 1
		setvar SKILLSET? 1
	}
enda

useractor notenemy ZCONTROL 0
	ifvare SKILLSET? 0
	{
		getsector[THISACTOR].floorz TEMP
		getsector[THISACTOR].ceilingz TEMP2
		setvarvar TEMP3 TEMP
		addvarvar TEMP3 TEMP2
		setactor[THISACTOR].cstat 1
		setvar SKILLSET? 1
	}
	else
	{
		getsector[THISACTOR].floorz TEMP2
		addvarvar TEMP2 TEMP3
		setsector[THISACTOR].ceilingz TEMP2
	}
enda

eventloadactor ROULETTEWHEEL
	getactor[THISACTOR].zvel TEMP4
	setactor[THISACTOR].zvel 0
	
	espawn MUSICANDSFX
	ifvarl TEMP4 1 setactor[RETURN].hitag 4096 else setactor[RETURN].hitag TEMP4
	setactor[RETURN].lotag 567
	
	getactor[THISACTOR].x TEMP2
	setactor[RETURN].x TEMP2
	getactor[THISACTOR].y TEMP2
	setactor[RETURN].y TEMP2
	getactor[THISACTOR].z TEMP2
	setactor[RETURN].z TEMP2
	
	setactorvar[THISACTOR].MUSICANDSFX_LINKID RETURN
	setactorvar[RETURN].MUSICANDSFX_LINKID THISACTOR
	getactor[THISACTOR].picnum TEMP2
	setactorvar[RETURN].MUSICANDSFX_LINKPICNUM TEMP2
	setactorvar[RETURN].MUSICANDSFX_LINKTYPE 0 // Sprite
enda

eventloadactor FANSPRITE
	getactor[THISACTOR].extra TEMP
	setactor[THISACTOR].extra -1
	getactor[THISACTOR].zvel TEMP4
	setactor[THISACTOR].zvel 0
	
	ifvare TEMP -1 randvar TEMP 3
	ifvarg TEMP -1 ifvarl TEMP 4
	{
		espawn MUSICANDSFX
		ifvarl TEMP4 1 setactor[RETURN].hitag 6144 else setactor[RETURN].hitag TEMP4
		ifvare TEMP 0 setactor[RETURN].lotag 919
		ifvare TEMP 1 setactor[RETURN].lotag 920
		ifvare TEMP 2 setactor[RETURN].lotag 921
		ifvare TEMP 3 setactor[RETURN].lotag 922
	
		getactor[THISACTOR].x TEMP2
		setactor[RETURN].x TEMP2
		getactor[THISACTOR].y TEMP2
		setactor[RETURN].y TEMP2
		getactor[THISACTOR].z TEMP2
		setactor[RETURN].z TEMP2
	
		setactorvar[THISACTOR].MUSICANDSFX_LINKID RETURN
		setactorvar[RETURN].MUSICANDSFX_LINKID THISACTOR
		getactor[THISACTOR].picnum TEMP2
		setactorvar[RETURN].MUSICANDSFX_LINKPICNUM TEMP2
		setactorvar[RETURN].MUSICANDSFX_LINKTYPE 0 // Sprite
	}
enda


//*********************************************************************************************************************************************************
//*********************************************************************************************************************************************************
//***Attempting to Add the WGRealms2-style HP Damage Displays [with NR versions for AP, and with centered alignment, and other misc "improvements", >.>]***
//*********************************************************************************************************************************************************
//*********************************************************************************************************************************************************

state displaydamagenumbers
	ifvare mainmenu 0 addvar mtype 1
	ifvare extrasav 1 { ifvare rpgdmgdisplaytoggle 0 killit else ifvare oldskoolmode 1 killit } // if the value is spawned as a "Damage" or "Healing" display, remove it or prevent its' existance if the toggles are set off.
	
	spriteflags 84 // 64 [No Pal Change] + 16 [No Teleport] + 4 [No Shade]
	state itemfullbright // setactor[THISACTOR].shade -127
	sizeat 32 32
	ifvare SHOWDAMAGEPARENTID -1 killit else ifvarg mtype 41 killit
ends

useractor notenemy 6302 0 state displaydamagenumbers enda // NR-font "CRITICAL!!"
useractor notenemy 6303 0 state displaydamagenumbers enda // NR-Number font "0"
useractor notenemy 6304 0 state displaydamagenumbers enda // NR-Number font "1"
useractor notenemy 6305 0 state displaydamagenumbers enda // NR-Number font "2"
useractor notenemy 6306 0 state displaydamagenumbers enda // NR-Number font "3"
useractor notenemy 6307 0 state displaydamagenumbers enda // NR-Number font "4"
useractor notenemy 6308 0 state displaydamagenumbers enda // NR-Number font "5"
useractor notenemy 6309 0 state displaydamagenumbers enda // NR-Number font "6"
useractor notenemy 6310 0 state displaydamagenumbers enda // NR-Number font "7"
useractor notenemy 6311 0 state displaydamagenumbers enda // NR-Number font "8"
useractor notenemy 6312 0 state displaydamagenumbers enda // NR-Number font "9"

// Damage-Displays 'Anchor'
useractor notenemy 6313 0
	ifvare mainmenu 0 addvar mtype 1
	
	ifvare extrasav 1 { ifvare rpgdmgdisplaytoggle 0 killit else ifvare oldskoolmode 1 killit } // if the value is spawned as a "Damage" or "Healing" display, remove it or prevent its' existance if the toggles are set off.
	// TEMP = Main Value
	// TEMP2 = Main Value [TEMP]
	// temp = 1s Digit
	// tempb = 10s Digit
	// tempc = 100s Digit
	// tempd = 1000s Digit
	// tempe = 10000s Digit
	// tempf = 100000s Digit
	// tempg = 1000000s Digit
	// tempi = 10000000s Digit
	ifvare SKILLSET? 0
	{
		randvar TEMP3 1
		randvar TEMP 33554432
		randvar SHOWDAMAGETYPE 5
		setvar SKILLSET? 1
	}
	
	setvar tempi 0
	setvar tempg 0
	setvar tempf 0
	setvar tempe 0
	setvar tempd 0
	setvar tempc 0
	setvar tempb 0
	setvar temp 0
	setvarvar TEMP2 TEMP
	ifvarg TEMP2 9999999
	{
		setvarvar tempi TEMP2
		divvar tempi 10000000
		modvar TEMP2 10000000
	}
	ifvarg TEMP2 999999
	{
		setvarvar tempg TEMP2
		divvar tempg 1000000
		modvar TEMP2 1000000
	}
	ifvarg TEMP2 99999
	{
		setvarvar tempf TEMP2
		divvar tempf 100000
		modvar TEMP2 100000
	}
	ifvarg TEMP2 9999
	{
		setvarvar tempe TEMP2
		divvar tempe 10000
		modvar TEMP2 10000
	}
	ifvarg TEMP2 999
	{
		setvarvar tempd TEMP2
		divvar tempd 1000
		modvar TEMP2 1000
	}
	ifvarg TEMP2 99
	{
		setvarvar tempc TEMP2
		divvar tempc 100
		modvar TEMP2 100
	}
	ifvarg TEMP2 9
	{
		setvarvar tempb TEMP2
		divvar tempb 10
		modvar TEMP2 10
	}
	ifvarg TEMP2 -1
	{
		setvarvar temp TEMP2
		setvar TEMP2 0
	}
	
	spriteflags 84 // 64 [No Pal Change] + 16 [No Teleport] + 4 [No Shade]
	state itemfullbright // setactor[THISACTOR].shade -127
	cstator 80
	ifvare SHOWDAMAGETYPE 0 spritepal 10		// HP [Damage]
	else ifvare SHOWDAMAGETYPE 1 spritepal 14	// AP [Damage]
	else ifvare SHOWDAMAGETYPE 2 spritepal 16	// Bio-Shield [Damage]
	else ifvare SHOWDAMAGETYPE 3 spritepal 21	// HP [Healing]
	else ifvare SHOWDAMAGETYPE 4 spritepal 22	// AP [Healing]
	else ifvare SHOWDAMAGETYPE 5 spritepal 0	// Bio-Shield [Healing]
	
	// Always make the display face the camera's position [be it hooked to the player or not (F7 mode or security-cameras)]
	setvarvar mx CAMERAXTEMP
	setvarvar my CAMERAYTEMP
	getactor[THISACTOR].x x
	getactor[THISACTOR].y y
	subvarvar mx x
	subvarvar my y
	getangle angvar mx my
	setactor[THISACTOR].ang angvar
	
	// Actual Numbers
	// temph = 'espawnvar' reference
	ifvarg TEMP 9999999
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT10000000ID -1
		{
			setvarvar temph tempi
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT10000000ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 9999999 addvar mx 448
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT10000000ID].x x
			setactor[SHOWDAMAGEDIGIT10000000ID].y y
			setactor[SHOWDAMAGEDIGIT10000000ID].z z
			setactor[SHOWDAMAGEDIGIT10000000ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT10000000ID].ang angvar
			setactor[SHOWDAMAGEDIGIT10000000ID].pal pal
			setactor[SHOWDAMAGEDIGIT10000000ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT10000000ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT10000000ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT10000000ID].x x
			getactor[SHOWDAMAGEDIGIT10000000ID].y y
			setvarvar mx x
	
			ifvarg TEMP 9999999 addvar mx 448
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT10000000ID].x mx
			setactor[SHOWDAMAGEDIGIT10000000ID].y my
		}
	}
	ifvarg TEMP 999999
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT1000000ID -1
		{
			setvarvar temph tempg
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT1000000ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 999999 ifvarl TEMP 10000000 addvar mx 384
			else ifvarg TEMP 9999999 addvar mx 320
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT1000000ID].x x
			setactor[SHOWDAMAGEDIGIT1000000ID].y y
			setactor[SHOWDAMAGEDIGIT1000000ID].z z
			setactor[SHOWDAMAGEDIGIT1000000ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT1000000ID].ang angvar
			setactor[SHOWDAMAGEDIGIT1000000ID].pal pal
			setactor[SHOWDAMAGEDIGIT1000000ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT1000000ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT1000000ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT1000000ID].x x
			getactor[SHOWDAMAGEDIGIT1000000ID].y y
			setvarvar mx x
	
			ifvarg TEMP 999999 ifvarl TEMP 10000000 addvar mx 384
			else ifvarg TEMP 9999999 addvar mx 320
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT1000000ID].x mx
			setactor[SHOWDAMAGEDIGIT1000000ID].y my
		}
	}
	ifvarg TEMP 99999
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT100000ID -1
		{
			setvarvar temph tempf
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT100000ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 99999 ifvarl TEMP 1000000 addvar mx 320
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 addvar mx 256
			else ifvarg TEMP 9999999 addvar mx 192
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT100000ID].x x
			setactor[SHOWDAMAGEDIGIT100000ID].y y
			setactor[SHOWDAMAGEDIGIT100000ID].z z
			setactor[SHOWDAMAGEDIGIT100000ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT100000ID].ang angvar
			setactor[SHOWDAMAGEDIGIT100000ID].pal pal
			setactor[SHOWDAMAGEDIGIT100000ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT100000ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT100000ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT100000ID].x x
			getactor[SHOWDAMAGEDIGIT100000ID].y y
			setvarvar mx x
	
			ifvarg TEMP 99999 ifvarl TEMP 1000000 addvar mx 320
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 addvar mx 256
			else ifvarg TEMP 9999999 addvar mx 192
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT100000ID].x mx
			setactor[SHOWDAMAGEDIGIT100000ID].y my
		}
	}
	ifvarg TEMP 9999
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT10000ID -1
		{
			setvarvar temph tempe
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT10000ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 9999 ifvarl TEMP 100000 addvar mx 256
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 addvar mx 192
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 addvar mx 128
			else ifvarg TEMP 9999999 addvar mx 64
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT10000ID].x x
			setactor[SHOWDAMAGEDIGIT10000ID].y y
			setactor[SHOWDAMAGEDIGIT10000ID].z z
			setactor[SHOWDAMAGEDIGIT10000ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT10000ID].ang angvar
			setactor[SHOWDAMAGEDIGIT10000ID].pal pal
			setactor[SHOWDAMAGEDIGIT10000ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT10000ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT10000ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT10000ID].x x
			getactor[SHOWDAMAGEDIGIT10000ID].y y
			setvarvar mx x
	
			ifvarg TEMP 9999 ifvarl TEMP 100000 addvar mx 256
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 addvar mx 192
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 addvar mx 128
			else ifvarg TEMP 9999999 addvar mx 64
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT10000ID].x mx
			setactor[SHOWDAMAGEDIGIT10000ID].y my
		}
	}
	ifvarg TEMP 999
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT1000ID -1
		{
			setvarvar temph tempd
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT1000ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 999 ifvarl TEMP 10000 addvar mx 196
			else ifvarg TEMP 9999 ifvarl TEMP 100000 addvar mx 128
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 addvar mx 64
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 0
			else ifvarg TEMP 9999999 subvar mx 64
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT1000ID].x x
			setactor[SHOWDAMAGEDIGIT1000ID].y y
			setactor[SHOWDAMAGEDIGIT1000ID].z z
			setactor[SHOWDAMAGEDIGIT1000ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT1000ID].ang angvar
			setactor[SHOWDAMAGEDIGIT1000ID].pal pal
			setactor[SHOWDAMAGEDIGIT1000ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT1000ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT1000ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT1000ID].x x
			getactor[SHOWDAMAGEDIGIT1000ID].y y
			setvarvar mx x
	
			ifvarg TEMP 999 ifvarl TEMP 10000 addvar mx 196
			else ifvarg TEMP 9999 ifvarl TEMP 100000 addvar mx 128
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 addvar mx 64
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 0
			else ifvarg TEMP 9999999 subvar mx 64
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT1000ID].x mx
			setactor[SHOWDAMAGEDIGIT1000ID].y my
		}
	}
	ifvarg TEMP 99
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT100ID -1
		{
			setvarvar temph tempc
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT100ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 99 ifvarl TEMP 1000 addvar mx 128
			else ifvarg TEMP 999 ifvarl TEMP 10000 addvar mx 64
			else ifvarg TEMP 9999 ifvarl TEMP 100000 subvar mx 0
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 subvar mx 64
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 128
			else ifvarg TEMP 9999999 subvar mx 192
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT100ID].x x
			setactor[SHOWDAMAGEDIGIT100ID].y y
			setactor[SHOWDAMAGEDIGIT100ID].z z
			setactor[SHOWDAMAGEDIGIT100ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT100ID].ang angvar
			setactor[SHOWDAMAGEDIGIT100ID].pal pal
			setactor[SHOWDAMAGEDIGIT100ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT100ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT100ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT100ID].x x
			getactor[SHOWDAMAGEDIGIT100ID].y y
			setvarvar mx x
	
			ifvarg TEMP 99 ifvarl TEMP 1000 addvar mx 128
			else ifvarg TEMP 999 ifvarl TEMP 10000 addvar mx 64
			else ifvarg TEMP 9999 ifvarl TEMP 100000 subvar mx 0
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 subvar mx 64
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 128
			else ifvarg TEMP 9999999 subvar mx 192
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT100ID].x mx
			setactor[SHOWDAMAGEDIGIT100ID].y my
		}
	}
	ifvarg TEMP 9
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT10ID -1
		{
			setvarvar temph tempb
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT10ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP 9 ifvarl TEMP 100 addvar mx 64
			else ifvarg TEMP 99 ifvarl TEMP 1000 subvar mx 0
			else ifvarg TEMP 999 ifvarl TEMP 10000 subvar mx 64
			else ifvarg TEMP 9999 ifvarl TEMP 100000 subvar mx 128
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 subvar mx 192
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 256
			else ifvarg TEMP 9999999 subvar mx 320
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT10ID].x x
			setactor[SHOWDAMAGEDIGIT10ID].y y
			setactor[SHOWDAMAGEDIGIT10ID].z z
			setactor[SHOWDAMAGEDIGIT10ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT10ID].ang angvar
			setactor[SHOWDAMAGEDIGIT10ID].pal pal
			setactor[SHOWDAMAGEDIGIT10ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT10ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT10ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT10ID].x x
			getactor[SHOWDAMAGEDIGIT10ID].y y
			setvarvar mx x
	
			ifvarg TEMP 9 ifvarl TEMP 100 addvar mx 64
			else ifvarg TEMP 99 ifvarl TEMP 1000 subvar mx 0
			else ifvarg TEMP 999 ifvarl TEMP 10000 subvar mx 64
			else ifvarg TEMP 9999 ifvarl TEMP 100000 subvar mx 128
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 subvar mx 192
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 256
			else ifvarg TEMP 9999999 subvar mx 320
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT10ID].x mx
			setactor[SHOWDAMAGEDIGIT10ID].y my
		}
	}
	
	ifvarg TEMP -1
	{
		getactor[THISACTOR].x x
		getactor[THISACTOR].y y
		getactor[THISACTOR].z z
		getactor[THISACTOR].cstat initcstat
		getactor[THISACTOR].ang angvar
		getactor[THISACTOR].pal pal
		getactor[THISACTOR].xrepeat OBJECTXREPEAT
		getactor[THISACTOR].yrepeat OBJECTYREPEAT
		ifvare SHOWDAMAGEDIGIT1ID -1
		{
			setvarvar temph temp
			addvar temph 6303
			espawnvar temph
			setactorvar[THISACTOR].SHOWDAMAGEDIGIT1ID RETURN
			setactorvar[RETURN].SHOWDAMAGEPARENTID THISACTOR
			setactor[RETURN].x x
			setactor[RETURN].y y
			setactor[RETURN].z z
			setactor[RETURN].cstat initcstat
			setactor[RETURN].ang angvar
			setactor[RETURN].pal pal
			setactor[RETURN].xrepeat OBJECTXREPEAT
			setactor[RETURN].yrepeat OBJECTYREPEAT
			setactorvar[THISACTOR].extrasav extrasav
	
			addvar angvar 512
			getactor[RETURN].x x
			getactor[RETURN].y y
			setvarvar mx x
	
			ifvarg TEMP -1 ifvarl TEMP 10 subvar mx 0
			else ifvarg TEMP 9 ifvarl TEMP 100 subvar mx 64
			else ifvarg TEMP 99 ifvarl TEMP 1000 subvar mx 128
			else ifvarg TEMP 999 ifvarl TEMP 10000 subvar mx 192
			else ifvarg TEMP 9999 ifvarl TEMP 100000 subvar mx 256
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 subvar mx 320
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 384
			else ifvarg TEMP 9999999 subvar mx 448
	
			rotatepoint x y mx y angvar mx my
			setactor[RETURN].x mx
			setactor[RETURN].y my
		}
		else
		{
			setactor[SHOWDAMAGEDIGIT1ID].x x
			setactor[SHOWDAMAGEDIGIT1ID].y y
			setactor[SHOWDAMAGEDIGIT1ID].z z
			setactor[SHOWDAMAGEDIGIT1ID].cstat initcstat
			setactor[SHOWDAMAGEDIGIT1ID].ang angvar
			setactor[SHOWDAMAGEDIGIT1ID].pal pal
			setactor[SHOWDAMAGEDIGIT1ID].xrepeat OBJECTXREPEAT
			setactor[SHOWDAMAGEDIGIT1ID].yrepeat OBJECTYREPEAT
			setactorvar[SHOWDAMAGEDIGIT1ID].extrasav extrasav
	
			addvar angvar 512
			getactor[SHOWDAMAGEDIGIT1ID].x x
			getactor[SHOWDAMAGEDIGIT1ID].y y
			setvarvar mx x
	
			ifvarg TEMP -1 ifvarl TEMP 10 subvar mx 0
			else ifvarg TEMP 9 ifvarl TEMP 100 subvar mx 64
			else ifvarg TEMP 99 ifvarl TEMP 1000 subvar mx 128
			else ifvarg TEMP 999 ifvarl TEMP 10000 subvar mx 192
			else ifvarg TEMP 9999 ifvarl TEMP 100000 subvar mx 256
			else ifvarg TEMP 99999 ifvarl TEMP 1000000 subvar mx 320
			else ifvarg TEMP 999999 ifvarl TEMP 10000000 subvar mx 384
			else ifvarg TEMP 9999999 subvar mx 448
	
			rotatepoint x y mx y angvar mx my
			setactor[SHOWDAMAGEDIGIT1ID].x mx
			setactor[SHOWDAMAGEDIGIT1ID].y my
		}
	}
	
	ifvare mainmenu 0
	{
		ifvare TEMP4 0 ifmove 0 move NUMBERUPSTATIC geth
		else ifvare TEMP4 1 ifmove 0 move NUMBERDOWNSTATIC geth
		else ifvare TEMP4 2 ifmove 0 move NUMBERUP geth
		else ifvare TEMP4 3 ifmove 0 move NUMBERDOWN geth
	}
	else
	{
		ifmove 0 nullop else move 0
	}
	
	ifvare mtype 26 cstator 2 // ifcount 26 cstator 2
	ifvare mtype 34 cstator 512 //ifcount 34 cstator 512
	ifvarg mtype 41 // ifcount 42
	{
		ifvarn SHOWDAMAGEDIGIT1ID -1 setactorvar[SHOWDAMAGEDIGIT1ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT10ID -1 setactorvar[SHOWDAMAGEDIGIT10ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT100ID -1 setactorvar[SHOWDAMAGEDIGIT100ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT1000ID -1 setactorvar[SHOWDAMAGEDIGIT1000ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT10000ID -1 setactorvar[SHOWDAMAGEDIGIT10000ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT100000ID -1 setactorvar[SHOWDAMAGEDIGIT100000ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT1000000ID -1 setactorvar[SHOWDAMAGEDIGIT1000000ID].SHOWDAMAGEPARENTID -1
		ifvarn SHOWDAMAGEDIGIT10000000ID -1 setactorvar[SHOWDAMAGEDIGIT10000000ID].SHOWDAMAGEPARENTID -1
		killit
	}
	// sizeat 32 32
	
	ifvare mainmenu 0 addvar TEMP6 1
	ifvarg TEMP6 31 setvar TEMP6 0
	ifvare TEMP6 0 setvar TEMP5 0
	ifvare TEMP6 1 setvar TEMP5 0
	ifvare TEMP6 2 setvar TEMP5 1
	ifvare TEMP6 3 setvar TEMP5 1
	ifvare TEMP6 4 setvar TEMP5 2
	ifvare TEMP6 5 setvar TEMP5 2
	ifvare TEMP6 6 setvar TEMP5 3
	ifvare TEMP6 7 setvar TEMP5 3
	ifvare TEMP6 8 setvar TEMP5 4
	ifvare TEMP6 9 setvar TEMP5 4
	ifvare TEMP6 10 setvar TEMP5 3
	ifvare TEMP6 11 setvar TEMP5 3
	ifvare TEMP6 12 setvar TEMP5 2
	ifvare TEMP6 13 setvar TEMP5 2
	ifvare TEMP6 14 setvar TEMP5 1
	ifvare TEMP6 15 setvar TEMP5 1
	ifvare TEMP6 16 setvar TEMP5 0
	ifvare TEMP6 17 setvar TEMP5 0
	ifvare TEMP6 18 setvar TEMP5 -1
	ifvare TEMP6 19 setvar TEMP5 -1
	ifvare TEMP6 20 setvar TEMP5 -2
	ifvare TEMP6 21 setvar TEMP5 -2
	ifvare TEMP6 22 setvar TEMP5 -3
	ifvare TEMP6 23 setvar TEMP5 -3
	ifvare TEMP6 24 setvar TEMP5 -4
	ifvare TEMP6 25 setvar TEMP5 -4
	ifvare TEMP6 26 setvar TEMP5 -3
	ifvare TEMP6 27 setvar TEMP5 -3
	ifvare TEMP6 28 setvar TEMP5 -2
	ifvare TEMP6 29 setvar TEMP5 -2
	ifvare TEMP6 30 setvar TEMP5 -1
	ifvare TEMP6 31 setvar TEMP5 -1
	addvar TEMP5 32
	
	setactor[THISACTOR].xrepeat TEMP5
	setactor[THISACTOR].yrepeat TEMP5
	break
enda // NR-Number font "Centerpoint"

//************************************************
//*Weather System Actors [imported from DukePlus]*
//************************************************
eventloadactor WATERDRIP 
	ifvare freezestart 0
	{
		getactor[THISACTOR].yvel freezestart 
		setactor[THISACTOR].yvel -1
	}
	
	getactor[THISACTOR].extra ACTORFLAGS 
	setactor[THISACTOR].extra -1
	ifvarn ACTORFLAGS 0 ifvarn ACTORFLAGS -1
	{
		setvarvar rainstart ACTORFLAGS
		getactor[THISACTOR].cstat raincstat
		getactor[THISACTOR].pal rainpal
		getactor[THISACTOR].xvel rainradius
		ifvarl rainradius 0 mulvar rainradius -1
		shiftvarl rainradius 1
		ifvare rainradius 0 setvar rainradius 12288
		ifvarl rainradius 2048 setvar rainradius 2048
		getactor[THISACTOR].zvel snowceiling
		ifvarl snowceiling 0 mulvar snowceiling -1
		shiftvarl snowceiling 4
		ifvare snowceiling 0 setvar snowceiling 65536
		ifvarl snowceiling 16384 setvar snowceiling 16384
		killit
	} 
enda

action RAINFRAME 0 1 1 1 1
action SNOWFRAME -2 1 1 1 1

state rainsnowhitslava
	getsector[THISACTOR].floorpicnum tempe
	ifvare tempe NEWFLOORPLASMA
	{
		ifrnd 85 sound LANDLAVA_LIGHT
		else ifrnd 128 sound LANDLAVA
		else sound LANDLAVA_HEAVY
	
		espawn SMALLSMOKE
		setactor[RETURN].xrepeat 8
		setactor[RETURN].yrepeat 8
		ifrnd 128 setactor[RETURN].cstat 2
		else setactor[RETURN].cstat 514
	
		getactor[THISACTOR].sectnum TEMPVAR3
		getactorvar[TEMPVAR3].FLOORMAXHEALTH TEMPVAR2
		ifvarg TEMPVAR2 0
		{
			randvar TEMPVAR5 5
			ifaction SNOWFRAME
			{
				mulvar TEMPVAR5 7 divvar TEMPVAR5 4
				ifvarl raining -19 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -39 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -59 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -79 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -99 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -119 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -139 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -159 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -179 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -199 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -219 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -239 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -259 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -279 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -299 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -319 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -339 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -359 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -379 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -399 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -419 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -439 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -459 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -479 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -499 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
			}
			ifvarl TEMPVAR5 1 setvar TEMPVAR5 1 
			getactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
			ifvare mainmenu 0 subvarvar TEMPVAR4 TEMPVAR5
			ifaction RAINFRAME { ifvarl TEMPVAR4 0 setvar TEMPVAR4 1 }
			else
			{
				ifvarl TEMPVAR4 1
				{
					setvar TEMPVAR4 0
					ifvarg TEMPVAR3 -1 ifvarl TEMPVAR3 4096
					{
						getactorvar[TEMPVAR3].FLOORTEMPFREEZENUMBERB tempe
						setsector[TEMPVAR3].floorpicnum tempe
						getactorvar[TEMPVAR3].FLOORTEMPLOTAGB tempe
						setsector[TEMPVAR3].lotag tempe
						sound SOMETHINGFROZE
						setactorvar[TEMPVAR3].FLOORFREEZETIME 138
						setactorvar[TEMPVAR3].FLOORTEMPFREEZESTATE 1
					}
				}
			}        
			setactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
		}
	
		setvar tempg 1
	}
	ifvare tempe HOTLAVA
	{
		ifrnd 85 sound LANDLAVA_LIGHT
		else ifrnd 128 sound LANDLAVA
		else sound LANDLAVA_HEAVY
	
		espawn SMALLSMOKE
		setactor[RETURN].xrepeat 10
		setactor[RETURN].yrepeat 10
		ifrnd 128 setactor[RETURN].cstat 2
		else setactor[RETURN].cstat 514
	
		getactor[THISACTOR].sectnum TEMPVAR3
		getactorvar[TEMPVAR3].FLOORMAXHEALTH TEMPVAR2
		ifvarg TEMPVAR2 0
		{
			randvar TEMPVAR5 5
			ifaction SNOWFRAME
			{
				mulvar TEMPVAR5 7 divvar TEMPVAR5 4
				ifvarl raining -19 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -39 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -59 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -79 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -99 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -119 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -139 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -159 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -179 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -199 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -219 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -239 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -259 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -279 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -299 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -319 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -339 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -359 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -379 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -399 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -419 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -439 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -459 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -479 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -499 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
			}
			divvar TEMPVAR5 2
			ifvarl TEMPVAR5 1 { ifrnd 128 setvar TEMPVAR5 1 }
			getactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
			ifvare mainmenu 0 subvarvar TEMPVAR4 TEMPVAR5
			ifaction RAINFRAME { ifvarl TEMPVAR4 0 setvar TEMPVAR4 1 }
			else
			{
				ifvarl TEMPVAR4 1
				{
					setvar TEMPVAR4 0
					ifvarg TEMPVAR3 -1 ifvarl TEMPVAR3 4096
					{
						getactorvar[TEMPVAR3].FLOORTEMPFREEZENUMBERB tempe
						setsector[TEMPVAR3].floorpicnum tempe
						getactorvar[TEMPVAR3].FLOORTEMPLOTAGB tempe
						setsector[TEMPVAR3].lotag tempe
						sound SOMETHINGFROZE
						setactorvar[TEMPVAR3].FLOORFREEZETIME 138
						setactorvar[TEMPVAR3].FLOORTEMPFREEZESTATE 1
					}
				}
			}        
			setactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
		}
	
		setvar tempg 1
	}
	ifvare tempe MEGALAVA
	{
		ifrnd 85 sound LANDLAVA_LIGHT
		else ifrnd 128 sound LANDLAVA
		else sound LANDLAVA_HEAVY
	
		espawn SMALLSMOKE
		setactor[RETURN].xrepeat 12
		setactor[RETURN].yrepeat 12
		ifrnd 128 setactor[RETURN].cstat 2
		else setactor[RETURN].cstat 514
	
		getactor[THISACTOR].sectnum TEMPVAR3
		getactorvar[TEMPVAR3].FLOORMAXHEALTH TEMPVAR2
		ifvarg TEMPVAR2 0
		{
			randvar TEMPVAR5 5
			ifaction SNOWFRAME
			{
				mulvar TEMPVAR5 7 divvar TEMPVAR5 4
				ifvarl raining -19 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -39 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -59 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -79 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -99 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -119 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -139 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -159 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -179 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -199 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -219 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -239 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -259 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -279 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -299 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -319 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -339 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -359 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -379 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -399 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -419 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -439 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -459 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -479 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -499 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
			}
			divvar TEMPVAR5 4
			ifvarl TEMPVAR5 1 { ifrnd 64 setvar TEMPVAR5 1 }
			getactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
			ifvare mainmenu 0 subvarvar TEMPVAR4 TEMPVAR5
			ifaction RAINFRAME { ifvarl TEMPVAR4 0 setvar TEMPVAR4 1 }
			else
			{
				ifvarl TEMPVAR4 1
				{
					setvar TEMPVAR4 0
					ifvarg TEMPVAR3 -1 ifvarl TEMPVAR3 4096
					{
						getactorvar[TEMPVAR3].FLOORTEMPFREEZENUMBERB tempe
						setsector[TEMPVAR3].floorpicnum tempe
						getactorvar[TEMPVAR3].FLOORTEMPLOTAGB tempe
						setsector[TEMPVAR3].lotag tempe
						sound SOMETHINGFROZE
						setactorvar[TEMPVAR3].FLOORFREEZETIME 138
						setactorvar[TEMPVAR3].FLOORTEMPFREEZESTATE 1
					}
				}
			}        
			setactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
		}
	
		setvar tempg 1
	}
	ifvare tempe ULTRALAVA
	{
		ifrnd 85 sound LANDLAVA_LIGHT
		else ifrnd 128 sound LANDLAVA
		else sound LANDLAVA_HEAVY
	
		espawn SMALLSMOKE
		setactor[RETURN].xrepeat 14
		setactor[RETURN].yrepeat 14
		ifrnd 128 setactor[RETURN].cstat 2
		else setactor[RETURN].cstat 514
	
		getactor[THISACTOR].sectnum TEMPVAR3
		getactorvar[TEMPVAR3].FLOORMAXHEALTH TEMPVAR2
		ifvarg TEMPVAR2 0
		{
			randvar TEMPVAR5 5
			ifaction SNOWFRAME
			{
				mulvar TEMPVAR5 7 divvar TEMPVAR5 4
				ifvarl raining -19 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -39 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -59 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -79 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -99 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -119 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -139 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -159 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -179 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -199 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -219 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -239 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -259 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -279 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -299 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -319 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -339 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -359 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -379 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -399 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -419 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -439 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -459 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -479 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -499 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
			}
			divvar TEMPVAR5 8
			ifvarl TEMPVAR5 1 { ifrnd 32 setvar TEMPVAR5 1 }
			getactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
			ifvare mainmenu 0 subvarvar TEMPVAR4 TEMPVAR5
			ifaction RAINFRAME { ifvarl TEMPVAR4 0 setvar TEMPVAR4 1 }
			else
			{
				ifvarl TEMPVAR4 1
				{
					setvar TEMPVAR4 0
					ifvarg TEMPVAR3 -1 ifvarl TEMPVAR3 4096
					{
						getactorvar[TEMPVAR3].FLOORTEMPFREEZENUMBERB tempe
						setsector[TEMPVAR3].floorpicnum tempe
						getactorvar[TEMPVAR3].FLOORTEMPLOTAGB tempe
						setsector[TEMPVAR3].lotag tempe
						sound SOMETHINGFROZE
						setactorvar[TEMPVAR3].FLOORFREEZETIME 138
						setactorvar[TEMPVAR3].FLOORTEMPFREEZESTATE 1
					}
				}
			}        
			setactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
		}
	
		setvar tempg 1
	}
	ifvare tempe HYPERMAGMA
	{
		ifrnd 85 sound LANDLAVA_LIGHT
		else ifrnd 128 sound LANDLAVA
		else sound LANDLAVA_HEAVY
	
		espawn SMALLSMOKE
		setactor[RETURN].xrepeat 16
		setactor[RETURN].yrepeat 16
		ifrnd 128 setactor[RETURN].cstat 2
		else setactor[RETURN].cstat 514
	
		getactor[THISACTOR].sectnum TEMPVAR3
		getactorvar[TEMPVAR3].FLOORMAXHEALTH TEMPVAR2
		ifvarg TEMPVAR2 0
		{
			randvar TEMPVAR5 5
			ifaction SNOWFRAME
			{
				mulvar TEMPVAR5 7 divvar TEMPVAR5 4
				ifvarl raining -19 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -39 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -59 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -79 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -99 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -119 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -139 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -159 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -179 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -199 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -219 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -239 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -259 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -279 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -299 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -319 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -339 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -359 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -379 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -399 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -419 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -439 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -459 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -479 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
				ifvarl raining -499 { mulvar TEMPVAR5 3 divvar TEMPVAR5 2 }
			}
			divvar TEMPVAR5 16
			ifvarl TEMPVAR5 1 { ifrnd 16 setvar TEMPVAR5 1 }
			getactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
			ifvare mainmenu 0 subvarvar TEMPVAR4 TEMPVAR5
			ifaction RAINFRAME { ifvarl TEMPVAR4 0 setvar TEMPVAR4 1 }
			else
			{
				ifvarl TEMPVAR4 1
				{
					setvar TEMPVAR4 0
					ifvarg TEMPVAR3 -1 ifvarl TEMPVAR3 4096
					{
						getactorvar[TEMPVAR3].FLOORTEMPFREEZENUMBERB tempe
						setsector[TEMPVAR3].floorpicnum tempe
						getactorvar[TEMPVAR3].FLOORTEMPLOTAGB tempe
						setsector[TEMPVAR3].lotag tempe
						sound SOMETHINGFROZE
						setactorvar[TEMPVAR3].FLOORFREEZETIME 138
						setactorvar[TEMPVAR3].FLOORTEMPFREEZESTATE 1
					}
				}
			}        
			setactorvar[TEMPVAR3].FLOORHEALTH TEMPVAR4
		}
	
		setvar tempg 1
	}
ends

action RAINSPLASH -3789 9 1 1 3 // 6169 - 3789 = 2380

move SNOWFALL 16 16
move SNOWFALL2 16 20

spritenopal RAINSPRITE
spriteflags RAINSPRITE 2064
useractor notenemy RAINSPRITE 0
	ifvare mainmenu 0 ifvarg raining 0 fall
	
	ifvare WATER? 2 killit
	ifinwater killit
	ifaction 0
	{
		setactor[THISACTOR].mdflags 1
		ifoutside nullop else killit
		ifinspace killit
		ifvarg raining 0 // Actual Rain
		{
			action RAINFRAME
			sizeat 8 15
			ifvare mainmenu 0 setactor[THISACTOR].zvel 2048
		}
		else // Snow Flakes
		{
			getactor[THISACTOR].z z
			action SNOWFRAME
			ifvare mainmenu 0
			{
				ifrnd 128 move SNOWFALL geth getv randomangle
				else move SNOWFALL2 geth getv randomangle
				ifrnd 128 cstator 4
				ifrnd 128 cstator 8
				randvar x 3 addvar x 3
				randvar y 3 addvar y 3
				setactor[THISACTOR].xrepeat x
				setactor[THISACTOR].yrepeat y
			}
			else move 0
		}
		setactor[THISACTOR].pal rainpal
		ifvarand raincstat 512 cstator 514 else
		ifvarand raincstat 2 cstator 2
	}
	
	ifaction RAINFRAME
	{
		ifvarl raining 0 killit
		sizeto 8 42
		iffloordistl 2
		{
			ifrnd 240 state rainsnowhitslava
			ifvare tempg 1 killit else action RAINSPLASH
		}
		else
		ifnotmoving action RAINSPLASH
	}
	else
	ifaction RAINSPLASH 
	{
		sizeat 16 16
		ifactioncount 9 killit
	}
	else
	{
		ifvarg raining 0 killit
		ifvare mainmenu 0 fall
		ifnotmoving killit
		iffloordistl 4
		{
			ifrnd 224 state rainsnowhitslava
			killit
		}
		ifvarvarg sprite[THISACTOR].z player[THISACTOR].posz
		ifpdistg 16384 killit
	}
enda

useractor notenemy CAMERAVIEW 100
	ifaction 0
	sizeat 32 32
	cstator 257
	clipdist 32
	action 0
	ifpdistl 3000
	{
		ifcansee setvar nill 1
		getactor[THISACTOR].x CAMERASPRITEX
		getactor[THISACTOR].y CAMERASPRITEY
		getactor[THISACTOR].z CAMERASPRITEZ
		getactor[THISACTOR].ang CAMERASPRITEA
		getactor[THISACTOR].shade CAMERASPRITESHADE
		setplayer[THISACTOR].over_shoulder_on 1
		setplayer[THISACTOR].horiz 100
	}
enda

eventloadactor MYSTERYBOX
	getactor[THISACTOR].extra extrasav
	setactor[THISACTOR].extra -1
	ifvarl extrasav 1
	{
		randvar extrasav 9 addvar extrasav 1
	}
	setvar lotagsav 0
enda

useractor notenemy MYSTERYBOX 2000
	state checkoldskool_items
	state itemfullbright
	setvar ACTORSHEIGHT 234 setvar ACTORSWIDTH 255
	ifvare SKILLSET? 0
	{
		cstator 1281
		ifvarl extrasav 1
		{
			randvar extrasav 9 addvar extrasav 1
		}
		setvar lotagsav 0
		ifvarl extrasav 13 sizeat 6 6
		else ifvarg extrasav 12 ifvarg extrasav 25 sizeat 7 7
		else ifvarg extrasav 24 ifvarg extrasav 37 sizeat 8 8
		else ifvarg extrasav 36 ifvarg extrasav 49 sizeat 9 9
		else ifvarg extrasav 48 sizeat 10 10
		setvar SKILLSET? 1
	}
	ifhitweapon
	{
		whilevarvarn lotagsav extrasav
		{
			state drop_randomized_item
			addvar lotagsav 1
		}
		sound VENT_BUST
		sound GLASS_BREAKING
		sound GLASS_HEAVYBREAK
		ifrnd 64 state randomshrapnel
		ifrnd 64 state randomshrapnel
		ifrnd 64 state randomshrapnel
		ifrnd 64 state randomshrapnel
		ifrnd 128 state randomshrapnel
		ifrnd 128 state randomshrapnel
		ifrnd 128 state randomshrapnel
		ifrnd 128 state randomshrapnel
		state randomshrapnel
		state randomshrapnel
		state randomshrapnel
		state randomshrapnel
		killit
	}
enda

//*********
//*SCRIPTS*
//*********

state script_example_on
	ifvare SWITCHSCRIPTID 1 // NRSCRIPT.MAP - Starts the Rotating Gear
	{
		setvar TEMPVAR 2
		setsector[TEMPVAR].lotag 3
	
		setvar TEMPVAR 24
		setactor[TEMPVAR].x 28032
		setactor[TEMPVAR].y 33536
		setactor[TEMPVAR].z 8192
		changespritesect TEMPVAR 1
	
		setvar TEMPVAR 3
		setactor[TEMPVAR].x 28032
		setactor[TEMPVAR].y 33088
		setactor[TEMPVAR].z 8192
		changespritesect TEMPVAR 1
	
		setvar TEMPVAR 4
		setactor[TEMPVAR].x 28032
		setactor[TEMPVAR].y 33088
		setactor[TEMPVAR].z 8192
		changespritesect TEMPVAR 1
	}
ends

state script_example_off
	ifvare SWITCHSCRIPTID 1 // NRSCRIPT.MAP - Stops the Rotating Gear
	{
		setvar TEMPVAR 2
		setsector[TEMPVAR].lotag 0
	
		setvar TEMPVAR 24
		setactor[TEMPVAR].x 23744
		setactor[TEMPVAR].y 33504
		setactor[TEMPVAR].z 14336
		changespritesect TEMPVAR 3
	
		setvar TEMPVAR 3
		setactor[TEMPVAR].x 23744
		setactor[TEMPVAR].y 33504
		setactor[TEMPVAR].z 14336
		changespritesect TEMPVAR 3
	
		setvar TEMPVAR 4
		setactor[TEMPVAR].x 23744
		setactor[TEMPVAR].y 33504
		setactor[TEMPVAR].z 14336
		changespritesect TEMPVAR 3
	}
ends

define SCRIPTSWITCH 7445

action SCRIPTSWITCHOFF
action SCRIPTSWITCHON 1

eventloadactor SCRIPTSWITCH
	getactor[THISACTOR].lotag SWITCHSCRIPTID // The Lotag is the number of the script to play when the switch is flipped
	setactor[THISACTOR].lotag 0
	getactor[THISACTOR].hitag hitagsav // The Lotag is the number of the script to play when the switch is flipped
	setactor[THISACTOR].hitag 0
	ifvare hitagsav 0 setvar hitagsav 76
enda

useractor notenemy SCRIPTSWITCH 0
	ifvare SKILLSET? 0
	{
		action SCRIPTSWITCHOFF
		setvar SKILLSET? 1
	}
	state useswitchcheckwall
	setvar OBJECTWIDTH 32
	setvar OBJECTHEIGHT 32
	state getspritecenterz
	setvarvar KEYSCANNERZUP OBJECTCENTERZ
	subvarvar KEYSCANNERZUP OBJECTDIFF2
	setvarvar KEYSCANNERZDOWN OBJECTCENTERZ
	addvarvar KEYSCANNERZDOWN OBJECTDIFF2
	
	ifpdistl 1024
	{
		ifvare TEMP2 1
		{
			ifp pfacing
			{
				ifhitspace
				{
					ifcansee 
					{
						getactor[PLAYERID].z temp
						subvar temp 6144
						ifvarvarg temp KEYSCANNERZUP
						ifvarvarl temp KEYSCANNERZDOWN
						state stopsearchsounds
						ifvare com_pause 0
						{ 
							ifaction SCRIPTSWITCHOFF
							{
								soundvar hitagsav
								state script_example_on
								action SCRIPTSWITCHON
							}
							else
							ifaction SCRIPTSWITCHON
							{
								soundvar hitagsav
								state script_example_off
								action SCRIPTSWITCHOFF
							}
							setvar com_pause 10
						}
					}
				}
			}
		}
	}
enda
